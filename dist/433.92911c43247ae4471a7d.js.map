{"version":3,"file":"433.92911c43247ae4471a7d.js","mappings":"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","sources":["webpack://package.json/./src/components/auth/auth.component.jsx","webpack://package.json/./src/components/auth/auth.style.scss"],"sourcesContent":["import React from 'react';\r\n\r\nimport Avatar from '@mui/material/Avatar';\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nconst queryString = require('query-string');\r\n\r\nclass Auth_ extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n        \r\n    this.state = {\r\n      module: 'auth',\r\n      module_name: '',\r\n      is_load: false,\r\n      \r\n      modalDialog: false,\r\n      dialogTitle: '',\r\n      dialogText: ''\r\n    };\r\n  }\r\n  \r\n  async componentDidMount(){\r\n      \r\n  }\r\n  \r\n  getData = (method, data = {}) => {\r\n    \r\n    this.setState({\r\n      is_load: true\r\n    })\r\n    \r\n    return fetch('https://jacochef.ru/api/index_new.php', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type':'application/x-www-form-urlencoded'},\r\n      body: queryString.stringify({\r\n        method: method, \r\n        module: this.state.module,\r\n        version: 2,\r\n        login: '+79879340391',\r\n        //login: localStorage.getItem('login'),\r\n        data: JSON.stringify( data )\r\n      })\r\n    }).then(res => res.json()).then(json => {\r\n      \r\n      if( json.st === false && json.type == 'redir' ){\r\n        window.location.pathname = '/';\r\n        return;\r\n      }\r\n      \r\n      if( json.st === false && json.type == 'auth' ){\r\n        window.location.pathname = '/auth';\r\n        return;\r\n      }\r\n      \r\n      setTimeout( () => {\r\n        this.setState({\r\n          is_load: false\r\n        })\r\n      }, 300 )\r\n      \r\n      return json;\r\n    })\r\n    .catch(err => { \r\n      console.log( err )\r\n    });\r\n  }\r\n   \r\n  async updateData(){\r\n    let data = {\r\n      point_id: this.state.point,\r\n      showReady: this.state.showReady === true ? 1 : 0\r\n    };\r\n    \r\n    let res = await this.getData('get_orders', data);\r\n    \r\n    this.setState({\r\n      read: res.read,\r\n      onstol: res.onstol,\r\n      ordersQueue: res.prestol_new\r\n    })\r\n  }\r\n  \r\n  async auth(){\r\n    let data = {\r\n      login: document.getElementById('phone').value,\r\n      pwd: document.getElementById('password').value\r\n    };\r\n    \r\n    let res = await this.getData('auth', data);\r\n    \r\n    console.log( res )\r\n    \r\n    if( res.st === false ){\r\n      setTimeout( () => {\r\n        this.setState({ \r\n          modalDialog: true,\r\n          dialogTitle: 'Предупреждение',\r\n          dialogText: res.text\r\n        })\r\n      }, 500 )\r\n    }else{\r\n      localStorage.setItem('token', res.token)\r\n      \r\n      setTimeout( () => {\r\n        window.location.pathname = '/'\r\n      }, 300)\r\n    }\r\n  }\r\n  \r\n  render(){\r\n    return (\r\n      <>\r\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        \r\n        <Dialog\r\n          open={this.state.modalDialog}\r\n          onClose={ () => { this.setState({ modalDialog: false }) } }\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">{this.state.dialogTitle}</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">{this.state.dialogText}</DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={ () => { this.setState({ modalDialog: false }) } } color=\"primary\" autoFocus>Хорошо</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        \r\n        <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\r\n          <Grid item xs={12} sm={6} md={6} lg={4} xl={3}>\r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', }}>\r\n              <Avatar style={{ borderRadius: 0, width: '100%', height: 150, margin: 0, backgroundColor: '#fff' }}>\r\n                <img alt=\"Жако доставка роллов и пиццы\" src=\"../assets/img_other/Favikon.png\" style={{ height: '100%' }} />\r\n              </Avatar>\r\n              <form style={{ width: '100%' }} noValidate>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  size=\"small\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"phone\"\r\n                  label=\"Номер телефона\"\r\n                  name=\"phone\"\r\n                  autoComplete=\"phone\"\r\n                  autoFocus\r\n                />\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  size=\"small\"\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"Пароль\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                />\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  style={{ marginTop: 10, marginBottom: 10 }}\r\n                  onClick={ this.auth.bind(this) }\r\n                >\r\n                  Войти\r\n                </Button>\r\n                <Grid container>\r\n                  <Grid item xs>\r\n                    <a href=\"/registration\" style={{ color: '#c03' }}>Восстановить пароль</a>\r\n                  </Grid>\r\n                </Grid>\r\n              </form>\r\n            </div>\r\n          </Grid>\r\n        </Grid>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport function Auth() {\r\n  return (\r\n    <Auth_ />\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1657603818684\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","Auth_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","modalDialog","dialogTitle","dialogText","point_id","this","point","showReady","getData","read","onstol","ordersQueue","prestol_new","document","getElementById","value","pwd","text","localStorage","setItem","token","Backdrop","style","zIndex","open","CircularProgress","color","Dialog","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","autoFocus","Grid","container","spacing","direction","justifyContent","alignItems","item","xs","sm","md","lg","xl","display","flexDirection","Avatar","borderRadius","width","height","margin","backgroundColor","alt","src","noValidate","TextField","variant","size","required","fullWidth","label","name","autoComplete","marginTop","marginBottom","auth","bind","href","React","Auth","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}