{"version":3,"file":"433.92911c43247ae4471a7d.js","mappings":"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","sources":["webpack://package.json/./src/components/auth/auth.component.jsx","webpack://package.json/./src/components/auth/auth.style.scss"],"sourcesContent":["import React from 'react';\n\nimport Avatar from '@mui/material/Avatar';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\n\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst queryString = require('query-string');\n\nclass Auth_ extends React.Component {\n  constructor(props) {\n    super(props);\n        \n    this.state = {\n      module: 'auth',\n      module_name: '',\n      is_load: false,\n      \n      modalDialog: false,\n      dialogTitle: '',\n      dialogText: ''\n    };\n  }\n  \n  async componentDidMount(){\n      \n  }\n  \n  getData = (method, data = {}) => {\n    \n    this.setState({\n      is_load: true\n    })\n    \n    return fetch('https://jacochef.ru/api/index_new.php', {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify({\n        method: method, \n        module: this.state.module,\n        version: 2,\n        login: '+79879340391',\n        //login: localStorage.getItem('login'),\n        data: JSON.stringify( data )\n      })\n    }).then(res => res.json()).then(json => {\n      \n      if( json.st === false && json.type == 'redir' ){\n        window.location.pathname = '/';\n        return;\n      }\n      \n      if( json.st === false && json.type == 'auth' ){\n        window.location.pathname = '/auth';\n        return;\n      }\n      \n      setTimeout( () => {\n        this.setState({\n          is_load: false\n        })\n      }, 300 )\n      \n      return json;\n    })\n    .catch(err => { \n      console.log( err )\n    });\n  }\n   \n  async updateData(){\n    let data = {\n      point_id: this.state.point,\n      showReady: this.state.showReady === true ? 1 : 0\n    };\n    \n    let res = await this.getData('get_orders', data);\n    \n    this.setState({\n      read: res.read,\n      onstol: res.onstol,\n      ordersQueue: res.prestol_new\n    })\n  }\n  \n  async auth(){\n    let data = {\n      login: document.getElementById('phone').value,\n      pwd: document.getElementById('password').value\n    };\n    \n    let res = await this.getData('auth', data);\n    \n    console.log( res )\n    \n    if( res.st === false ){\n      setTimeout( () => {\n        this.setState({ \n          modalDialog: true,\n          dialogTitle: 'Предупреждение',\n          dialogText: res.text\n        })\n      }, 500 )\n    }else{\n      localStorage.setItem('token', res.token)\n      \n      setTimeout( () => {\n        window.location.pathname = '/'\n      }, 300)\n    }\n  }\n  \n  render(){\n    return (\n      <>\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        \n        <Dialog\n          open={this.state.modalDialog}\n          onClose={ () => { this.setState({ modalDialog: false }) } }\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">{this.state.dialogTitle}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">{this.state.dialogText}</DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={ () => { this.setState({ modalDialog: false }) } } color=\"primary\" autoFocus>Хорошо</Button>\n          </DialogActions>\n        </Dialog>\n        \n        <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\n          <Grid item xs={12} sm={6} md={6} lg={4} xl={3}>\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', }}>\n              <Avatar style={{ borderRadius: 0, width: '100%', height: 150, margin: 0, backgroundColor: '#fff' }}>\n                <img alt=\"Жако доставка роллов и пиццы\" src=\"../assets/img_other/Favikon.png\" style={{ height: '100%' }} />\n              </Avatar>\n              <form style={{ width: '100%' }} noValidate>\n                <TextField\n                  variant=\"outlined\"\n                  margin=\"normal\"\n                  size=\"small\"\n                  required\n                  fullWidth\n                  id=\"phone\"\n                  label=\"Номер телефона\"\n                  name=\"phone\"\n                  autoComplete=\"phone\"\n                  autoFocus\n                />\n                <TextField\n                  variant=\"outlined\"\n                  margin=\"normal\"\n                  size=\"small\"\n                  required\n                  fullWidth\n                  name=\"password\"\n                  label=\"Пароль\"\n                  type=\"password\"\n                  id=\"password\"\n                  autoComplete=\"current-password\"\n                />\n                <Button\n                  fullWidth\n                  variant=\"contained\"\n                  color=\"primary\"\n                  style={{ marginTop: 10, marginBottom: 10 }}\n                  onClick={ this.auth.bind(this) }\n                >\n                  Войти\n                </Button>\n                <Grid container>\n                  <Grid item xs>\n                    <a href=\"/registration\" style={{ color: '#c03' }}>Восстановить пароль</a>\n                  </Grid>\n                </Grid>\n              </form>\n            </div>\n          </Grid>\n        </Grid>\n      </>\n    )\n  }\n}\n\nexport function Auth() {\n  return (\n    <Auth_ />\n  );\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1657608354725\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","Auth_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","modalDialog","dialogTitle","dialogText","point_id","this","point","showReady","getData","read","onstol","ordersQueue","prestol_new","document","getElementById","value","pwd","text","localStorage","setItem","token","Backdrop","style","zIndex","open","CircularProgress","color","Dialog","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","autoFocus","Grid","container","spacing","direction","justifyContent","alignItems","item","xs","sm","md","lg","xl","display","flexDirection","Avatar","borderRadius","width","height","margin","backgroundColor","alt","src","noValidate","TextField","variant","size","required","fullWidth","label","name","autoComplete","marginTop","marginBottom","auth","bind","href","React","Auth","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}