{"version":3,"file":"710.dc19a00d9e9cac6e558b.js","mappings":"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","sources":["webpack://package.json/./src/components/cat_work/cat_work.component.jsx","webpack://package.json/./src/components/cat_work/cat_work.style.scss"],"sourcesContent":["import React from 'react';\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport List from '@mui/material/List';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemText from '@mui/material/ListItemText';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nimport { MyTextInput, TextEditor } from '../../stores/elements';\r\n\r\nconst queryString = require('query-string');\r\n\r\nclass CatWork_ extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n        \r\n    this.state = {\r\n      module: 'cat_work',\r\n      module_name: '',\r\n      is_load: false,\r\n      \r\n      cats: [],\r\n      modalDialog: false,\r\n      modalDialogNew: false,\r\n\r\n      nameCat: '',\r\n      editText: '',\r\n\r\n      nameCatNew: '',\r\n      editTextNew: '',\r\n\r\n      config: {\r\n        readonly: false // all options from https://xdsoft.net/jodit/doc/\r\n      },\r\n\r\n      showCat: null\r\n    };\r\n  }\r\n  \r\n  async componentDidMount(){\r\n    let data = await this.getData('get_all');\r\n    \r\n    this.setState({\r\n      module_name: data.module_info.name,\r\n      cats: data.cats\r\n    })\r\n    \r\n    document.title = data.module_info.name;\r\n  }\r\n  \r\n  getData = (method, data = {}) => {\r\n    \r\n    this.setState({\r\n      is_load: true\r\n    })\r\n    \r\n    return fetch('https://jacochef.ru/api/index_new.php', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type':'application/x-www-form-urlencoded'},\r\n      body: queryString.stringify({\r\n        method: method, \r\n        module: this.state.module,\r\n        version: 2,\r\n        login: localStorage.getItem('token'),\r\n        data: JSON.stringify( data )\r\n      })\r\n    }).then(res => res.json()).then(json => {\r\n      \r\n      if( json.st === false && json.type == 'redir' ){\r\n        window.location.pathname = '/';\r\n        return;\r\n      }\r\n      \r\n      if( json.st === false && json.type == 'auth' ){\r\n        window.location.pathname = '/auth';\r\n        return;\r\n      }\r\n      \r\n      setTimeout( () => {\r\n        this.setState({\r\n          is_load: false\r\n        })\r\n      }, 300 )\r\n      \r\n      return json;\r\n    })\r\n    .catch(err => { \r\n      console.log( err )\r\n      this.setState({\r\n        is_load: false\r\n      })\r\n    });\r\n  }\r\n   \r\n  openCat(item){\r\n    this.setState({\r\n      modalDialog: true,\r\n      showCat: item,\r\n      nameCat: item.name,\r\n      editText: item.text\r\n    })\r\n  }\r\n\r\n  async save(){\r\n    let data = {\r\n      cat_id: this.state.showCat.id,\r\n      name: this.state.nameCat,\r\n      text: document.getElementById('EditorEdit').value\r\n    };\r\n\r\n    let res = await this.getData('save_edit', data);\r\n\r\n    if( res.st === false ){\r\n      alert(res.text)\r\n    }else{\r\n      this.setState({ \r\n        modalDialog: false, \r\n        showCat: null, \r\n        nameCat: '' \r\n      })\r\n\r\n      document.getElementById('EditorEdit').value = '';\r\n\r\n      res = await this.getData('get_all');\r\n    \r\n      this.setState({\r\n        cats: res.cats\r\n      })\r\n    }\r\n  }\r\n\r\n  async saveNew(){\r\n    let data = {\r\n      name: this.state.nameCatNew,\r\n      text: document.getElementById('EditorNew').value\r\n    };\r\n\r\n    let res = await this.getData('save_new', data);\r\n\r\n    if( res.st === false ){\r\n      alert(res.text)\r\n    }else{\r\n      this.setState({ \r\n        modalDialogNew: false, \r\n        editTextNew: '', \r\n        nameCatNew: '' \r\n      })\r\n\r\n      document.getElementById('EditorNew').value = '';\r\n\r\n      res = await this.getData('get_all');\r\n    \r\n      this.setState({\r\n        cats: res.cats\r\n      })\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <>\r\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        \r\n        { !this.state.showCat ? null :\r\n          <Dialog\r\n            open={this.state.modalDialog}\r\n            onClose={ () => { this.setState({ modalDialog: false, showCat: null, editText: '', nameCat: '' }) } }\r\n          >\r\n            <DialogTitle>Категория уборки \"{this.state.showCat.name}\"</DialogTitle>\r\n            <DialogContent style={{ paddingTop: 10 }}>\r\n              \r\n              <Grid container spacing={3}>\r\n                \r\n                <Grid item xs={12} sm={12}>\r\n                  <MyTextInput value={ this.state.nameCat } func={ (event) => { this.setState({ nameCat: event.target.value }) } } label='Название категории' />\r\n                </Grid>\r\n\r\n                <Grid item xs={12} sm={12}>\r\n                  <TextEditor id=\"EditorEdit\" text={this.state.showCat.text} />\r\n                </Grid>\r\n                \r\n              </Grid>\r\n\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button color=\"primary\" onClick={this.save.bind(this)}>Сохранить</Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        }\r\n\r\n        <Dialog\r\n          open={this.state.modalDialogNew}\r\n          onClose={ () => { this.setState({ modalDialogNew: false, editTextNew: '', nameCatNew: '' }) } }\r\n        >\r\n          <DialogTitle>Новая категория уборки</DialogTitle>\r\n          <DialogContent style={{ paddingTop: 10 }}>\r\n            \r\n            <Grid container spacing={3}>\r\n              \r\n              <Grid item xs={12} sm={12}>\r\n                <MyTextInput value={ this.state.nameCatNew } func={ (event) => { this.setState({ nameCatNew: event.target.value }) } } label='Название категории' />\r\n              </Grid>\r\n\r\n              <Grid item xs={12} sm={12}>\r\n                <TextEditor id=\"EditorNew\" text={''} />\r\n              </Grid>\r\n              \r\n            </Grid>\r\n\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button color=\"primary\" onClick={this.saveNew.bind(this)}>Сохранить</Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        \r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <h1>{this.state.module_name}</h1>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} sm={12}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={ () => { this.setState({ modalDialogNew: true }) } }>Добавить категорию</Button>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12} sm={12}>\r\n            <List style={{ width: '100%' }}>\r\n              { this.state.cats.map( (item, key) =>\r\n                <ListItem button key={key} onClick={ this.openCat.bind(this, item) }>\r\n                  <ListItemText primary={ item.name } />\r\n                </ListItem>\r\n              ) }\r\n            </List>\r\n          </Grid>\r\n        \r\n        </Grid>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport function CatWork() {\r\n  return (\r\n    <CatWork_ />\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1669208550592\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","CatWork_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","cats","modalDialog","modalDialogNew","nameCat","editText","nameCatNew","editTextNew","config","readonly","showCat","this","getData","module_info","name","document","title","item","text","cat_id","id","getElementById","value","alert","Backdrop","style","zIndex","open","CircularProgress","color","Dialog","onClose","DialogTitle","DialogContent","paddingTop","Grid","container","spacing","xs","sm","func","event","target","label","DialogActions","Button","onClick","save","bind","saveNew","variant","List","width","map","key","ListItem","button","openCat","ListItemText","primary","React","CatWork","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}