(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var r=n(7227).Home,a=n(6754).Orders,i=n(1034).ordercook,o=n(9347).LiveOrders;n(8433).Auth,e.exports=[{path:"/",exact:!0,component:r,title:"Оформление заказа",code:200},{path:"/orders",exact:!0,component:a,title:"Оформленные заказы",code:200},{path:"/live_orders",exact:!0,component:o,title:"Оформленные заказы",code:200},{path:"/ordercook",exact:!0,component:i,title:"Заказы на кухне",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>E});var r=n(5671),a=n(3144),i=n(7326),o=n(136),l=n(2963),s=n(1120),c=n(4942),u=n(7294),m=n(1749),d=n(282),p=n(4436),h=n(3700),f=n(8799),y=n(6282),_=n(8811),Z=n.n(_);var g=n(7563),E=function(e){(0,o.Z)(E,e);var t,n,_=(t=E,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function E(e){var t;return(0,r.Z)(this,E),t=_.call(this,e),(0,c.Z)((0,i.Z)(t),"componentDidMount",(function(){})),t.state={number:"",pass:""},t}return(0,a.Z)(E,[{key:"login",value:function(){fetch(Z().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g.stringify({type:"login_center",number:this.state.number,pass:this.state.pass})}).then((function(e){return e.json()})).then((function(e){e.st?(y.Z.setToken(e.token,e.name),setTimeout((function(){window.location.href="/"}),500)):alert(e.text)}))}},{key:"handleKeyPress",value:function(e){13==e.charCode&&this.state.number.length>0&&this.state.pass.length>0&&this.login()}},{key:"render",value:function(){var e=this;return u.createElement(m.Z,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100vh"}},u.createElement(m.Z,{container:!0,item:!0,xs:3},u.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/logo.png",style:{height:"auto",width:"inherit"}})),u.createElement(m.Z,{container:!0,item:!0,xs:3,direction:"column"},u.createElement(p.Z,null,u.createElement(h.Z,{htmlFor:"my-input"},"Номер телефона"),u.createElement(f.Z,{id:"my-input",type:"login","aria-describedby":"my-helper-text",value:this.state.number,onChange:function(t){e.setState({number:t.target.value})},onKeyPress:this.handleKeyPress})),u.createElement(p.Z,null,u.createElement(h.Z,{htmlFor:"my-input2"},"Пароль"),u.createElement(f.Z,{id:"my-input2",type:"password","aria-describedby":"my-helper-text",value:this.state.pass,onChange:function(t){e.setState({pass:t.target.value})},onKeyPress:this.handleKeyPress})),u.createElement(p.Z,{style:{paddingTop:8}},u.createElement(d.Z,{variant:"contained",style:{backgroundColor:"#CC0033",color:"#fff"},onClick:this.login.bind(this)},"Войти"))))}}]),E}(u.Component)},3107:(e,t,n)=>{"use strict";n.d(t,{h:()=>F});var r=n(7462),a=n(5671),i=n(3144),o=n(7326),l=n(136),s=n(2963),c=n(1120),u=n(4942),m=n(7294),d=n(6010),p=n(4670),h=n(2112),f=n(282),y=n(2822),_=n(5517),Z=n(998),g=n(5757),E=n(381),v=n.n(E),I=n(5431),b=n(3727),x=n(5258),w=n(8358),k=n(2318),C=n(7812),O=n(8884),S=n(1749),P=n(868),T=n(8286),D=n(3700),N=n(5639),R=n(4436),A=n(3200),j=n(6282),M=n(8811),B=n.n(M),L=n(8949),z=n(366);n(6627);var J=n(7563),W=(0,p.Z)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(P.ZP),F=function(e){(0,l.Z)(E,e);var t,n,p=(t=E,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function E(e){var t;return(0,a.Z)(this,E),t=p.call(this,e),(0,u.Z)((0,o.Z)(t),"componentDidMount",(function(){t._isMounted=!0;var e="";if(localStorage.getItem("clientNumber")&&(e=localStorage.getItem("clientNumber"),j.Z.clientNumber=e,t.setState({number:e})),localStorage.getItem("promo_name")){var n=localStorage.getItem("promo_name");setTimeout((function(){t.setState({promo_name:n}),t.checkPromo({target:{value:n}})}),500)}(0,L.EH)((function(){j.Z.getCity(),j.Z.getCartData();var e=j.Z.dateTimeDel;if(setTimeout((function(){e=j.Z.dateTimeDel,t.state.thisDateTimeDel!=e&&(t.setState({thisDateTimeDel:e}),t.setState({number:"",promo_name:"",orderPromoText:""}),t.clear2())}),300),t.state.promo_name&&t.state.promo_name.length>0&&t.checkPromo({target:{value:t.state.promo_name}}),j.Z.updateMyPromos!=t.state.updateMyPromos){var n=j.Z.getMyPromos(),r=[],a=v()(new Date).add(-7,"days").format("YYYY-MM-DD");n=n.filter((function(e){return e.date>=a})),localStorage.setItem("MyPromos",JSON.stringify(n)),n.forEach((function(e){var t=r.find((function(t){return t.promo==e.promo}));t&&0!=t.length?r.forEach((function(t,n){t.promo==e.promo&&r[n].count++})):(e.count=1,r.push(e))})),r=r.filter((function(e){return e.count>1})),t.setState({updateMyPromos:j.Z.updateMyPromos,MyPromos:r})}!0===j.Z.clear&&(t.clear(),j.Z.clear=!1)}))})),t.state={classes:t.props.classes,cityList:t.props.cityList,city:j.Z.getCity(),page:t.props.page,updateMyPromos:null,MyPromos:[],number:"",orderPromoText:"",promo_name:"",promoST:!1,top:!1,left:!1,bottom:!1,right:!1,thisDateTimeDel:null},t}return(0,i.Z)(E,[{key:"saveNumber",value:function(e){var t=e.target.value,n="";(t+="").length>0&&("7"!=(t=(t=(t=(t=(t=t.split(" ").join("")).split("(").join("")).split(")").join("")).split("-").join("")).split("+").join(""))[0]&&7!=t[0]||((n=t.split(""))[0]=8,t=n.join("")),11!=t.length)?alert("Номер введен в не верном формате!"):(this.setState({number:t}),j.Z.clientNumber=t,localStorage.setItem("clientNumber",t))}},{key:"checkPromo",value:function(e){var t=this,n=e.target.value;console.log("promo",n),console.log("promo 555",e.target.value),fetch(B().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:J.stringify({type:"get_promo",city_id:j.Z.getCity(),promo_name:n})}).then((function(e){return e.json()})).then((function(e){j.Z.setPromo(JSON.stringify(e),n);var r=j.Z.checkPromo();!1===r.st&&localStorage.removeItem("promo_name"),0==n.length?(t.setState({orderPromoText:"",promo_name:"",promoST:!1}),localStorage.removeItem("promo_name")):t.setState({orderPromoText:r.text,promoST:r.st,promo_name:n})}))}},{key:"toggleDrawer2",value:function(e,t,n){this.setState((0,u.Z)({},e,t))}},{key:"clear",value:function(){}},{key:"clear2",value:function(){}},{key:"changeCity",value:function(e){var t=e.target.value;this.setState({city:t}),j.Z.setCity(t),localStorage.setItem("cityID",t),j.Z.saveCartData({orderType:"0",orderAddr:"",orderPic:0,orderComment:"",orderTimes:0,orderPredDay:"",orderPredTime:"",orderPay:"",orderSdacha:""}),setTimeout((function(){}),500)}},{key:"logOut",value:function(){localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),500)}},{key:"render",value:function(){var e=this;return m.createElement("div",{className:this.state.classes.root},m.createElement(x.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000"}},m.createElement(w.Z,{style:{minHeight:48,height:48}},m.createElement(C.Z,{edge:"start",onClick:this.toggleDrawer2.bind(this,"left",!0),color:"inherit","aria-label":"menu"},m.createElement(O.Z,null)),"createOrder"==this.state.page?m.createElement(S.Z,{container:!0,className:"headerInput"},m.createElement(S.Z,{item:!0,xs:3},m.createElement(R.Z,{className:this.state.classes.formControl},m.createElement(D.Z,{style:{paddingBottom:2}},"Город"),m.createElement(A.Z,{style:{marginTop:9},value:this.state.city,onChange:this.changeCity.bind(this)},this.state.cityList.map((function(e,t){return m.createElement(N.Z,{key:t,value:e.id},e.name)}))))),m.createElement(S.Z,{item:!0,xs:6,style:{display:"flex",alignItems:"center"}},m.createElement(I.ZP,{freeSolo:!0,label:"Промокод",variant:"outlined",size:"small",style:{minWidth:200,marginRight:8},value:this.state.promo_name,onChange:function(t,n){console.log(n),e.setState({promo_name:n})},onBlur:this.checkPromo.bind(this),options:this.state.MyPromos.map((function(e){return e.promo})),renderInput:function(e){return m.createElement(T.Z,(0,r.Z)({},e,{label:"Промокод",margin:"normal",variant:"outlined"}))}}),m.createElement(W,{placement:"bottom",title:m.createElement(m.Fragment,null,m.createElement(k.Z,{color:"inherit",className:this.state.classes.size1},this.state.orderPromoText))},m.createElement(f.Z,{variant:"contained",color:"primary",style:{padding:"2px 6px",marginTop:8,minWidth:30,marginRight:8,backgroundColor:!1===this.state.promoST&&0==this.state.orderPromoText.length?"gray":!1===this.state.promoST&&this.state.orderPromoText.length>0?"red":"green"}},"?")),m.createElement(f.Z,{variant:"contained",color:"primary",className:"btnClear",style:{padding:"2px 6px",minWidth:30,marginTop:8},onClick:this.clear.bind(this)},m.createElement(z.Z,null))),m.createElement(S.Z,{item:!0,xs:3,style:{paddingTop:14}},m.createElement(T.Z,{label:"Телефон",variant:"outlined",size:"small",placeholder:"8 (999) 999-99-99",value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})},onBlur:this.saveNumber.bind(this),style:{marginRight:4,marginLeft:4,marginBottom:6}}))):null)),m.createElement(h.ZP,{anchor:"left",open:this.state.left,onClose:this.toggleDrawer2.bind(this,"left",!1)},m.createElement("div",{className:(0,d.Z)(this.state.classes.list),role:"presentation"},m.createElement(b.OL,{to:"/",style:{textDecoration:"none"}},m.createElement(Z.Z,{button:!0,style:{color:"#000"}},m.createElement(k.Z,{variant:"body1"},"Оформить заказ"))),m.createElement(b.OL,{to:"/orders",style:{textDecoration:"none"}},m.createElement(Z.Z,{button:!0,style:{color:"#000"}},m.createElement(k.Z,{variant:"body1"},"Список заказов"))),m.createElement(b.OL,{to:"/ordercook",style:{textDecoration:"none"}},m.createElement(Z.Z,{button:!0,style:{color:"#000"}},m.createElement(k.Z,{variant:"body1"},"Заказы на кухне"))),m.createElement(_.Z,null),m.createElement(y.Z,null,m.createElement(Z.Z,{button:!0,onClick:this.logOut.bind(this)},m.createElement(g.Z,{primary:"Выйти"}))))))}}]),E}(m.Component)},7227:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Home:()=>L});var r=n(5861),a=n(7326),i=n(4942),o=n(5671),l=n(3144),s=n(136),c=n(2963),u=n(1120),m=n(7757),d=n.n(m),p=n(7294),h=n(9760),f=n(1749),y=n(3700),_=n(5639),Z=n(4436),g=n(3200),E=n(282),v=n(2302),I=n(9613),b=n(8222),x=n(6847),w=n(3750),k=n(7394),C=n(9895),O=n(6562),S=n(553),P=n(3258),T=n(2692),D=n(5477);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var R=n(7563),A=(0,h.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),j=function(e){(0,s.Z)(n,e);var t=N(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).state={classes:r.props.classes},r}return(0,l.Z)(n,[{key:"render",value:function(){return p.createElement(Z.Z,{size:"small",variant:"outlined",className:this.state.classes.formControl},p.createElement(y.Z,{id:"demo-simple-select-outlined-label"},this.props.label),p.createElement(g.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.props.value,onChange:this.props.func,label:this.props.label,size:"small"},p.createElement(_.Z,{value:""},p.createElement("em",null,"None")),this.props.data.map((function(e,t){return p.createElement(_.Z,{key:t,value:e.id},e.name)}))))}}]),n}(p.PureComponent),M=function(e){(0,s.Z)(n,e);var t=N(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).state={classes:r.props.classes},r}return(0,l.Z)(n,[{key:"render",value:function(){return p.createElement(O.Z,{row:!0},p.createElement(S.Z,{control:p.createElement(P.Z,{checked:this.props.value,onChange:this.props.func,color:"primary"}),label:this.props.label}))}}]),n}(p.PureComponent),B=function(e){(0,s.Z)(u,e);var t,n,c=N(u);function u(e){var t;return(0,o.Z)(this,u),t=c.call(this,e),(0,i.Z)((0,a.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"live_orders",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,l.Z)(u,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),setTimeout((function(){n.updateData()}),100);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return p.createElement(p.Fragment,null,p.createElement(T.Z,{className:this.state.classes.backdrop,open:this.state.is_load},p.createElement(D.Z,{color:"inherit"})),p.createElement(f.Z,{container:!0,spacing:3},p.createElement(f.Z,{item:!0,xs:12,sm:12},p.createElement("h1",null,this.state.module_name)),p.createElement(f.Z,{item:!0,xs:6,sm:6},p.createElement(j,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),p.createElement(f.Z,{item:!0,xs:6,sm:6},p.createElement(E.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),p.createElement(f.Z,{item:!0,xs:12,sm:12},p.createElement(M,{classes:this.state.classes,value:this.state.showReady,func:this.changeCheckOrders.bind(this),label:"Показывать готовые"})),p.createElement(f.Z,{item:!0,xs:12,sm:12},p.createElement(x.Z,{component:C.Z},p.createElement(v.Z,{"aria-label":"a dense table"},p.createElement(w.Z,null,p.createElement(k.Z,null,p.createElement(b.Z,null,"#"),p.createElement(b.Z,null,"Тип"),p.createElement(b.Z,null,"Время заказа"),p.createElement(b.Z,null,"Время предзакза"),p.createElement(b.Z,null,"Время выхода на стол"),p.createElement(b.Z,null,"Во сколько собрали"),p.createElement(b.Z,null,"Закрыли"),p.createElement(b.Z,null,"Приготовили"),p.createElement(b.Z,null,"Отдали"),p.createElement(b.Z,null,"Обещали"),p.createElement(b.Z,null,"Статус"),p.createElement(b.Z,null,"Стол"))),p.createElement(I.Z,null,this.state.read.map((function(e,t){return p.createElement(k.Z,{key:t},p.createElement(b.Z,null,e.id),p.createElement(b.Z,null,e.type_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),p.createElement(b.Z,null,e.unix_start_stol_or),p.createElement(b.Z,null,e.give_data_time_),p.createElement(b.Z,null,e.close_date_time_order),p.createElement(b.Z,{style:{backgroundColor:1==parseInt(e.type_)?"":e.color}},e.time_),p.createElement(b.Z,{style:{backgroundColor:1!=parseInt(e.type_)?"":e.color}},e.test_time),p.createElement(b.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),p.createElement(b.Z,null,e.status),p.createElement(b.Z,null,e.stol_sborki))})),this.state.onstol.map((function(e,t){return p.createElement(k.Z,{key:t,style:{backgroundColor:"yellow"}},p.createElement(b.Z,null,e.id),p.createElement(b.Z,null,e.type_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),p.createElement(b.Z,null,e.unix_start_stol_or),p.createElement(b.Z,null),p.createElement(b.Z,null),p.createElement(b.Z,null),p.createElement(b.Z,null),p.createElement(b.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),p.createElement(b.Z,null,e.status),p.createElement(b.Z,null,e.stol_sborki))}))))),p.createElement(x.Z,{component:C.Z},p.createElement(v.Z,{"aria-label":"a dense table"},p.createElement(w.Z,null,p.createElement(k.Z,null,p.createElement(b.Z,null,"#"),p.createElement(b.Z,null,"Пред"),p.createElement(b.Z,null,"Время оформления"),p.createElement(b.Z,null,"Время выхода на стол"),p.createElement(b.Z,null,"Время закрытия"),p.createElement(b.Z,null,"Обещали"))),p.createElement(I.Z,null,this.state.ordersQueue.map((function(e,t){return p.createElement(k.Z,{key:t},p.createElement(b.Z,null,e.id),p.createElement(b.Z,null,1==parseInt(e.is_preorder)?e.date_time_preorder:""),p.createElement(b.Z,null,0==parseInt(e.is_preorder)?e.date_time_order:""),p.createElement(b.Z,null,e.time_start_order),p.createElement(b.Z,null,e.time_end_order),p.createElement(b.Z,null,0==parseInt(e.is_preorder)?e.unix_time_to_client:""))}))))))))}}]),u}(p.Component);function L(){var e=A();return p.createElement(B,{classes:e})}},9347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LiveOrders:()=>L});var r=n(5861),a=n(7326),i=n(4942),o=n(5671),l=n(3144),s=n(136),c=n(2963),u=n(1120),m=n(7757),d=n.n(m),p=n(7294),h=n(9760),f=n(1749),y=n(3700),_=n(5639),Z=n(4436),g=n(3200),E=n(282),v=n(2302),I=n(9613),b=n(8222),x=n(6847),w=n(3750),k=n(7394),C=n(9895),O=n(6562),S=n(553),P=n(3258),T=n(2692),D=n(5477);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var R=n(7563),A=(0,h.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)}}})),j=function(e){(0,s.Z)(n,e);var t=N(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).state={classes:r.props.classes},r}return(0,l.Z)(n,[{key:"render",value:function(){return p.createElement(Z.Z,{size:"small",variant:"outlined",className:this.state.classes.formControl},p.createElement(y.Z,{id:"demo-simple-select-outlined-label"},this.props.label),p.createElement(g.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.props.value,onChange:this.props.func,label:this.props.label,size:"small"},p.createElement(_.Z,{value:""},p.createElement("em",null,"None")),this.props.data.map((function(e,t){return p.createElement(_.Z,{key:t,value:e.id},e.name)}))))}}]),n}(p.PureComponent),M=function(e){(0,s.Z)(n,e);var t=N(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).state={classes:r.props.classes},r}return(0,l.Z)(n,[{key:"render",value:function(){return p.createElement(O.Z,{row:!0},p.createElement(S.Z,{control:p.createElement(P.Z,{checked:this.props.value,onChange:this.props.func,color:"primary"}),label:this.props.label}))}}]),n}(p.PureComponent),B=function(e){(0,s.Z)(u,e);var t,n,c=N(u);function u(e){var t;return(0,o.Z)(this,u),t=c.call(this,e),(0,i.Z)((0,a.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"live_orders",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,l.Z)(u,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){n.updateData()}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return p.createElement(p.Fragment,null,p.createElement(T.Z,{className:this.state.classes.backdrop,open:this.state.is_load},p.createElement(D.Z,{color:"inherit"})),p.createElement(f.Z,{container:!0,spacing:3},p.createElement(f.Z,{item:!0,xs:12,sm:12},p.createElement("h1",null,this.state.module_name)),this.state.points.length>0?p.createElement(p.Fragment,null,p.createElement(f.Z,{item:!0,xs:6,sm:6},p.createElement(j,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),p.createElement(f.Z,{item:!0,xs:6,sm:6},p.createElement(E.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),p.createElement(f.Z,{item:!0,xs:12,sm:12},p.createElement(M,{classes:this.state.classes,value:this.state.showReady,func:this.changeCheckOrders.bind(this),label:"Показывать готовые"}))):null,p.createElement(f.Z,{item:!0,xs:12,sm:12},p.createElement(x.Z,{component:C.Z},p.createElement(v.Z,{"aria-label":"a dense table"},p.createElement(w.Z,null,p.createElement(k.Z,null,p.createElement(b.Z,null,"#"),p.createElement(b.Z,null,"Тип"),p.createElement(b.Z,null,"Время заказа"),p.createElement(b.Z,null,"Время предзакза"),p.createElement(b.Z,null,"Время выхода на стол"),p.createElement(b.Z,null,"Во сколько собрали"),p.createElement(b.Z,null,"Закрыли"),p.createElement(b.Z,null,"Приготовили"),p.createElement(b.Z,null,"Отдали"),p.createElement(b.Z,null,"Обещали"),p.createElement(b.Z,null,"Статус"),p.createElement(b.Z,null,"Стол"))),p.createElement(I.Z,null,this.state.read.map((function(e,t){return p.createElement(k.Z,{key:t},p.createElement(b.Z,null,e.id),p.createElement(b.Z,null,e.type_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),p.createElement(b.Z,null,e.unix_start_stol_or),p.createElement(b.Z,null,e.give_data_time_),p.createElement(b.Z,null,e.close_date_time_order),p.createElement(b.Z,{style:{backgroundColor:1==parseInt(e.type_)?"":e.color}},e.time_),p.createElement(b.Z,{style:{backgroundColor:1!=parseInt(e.type_)?"":e.color}},e.test_time),p.createElement(b.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),p.createElement(b.Z,null,e.status),p.createElement(b.Z,null,e.stol_sborki))})),this.state.onstol.map((function(e,t){return p.createElement(k.Z,{key:t,style:{backgroundColor:"yellow"}},p.createElement(b.Z,null,e.id),p.createElement(b.Z,null,e.type_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),p.createElement(b.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),p.createElement(b.Z,null,e.unix_start_stol_or),p.createElement(b.Z,null),p.createElement(b.Z,null),p.createElement(b.Z,null),p.createElement(b.Z,null),p.createElement(b.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),p.createElement(b.Z,null,e.status),p.createElement(b.Z,null,e.stol_sborki))}))))),p.createElement(x.Z,{component:C.Z},p.createElement(v.Z,{"aria-label":"a dense table"},p.createElement(w.Z,null,p.createElement(k.Z,null,p.createElement(b.Z,null,"#"),p.createElement(b.Z,null,"Пред"),p.createElement(b.Z,null,"Время оформления"),p.createElement(b.Z,null,"Время выхода на стол"),p.createElement(b.Z,null,"Время закрытия"),p.createElement(b.Z,null,"Обещали"))),p.createElement(I.Z,null,this.state.ordersQueue.map((function(e,t){return p.createElement(k.Z,{key:t},p.createElement(b.Z,null,e.id),p.createElement(b.Z,null,1==parseInt(e.is_preorder)?e.date_time_preorder:""),p.createElement(b.Z,null,0==parseInt(e.is_preorder)?e.date_time_order:""),p.createElement(b.Z,null,e.time_start_order),p.createElement(b.Z,null,e.time_end_order),p.createElement(b.Z,null,0==parseInt(e.is_preorder)?e.unix_time_to_client:""))}))))))))}}]),u}(p.Component);function L(){var e=A();return p.createElement(B,{classes:e})}},1034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ordercook:()=>M});var r=n(5671),a=n(3144),i=n(7326),o=n(136),l=n(2963),s=n(1120),c=n(4942),u=(n(7462),n(5987),n(7294)),m=n(9760),d=n(282),p=n(5685),h=n(1749),f=n(4593),y=n(5697),_=n.n(y),Z=(n(9956),n(3700)),g=n(5639),E=n(4436),v=n(3200),I=n(6282),b=n(8811),x=n.n(b),w=n(2692),k=n(5477),C=n(2302),O=n(9613),S=n(8222),P=n(6847),T=n(3750),D=n(7394),N=n(3107);var R=n(7563),A=(0,m.Z)((function(e){return{root2:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center","& > svg, form":{borderRight:"0px!important"}},root3:{"& > *":{margin:e.spacing(1),width:50},"& .MuiOutlinedInput-input":{padding:"5px 10px"}},list:{width:250},fullList:{width:"auto"},root:{flexGrow:1},title:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},paperCat:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,position:"relative",justifyContent:"space-between",height:"calc(100% - 15px)",cursor:"pointer"},paperCatInfo:{position:"absolute",top:0,right:0},size1:{fontSize:"0.8rem"},scrollTable:{maxHeight:250,overflow:"auto",padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));_().node,_().any.isRequired,_().any.isRequired;var j=function(e){(0,o.Z)(y,e);var t,n,m=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function y(e){var t,n,a,o,l,s;return(0,r.Z)(this,y),t=m.call(this,e),(0,c.Z)((0,i.Z)(t),"interval",null),(0,c.Z)((0,i.Z)(t),"componentDidMount",(function(){t.setState({spiner:!0}),t.interval=setInterval((function(){return t.checkLogin()}),36e5),t.checkLogin(),fetch(x().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"get_cat_center",city_id:1})}).then((function(e){return e.json()})).then((function(e){t.setState({cityList:e.city_list})})).catch((function(e){})),fetch(x().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"get_points",city_id:1})}).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({points:e,point:e[0]}),setTimeout((function(){t.getCookOrders()}),500)})).catch((function(e){}))})),t.state={classes:t.props.classes,cityList:[],spiner:!1,data:[],selectedPoint:1,selectedDate:(n=new Date,a=new Date(n),o=""+(a.getMonth()+1),l=""+a.getDate(),s=a.getFullYear(),o.length<2&&(o="0"+o),l.length<2&&(l="0"+l),[s,o,l].join("-")),points:[],point:null,activeCat:0,orders:[],orderCheck:!1,showOrder:null,openDialog:!1,delOrder:!1,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изминились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1},t}return(0,a.Z)(y,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"checkLogin",value:function(){var e=this;fetch(x().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"check_login_center",token:I.Z.getToken()})}).then((function(e){return e.json()})).then((function(t){!0===t||(localStorage.removeItem("token"),clearInterval(e.interval),setTimeout((function(){window.location.href="/auth"}),500))})).catch((function(e){}))}},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({selectedPoint:n}),setTimeout((function(){t.getCookOrders()}),500)}},{key:"getCookOrders",value:function(){var e=this;this.setState({spiner:!0}),fetch(x().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"getCookOrders",point_id:this.state.selectedPoint})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({data:t}),setTimeout((function(){e.setState({spiner:!1})}),500)})).catch((function(e){}))}},{key:"render",value:function(){return u.createElement(h.Z,{container:!0,spacing:0},u.createElement(f.q,null,u.createElement("title",null,"Заказы на кухне")),u.createElement(w.Z,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},u.createElement(k.Z,{color:"inherit"})),u.createElement(h.Z,{item:!0,xs:12},this.state.cityList.length>0?u.createElement(N.h,{classes:this.state.classes,cityList:this.state.cityList,page:"OrderCook"}):null),u.createElement(h.Z,{item:!0,xs:12,style:{display:"flex",alignItems:"center",justifyContent:"center"}},u.createElement(E.Z,{className:this.state.classes.formControl},u.createElement(Z.Z,null,"Точка"),u.createElement(v.Z,{value:this.state.selectedPoint,onChange:this.changePoint.bind(this)},this.state.points.map((function(e,t){return u.createElement(g.Z,{key:t,value:e.id},e.addr)})))),u.createElement(d.Z,{variant:"contained",color:"primary",className:"btnClear",style:{padding:"2px 6px",minWidth:30},onClick:this.getCookOrders.bind(this)},u.createElement(p.Z,null))),u.createElement(h.Z,{item:!0,xs:12},u.createElement(P.Z,null,u.createElement(C.Z,null,u.createElement(T.Z,null,u.createElement(D.Z,null,u.createElement(S.Z,null,"#"),u.createElement(S.Z,null,"Тип"),u.createElement(S.Z,null,"Статус"),u.createElement(S.Z,null,"Время заказа / предзаказа"),u.createElement(S.Z,null,"Время выхода на стол"),u.createElement(S.Z,null,"Во сколько собрали"),u.createElement(S.Z,null,"Закрыли"),u.createElement(S.Z,null,"Приготовили"),u.createElement(S.Z,null,"Отдали"),u.createElement(S.Z,null,"Обещали"))),u.createElement(O.Z,null,this.state.data.ready?this.state.data.ready.map((function(e,t){return u.createElement(D.Z,{key:t,style:{backgroundColor:"green"}},u.createElement(S.Z,{style:{color:"inherit"}},e.id),u.createElement(S.Z,{style:{color:"inherit"}},e.type_order),u.createElement(S.Z,{style:{color:"inherit"}},e.status),u.createElement(S.Z,{style:{color:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.unix_start_stol_or),u.createElement(S.Z,{style:{color:"inherit"}},e.give_data_time_),u.createElement(S.Z,{style:{color:"inherit"}},e.close_date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_),u.createElement(S.Z,{style:{color:"inherit"}},e.test_time),u.createElement(S.Z,{style:{color:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.onstol?this.state.data.onstol.map((function(e,t){return u.createElement(D.Z,{key:t,style:{backgroundColor:"yellow"}},u.createElement(S.Z,{style:{color:"inherit"}},e.id),u.createElement(S.Z,{style:{color:"inherit"}},e.type_order),u.createElement(S.Z,{style:{color:"inherit"}},e.status),u.createElement(S.Z,{style:{color:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.unix_start_stol_or),u.createElement(S.Z,{style:{color:"inherit"}},e.give_data_time_),u.createElement(S.Z,{style:{color:"inherit"}},e.close_date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_),u.createElement(S.Z,{style:{color:"inherit"}},e.test_time),u.createElement(S.Z,{style:{color:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.prestol_new?this.state.data.prestol_new.map((function(e,t){return u.createElement(D.Z,{key:t},u.createElement(S.Z,{style:{color:"inherit"}},e.id),u.createElement(S.Z,{style:{color:"inherit"}},e.type_order),u.createElement(S.Z,{style:{color:"inherit"}},e.status),u.createElement(S.Z,{style:{color:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder:e.date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_start_order),u.createElement(S.Z,{style:{color:"inherit"}},e.give_data_time_),u.createElement(S.Z,{style:{color:"inherit"}},e.close_date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_),u.createElement(S.Z,{style:{color:"inherit"}},e.test_time),u.createElement(S.Z,{style:{color:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null)))))}}]),y}(u.Component);function M(){var e=A();return u.createElement("div",{className:e.root},u.createElement(j,{classes:e}))}},6754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Orders:()=>le});var r=n(5671),a=n(3144),i=n(7326),o=n(136),l=n(2963),s=n(1120),c=n(4942),u=n(7462),m=n(5987),d=n(7294),p=n(9760),h=n(282),f=n(5258),y=n(2318),_=n(366),Z=n(7812),g=n(1749),E=n(4593),v=n(65),I=n(1423),b=n(5697),x=n.n(b),w=n(9956),k=n(8286),C=n(4837),O=n(3700),S=n(5639),P=n(4436),T=n(3200),D=n(6282),N=n(8811),R=n.n(N),A=n(2692),j=n(5477),M=n(2302),B=n(9613),L=n(8222),z=n(6847),J=n(3750),W=n(7394),F=n(2663),Y=n(6856),U=n(9525),H=n(6083),q=n(553),G=n(74),K=n(2541),Q=n(8523),V=n(1257),X=n(7827),$=n(8736),ee=n(3107),te=["children","value","index"];var ne=n(7563),re=(0,p.Z)((function(e){return{root2:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center","& > svg, form":{borderRight:"0px!important"}},root3:{"& > *":{margin:e.spacing(1),width:50},"& .MuiOutlinedInput-input":{padding:"5px 10px"}},list:{width:250},fullList:{width:"auto"},root:{flexGrow:1},title:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},paperCat:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,position:"relative",justifyContent:"space-between",height:"calc(100% - 15px)",cursor:"pointer"},paperCatInfo:{position:"absolute",top:0,right:0},size1:{fontSize:"0.8rem"},scrollTable:{maxHeight:250,overflow:"auto",padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function ae(e){var t=e.children,n=e.value,r=e.index,a=(0,m.Z)(e,te);return d.createElement("div",(0,u.Z)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),n===r&&d.createElement(w.Z,{p:3},t))}function ie(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),a=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[a,n,r].join("-")}ae.propTypes={children:x().node,index:x().any.isRequired,value:x().any.isRequired};var oe=function(e){(0,o.Z)(p,e);var t,n,m=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function p(e){var t;return(0,r.Z)(this,p),t=m.call(this,e),(0,c.Z)((0,i.Z)(t),"interval",null),(0,c.Z)((0,i.Z)(t),"componentDidMount",(function(){t.interval=setInterval((function(){return t.checkLogin()}),36e5),t.checkLogin(),fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_cat_center",city_id:1})}).then((function(e){return e.json()})).then((function(e){t.setState({cityList:e.city_list}),D.Z.setAllItems(e.all_items),t.getPoints()})).catch((function(e){}))})),(0,c.Z)((0,i.Z)(t),"changeCat",(function(e,n){var r=t.state.points.find((function(e,t){return t==n}));t.setState({activeCat:n,point:r}),t.getOrders()})),(0,c.Z)((0,i.Z)(t),"changeAddr",(function(e){t.setState({typeDel:e.target.value})})),t.state={classes:t.props.classes,cityList:[],spiner:!1,selectedCity:1,selectedDate:ie(new Date),points:[],point:null,activeCat:0,orders:[],orderCheck:!1,showOrder:null,openDialog:!1,delOrder:!1,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изменились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1,number:""},t}return(0,a.Z)(p,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"checkLogin",value:function(){var e=this;fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"check_login_center",token:D.Z.getToken()})}).then((function(e){return e.json()})).then((function(t){!0===t||(localStorage.removeItem("token"),clearInterval(e.interval),setTimeout((function(){window.location.href="/auth"}),500))})).catch((function(e){}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:ie(e)}),setTimeout((function(){t.getOrders()}),500)}},{key:"changeCity",value:function(e){var t=this,n=e.target.value;this.setState({selectedCity:n}),setTimeout((function(){t.getPoints()}),500)}},{key:"getPoints",value:function(){var e=this;fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_points",city_id:this.state.selectedCity})}).then((function(e){return e.json()})).then((function(t){e.setState({points:t,point:t[0]}),setTimeout((function(){e.getOrders()}),500)})).catch((function(e){}))}},{key:"getOrders",value:function(){var e=this;setTimeout((function(){fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_orders",city_id:e.state.selectedCity,point_id:e.state.point.id,date:e.state.selectedDate})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({orders:t.orders}),setTimeout((function(){e.changeNumber()}),100)})).catch((function(e){}))}),500)}},{key:"getOrder",value:function(e){var t=this;fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_order",point_id:this.state.point.id,order_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({showOrder:e,openDialog:!0})})).catch((function(e){}))}},{key:"closeDialog",value:function(){this.setState({openDialog:!1})}},{key:"closeOrder",value:function(e,t){this.setState({delOrder:!0})}},{key:"closeOrderTrue",value:function(){var e=this,t=this.state.radiogroup_options.find((function(t){return t.id==e.state.typeDel}));"4"==t.id&&(t.label=this.state.textDel),confirm("Отменить заказ #"+this.state.showOrder.order.order_id)&&fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"close_order_center",typeCreate:"center",user_id:D.Z.getToken(),order_id:this.state.showOrder.order.order_id,point_id:this.state.showOrder.order.point_id,ans:t.label})}).then((function(e){return e.json()})).then((function(t){console.log(t),setTimeout((function(){t.st?(e.setState({delOrder:!1,openDialog:!1}),e.getOrders()):alert(t.text)}),300)}))}},{key:"repeatOrder",value:function(){var e=[],t=D.Z.getAllItems(),n=null;localStorage.setItem("cityID",this.state.selectedCity),this.state.showOrder.order_items.map((function(r){if(n=t.find((function(e){return e.id==r.item_id}))){var a=parseInt(n.price),i=parseInt(r.count)*parseInt(n.price);e.push({name:r.name,item_id:r.item_id,count:r.count,one_price:a,all_price:i})}}));var r={orderType:parseInt(this.state.showOrder.order.type_order_)-1,orderAddr:this.state.showOrder.street.name,orderPic:parseInt(this.state.showOrder.order.point_id),orderComment:"",orderTimes:"1",orderPredDay:"",orderPredTime:"",orderPay:1==parseInt(this.state.showOrder.order.type_order_)?"cash":"in",orderSdacha:""};D.Z.saveCartData(r),this.state.showOrder.order.promo_name&&""!=this.state.showOrder.order.promo_name&&D.Z.setPromo(this.state.showOrder.promo_info,this.state.showOrder.order.promo_name),D.Z.setItems(e),setTimeout((function(){window.location.pathname="/"}),500)}},{key:"changeText",value:function(e){this.setState({textDel:e.target.value})}},{key:"changeNumber",value:function(){var e=document.querySelectorAll(".order"),t=this.state.number;0==t.length?e.forEach((function(e){e.classList.remove("dis_none")})):e.forEach((function(e){e.getAttribute("datanumber").indexOf(t)>=0?e.classList.remove("dis_none"):e.classList.add("dis_none")}))}},{key:"render",value:function(){var e=this;return d.createElement(g.Z,{container:!0,spacing:0},d.createElement(E.q,null,d.createElement("title",null,"Оформленные заказы")),d.createElement(A.Z,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},d.createElement(j.Z,{color:"inherit"})),d.createElement(g.Z,{item:!0,xs:12},this.state.cityList.length>0?d.createElement(ee.h,{classes:this.state.classes,cityList:this.state.cityList,page:"statOrder"}):null),d.createElement(g.Z,{item:!0,xs:4},d.createElement(X.M,{utils:V.Z,locale:Q.Z},d.createElement(g.Z,{container:!0,justify:"space-around",style:{alignItems:"baseline"}},d.createElement(P.Z,{className:this.state.classes.formControl},d.createElement(O.Z,null,"Город"),d.createElement(T.Z,{value:this.state.selectedCity,onChange:this.changeCity.bind(this)},this.state.cityList.map((function(e,t){return d.createElement(S.Z,{key:t,value:e.id},e.name)})))),d.createElement($.e,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",id:"date-picker-inline",label:"Дата",value:this.state.selectedDate,onChange:this.handleDateChange.bind(this),KeyboardButtonProps:{"aria-label":"change date"}})))),d.createElement(g.Z,{item:!0,xs:3},d.createElement(k.Z,{label:"Номер телефона",style:{margin:"16px 8px 8px 8px",flex:1},value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})},onBlur:this.changeNumber.bind(this)})),d.createElement(g.Z,{item:!0,xs:12},d.createElement(f.Z,{position:"static"},d.createElement(v.Z,{value:this.state.activeCat,onChange:this.changeCat,"aria-label":"simple tabs example"},this.state.points.map((function(e,t){return d.createElement(I.Z,(0,u.Z)({label:e.addr,style:{minWidth:"auto"},key:t},{id:"simple-tab-".concat(n=t),"aria-controls":"simple-tabpanel-".concat(n)}));var n})))),this.state.points.map((function(t,n){return d.createElement(ae,{value:e.state.activeCat,index:n,key:n},d.createElement(z.Z,null,d.createElement(M.Z,null,d.createElement(J.Z,null,d.createElement(W.Z,null,d.createElement(L.Z,null,"#"),d.createElement(L.Z,null,"Оформил"),d.createElement(L.Z,null,"Телефон"),d.createElement(L.Z,null,"Адрес"),d.createElement(L.Z,null,"Оформлен"),d.createElement(L.Z,null,"Ко времени"),d.createElement(L.Z,null,"Закрыт на кухне"),d.createElement(L.Z,null,"Получен клиентом"),d.createElement(L.Z,null,"Тип"),d.createElement(L.Z,null,"Статус"),d.createElement(L.Z,null,"Сумма"),d.createElement(L.Z,null,"Оплата"),d.createElement(L.Z,null,"Курьер"))),d.createElement(B.Z,null,e.state.orders.map((function(t,n){return d.createElement(W.Z,{key:n,className:"order",id:t.id,datanumber:t.number,style:1==t.is_delete?{backgroundColor:"red",color:"#fff"}:{}},d.createElement(L.Z,{style:{color:"inherit",cursor:"pointer"},onClick:e.getOrder.bind(e,t.id)},t.id),d.createElement(L.Z,{style:{color:"inherit"}},t.type_user),d.createElement(L.Z,{style:{color:"inherit"}},t.number),d.createElement(L.Z,{style:{color:"inherit"}},t.street," ",t.home),d.createElement(L.Z,{style:{color:"inherit"}},t.date_time_order),d.createElement(L.Z,{style:{color:"inherit"}},"00:00:00"==t.date_time_preorder?"":t.date_time_preorder),d.createElement(L.Z,{style:{color:"inherit"}},"00:00:00"==t.give_data_time?"":t.give_data_time),d.createElement(L.Z,{style:{color:"inherit"}},t.close_order),d.createElement(L.Z,{style:{color:"inherit"}},t.type_order),d.createElement(L.Z,{style:{color:"inherit"}},t.status),d.createElement(L.Z,{style:{color:"inherit"}},t.order_price),d.createElement(L.Z,{style:{color:"inherit"}},t.type_pay),d.createElement(L.Z,{style:{color:"inherit"}},t.driver))}))))))}))),this.state.showOrder?d.createElement(F.Z,{onClose:this.closeDialog.bind(this),"aria-labelledby":"customized-dialog-title",className:"showOrderDialog",open:this.state.openDialog,fullWidth:!0},d.createElement(H.Z,{disableTypography:!0,style:{margin:0,padding:8}},d.createElement(y.Z,{variant:"h6"},"Заказ ",this.state.showOrder.order.order_id),d.createElement(Z.Z,{"aria-label":"close",style:{position:"absolute",top:0,right:0,color:"#000"},onClick:this.closeDialog.bind(this)},d.createElement(_.Z,null))),d.createElement(U.Z,{className:"showOrderDialogContent"},d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.type_order,": ",this.state.showOrder.order.type_order_addr_new),d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.time_order_name,": ",this.state.showOrder.order.time_order),d.createElement(g.Z,{container:!0,spacing:0},this.state.showOrder.order.number.length>1?d.createElement(g.Z,{item:!0,xs:12},d.createElement(y.Z,{variant:"h6",component:"b"},"Телефон: "),d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.number)):null),this.state.showOrder.order.delete_reason.length>0?d.createElement(y.Z,{variant:"h6",component:"span",style:{color:"red"}},"Удален: ",this.state.showOrder.order.date_time_delete):null,this.state.showOrder.order.delete_reason.length>0?d.createElement(y.Z,{variant:"h6",component:"span",style:{color:"red"}},this.state.showOrder.order.delete_reason):null,1==parseInt(this.state.showOrder.order.is_preorder)?null:d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.text_time,this.state.showOrder.order.time_to_client),d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.textTime),d.createElement(g.Z,{container:!0,spacing:0},null==this.state.showOrder.order.promo_name||0==this.state.showOrder.order.promo_name.length?null:d.createElement(d.Fragment,null,d.createElement(g.Z,{item:!0,xs:12},d.createElement(y.Z,{variant:"h6",component:"b"},"Промокод: "),d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.promo_name)),d.createElement(g.Z,{item:!0,xs:12},d.createElement(y.Z,{variant:"h6",component:"span",className:"noSpace"},this.state.showOrder.order.promo_text))),null==this.state.showOrder.order.comment||0==this.state.showOrder.order.comment.length?null:d.createElement(g.Z,{item:!0,xs:12},d.createElement(y.Z,{variant:"h6",component:"b"},"Комментарий: "),d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.comment)),null==this.state.showOrder.order.sdacha||0==parseInt(this.state.showOrder.order.sdacha)?null:d.createElement(g.Z,{item:!0,xs:12},d.createElement(y.Z,{variant:"h6",component:"b"},"Сдача: "),d.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.sdacha))),d.createElement("table",{className:"tableOrderCheck"},d.createElement("tbody",null,this.state.showOrder.order_items.map((function(e,t){return d.createElement("tr",{key:t},d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"},e.name)),d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"},e.count)),d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"},e.price," р")))})),1==parseInt(this.state.showOrder.order.type_order_)?d.createElement("tr",null,d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"},"Доставка")),d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"})),d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"},this.state.showOrder.order.sum_div," р"))):null),d.createElement("tfoot",null,d.createElement("tr",null,d.createElement("th",{style:{textAlign:"left"}},d.createElement(y.Z,{variant:"h5",component:"span"},"Сумма закза")),d.createElement("td",null,d.createElement(y.Z,{variant:"h5",component:"span"})),d.createElement("th",{style:{textAlign:"left"}},d.createElement(y.Z,{variant:"h5",component:"span"},this.state.showOrder.order.sum_order," р")))))),0==parseInt(this.state.showOrder.order.is_delete)&&6!==parseInt(this.state.showOrder.order.status_order)?d.createElement(Y.Z,{style:{justifyContent:"flex-end",padding:"15px 0px"}},d.createElement(C.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},d.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.closeOrder.bind(this,this.state.showOrder.order.order_id,this.state.showOrder.order.point_id)},"Отменить заказ"))):null,1==parseInt(this.state.showOrder.order.is_delete)||6==parseInt(this.state.showOrder.order.status_order)?d.createElement(Y.Z,{style:{justifyContent:"flex-end",padding:"15px 0px"}},d.createElement(C.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},d.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.repeatOrder.bind(this,this.state.showOrder.order.order_id,this.state.showOrder.order.point_id)},"Повторить заказ"))):null):null,this.state.showOrder?d.createElement(F.Z,{open:this.state.delOrder,onClose:function(){e.setState({delOrder:!1})},"aria-labelledby":"form-dialog-title"},d.createElement(H.Z,{disableTypography:!0,style:{margin:0,padding:8}},d.createElement(y.Z,{variant:"h6"},"Отмена заказа ",this.state.showOrder.order.order_id),d.createElement(Z.Z,{"aria-label":"close",style:{position:"absolute",top:0,right:0,color:"#000"},onClick:function(){e.setState({delOrder:!1})}},d.createElement(_.Z,null))),d.createElement(U.Z,null,d.createElement(P.Z,{component:"fieldset"},d.createElement(K.Z,{name:"typeDel",value:this.state.typeDel,onChange:this.changeAddr},this.state.radiogroup_options.map((function(e,t){return d.createElement(q.Z,{key:t,value:e.id,control:d.createElement(G.Z,null),label:e.label})})))),d.createElement(k.Z,{onFocus:function(){e.setState({typeDel:"4"})},value:this.state.textDel,onChange:this.changeText.bind(this),margin:"dense",id:"name",label:"Причина отмены",type:"text",fullWidth:!0})),d.createElement(Y.Z,{style:{paddingBottom:24}},d.createElement(C.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},d.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:function(){e.setState({delOrder:!1})}},"К заказу")),d.createElement(C.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},d.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.closeOrderTrue.bind(this)},"Отменить заказ")))):null)}}]),p}(d.Component);function le(){var e=re();return d.createElement("div",{className:e.root},d.createElement(oe,{classes:e}))}},5798:(e,t,n)=>{"use strict";var r=n(7294),a=n(3935),i=n(3727),o=n(7462),l=n(5861),s=n(5671),c=n(3144),u=n(7326),m=n(136),d=n(2963),p=n(1120),h=n(4942),f=n(7757),y=n.n(f),_=n(6010),Z=n(9760),g=n(5834),E=n(2112),v=n(9956),I=n(5258),b=n(8358),x=n(2822),w=n(2318),k=n(5517),C=n(7812),O=n(9009),S=n(3832),P=n(1749),T=n(9659),D=n(8884),N=n(9875),R=n(8825),A=n(998),j=n(5757),M=n(8135),B=n(743),L=n(1201),z=n(4566),J=n(7850),W=n(3457),F=n(5977),Y=n(8286),U=n(5431),H=n(5152),q=n.n(H);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=n(7563),V=(0,J.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}});function X(){return r.createElement(w.Z,{variant:"body2",color:"textSecondary",align:"center"},"Copyright © ",r.createElement(T.Z,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var $=(0,Z.Z)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:K({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:(0,h.Z)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),width:"100%"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}})),ee=function(e){(0,m.Z)(Z,e);var t,n,a,f=(n=Z,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(n);if(a){var r=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,d.Z)(this,e)});function Z(e){var t;return(0,s.Z)(this,Z),t=f.call(this,e),(0,h.Z)((0,u.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Q.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",open:!1,menu:[],full_menu:[]},t}return(0,c.Z)(Z,[{key:"componentDidMount",value:(t=(0,l.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({menu:t.info.left_menu,full_menu:t.info.full_menu});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(I.Z,{className:(0,_.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},r.createElement(b.Z,{className:this.state.classes.toolbar},r.createElement(C.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,_.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},r.createElement(D.Z,null)),r.createElement(w.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:this.state.classes.title},"Dashboard"),r.createElement(C.Z,{color:"inherit"},r.createElement(O.Z,{badgeContent:4,color:"secondary"},r.createElement(R.Z,null))))),r.createElement(E.ZP,{variant:"persistent",classes:{paper:(0,_.Z)(this.state.classes.drawerPaper,!this.state.open&&this.state.classes.drawerPaperClose)},open:this.state.open},r.createElement("div",{className:this.state.classes.toolbarIcon},r.createElement(U.ZP,{size:"small",options:this.state.full_menu,getOptionLabel:function(e){return e.name},onChange:function(t,n){n&&e.state.history.push("/"+n.key_query+"/")},style:{width:300},renderInput:function(e){return r.createElement(Y.Z,(0,o.Z)({},e,{label:"Поиск",variant:"outlined"}))}}),r.createElement(C.Z,{onClick:this.handleDrawerClose.bind(this)},r.createElement(N.Z,null))),r.createElement(k.Z,null),this.state.menu.map((function(t,n){return r.createElement(M.Z,{key:n},r.createElement(B.Z,{expandIcon:r.createElement(z.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.createElement(w.Z,{className:e.state.classes.heading},t.parent.name)),r.createElement(L.Z,null,r.createElement(x.Z,{style:{width:"100%"}},t.chaild.map((function(e,t){return r.createElement(A.Z,{button:!0,key:t},r.createElement(i.OL,{to:"/"+e.key_query+"/"},r.createElement(j.Z,{primary:e.name})))})))))}))))}}]),Z}(r.Component);function te(e){var t=e.code,n=e.children;return r.createElement(F.AW,{render:function(e){var r=e.staticContext;return r&&(r.status=t),n}})}function ne(){var e=$(),t=(0,F.k6)();return r.createElement(W.Z,{theme:V},r.createElement("div",{className:e.root},r.createElement(g.ZP,null),r.createElement(ee,{classes:e,history:t}),r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(S.Z,{maxWidth:!1,className:e.container},r.createElement(F.rs,null,q().map((function(e,t){return r.createElement(F.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),r.createElement(F.AW,{component:function(){return r.createElement(te,{code:404},r.createElement(P.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},r.createElement(P.Z,{item:!0,xs:12},r.createElement(w.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}})),r.createElement(v.Z,{pt:4},r.createElement(X,null))))))}a.render(r.createElement(i.VK,null,r.createElement(ne,null)),document.getElementById("app"))},8811:e=>{e.exports={urlApi:"https://jacochef.ru/api/site/test_app.php"}},6282:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(3433),a=n(5671),i=n(3144),o=n(4942),l=n(8949),s=n(8),c=n.n(s),u=n(8811),m=n.n(u),d=n(7563);(0,l.jQ)({enforceActions:"never",useProxies:"ifavailable"});var p=new(function(){function e(){var t=this;if((0,a.Z)(this,e),(0,o.Z)(this,"items",""),(0,o.Z)(this,"itemsPromo",""),(0,o.Z)(this,"promoName",""),(0,o.Z)(this,"allItems",""),(0,o.Z)(this,"allItemsCat",""),(0,o.Z)(this,"banners",""),(0,o.Z)(this,"AllPrice",0),(0,o.Z)(this,"sum_div",0),(0,o.Z)(this,"cityName",0),(0,o.Z)(this,"cityNameRU",""),(0,o.Z)(this,"promo",null),(0,o.Z)(this,"userToken",null),(0,o.Z)(this,"userName",""),(0,o.Z)(this,"activePage",""),(0,o.Z)(this,"need_dops",""),(0,o.Z)(this,"free_items",""),(0,o.Z)(this,"cart_data",""),(0,o.Z)(this,"typeOrder",0),(0,o.Z)(this,"clientNumber",""),(0,o.Z)(this,"clear",!1),(0,o.Z)(this,"MyPromos",""),(0,o.Z)(this,"updateMyPromos",""),(0,o.Z)(this,"dateTimeDel",null),(0,o.Z)(this,"free_drive",0),(0,o.Z)(this,"setMyPromos",(function(e){t.MyPromos=JSON.stringify(e),t.updateMyPromos=new Date,localStorage.setItem("MyPromos",JSON.stringify(e))})),(0,o.Z)(this,"setSumDiv",(function(e){t.sum_div=parseInt(e)})),(0,o.Z)(this,"setDops",(function(e){t.need_dops=JSON.stringify(e)})),(0,o.Z)(this,"setFreeItems",(function(e){t.free_items=JSON.stringify(e)})),(0,o.Z)(this,"setCityRU",(function(e){t.cityNameRU=e})),(0,o.Z)(this,"setCity",(function(e){t.cityName=e})),(0,o.Z)(this,"setAllPrice",(function(e){t.AllPrice=e})),(0,o.Z)(this,"setPage",(function(e){t.activePage=e})),(0,o.Z)(this,"setToken",(function(e,n){t.userToken=e,t.setUserName(n),"undefined"!=typeof window&&localStorage.setItem("token",e)})),(0,o.Z)(this,"setPromo",(function(e,n){t.promo=e,localStorage.setItem("promo_name",n)})),(0,o.Z)(this,"setItemsPromo",(function(e){t.itemsPromo=JSON.stringify(e)})),(0,o.Z)(this,"setAllItemsCat",(function(e){t.allItemsCat=JSON.stringify(e)})),(0,o.Z)(this,"setItems",(function(e){var n=0,r=0,a=t.getItemsPromo();if(r=e.reduce((function(e,t){return e+parseInt(t.all_price)}),n),n=0,r+=a.reduce((function(e,t){return e+parseInt(t.all_price)}),n),t.setAllPrice(r),t.items=JSON.stringify(e),"undefined"!=typeof window){var i=e.filter((function(e){return e.count>0}));i=JSON.stringify(i),localStorage.setItem("my_cart",i)}})),(0,o.Z)(this,"saveCartData",(function(e){var n=JSON.stringify(e);t.cart_data=n,"undefined"!=typeof window&&localStorage.setItem("cartData",n)})),(0,o.Z)(this,"setAllItems",(function(e){t.allItems=JSON.stringify(e),t.checkCart()})),"undefined"!=typeof window){if(localStorage.getItem("my_cart")){var n=JSON.parse(localStorage.getItem("my_cart")),r=(this.getAllItems(),[]);n.forEach((function(e){r.push({name:e.name,item_id:e.item_id,count:e.count,one_price:parseInt(e.one_price),all_price:parseInt(e.one_price)*parseInt(e.count)})})),this.setItems(r)}localStorage.getItem("token")&&this.setToken(localStorage.getItem("token")),localStorage.getItem("cartData")&&(this.cartData=localStorage.getItem("cartData")),localStorage.getItem("promo_name")&&setTimeout((function(){t.getInfoPromo(localStorage.getItem("promo_name"))}),300),localStorage.getItem("MyPromos")&&localStorage.getItem("MyPromos").length>0&&this.setMyPromos(JSON.parse(localStorage.getItem("MyPromos"),!0))}(0,l.ky)(this)}return(0,i.Z)(e,[{key:"getMyPromos",value:function(){return 0==this.MyPromos.length?[]:JSON.parse(this.MyPromos,!0)}},{key:"getSumDiv",value:function(){return this.sum_div}},{key:"getDops",value:function(){return 0==this.need_dops.length?[]:JSON.parse(this.need_dops,!0)}},{key:"getFreeItems",value:function(){return 0==this.free_items.length?[]:JSON.parse(this.free_items,!0)}},{key:"getCityRU",value:function(){return this.cityNameRU&&this.cityNameRU.length>0?this.cityNameRU:"Город"}},{key:"getCity",value:function(){return this.cityName}},{key:"getAllPrice",value:function(){return this.AllPrice}},{key:"getPage",value:function(){return this.activePage}},{key:"getUserName",value:function(){return this.userName&&this.userName.length>0?this.userName:""}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getToken",value:function(){return this.userToken}},{key:"getInfoPromo",value:function(e){fetch(m().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d.stringify({type:"get_promo",city_id:p.getCity(),promo_name:e})}).then((function(e){return e.json()})).then((function(t){console.log(t),p.setPromo(JSON.stringify(t),e),!1===p.checkPromo().st&&localStorage.removeItem("promo_name")}))}},{key:"getPromo",value:function(){return JSON.parse(this.promo,!0)}},{key:"checkPromo",value:function(){var e=p.getCartData();p.setItemsPromo([]);var t=0,n=0,r=e.orderTimes&&1!=parseInt(e.orderTimes)?e.orderPredDay+" "+e.orderPredTime:0,a=this.getPromo(),i=this.getItems(),o=this.getAllItems(),l=[];i.forEach((function(e,t){l.push({name:e.name,item_id:e.item_id,count:e.count,one_price:e.one_price,all_price:parseInt(e.one_price)*parseInt(e.count)})})),i=l,this.setItems(i);var s=[];n=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t);var u,m,d=0,h=0,f=0;(e.orderType||0==e.orderType)&&(d=null!==(u=parseInt(e.orderType))&&void 0!==u?u:0,h=e.orderAddr?parseInt(e.orderAddr.point_id):0,f=null!==(m=parseInt(e.orderPic))&&void 0!==m?m:0);var y="",_="",Z="";if(0==r?(y=c()(new Date).tz("Europe/Samara").format("YYYY-MM-DD"),_=c()(new Date).tz("Europe/Samara").format("H:mm"),Z=parseInt(c()(new Date).tz("Europe/Samara").format("E"))):(y=c()(r).tz("Europe/Samara").format("YYYY-MM-DD"),_=c()(r).tz("Europe/Samara").format("H:mm"),Z=parseInt(c()(r).tz("Europe/Samara").format("E"))),a){if(!a.status_promo)return{st:!1,text:"Промокод не найден или уже активирован"};if(a.limits.date.min&&a.limits.date.max&&!(y>=a.limits.date.min&&y<=a.limits.date.max))return{st:!1,text:"Действует с "+a.limits.date.min+" по "+a.limits.date.max+" "+a.promo_text.false};if(0!=a.limits.time.min&&0!=a.limits.time.max&&!(_>=a.limits.time.min&&_<=a.limits.time.max))return{st:!1,text:_+" Действует с "+a.limits.time.min+" по "+a.limits.time.max+" "+a.promo_text.false};if(0!=a.limits.point_id&&!(0==d&&h==a.limits.point_id||1==d&&f==a.limits.point_id))return{st:!1,text:"Адрес для доставки или самовывоза указан некорректно. Проверьте правильность введённых данных."};if(!(0==a.limits.summ.min&&0==a.limits.summ.max||n>=a.limits.summ.min&&(a.limits.summ.max>=n||0==a.limits.summ.max)))return{st:!1,text:"Сумма от "+a.limits.summ.min+" до "+a.limits.summ.max+"  Общая сумма вашего заказа превышает допустимую стоимость для применения промокода."};if(a.limits.dows&&0==parseInt(a.limits.dows[Z]))return{st:!1,text:"Указанный вами день недели недоступен для применения промокода. Пожалуйста, выберите другую дату."};if(a.limits.type_order&&!(1==parseInt(a.limits.type_order)||3==parseInt(a.limits.type_order)&&0==d||2==parseInt(a.limits.type_order)&&1==d))return{st:!1,text:"Действует "+(1==parseInt(a.limits.type_order)?"Все типы заказов":2==parseInt(a.limits.type_order)?"Только самовывоз":4==parseInt(a.limits.type_order)?"Только доставка":"Только в зале")};if(a.limits.only_kassa&&1==parseInt(a.limits.only_kassa))return{st:!1,text:"Указанный вами промокод действителен только при оплате на кассе."};if(a.limits.items.length>0){var g=null,E=null;if(a.limits.items.map((function(e){g=l.find((function(t){return t.item_id==e}));var t=o.find((function(t){return t.id==e}));t&&t.name&&(E+=t.name+", ",g&&t++)})),0!=a.limits.items.length)return{st:!1,text:"Позиции, которые должны быть в корзине: "+E}}p.free_drive=parseInt(a.limits.free_drive);var v=0,I=0,b=null;return 1==parseInt(a.promo_action)?(1==parseInt(a.sale.cat_sale)&&(I=parseInt(a.sale.count_sale),i.forEach((function(e,t){b=o.find((function(t){return t.id==e.item_id})),3!=parseInt(b.type)&&4!=parseInt(b.type)&&a.sale.sale_action.forEach((function(n){parseInt(e.item_id)==parseInt(n)&&(1==parseInt(a.sale.type_price)?I>0&&((v=parseInt(e.one_price)*parseInt(e.count)-parseInt(I))<=0&&(v=1),I-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=v):(v=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(I),i[t].all_price=parseInt(v)))}))}))),2==parseInt(a.sale.cat_sale)&&(I=parseInt(a.sale.count_sale),i.forEach((function(e,t){b=o.find((function(t){return t.id==e.item_id})),3!=parseInt(b.type)&&4!=parseInt(b.type)&&a.sale.sale_action.forEach((function(n){parseInt(b.cat_id)==parseInt(n)&&(1==parseInt(a.sale.type_price)?I>0&&((v=parseInt(e.one_price)*parseInt(e.count)-parseInt(I))<=0&&(v=1),I-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=v):(v=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(I),i[t].all_price=parseInt(v)))}))}))),3==parseInt(a.sale.cat_sale)&&(I=parseInt(a.sale.count_sale),i.forEach((function(e,t){b=o.find((function(t){return t.id==e.item_id})),3!=parseInt(b.type)&&4!=parseInt(b.type)&&(1==parseInt(a.sale.type_price)?I>0&&((v=parseInt(e.one_price)*parseInt(e.count)-parseInt(I))<=0&&(v=1),I-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=v):(v=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(I),i[t].all_price=parseInt(v)))}))),t=0,n=0,n=i.reduce((function(e,t){return e+t.all_price}),t),p.setAllPrice(n),{st:!0,text:a.promo_text.true}):(2==parseInt(a.promo_action)&&(a.items_add.forEach((function(e){b=o.find((function(t){return t.id==e.item_id})),s.push({item_id:e.item_id,count:e.count,one_price:b.price,all_price:e.price})})),t=0,n=0,n=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),t=0,n+=s.reduce((function(e,t){return e+parseInt(t.all_price)}),t),p.setItemsPromo(s),p.setAllPrice(n)),3==parseInt(a.promo_action)&&a.items_on_price.length>0&&(i.forEach((function(e,t){a.items_on_price.forEach((function(n){parseInt(e.item_id)==parseInt(n.id)&&(i[t].new_one_price=parseInt(n.price),i[t].all_price=parseInt(n.price)*parseInt(e.count))}))})),t=0,n=0,n=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),p.setAllPrice(n)),this.setItems(i),{st:!0,text:a.promo_text.true})}return{st:!1,text:"Промокод не найден",test:a}}},{key:"getItemsPromo",value:function(){return 0==this.itemsPromo.length?[]:JSON.parse(this.itemsPromo,!0)}},{key:"getAllItemsCat",value:function(){return 0==this.allItemsCat.length?[]:JSON.parse(this.allItemsCat,!0)}},{key:"getCartData",value:function(){if("undefined"!=typeof window)return localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[]}},{key:"checkCart",value:function(){var e=this.getItems(),t=this.getAllItems(),n=[];e.forEach((function(e){var r=t.find((function(t){return parseInt(t.id)==parseInt(e.item_id)}));n.push({name:e.name,item_id:e.item_id,count:e.count,one_price:parseInt(r.price),all_price:parseInt(r.price)*parseInt(e.count)})})),this.setItems(n)}},{key:"getItems",value:function(){return 0==this.items.length?[]:JSON.parse(this.items,!0)}},{key:"getAllItems",value:function(){return 0==this.allItems.length?[]:JSON.parse(this.allItems,!0)}},{key:"AddItem",value:function(e){var t=p.getItems(),n=p.getAllItems(),r=p.getPromo(),a=p.getFreeItems();if(!(n.length>0))return 0;var i=t.find((function(t){return t.item_id==e})),o=0;i&&(o=parseInt(i.count));var l=n.find((function(t){return t.id==e}));if(l){var s=o+1,c=parseInt(l.price),u=p.check_max_count(parseInt(e));if(parseInt(u)>=s){var m=a.filter((function(t){return parseInt(t.this_item_id)==parseInt(e)&&1==parseInt(t.is_add)}));return t.some((function(t){return parseInt(t.item_id)==parseInt(e)}))?t.forEach((function(n,r){parseInt(n.item_id)==parseInt(e)&&(t[r].count=s,t[r].all_price=s*c)})):t.push({name:l.name,item_id:e,count:s,one_price:c,all_price:s*c}),m.map((function(e){var r=n.find((function(t){return parseInt(t.id)==parseInt(e.item_id)}));r&&(t.some((function(t){return parseInt(t.item_id)==parseInt(e.item_id)}))?t.forEach((function(n,r){parseInt(n.item_id)==parseInt(e.item_id)&&(t[r].count=parseInt(e.count)*s,t[r].all_price=0)})):t.push({name:r.name,item_id:e.item_id,count:parseInt(e.count)*s,one_price:0,all_price:0}))})),p.setItems(t),r&&p.checkPromo(),s}return s-1}}},{key:"AddCountItem",value:function(e,t){var n=p.getItems(),r=p.getAllItems(),a=p.getPromo();if(!(r.length>0))return 0;var i=n.find((function(t){return parseInt(t.item_id)==parseInt(e)}));i&&parseInt(i.count);var o=r.find((function(t){return parseInt(t.id)==parseInt(e)}));if(o){var l=parseInt(t),s=parseInt(o.price),c=p.check_max_count(parseInt(e));return parseInt(c)>=l?(n.some((function(t){return parseInt(t.item_id)==parseInt(e)}))?n.forEach((function(t,r){t.item_id==e&&(n[r].count=l,n[r].all_price=l*s)})):n.push({name:o.name,item_id:e,count:l,one_price:s,all_price:l*s}),p.setItems(n),a&&p.checkPromo(),l):l-1}}},{key:"MinusItem",value:function(e){var t=p.getItems(),n=p.getAllItems(),r=p.getPromo();if(n.length>0){var a=t.find((function(t){return t.item_id==e}));if(!a)return 0;var i=n.find((function(t){return t.id==e})),o=parseInt(a.count)-1,l=i.price;o<=0&&(o=0);var s=0,c=p.getFreeItems();if(o>=0){var u=c.filter((function(t){return parseInt(t.this_item_id)==parseInt(e)&&1==parseInt(t.is_add)}));t.map((function(n,r){n.item_id==e&&(t[r].count=o,t[r].all_price=o*l)})),p.setItems(t),setTimeout((function(){t.map((function(e,n){s=p.check_max_count(e.item_id),parseInt(s)<0&&(t[n].count=parseInt(e.count)+parseInt(s),t[n].all_price=(parseInt(e.count)+parseInt(s))*parseInt(e.one_price))})),u.map((function(e){var r=n.find((function(t){return parseInt(t.id)==parseInt(e.item_id)}));r&&(t.some((function(t){return parseInt(t.item_id)==parseInt(e.item_id)}))?t.forEach((function(n,r){parseInt(n.item_id)==parseInt(e.item_id)&&(t[r].count=parseInt(e.count)*o,t[r].all_price=0)})):t.push({name:r.name,item_id:e.item_id,count:parseInt(e.count)*o,one_price:0,all_price:0}))})),p.setItems(t)}),300)}return r&&p.checkPromo(),o}return 0}},{key:"delItem",value:function(e){var t=p.getItems(),n=p.getAllItems(),r=p.getPromo();if(n.length>0){if(!t.find((function(t){return t.item_id==e})))return 0;var a=n.find((function(t){return t.id==e})),i=0,o=a.price;if(i<=0&&(i=0),i>=0){t.map((function(n,r){n.item_id==e&&(t[r].count=i,t[r].all_price=i*o)})),p.setItems(t);var l=0;setTimeout((function(){t.map((function(e,n){l=p.check_max_count(e.item_id),parseInt(l)<0&&(t[n].count=parseInt(e.count)+parseInt(l),t[n].all_price=(parseInt(e.count)+parseInt(l))*parseInt(e.one_price))})),p.setItems(t)}),300)}return r&&p.checkPromo(),i}return 0}},{key:"check_need_dops",value:function(){var e=p.getItems(),t=p.getAllItems();if(!t||0==t.length)return[];var n=0,a=0,i=p.getDops();if(0==i.length)return[];e.forEach((function(e){var r=t.find((function(t){return t.id==e.item_id}));if(!r)return[];14==parseInt(r.cat_id)?n+=parseInt(e.count):14!==parseInt(r.cat_id)&&5!==parseInt(r.cat_id)&&6!==parseInt(r.cat_id)&&7!==parseInt(r.cat_id)&&(a+=parseInt(e.count))}));var o=[];a>0&&0==n&&(o=i.rolls),0==a&&n>0&&(o=i.pizza),a>0&&n>0&&(o=[].concat((0,r.Z)(i.rolls),(0,r.Z)(i.pizza))),0==a&&0==n&&(o=[].concat((0,r.Z)(i.rolls),(0,r.Z)(i.pizza)));var l=[],s=[];return e.forEach((function(e){var n=t.find((function(t){return t.id==e.item_id}));if(!n)return[];7==parseInt(n.cat_id)&&l.push(n)})),l.forEach((function(e){var t=!1;o.forEach((function(n){parseInt(n.id)==parseInt(e.id)&&(t=!0)})),t||s.push(e)})),o=[].concat((0,r.Z)(o),s)}},{key:"check_max_count",value:function(e){var t=[],n=[],a=p.getItems(),i=p.getItemsPromo(),o=p.getFreeItems(),l=p.getAllItems(),s=l.find((function(t){return parseInt(t.id)==parseInt(e)}));if(3!=parseInt(s.type)||17!==parseInt(s.id)&&237!==parseInt(s.id))return 99;if(!o)return 99;var c=0;a.forEach((function(e,r){var a=l.find((function(t){return parseInt(t.id)==parseInt(e.item_id)})),i=o.find((function(t){return parseInt(t.this_item_id)==parseInt(e.item_id)}));i&&i.max_count&&3!=parseInt(a.type)&&parseInt(i.max_count),17!=parseInt(a.id)&&237!=parseInt(a.id)||(c+=parseInt(e.count)),o.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),i.forEach((function(e,r){var a=l.find((function(t){return parseInt(t.id)==parseInt(e.item_id)})),i=o.find((function(t){return parseInt(t.this_item_id)==parseInt(e.item_id)}));i&&i.max_count&&3!=parseInt(a.type)&&parseInt(i.max_count),17!=parseInt(a.id)&&237!=parseInt(a.id)||(c+=parseInt(e.count)),o.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),n=(0,r.Z)(new Set(n));var u=[];n.forEach((function(e,n){t.forEach((function(t){if(parseInt(e)==parseInt(t.item_id)){var n=!1;u.forEach((function(r,a){parseInt(r.item_id)==parseInt(e)&&(n=!0,u[a].count+=t.count_in_cart*t.max_count)})),n||u.push({item_id:parseInt(e),count_in_cart:t.count_in_cart,count:t.count_in_cart*t.max_count})}}))}));var m=99;return u.length>0&&(m=u.find((function(e){return 17==parseInt(e.item_id)})))&&(m=parseInt(m.count),c>=m)?m-c:m}},{key:"check_max_count_old",value:function(e){var t=[],n=[],a=p.getItems(),i=p.getFreeItems();if(!i)return 99;a.forEach((function(e,r){i.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),n=(0,r.Z)(new Set(n));var o=[];n.forEach((function(e,n){t.forEach((function(t){if(parseInt(e)==parseInt(t.item_id)){var n=!1;o.forEach((function(r,a){parseInt(r.item_id)==parseInt(e)&&(n=!0,o[a].count+=t.count_in_cart*t.max_count)})),n||o.push({item_id:parseInt(e),count:t.count_in_cart*t.max_count})}}))}));var l=99;return o.forEach((function(t){parseInt(t.item_id)==parseInt(e)&&(l=parseInt(t.count))})),l}}]),e}());const h=p},8293:(e,t,n)=>{var r={"./ru":1793,"./ru.js":1793};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=8293}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.70a8b29d65413b14fee3.js.map