{"version":3,"file":"347.c9b3ea0dbacdd34f67c9.js","mappings":"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","sources":["webpack://package.json/./src/components/live_orders/live_orders.component.jsx","webpack://package.json/./src/components/live_orders/live_orders.style.scss"],"sourcesContent":["import React from 'react';\r\n\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport { MySelect, MyCheckBox } from '../../stores/elements';\r\n\r\nconst queryString = require('query-string');\r\n\r\nclass LiveOrders_ extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n        \r\n    this.state = {\r\n      module: 'live_orders',\r\n      module_name: '',\r\n      is_load: false,\r\n      \r\n      points: [],\r\n      point: '0',\r\n      showReady: false,\r\n      read: [],\r\n      onstol: [],\r\n      ordersQueue: []\r\n    };\r\n  }\r\n  \r\n  async componentDidMount(){\r\n    \r\n    let data = await this.getData('get_all');\r\n    \r\n    this.setState({\r\n      points: data.point_list,\r\n      point: data.point_list[0].id,\r\n      module_name: data.module_info.name\r\n    })\r\n    \r\n    document.title = data.module_info.name;\r\n    \r\n    setTimeout( () => {\r\n      this.updateData();\r\n    }, 100 )\r\n  }\r\n  \r\n  getData = (method, data = {}) => {\r\n    \r\n    this.setState({\r\n      is_load: true\r\n    })\r\n    \r\n    return fetch('https://jacochef.ru/api/index_new.php', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type':'application/x-www-form-urlencoded'},\r\n      body: queryString.stringify({\r\n        method: method, \r\n        module: this.state.module,\r\n        version: 2,\r\n        login: localStorage.getItem('token'),\r\n        data: JSON.stringify( data )\r\n      })\r\n    }).then(res => res.json()).then(json => {\r\n      \r\n      if( json.st === false && json.type == 'redir' ){\r\n        window.location.pathname = '/auth';\r\n        return;\r\n      }\r\n      \r\n      if( json.st === false && json.type == 'auth' ){\r\n        window.location.pathname = '/auth';\r\n        return;\r\n      }\r\n      \r\n      setTimeout( () => {\r\n        this.setState({\r\n          is_load: false\r\n        })\r\n      }, 300 )\r\n      \r\n      return json;\r\n    })\r\n    .catch(err => { \r\n      console.log( err )\r\n    });\r\n  }\r\n   \r\n  changePoint(event){\r\n    let data = event.target.value;\r\n    \r\n    this.setState({\r\n      point: data\r\n    })\r\n    \r\n    setTimeout( () => {\r\n      this.updateData();\r\n    }, 50 )\r\n  }\r\n  \r\n  changeCheckOrders(event){\r\n    let data = event.target.checked;\r\n    \r\n    this.setState({\r\n      showReady: data\r\n    })\r\n  }\r\n  \r\n  async updateData(){\r\n    let data = {\r\n      point_id: this.state.point,\r\n      showReady: this.state.showReady === true ? 1 : 0\r\n    };\r\n    \r\n    let res = await this.getData('get_orders', data);\r\n    \r\n    this.setState({\r\n      read: res.read,\r\n      onstol: res.onstol,\r\n      ordersQueue: res.prestol_new\r\n    })\r\n  }\r\n  \r\n  render(){\r\n    return (\r\n      <>\r\n        <Backdrop open={this.state.is_load} style={{ zIndex: 99 }}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        \r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <h1>{this.state.module_name}</h1>\r\n          </Grid>\r\n          \r\n            \r\n          <Grid item xs={6} sm={6}>\r\n            <MySelect data={this.state.points} value={this.state.point} func={ this.changePoint.bind(this) } label='Точка' />\r\n          </Grid>\r\n          <Grid item xs={6} sm={6}>\r\n            <Button variant=\"contained\" onClick={this.updateData.bind(this)}>Обновить данные</Button>\r\n          </Grid>\r\n          <Grid item xs={12} sm={12}>\r\n            <MyCheckBox value={this.state.showReady} func={ this.changeCheckOrders.bind(this) } label='Показывать готовые' />\r\n          </Grid>\r\n            \r\n          <Grid item xs={12} sm={12}>\r\n            \r\n            <TableContainer component={Paper}>\r\n              <Table aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>#</TableCell>\r\n                    <TableCell>Тип</TableCell>\r\n                    <TableCell>Время заказа</TableCell>\r\n                    <TableCell>Время предзакза</TableCell>\r\n                    \r\n                    <TableCell>Время выхода на стол</TableCell>\r\n                    <TableCell>Во сколько собрали</TableCell>\r\n                    <TableCell>Закрыли</TableCell>\r\n                    \r\n                    <TableCell>Приготовили</TableCell>\r\n                    <TableCell>Отдали</TableCell>\r\n                    <TableCell>Обещали</TableCell>\r\n                    \r\n                    <TableCell>Статус</TableCell>\r\n                    <TableCell>Стол</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  \r\n                  {this.state.read.map( (item, key) => (\r\n                    <TableRow key={key}>\r\n                      <TableCell>{item.id}</TableCell>\r\n                      <TableCell>{item.type_order}</TableCell>\r\n                      <TableCell>{ parseInt(item.preorder) == 1 ? '' : item.date_time_order }</TableCell>\r\n                      <TableCell>{ parseInt(item.preorder) == 1 ? item.date_time_preorder_ : '' }</TableCell>\r\n                      \r\n                      <TableCell>{item.unix_start_stol_or}</TableCell>\r\n                      <TableCell>{item.give_data_time_}</TableCell>\r\n                      <TableCell>{item.close_date_time_order}</TableCell>\r\n                      \r\n                      <TableCell style = {{backgroundColor: parseInt(item.type_) == 1 ? '' : item.color}}>{item.time_}</TableCell>\r\n                      <TableCell style = {{backgroundColor: parseInt(item.type_) != 1 ? '' : item.color}}>{item.test_time}</TableCell>\r\n                      <TableCell>{ parseInt(item.preorder) == 0 ? item.unix_time_to_client : '' }</TableCell>\r\n                      \r\n                      <TableCell>{item.status}</TableCell>\r\n                      <TableCell>{item.stol_sborki}</TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                  \r\n                  {this.state.onstol.map( (item, key) => (\r\n                    <TableRow key={key} style = {{backgroundColor: 'yellow'}}>\r\n                      <TableCell>{item.id}</TableCell>\r\n                      <TableCell>{item.type_order}</TableCell>\r\n                      <TableCell>{ parseInt(item.preorder) == 1 ? '' : item.date_time_order }</TableCell>\r\n                      <TableCell>{ parseInt(item.preorder) == 1 ? item.date_time_preorder_ : '' }</TableCell>\r\n                      \r\n                      <TableCell>{item.unix_start_stol_or}</TableCell>\r\n                      <TableCell></TableCell>\r\n                      <TableCell></TableCell>\r\n                      \r\n                      <TableCell></TableCell>\r\n                      <TableCell></TableCell>\r\n                      <TableCell>{ parseInt(item.preorder) == 0 ? item.unix_time_to_client : '' }</TableCell>\r\n                      \r\n                      <TableCell>{item.status}</TableCell>\r\n                      <TableCell>{item.stol_sborki}</TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n            \r\n            <TableContainer component={Paper}>\r\n              <Table aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>#</TableCell>\r\n                    <TableCell>Пред</TableCell>\r\n                    <TableCell>Время оформления</TableCell>\r\n                    <TableCell>Время выхода на стол</TableCell>\r\n                    <TableCell>Время закрытия</TableCell>\r\n                    <TableCell>Обещали</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  \r\n                  {this.state.ordersQueue.map( (item, key) => (\r\n                    <TableRow key={key}>\r\n                      <TableCell>{item.id}</TableCell>\r\n                      <TableCell>{ parseInt(item.is_preorder) == 1 ? item.date_time_preorder : '' }</TableCell>\r\n                      <TableCell>{ parseInt(item.is_preorder) == 0 ? item.date_time_order : '' }</TableCell>\r\n                      \r\n                      <TableCell>{item.time_start_order}</TableCell>\r\n                      <TableCell>{item.time_end_order}</TableCell>\r\n                      \r\n                      <TableCell>{ parseInt(item.is_preorder) == 0 ? item.unix_time_to_client : '' }</TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                  \r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n            \r\n          </Grid>\r\n        </Grid>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport function LiveOrders() {\r\n  return (\r\n    <LiveOrders_ />\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1659052484282\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","LiveOrders_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","points","point","showReady","read","onstol","ordersQueue","this","getData","point_list","id","module_info","name","document","title","updateData","event","target","value","checked","point_id","prestol_new","Backdrop","open","style","zIndex","CircularProgress","color","Grid","container","spacing","item","xs","sm","func","changePoint","bind","label","Button","variant","onClick","changeCheckOrders","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","TableBody","map","key","type_order","parseInt","preorder","date_time_order","date_time_preorder_","unix_start_stol_or","give_data_time_","close_date_time_order","backgroundColor","type_","time_","test_time","unix_time_to_client","status","stol_sborki","is_preorder","date_time_preorder","time_start_order","time_end_order","React","LiveOrders","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}