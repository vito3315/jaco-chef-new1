"use strict";(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[66],{3066:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y}),n(7887);var a=n(5861),o=n(5671),i=n(3144),r=n(7326),s=n(136),c=n(6215),u=n(1120),l=n(4942),d=n(4687),p=n.n(d),f=n(7294),m=(n(30),n(1822),n(9620),n(2962),n(4498),n(7745),n(3892)),h=n(5705);n(6406);var v=n(7563),_=function(e){(0,s.Z)(g,e);var t,n,d,_,y=(d=g,_=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(d);if(_){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function g(e){var t;return(0,o.Z)(this,g),t=y.call(this,e),(0,l.Z)((0,r.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={module:"tender",module_name:"",is_load:!1,modalDialog:!1,testTable:[],vendors:[],myVendors:[],showVendors:[],params_api:null,params_columnApi:null},t}return(0,i.Z)(g,[{key:"componentDidMount",value:(n=(0,a.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onCellClicked",value:function(e){console.log(e.data),console.log(e.colDef.field)}},{key:"onGridReady",value:function(e){this.setState({params_api:e.api,params_columnApi:e.columnApi})}},{key:"show",value:(t=(0,a.Z)(p().mark((function e(){var t,n,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendors:this.state.myVendors},e.next=3,this.getData("get_data",t);case 3:n=e.sent,a=[],n.items.map((function(e,t){a.push({section:"big-title",item:e.name}),e.cats.map((function(e,t){a.push({section:"big-title",item:e.name}),e.items.map((function(e,t){var o={};n.vendors.map((function(t,a){var i=n.vendor_price.find((function(n){return parseInt(n.vendor_id)==parseInt(t.id)&&parseInt(n.item_id)==parseInt(e.id)}));i?(o["vend_price_"+t.id]=i.price,o["vend_city_"+t.id]="тлт"):(o["vend_price_"+t.id]="",o["vend_city_"+t.id]="")})),o.item=e.name,o.section="last";var i=n.ras.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}));o.ras=i?i.count_pf:"",a.push(o)}))}))})),this.setState({testTable:a,showVendors:n.vendors});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return f.createElement(m.Z,{open:!0},f.createElement(h.Z,{color:"inherit"}))}}]),g}(f.Component);function y(){return f.createElement(_,null)}},7887:(e,t,n)=>{var a=n(4783)(e.id,{locals:!1});e.hot.dispose(a),e.hot.accept(void 0,a)}}]);
//# sourceMappingURL=66.49cec2e1908445e765a1.js.map