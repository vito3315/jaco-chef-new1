{"version":3,"file":"964.2ecbc8ee7da9d1a6f5de.js","mappings":"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","sources":["webpack://package.json/./src/components/socialnetwork/socialnetwork.component.jsx","webpack://package.json/./src/components/socialnetwork/socialnetwork.style.scss"],"sourcesContent":["import React from 'react';\r\n\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport { MySelect, MyTextInput } from '../../stores/elements';\r\n\r\nimport axios from 'axios';\r\nconst queryString = require('query-string');\r\n\r\nclass SocialNetwork_ extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n        \r\n    this.state = {\r\n      module: 'socialnetwork',\r\n      module_name: '',\r\n      is_load: false,\r\n      \r\n      cityList: [],\r\n      city_id: 0,\r\n\r\n      dataInfo: null,\r\n      file: null\r\n    };\r\n  }\r\n  \r\n  async componentDidMount(){\r\n    let data = await this.getData('get_all');\r\n    \r\n    this.setState({\r\n      module_name: data.module_info.name,\r\n      cityList: data.cities,\r\n      city_id: data.cities[0].id\r\n    })\r\n    \r\n    document.title = data.module_info.name;\r\n\r\n    setTimeout( () => {\r\n      this.updateData();\r\n    }, 50 )\r\n  }\r\n  \r\n  getData = (method, data = {}) => {\r\n    \r\n    this.setState({\r\n      is_load: true\r\n    })\r\n    \r\n    return fetch('https://jacochef.ru/api/index_new.php', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type':'application/x-www-form-urlencoded'},\r\n      body: queryString.stringify({\r\n        method: method, \r\n        module: this.state.module,\r\n        version: 2,\r\n        login: localStorage.getItem('token'),\r\n        data: JSON.stringify( data )\r\n      })\r\n    }).then(res => res.json()).then(json => {\r\n      \r\n      if( json.st === false && json.type == 'redir' ){\r\n        window.location.pathname = '/';\r\n        return;\r\n      }\r\n      \r\n      if( json.st === false && json.type == 'auth' ){\r\n        window.location.pathname = '/auth';\r\n        return;\r\n      }\r\n      \r\n      setTimeout( () => {\r\n        this.setState({\r\n          is_load: false\r\n        })\r\n      }, 300 )\r\n      \r\n      return json;\r\n    })\r\n    .catch(err => { \r\n      console.log( err )\r\n      this.setState({\r\n        is_load: false\r\n      })\r\n    });\r\n  }\r\n   \r\n  changeCity(event){\r\n    let data = event.target.value;\r\n    \r\n    this.setState({\r\n      city_id: data,\r\n      dataInfo: null,\r\n      file: null\r\n    })\r\n    \r\n    setTimeout( () => {\r\n      this.updateData();\r\n    }, 50 )\r\n  }\r\n\r\n  async updateData(){\r\n    let data = {\r\n      city_id: this.state.city_id\r\n    };\r\n\r\n    let res = await this.getData('get_data', data);\r\n\r\n    this.setState({\r\n      dataInfo: res,\r\n      file: null\r\n    })\r\n  }\r\n\r\n  changeData(type, event){\r\n    let data = event.target.value;\r\n    let info = this.state.dataInfo;\r\n    \r\n    info[ [type] ] = data;\r\n\r\n    this.setState({\r\n      dataInfo: info\r\n    })\r\n  }\r\n\r\n  async saveData(){\r\n    let data = {\r\n      city_id: this.state.city_id,\r\n      vk: this.state.dataInfo.vk,\r\n      inst: this.state.dataInfo.inst,\r\n      ok: this.state.dataInfo.ok,\r\n      tg: this.state.dataInfo.tg,\r\n      fb: this.state.dataInfo.fb,\r\n      file1: this.state.file ? this.state.file.name : ''\r\n    };\r\n\r\n    let res = await this.getData('save_data', data);\r\n    \r\n    if( this.state.file ){\r\n      setTimeout( () => {\r\n        this.setState({\r\n          is_load: true\r\n        })\r\n      }, 350 )\r\n      \r\n      \r\n      \r\n      const formData = new FormData(); \r\n    \r\n      formData.append( \r\n        \"file\", \r\n        this.state.file, \r\n        this.state.file.name \r\n      ); \r\n    \r\n      //console.log(this.state.file); \r\n    \r\n      axios.post('https://jacochef.ru/api/files/v2/upload/upload.php', formData)\r\n        .then( (response) => {\r\n          console.log(response);\r\n          this.setState({\r\n            is_load: false,\r\n            file: null\r\n          })\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n\r\n  handleFileInput(event){\r\n    let data = event.target.files[0];\r\n\r\n    console.log( data )\r\n\r\n    this.setState({\r\n      file: data\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <>\r\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        \r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <h1>{this.state.module_name}</h1>\r\n          </Grid>\r\n          \r\n          <Grid item xs={6} sm={6}>\r\n            <MySelect data={this.state.cityList} value={this.state.city_id} func={ this.changeCity.bind(this) } label='Город' />\r\n          </Grid>\r\n          \r\n          {this.state.dataInfo == null ? null :\r\n            <Grid item xs={12}>\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} sm={6}>\r\n                  <MyTextInput label=\"Вконтакте\" value={this.state.dataInfo ? this.state.dataInfo.vk : ''} func={this.changeData.bind(this, 'vk')} />\r\n                </Grid>\r\n                <Grid item xs={12} sm={6}>\r\n                  <MyTextInput label=\"Инстаграм\" value={this.state.dataInfo ? this.state.dataInfo.inst : ''} func={this.changeData.bind(this, 'inst')} />\r\n                </Grid>\r\n\r\n                <Grid item xs={12} sm={6}>\r\n                  <MyTextInput label=\"Одноклассники\" value={this.state.dataInfo ? this.state.dataInfo.ok : ''} func={this.changeData.bind(this, 'ok')} />\r\n                </Grid>\r\n                <Grid item xs={12} sm={6}>\r\n                  <MyTextInput label=\"Телеграм\" value={this.state.dataInfo ? this.state.dataInfo.tg : ''} func={this.changeData.bind(this, 'tg')} />\r\n                </Grid>\r\n                <Grid item xs={12} sm={6}>\r\n                  <MyTextInput label=\"Facebook\" value={this.state.dataInfo ? this.state.dataInfo.fb : ''} func={this.changeData.bind(this, 'fb')} />\r\n                </Grid>\r\n\r\n                <Grid item xs={12} sm={6}>\r\n                  <MyTextInput type=\"file\" label=\"\" func={this.handleFileInput.bind(this)} />\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} sm={6}>\r\n                  <Button variant=\"contained\" onClick={this.saveData.bind(this)}>Обновить данные</Button>\r\n                </Grid>\r\n\r\n              </Grid>\r\n            </Grid>\r\n          }\r\n        \r\n          \r\n        </Grid>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport function SocialNetwork() {\r\n  return (\r\n    <SocialNetwork_ />\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1660049287719\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","SocialNetwork_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","cityList","city_id","dataInfo","file","this","getData","module_info","name","cities","id","document","title","updateData","event","target","value","info","vk","inst","ok","tg","fb","file1","formData","FormData","append","axios","response","error","files","Backdrop","style","zIndex","open","CircularProgress","color","Grid","container","spacing","item","xs","sm","func","changeCity","bind","label","changeData","handleFileInput","Button","variant","onClick","saveData","React","SocialNetwork","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}