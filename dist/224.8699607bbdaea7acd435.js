"use strict";(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[224],{6224:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$}),n(7643);var a=n(5861),r=n(4942),i=n(5671),s=n(3144),o=n(7326),l=n(136),c=n(6215),m=n(1120),d=n(7462),h=n(4687),u=n.n(h),p=n(7294),f=n(30),x=n(1822),E=n(1647),g=n(130),Z=n(594),_=n(9620),b=n(2962),w=n(4498),y=n(7745),v=n(3150),S=n(6140),C=n(3030),k=n(8561),P=n(8736),R=n(3406),D=n(8727),B=n(808),I=n(231),W=n(3508),z=n(3892),T=n(5705),j=n(5398),M=n(2595),N=n(6467),O=n(3024),Q=n(3073),A=n(2457),U=n(4637),F=n(4440),H=n(721),J=n(9633),L=n(5620),Y=n(6406);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.Z)(e);if(t){var r=(0,m.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var G=p.forwardRef((function(e,t){return p.createElement(L.Z,(0,d.Z)({elevation:6,ref:t,variant:"filled"},e))})),K=n(7563),V=function(e){(0,l.Z)(n,e);var t=q(n);function n(e){var a;return(0,i.Z)(this,n),(a=t.call(this,e)).handleResize=a.handleResize.bind((0,o.Z)(a)),a.state={item:{},fullScreen:!1},a}return(0,s.Z)(n,[{key:"componentDidUpdate",value:function(e){this.props.event&&this.props.event!==e.event&&(this.props.event.date_reg=this.props.event.date_reg.slice(0,10),this.setState({item:this.props.event}))}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){window.innerWidth<601?this.setState({fullScreen:!0}):this.setState({fullScreen:!1})}},{key:"onClose",value:function(){this.setState({item:this.props.event?this.props.event:[]}),this.props.onClose()}},{key:"render",value:function(){var e=this;return p.createElement(_.Z,{open:this.props.open,onClose:this.onClose.bind(this),fullScreen:this.state.fullScreen,fullWidth:!0,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.createElement(y.Z,{className:"button"},p.createElement(E.Z,{style:{fontWeight:"bold"}},"Информация о клиенте"),this.state.fullScreen?p.createElement(g.Z,{onClick:this.onClose.bind(this),style:{cursor:"pointer"}},p.createElement(Z.Z,null)):null),p.createElement(w.Z,{style:{paddingTop:10,paddingBottom:10}},p.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},p.createElement(f.ZP,{item:!0,xs:12,sm:3,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(j.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Имя"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.name:"нет"))),p.createElement(f.ZP,{item:!0,xs:12,sm:3,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(M.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Дата регистрации"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.date_reg:"нет"))),p.createElement(f.ZP,{item:!0,xs:12,sm:3,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(N.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"День рождения"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.date_bir:"нет"))),p.createElement(f.ZP,{item:!0,xs:12,sm:3,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(O.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Согласие на рассылку"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?"0"===this.state.item.spam?"нет":"есть":"нет"))),p.createElement(f.ZP,{item:!0,xs:12,sm:4,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(Q.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Общее количество заказов"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.all_count_order:"0"))),p.createElement(f.ZP,{item:!0,xs:12,sm:4,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(A.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Переодичность заказов"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.order_per_day:"0"))),p.createElement(f.ZP,{item:!0,xs:12,sm:4,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(U.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Количество заказов на доставку"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.count_dev:"0"))),p.createElement(f.ZP,{item:!0,xs:12,sm:4,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(F.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Количество заказов на самовывоз"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item?this.state.item.count_pic:"0"))),p.createElement(f.ZP,{item:!0,xs:12,sm:4,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(H.Z,{fontSize:"large",color:"info",sx:{marginBottom:1}}),p.createElement(f.ZP,{display:"flex",flexDirection:"row",alignItems:"center"},p.createElement(E.Z,{sx:{borderRadius:"15px 0 0 15px",padding:1,fontWeight:"normal",whiteSpace:"nowrap",color:"white",backgroundColor:"#87CEEB"}},"Первый промик после регистрации"),p.createElement(E.Z,{sx:{padding:1,borderTop:1,borderBottom:1,borderRight:1,borderColor:"#87CEEB",borderRadius:"0 15px 15px 0",fontWeight:"bold",whiteSpace:"nowrap"}},this.state.item&&""!==this.state.item.promo_name?this.state.item.promo_name:"не было")))),this.state.item.orders?p.createElement(f.ZP,{item:!0,xs:12,sm:4,mb:3},p.createElement(D.Z,null,p.createElement(B.Z,{expandIcon:p.createElement(W.Z,null),"aria-controls":"panel1a-content"},p.createElement(E.Z,{style:{fontWeight:"bold"}},"Заказы")),p.createElement(I.Z,null,this.state.fullScreen?null:p.createElement(D.Z,{expanded:!0},p.createElement(B.Z,{expandIcon:p.createElement(W.Z,{sx:{opacity:0}}),"aria-controls":"panel1a-content"},p.createElement(f.ZP,{item:!0,xs:!0,display:"flex",flexDirection:"row"},p.createElement(E.Z,{style:{width:"15%"},noWrap:!0},"Номер"),p.createElement(E.Z,{style:{width:"25%"},noWrap:!0},"Дата/время"),p.createElement(E.Z,{style:{width:"15%"},noWrap:!0},"Точка"),p.createElement(E.Z,{style:{width:"15%"},noWrap:!0},"Сумма"),p.createElement(E.Z,{style:{width:"15%"},noWrap:!0},"Промик"),p.createElement(E.Z,{style:{width:"15%"},noWrap:!0},"Тип")))),this.state.item.orders.map((function(t,n){var a,r;return p.createElement(D.Z,{key:n},p.createElement(B.Z,{expandIcon:p.createElement(W.Z,null),"aria-controls":"panel1a-content"},p.createElement(f.ZP,{item:!0,xs:!0,display:"flex",sx:{flexDirection:{sm:"row",xs:"column"}}},p.createElement(E.Z,{style:{width:"15%"},sx:{noWrap:{sm:!0,xs:!1},whiteSpace:{xs:"nowrap"}}},e.state.fullScreen?"Номер: ".concat(t.order_id):t.order_id),p.createElement(E.Z,{style:{width:"25%"},sx:{noWrap:{sm:!0,xs:!1},whiteSpace:{xs:"nowrap"}}},e.state.fullScreen?"Дата: ".concat(t.date,"/").concat(t.time):"".concat(t.date,"/").concat(t.time)),p.createElement(E.Z,{style:{width:"15%"},sx:{noWrap:{sm:!0,xs:!1},whiteSpace:{xs:"nowrap"}}},e.state.fullScreen?"Точка: ".concat(t.addr):t.addr),p.createElement(E.Z,{style:{width:"15%"},sx:{noWrap:{sm:!0,xs:!1},whiteSpace:{xs:"nowrap"}}},e.state.fullScreen?"Сумма: ".concat(t.summ):t.summ),p.createElement(E.Z,{style:{width:"15%"},sx:{noWrap:{sm:!0,xs:!1},whiteSpace:{xs:"nowrap"}}},e.state.fullScreen?"Промик: ".concat(null!==(a=t.promo_name)&&void 0!==a?a:"Нет"):null!==(r=t.promo_name)&&void 0!==r?r:"Нет"),p.createElement(E.Z,{style:{width:"15%"},sx:{noWrap:{sm:!0,xs:!1},whiteSpace:{xs:"nowrap"}}},e.state.fullScreen?"Тип: ".concat(""===t.xy?"Самовывоз":"Доставка"):""===t.xy?"Самовывоз":"Доставка"))),p.createElement(I.Z,{style:{width:"100%",overflow:"scroll"}},p.createElement(v.Z,null,p.createElement(k.Z,null,p.createElement(P.Z,null,p.createElement(C.Z,null,"Наименование"),p.createElement(C.Z,null,"Количество"))),p.createElement(S.Z,null,t.items?t.items.map((function(e,t){return p.createElement(P.Z,{key:t},p.createElement(C.Z,null,e.name),p.createElement(C.Z,null,e.count))})):null))))}))))):null),p.createElement(b.Z,null,p.createElement(x.Z,{style:{color:"#DC143C"},onClick:this.onClose.bind(this)},"Закрыть")))}}]),n}(p.Component),X=function(e){(0,l.Z)(d,e);var t,n,c,m=q(d);function d(e){var t;return(0,i.Z)(this,d),t=m.call(this,e),(0,r.Z)((0,o.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:K.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e)}))})),t.state={module:"list_fake_users",module_name:"",is_load:!1,points:[],point:[],items:[],item:[],users:[],snackbar:!1,error:"",date_start_true:"",date_end_true:"",date_start_false:"",date_end_false:"",count_orders:0,max_summ:0,is_show_claim:0,is_show_claim_last:0,is_show_marketing:0,modalDialog:!1,user:null},t}return(0,s.Z)(d,[{key:"componentDidMount",value:(c=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.points,items:t.items,module_name:t.module_info.name}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getUsers",value:(n=(0,a.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point:this.state.point,date_start_true:this.state.date_start_true,date_end_true:this.state.date_end_true,date_start_false:this.state.date_start_false,date_end_false:this.state.date_end_false,count_orders:this.state.count_orders,max_summ:this.state.max_summ,items:this.state.item,is_show_claim:this.state.is_show_claim,is_show_claim_last:this.state.is_show_claim_last,is_show_marketing:this.state.is_show_marketing},e.next=3,this.getData("get_users",t);case 3:(n=e.sent).st?this.setState({users:n.users}):this.setState({error:n.text,snackbar:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changeNumber",value:function(e,t){this.setState((0,r.Z)({},e,t.target.value))}},{key:"changeItem",value:function(e,t,n){this.setState((0,r.Z)({},e,n))}},{key:"changeDateRange",value:function(e,t){var n,a,i,s;this.setState((0,r.Z)({},e,t?(a=""+((n=new Date(t)).getMonth()+1),i=""+n.getDate(),s=n.getFullYear(),a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[s,a,i].join("-")):""))}},{key:"changeItemChecked",value:function(e,t){var n=!0===t.target.checked?1:0;this.setState((0,r.Z)({},e,n))}},{key:"openModal",value:(t=(0,a.Z)(u().mark((function e(t){var n,a,r,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.date_start_true,a=this.state.date_end_true,r=this.state.point,i={client_id:t.client_id,date_start_true:n,date_end_true:a,point:r},e.next=6,this.getData("get_one",i);case 6:s=e.sent,this.setState({modalDialog:!0,user:s.user});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return p.createElement(p.Fragment,null,p.createElement(z.Z,{style:{zIndex:99},open:this.state.is_load},p.createElement(T.Z,{color:"inherit"})),p.createElement(J.Z,{open:this.state.snackbar,autoHideDuration:3e4,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:function(){e.setState({snackbar:!1})}},p.createElement(G,{onClose:function(){e.setState({snackbar:!1})},severity:"error",sx:{width:"100%"}},this.state.error)),p.createElement(V,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},event:this.state.user}),p.createElement(f.ZP,{item:!0,xs:12,mb:3},p.createElement("h1",null,this.state.module_name)),p.createElement(f.ZP,{item:!0,container:!0,spacing:3,justifyContent:"center",mb:3,sx:{flexDirection:{sm:"row",xs:"column-reverse"}}},p.createElement(f.ZP,{item:!0,xs:12,sm:3,sx:{order:{sm:0,xs:1}}},p.createElement(Y.Qe,{label:"Делал заказ от",value:this.state.date_start_true,func:this.changeDateRange.bind(this,"date_start_true")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3,sx:{order:{sm:1,xs:0}}},p.createElement(Y.Qe,{label:"Делал заказ до",value:this.state.date_end_true,func:this.changeDateRange.bind(this,"date_end_true")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3,sx:{order:{sm:2,xs:2}}},p.createElement(x.Z,{variant:"contained",style:{whiteSpace:"nowrap"},onClick:this.getUsers.bind(this)},"Получить список клиентов"))),p.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.Qe,{label:"Не заказывал от",value:this.state.date_start_false,func:this.changeDateRange.bind(this,"date_start_false")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.Qe,{label:"Не заказывал до",value:this.state.date_end_false,func:this.changeDateRange.bind(this,"date_end_false")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.IA,{label:"Была оформлена ошибка на заказ",value:1==parseInt(this.state.is_show_claim),func:this.changeItemChecked.bind(this,"is_show_claim")}))),p.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.rZ,{label:"Количество заказов",value:this.state.count_orders,type:"number",func:this.changeNumber.bind(this,"count_orders")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.rZ,{label:"От суммы",value:this.state.max_summ,type:"number",func:this.changeNumber.bind(this,"max_summ")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.IA,{label:"Была оформлена ошибка на последний заказ",value:1==parseInt(this.state.is_show_claim_last),func:this.changeItemChecked.bind(this,"is_show_claim_last")}))),p.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.e_,{label:"Точки",multiple:!0,data:this.state.points,value:this.state.point,func:this.changeItem.bind(this,"point")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.e_,{label:"Позиции в заказе",multiple:!0,data:this.state.items,value:this.state.item,func:this.changeItem.bind(this,"item")})),p.createElement(f.ZP,{item:!0,xs:12,sm:3},p.createElement(Y.IA,{label:"Подписка на рекламную рассылку",value:1==parseInt(this.state.is_show_marketing),func:this.changeItemChecked.bind(this,"is_show_marketing")}))),this.state.users.length?p.createElement(f.ZP,{container:!0,justifyContent:"center"},p.createElement(f.ZP,{item:!0,xs:12,sm:9},p.createElement(R.Z,null,p.createElement(v.Z,null,p.createElement(k.Z,null,p.createElement(P.Z,null,p.createElement(C.Z,{style:{width:"5%"}},"#"),p.createElement(C.Z,{style:{width:"35%"}},"Имя"),p.createElement(C.Z,{style:{width:"60%"}},"Телефон"))),p.createElement(S.Z,null,this.state.users.map((function(t,n){return p.createElement(P.Z,{key:n,onClick:e.openModal.bind(e,t),style:{cursor:"pointer"}},p.createElement(C.Z,null,n+1),p.createElement(C.Z,null,t.name),p.createElement(C.Z,null,t.login))}))))))):null)}}]),d}(p.Component);function $(){return p.createElement(X,null)}},7643:(e,t,n)=>{var a=n(4783)(e.id,{locals:!1});e.hot.dispose(a),e.hot.accept(void 0,a)}}]);
//# sourceMappingURL=224.8699607bbdaea7acd435.js.map