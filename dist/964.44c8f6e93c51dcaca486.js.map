{"version":3,"file":"964.44c8f6e93c51dcaca486.js","mappings":"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","sources":["webpack://package.json/./src/components/socialnetwork/socialnetwork.component.jsx","webpack://package.json/./src/components/socialnetwork/socialnetwork.style.scss"],"sourcesContent":["import React from 'react';\n\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\n\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nimport { MySelect, MyTextInput } from '../../stores/elements';\n\nimport axios from 'axios';\nconst queryString = require('query-string');\n\nclass SocialNetwork_ extends React.Component {\n  constructor(props) {\n    super(props);\n        \n    this.state = {\n      module: 'socialnetwork',\n      module_name: '',\n      is_load: false,\n      \n      cityList: [],\n      city_id: 0,\n\n      dataInfo: null,\n      file: null\n    };\n  }\n  \n  async componentDidMount(){\n    let data = await this.getData('get_all');\n    \n    this.setState({\n      module_name: data.module_info.name,\n      cityList: data.cities,\n      city_id: data.cities[0].id\n    })\n    \n    document.title = data.module_info.name;\n\n    setTimeout( () => {\n      this.updateData();\n    }, 50 )\n  }\n  \n  getData = (method, data = {}) => {\n    \n    this.setState({\n      is_load: true\n    })\n    \n    return fetch('https://jacochef.ru/api/index_new.php', {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify({\n        method: method, \n        module: this.state.module,\n        version: 2,\n        login: localStorage.getItem('token'),\n        data: JSON.stringify( data )\n      })\n    }).then(res => res.json()).then(json => {\n      \n      if( json.st === false && json.type == 'redir' ){\n        window.location.pathname = '/';\n        return;\n      }\n      \n      if( json.st === false && json.type == 'auth' ){\n        window.location.pathname = '/auth';\n        return;\n      }\n      \n      setTimeout( () => {\n        this.setState({\n          is_load: false\n        })\n      }, 300 )\n      \n      return json;\n    })\n    .catch(err => { \n      console.log( err )\n      this.setState({\n        is_load: false\n      })\n    });\n  }\n   \n  changeCity(event){\n    let data = event.target.value;\n    \n    this.setState({\n      city_id: data,\n      dataInfo: null,\n      file: null\n    })\n    \n    setTimeout( () => {\n      this.updateData();\n    }, 50 )\n  }\n\n  async updateData(){\n    let data = {\n      city_id: this.state.city_id\n    };\n\n    let res = await this.getData('get_data', data);\n\n    this.setState({\n      dataInfo: res,\n      file: null\n    })\n  }\n\n  changeData(type, event){\n    let data = event.target.value;\n    let info = this.state.dataInfo;\n    \n    info[ [type] ] = data;\n\n    this.setState({\n      dataInfo: info\n    })\n  }\n\n  async saveData(){\n    let data = {\n      city_id: this.state.city_id,\n      vk: this.state.dataInfo.vk,\n      inst: this.state.dataInfo.inst,\n      ok: this.state.dataInfo.ok,\n      tg: this.state.dataInfo.tg,\n      fb: this.state.dataInfo.fb,\n      file1: this.state.file ? this.state.file.name : ''\n    };\n\n    let res = await this.getData('save_data', data);\n    \n    if( this.state.file ){\n      setTimeout( () => {\n        this.setState({\n          is_load: true\n        })\n      }, 350 )\n      \n      \n      \n      const formData = new FormData(); \n    \n      formData.append( \n        \"file\", \n        this.state.file, \n        this.state.file.name \n      ); \n    \n      //console.log(this.state.file); \n    \n      axios.post('https://jacochef.ru/api/files/v2/upload/upload.php', formData)\n        .then( (response) => {\n          console.log(response);\n          this.setState({\n            is_load: false,\n            file: null\n          })\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  }\n\n  handleFileInput(event){\n    let data = event.target.files[0];\n\n    console.log( data )\n\n    this.setState({\n      file: data\n    })\n  }\n\n  render(){\n    return (\n      <>\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        \n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12}>\n            <h1>{this.state.module_name}</h1>\n          </Grid>\n          \n          <Grid item xs={6} sm={6}>\n            <MySelect data={this.state.cityList} value={this.state.city_id} func={ this.changeCity.bind(this) } label='Город' />\n          </Grid>\n          \n          {this.state.dataInfo == null ? null :\n            <Grid item xs={12}>\n              <Grid container spacing={3}>\n                <Grid item xs={12} sm={6}>\n                  <MyTextInput label=\"Вконтакте\" value={this.state.dataInfo ? this.state.dataInfo.vk : ''} func={this.changeData.bind(this, 'vk')} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <MyTextInput label=\"Инстаграм\" value={this.state.dataInfo ? this.state.dataInfo.inst : ''} func={this.changeData.bind(this, 'inst')} />\n                </Grid>\n\n                <Grid item xs={12} sm={6}>\n                  <MyTextInput label=\"Одноклассники\" value={this.state.dataInfo ? this.state.dataInfo.ok : ''} func={this.changeData.bind(this, 'ok')} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <MyTextInput label=\"Телеграм\" value={this.state.dataInfo ? this.state.dataInfo.tg : ''} func={this.changeData.bind(this, 'tg')} />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <MyTextInput label=\"Facebook\" value={this.state.dataInfo ? this.state.dataInfo.fb : ''} func={this.changeData.bind(this, 'fb')} />\n                </Grid>\n\n                <Grid item xs={12} sm={6}>\n                  <MyTextInput type=\"file\" label=\"\" func={this.handleFileInput.bind(this)} />\n                </Grid>\n                \n                <Grid item xs={12} sm={6}>\n                  <Button variant=\"contained\" onClick={this.saveData.bind(this)}>Обновить данные</Button>\n                </Grid>\n\n              </Grid>\n            </Grid>\n          }\n        \n          \n        </Grid>\n      </>\n    )\n  }\n}\n\nexport function SocialNetwork() {\n  return (\n    <SocialNetwork_ />\n  );\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1668449873359\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","SocialNetwork_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","cityList","city_id","dataInfo","file","this","getData","module_info","name","cities","id","document","title","updateData","event","target","value","info","vk","inst","ok","tg","fb","file1","formData","FormData","append","axios","response","error","files","Backdrop","style","zIndex","open","CircularProgress","color","Grid","container","spacing","item","xs","sm","func","changeCity","bind","label","changeData","handleFileInput","Button","variant","onClick","saveData","React","SocialNetwork","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}