{"version":3,"file":"847.6b5a492458cf866cc209.js","mappings":"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","sources":["webpack://package.json/./src/components/app_work_show/app_work_show.component.jsx","webpack://package.json/./src/components/app_work_show/app_work_show.style.scss"],"sourcesContent":["import React from 'react';\r\nimport Grid from '@mui/material/Grid';\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Paper from '@mui/material/Paper';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport Box from '@mui/material/Box';\r\n\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport { MySelect } from '../../stores/elements';\r\n\r\nconst queryString = require('query-string');\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box sx={{ p: 3 }}>{children}</Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.number.isRequired,\r\n  value: PropTypes.number.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    'aria-controls': `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nclass AppWorkShow_ extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n        \r\n    this.state = {\r\n      module: 'app_work_show',\r\n      module_name: '',\r\n      is_load: false,\r\n      \r\n      items: [],\r\n      items_min: [],\r\n      showItems: [],\r\n      modalDialog: false,\r\n      modalDialogNew: false,\r\n\r\n      activeTab: 0,\r\n\r\n      dows: [\r\n        {id: 1, name: 'Понедельник'},\r\n        {id: 2, name: 'Вторник'},\r\n        {id: 3, name: 'Среда'},\r\n        {id: 4, name: 'Четверг'},\r\n        {id: 5, name: 'Пятница'},\r\n        {id: 6, name: 'Суббота'},\r\n        {id: 7, name: 'Воскресенье'},\r\n\r\n        {id: 10, name: 'Другое'},\r\n\t      {id: 11, name: 'Каждый день'},\r\n\t      {id: 12, name: 'Каждый день в конце смены'},\r\n        {id: 13, name: 'Ручное добавление'},\r\n        {id: 14, name: 'После выполнение уборки'},\r\n      ],\r\n      types: [\r\n        {id: 0, name: 'Другое'},\r\n        {id: 1, name: 'Только 1 активная'},\r\n        {id: 2, name: 'Добавление без ограничений'},\r\n      ],\r\n\r\n      itemsEdit: null,\r\n      nameWork: '',\r\n\r\n      itemsNew: null,\r\n      chengeItem1: null,\r\n      chengeItemNew1: null,\r\n\r\n      points: [],\r\n      point_id: ''\r\n    };\r\n  }\r\n  \r\n  async componentDidMount(){\r\n    let points = await this.getData('get_points');\r\n    \r\n    this.setState({\r\n      points: points,\r\n      point_id: points[0]['id']\r\n    })\r\n\r\n    setTimeout( () => {\r\n      this.getWorks();\r\n    }, 300 )\r\n  }\r\n  \r\n  getData = (method, data = {}) => {\r\n    \r\n    this.setState({\r\n      is_load: true\r\n    })\r\n    \r\n    return fetch('https://jacochef.ru/api/index_new.php', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type':'application/x-www-form-urlencoded'},\r\n      body: queryString.stringify({\r\n        method: method, \r\n        module: this.state.module,\r\n        version: 2,\r\n        login: localStorage.getItem('token'),\r\n        data: JSON.stringify( data )\r\n      })\r\n    }).then(res => res.json()).then(json => {\r\n      \r\n      if( json.st === false && json.type == 'redir' ){\r\n        window.location.pathname = '/';\r\n        return;\r\n      }\r\n      \r\n      if( json.st === false && json.type == 'auth' ){\r\n        window.location.pathname = '/auth';\r\n        return;\r\n      }\r\n      \r\n      setTimeout( () => {\r\n        this.setState({\r\n          is_load: false\r\n        })\r\n      }, 300 )\r\n      \r\n      return json;\r\n    })\r\n    .catch(err => { \r\n      console.log( err )\r\n      this.setState({\r\n        is_load: false\r\n      })\r\n    });\r\n  }\r\n   \r\n  async getWorks(){\r\n    let data = {\r\n      point_id: this.state.point_id\r\n    };\r\n\r\n    let res = await this.getData('get_all', data);\r\n\r\n    res.items.map( (item, key) => {\r\n      res.items[key]['dow_name'] = this.state.dows.find( (it) => parseInt(it.id) == parseInt(item.dow) )['name'];\r\n    } )\r\n\r\n    let activeTab = parseInt(this.state.activeTab);\r\n\r\n    if( activeTab == 0 ){\r\n      activeTab = 5;\r\n    }\r\n    if( activeTab == 1 ){\r\n      activeTab = 6;\r\n    }\r\n    if( activeTab == 2 ){\r\n      activeTab = 21;\r\n    }\r\n\r\n    this.setState({\r\n      module_name: res.module_info.name,\r\n      items: res.items,\r\n      showItems: res.items.filter( (item) => parseInt(item.app_id) == parseInt(activeTab) ),\r\n      items_min: res.items_min\r\n    })\r\n\r\n    document.title = res.module_info.name;\r\n  }\r\n\r\n  async openWork(id){\r\n    let data = {\r\n      id: id,\r\n      point_id: this.state.point_id\r\n    };\r\n\r\n    let res = await this.getData('get_one', data);\r\n\r\n    console.log( res )\r\n\r\n    this.setState({\r\n      itemsEdit: res,\r\n      modalDialog: true,\r\n    })\r\n  }\r\n\r\n  changeTab(event, val){\r\n    let activeTab = parseInt(val);\r\n\r\n    if( val == 0 ){\r\n      activeTab = 5;\r\n    }\r\n    if( val == 1 ){\r\n      activeTab = 6;\r\n    }\r\n    if( val == 2 ){\r\n      activeTab = 21;\r\n    }\r\n\r\n    this.setState({\r\n      activeTab: val,\r\n      showItems: this.state.items.filter( (item) => parseInt(item.app_id) == parseInt(activeTab) )\r\n    })\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <>\r\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n        \r\n        \r\n\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <h1>{this.state.module_name}</h1>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} sm={3}>\r\n            <MySelect data={this.state.points} value={this.state.point_id} func={ (event) => { this.setState({ point_id: event.target.value }) } } label='Точка' />\r\n          </Grid>\r\n\r\n          { !this.state.itemsEdit ? null :\r\n            <Dialog\r\n              open={this.state.modalDialog}\r\n              maxWidth={'md'}\r\n              onClose={ () => { this.setState({ modalDialog: false, itemsEdit: null, nameWork: '' }) } }\r\n            >\r\n              <DialogTitle>Уборка \"{this.state.itemsEdit.item.name}\"</DialogTitle>\r\n              <DialogContent>\r\n                \r\n                <Grid container spacing={0}>\r\n\r\n                  <Grid item xs={12}>\r\n                    <Typography>{this.state.itemsEdit.item.cat_name}</Typography>\r\n                  </Grid>\r\n\r\n                  { this.state.itemsEdit.item.show_time == false ? null :\r\n                    <Grid item xs={12}>\r\n                      <Typography>Время за уборку: {this.state.itemsEdit.item.time_min} мин.</Typography>\r\n                    </Grid>\r\n                  }\r\n\r\n                  <Grid item xs={12}>\r\n                    <Typography>Описание процесса уборки: </Typography>\r\n                  </Grid>\r\n\r\n                  <Grid item xs={12}>\r\n                    <Typography dangerouslySetInnerHTML={{__html: this.state.itemsEdit.item.text_work}}></Typography>\r\n                  </Grid>\r\n                  \r\n                </Grid>\r\n\r\n              </DialogContent>\r\n            </Dialog>\r\n          }\r\n\r\n          <Grid item xs={12} sm={12}>\r\n            <Paper>\r\n              <Tabs value={this.state.activeTab} onChange={ this.changeTab.bind(this) }>\r\n                <Tab label=\"Повар\" {...a11yProps(0)} />\r\n                <Tab label=\"Кассир\" {...a11yProps(1)} />\r\n                <Tab label=\"Кухонный работник\" {...a11yProps(2)} />\r\n              </Tabs>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          <Grid item xs={12} sm={12}>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Работа</TableCell>\r\n                  <TableCell>День недели</TableCell>\r\n                  <TableCell>Время открытия</TableCell>\r\n                  <TableCell>Время автоматического удаления</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n\r\n              <TableBody>\r\n                \r\n                { this.state.showItems.map( (item, key) =>\r\n                  <TableRow key={key}>\r\n                    <TableCell onClick={ this.openWork.bind(this, item.id) } style={{ color: '#c03', cursor: 'pointer', fontWeight: 'bold' }}>{item.work_name}</TableCell>\r\n                    <TableCell>{item.dow_name} {item.need_work_name}</TableCell>\r\n                    <TableCell>{item.times_open}</TableCell>\r\n                    <TableCell>{item.times_close}</TableCell>\r\n                  </TableRow>\r\n                ) }\r\n              \r\n              </TableBody>\r\n            \r\n            </Table>\r\n          </Grid>\r\n        \r\n        </Grid>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport function AppWorkShow() {\r\n  return (\r\n    <AppWorkShow_ />\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1660282685582\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","a11yProps","index","id","PropTypes","AppWorkShow_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","items","items_min","showItems","modalDialog","modalDialogNew","activeTab","dows","name","types","itemsEdit","nameWork","itemsNew","chengeItem1","chengeItemNew1","points","point_id","this","getData","getWorks","map","item","key","find","it","parseInt","dow","module_info","filter","app_id","document","title","event","val","Backdrop","style","zIndex","open","CircularProgress","color","Grid","container","spacing","xs","sm","value","func","target","label","Dialog","maxWidth","onClose","DialogTitle","DialogContent","Typography","cat_name","show_time","time_min","dangerouslySetInnerHTML","__html","text_work","Paper","Tabs","onChange","changeTab","bind","Tab","Table","TableHead","TableRow","TableCell","TableBody","onClick","openWork","cursor","fontWeight","work_name","dow_name","need_work_name","times_open","times_close","React","AppWorkShow","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}