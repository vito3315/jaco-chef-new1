(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var r=n(7227).Home,a=(n(6754).Orders,n(1034).ordercook,n(1979).LiveOrders),i=n(8433).Auth;e.exports=[{path:"/",exact:!0,component:r,title:"Главная",code:200},{path:"/live_orders",exact:!0,component:a,title:"Оформленные заказы",code:200},{path:"/auth",exact:!0,component:i,title:"Авторизация",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>E});var r=n(5671),a=n(3144),i=n(7326),o=n(136),s=n(2963),l=n(1120),c=n(4942),u=n(7294),m=n(1749),p=n(282),d=n(4436),h=n(3700),f=n(8799),y=n(6282),g=n(8811),_=n.n(g);var Z=n(7563),E=function(e){(0,o.Z)(E,e);var t,n,g=(t=E,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function E(e){var t;return(0,r.Z)(this,E),t=g.call(this,e),(0,c.Z)((0,i.Z)(t),"componentDidMount",(function(){})),t.state={number:"",pass:""},t}return(0,a.Z)(E,[{key:"login",value:function(){fetch(_().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Z.stringify({type:"login_center",number:this.state.number,pass:this.state.pass})}).then((function(e){return e.json()})).then((function(e){e.st?(y.Z.setToken(e.token,e.name),setTimeout((function(){window.location.href="/"}),500)):alert(e.text)}))}},{key:"handleKeyPress",value:function(e){13==e.charCode&&this.state.number.length>0&&this.state.pass.length>0&&this.login()}},{key:"render",value:function(){var e=this;return u.createElement(m.Z,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{height:"100vh"}},u.createElement(m.Z,{container:!0,item:!0,xs:3},u.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/logo.png",style:{height:"auto",width:"inherit"}})),u.createElement(m.Z,{container:!0,item:!0,xs:3,direction:"column"},u.createElement(d.Z,null,u.createElement(h.Z,{htmlFor:"my-input"},"Номер телефона"),u.createElement(f.Z,{id:"my-input",type:"login","aria-describedby":"my-helper-text",value:this.state.number,onChange:function(t){e.setState({number:t.target.value})},onKeyPress:this.handleKeyPress})),u.createElement(d.Z,null,u.createElement(h.Z,{htmlFor:"my-input2"},"Пароль"),u.createElement(f.Z,{id:"my-input2",type:"password","aria-describedby":"my-helper-text",value:this.state.pass,onChange:function(t){e.setState({pass:t.target.value})},onKeyPress:this.handleKeyPress})),u.createElement(d.Z,{style:{paddingTop:8}},u.createElement(p.Z,{variant:"contained",style:{backgroundColor:"#CC0033",color:"#fff"},onClick:this.login.bind(this)},"Войти"))))}}]),E}(u.Component)},3107:(e,t,n)=>{"use strict";n.d(t,{h:()=>F});var r=n(7462),a=n(5671),i=n(3144),o=n(7326),s=n(136),l=n(2963),c=n(1120),u=n(4942),m=n(7294),p=n(6010),d=n(4670),h=n(2112),f=n(282),y=n(2822),g=n(5517),_=n(998),Z=n(5757),E=n(381),v=n.n(E),I=n(5431),x=n(3727),w=n(5258),b=n(8358),k=n(2318),O=n(7812),C=n(8884),S=n(1749),P=n(868),T=n(8286),D=n(3700),N=n(5639),R=n(4436),A=n(3200),j=n(6282),M=n(8811),B=n.n(M),L=n(8949),z=n(366);n(6627);var J=n(7563),W=(0,d.Z)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(P.ZP),F=function(e){(0,s.Z)(E,e);var t,n,d=(t=E,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function E(e){var t;return(0,a.Z)(this,E),t=d.call(this,e),(0,u.Z)((0,o.Z)(t),"componentDidMount",(function(){t._isMounted=!0;var e="";if(localStorage.getItem("clientNumber")&&(e=localStorage.getItem("clientNumber"),j.Z.clientNumber=e,t.setState({number:e})),localStorage.getItem("promo_name")){var n=localStorage.getItem("promo_name");setTimeout((function(){t.setState({promo_name:n}),t.checkPromo({target:{value:n}})}),500)}(0,L.EH)((function(){j.Z.getCity(),j.Z.getCartData();var e=j.Z.dateTimeDel;if(setTimeout((function(){e=j.Z.dateTimeDel,t.state.thisDateTimeDel!=e&&(t.setState({thisDateTimeDel:e}),t.setState({number:"",promo_name:"",orderPromoText:""}),t.clear2())}),300),t.state.promo_name&&t.state.promo_name.length>0&&t.checkPromo({target:{value:t.state.promo_name}}),j.Z.updateMyPromos!=t.state.updateMyPromos){var n=j.Z.getMyPromos(),r=[],a=v()(new Date).add(-7,"days").format("YYYY-MM-DD");n=n.filter((function(e){return e.date>=a})),localStorage.setItem("MyPromos",JSON.stringify(n)),n.forEach((function(e){var t=r.find((function(t){return t.promo==e.promo}));t&&0!=t.length?r.forEach((function(t,n){t.promo==e.promo&&r[n].count++})):(e.count=1,r.push(e))})),r=r.filter((function(e){return e.count>1})),t.setState({updateMyPromos:j.Z.updateMyPromos,MyPromos:r})}!0===j.Z.clear&&(t.clear(),j.Z.clear=!1)}))})),t.state={classes:t.props.classes,cityList:t.props.cityList,city:j.Z.getCity(),page:t.props.page,updateMyPromos:null,MyPromos:[],number:"",orderPromoText:"",promo_name:"",promoST:!1,top:!1,left:!1,bottom:!1,right:!1,thisDateTimeDel:null},t}return(0,i.Z)(E,[{key:"saveNumber",value:function(e){var t=e.target.value,n="";(t+="").length>0&&("7"!=(t=(t=(t=(t=(t=t.split(" ").join("")).split("(").join("")).split(")").join("")).split("-").join("")).split("+").join(""))[0]&&7!=t[0]||((n=t.split(""))[0]=8,t=n.join("")),11!=t.length)?alert("Номер введен в не верном формате!"):(this.setState({number:t}),j.Z.clientNumber=t,localStorage.setItem("clientNumber",t))}},{key:"checkPromo",value:function(e){var t=this,n=e.target.value;console.log("promo",n),console.log("promo 555",e.target.value),fetch(B().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:J.stringify({type:"get_promo",city_id:j.Z.getCity(),promo_name:n})}).then((function(e){return e.json()})).then((function(e){j.Z.setPromo(JSON.stringify(e),n);var r=j.Z.checkPromo();!1===r.st&&localStorage.removeItem("promo_name"),0==n.length?(t.setState({orderPromoText:"",promo_name:"",promoST:!1}),localStorage.removeItem("promo_name")):t.setState({orderPromoText:r.text,promoST:r.st,promo_name:n})}))}},{key:"toggleDrawer2",value:function(e,t,n){this.setState((0,u.Z)({},e,t))}},{key:"clear",value:function(){}},{key:"clear2",value:function(){}},{key:"changeCity",value:function(e){var t=e.target.value;this.setState({city:t}),j.Z.setCity(t),localStorage.setItem("cityID",t),j.Z.saveCartData({orderType:"0",orderAddr:"",orderPic:0,orderComment:"",orderTimes:0,orderPredDay:"",orderPredTime:"",orderPay:"",orderSdacha:""}),setTimeout((function(){}),500)}},{key:"logOut",value:function(){localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),500)}},{key:"render",value:function(){var e=this;return m.createElement("div",{className:this.state.classes.root},m.createElement(w.Z,{position:"static",style:{backgroundColor:"#fff",color:"#000"}},m.createElement(b.Z,{style:{minHeight:48,height:48}},m.createElement(O.Z,{edge:"start",onClick:this.toggleDrawer2.bind(this,"left",!0),color:"inherit","aria-label":"menu"},m.createElement(C.Z,null)),"createOrder"==this.state.page?m.createElement(S.Z,{container:!0,className:"headerInput"},m.createElement(S.Z,{item:!0,xs:3},m.createElement(R.Z,{className:this.state.classes.formControl},m.createElement(D.Z,{style:{paddingBottom:2}},"Город"),m.createElement(A.Z,{style:{marginTop:9},value:this.state.city,onChange:this.changeCity.bind(this)},this.state.cityList.map((function(e,t){return m.createElement(N.Z,{key:t,value:e.id},e.name)}))))),m.createElement(S.Z,{item:!0,xs:6,style:{display:"flex",alignItems:"center"}},m.createElement(I.ZP,{freeSolo:!0,label:"Промокод",variant:"outlined",size:"small",style:{minWidth:200,marginRight:8},value:this.state.promo_name,onChange:function(t,n){console.log(n),e.setState({promo_name:n})},onBlur:this.checkPromo.bind(this),options:this.state.MyPromos.map((function(e){return e.promo})),renderInput:function(e){return m.createElement(T.Z,(0,r.Z)({},e,{label:"Промокод",margin:"normal",variant:"outlined"}))}}),m.createElement(W,{placement:"bottom",title:m.createElement(m.Fragment,null,m.createElement(k.Z,{color:"inherit",className:this.state.classes.size1},this.state.orderPromoText))},m.createElement(f.Z,{variant:"contained",color:"primary",style:{padding:"2px 6px",marginTop:8,minWidth:30,marginRight:8,backgroundColor:!1===this.state.promoST&&0==this.state.orderPromoText.length?"gray":!1===this.state.promoST&&this.state.orderPromoText.length>0?"red":"green"}},"?")),m.createElement(f.Z,{variant:"contained",color:"primary",className:"btnClear",style:{padding:"2px 6px",minWidth:30,marginTop:8},onClick:this.clear.bind(this)},m.createElement(z.Z,null))),m.createElement(S.Z,{item:!0,xs:3,style:{paddingTop:14}},m.createElement(T.Z,{label:"Телефон",variant:"outlined",size:"small",placeholder:"8 (999) 999-99-99",value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})},onBlur:this.saveNumber.bind(this),style:{marginRight:4,marginLeft:4,marginBottom:6}}))):null)),m.createElement(h.ZP,{anchor:"left",open:this.state.left,onClose:this.toggleDrawer2.bind(this,"left",!1)},m.createElement("div",{className:(0,p.Z)(this.state.classes.list),role:"presentation"},m.createElement(x.OL,{to:"/",style:{textDecoration:"none"}},m.createElement(_.Z,{button:!0,style:{color:"#000"}},m.createElement(k.Z,{variant:"body1"},"Оформить заказ"))),m.createElement(x.OL,{to:"/orders",style:{textDecoration:"none"}},m.createElement(_.Z,{button:!0,style:{color:"#000"}},m.createElement(k.Z,{variant:"body1"},"Список заказов"))),m.createElement(x.OL,{to:"/ordercook",style:{textDecoration:"none"}},m.createElement(_.Z,{button:!0,style:{color:"#000"}},m.createElement(k.Z,{variant:"body1"},"Заказы на кухне"))),m.createElement(g.Z,null),m.createElement(y.Z,null,m.createElement(_.Z,{button:!0,onClick:this.logOut.bind(this)},m.createElement(Z.Z,{primary:"Выйти"}))))))}}]),E}(m.Component)},7227:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Home:()=>v});var r=n(5861),a=n(5671),i=n(3144),o=n(7326),s=n(136),l=n(2963),c=n(1120),u=n(4942),m=n(7757),p=n.n(m),d=n(7294),h=n(9760),f=n(1749),y=n(2692),g=n(5477);var _=n(7563),Z=(0,h.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),E=function(e){(0,s.Z)(Z,e);var t,n,m,h=(n=Z,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(m){var r=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function Z(e){var t;return(0,a.Z)(this,Z),t=h.call(this,e),(0,u.Z)((0,o.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:_.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"home",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,i.Z)(Z,[{key:"componentDidMount",value:(t=(0,r.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return d.createElement(d.Fragment,null,d.createElement(y.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(g.Z,{color:"inherit"})),d.createElement(f.Z,{container:!0,spacing:3},d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),d.createElement(f.Z,{item:!0,xs:12,sm:12,style:{height:"100vh"}})))}}]),Z}(d.Component);function v(){var e=Z();return d.createElement(E,{classes:e})}},1979:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LiveOrders:()=>L});var r=n(5861),a=n(5671),i=n(3144),o=n(7326),s=n(136),l=n(2963),c=n(1120),u=n(4942),m=n(7757),p=n.n(m),d=n(7294),h=n(9760),f=n(1749),y=n(282),g=n(2302),_=n(9613),Z=n(8222),E=n(6847),v=n(3750),I=n(7394),x=n(9895),w=n(2692),b=n(5477),k=n(3700),O=n(5639),C=n(4436),S=n(3200),P=n(6562),T=n(553),D=n(3258);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var R=function(e){(0,s.Z)(n,e);var t=N(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={classes:r.props.classes},r}return(0,i.Z)(n,[{key:"render",value:function(){return d.createElement(C.Z,{size:"small",variant:"outlined",className:this.state.classes.formControl},d.createElement(k.Z,{id:"demo-simple-select-outlined-label"},this.props.label),d.createElement(S.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.props.value,onChange:this.props.func,label:this.props.label,size:"small"},d.createElement(O.Z,{value:""},d.createElement("em",null,"None")),this.props.data.map((function(e,t){return d.createElement(O.Z,{key:t,value:e.id},e.name)}))))}}]),n}(d.PureComponent),A=function(e){(0,s.Z)(n,e);var t=N(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={classes:r.props.classes},r}return(0,i.Z)(n,[{key:"render",value:function(){return d.createElement(P.Z,{row:!0},d.createElement(T.Z,{control:d.createElement(D.Z,{checked:this.props.value,onChange:this.props.func,color:"primary"}),label:this.props.label}))}}]),n}(d.PureComponent);var j=n(7563),M=(0,h.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)}}})),B=function(e){(0,s.Z)(O,e);var t,n,m,h,k=(m=O,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(h){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function O(e){var t;return(0,a.Z)(this,O),t=k.call(this,e),(0,u.Z)((0,o.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"live_orders",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,i.Z)(O,[{key:"componentDidMount",value:(n=(0,r.Z)(p().mark((function e(){var t,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){n.updateData()}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(t=(0,r.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return d.createElement(d.Fragment,null,d.createElement(w.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(b.Z,{color:"inherit"})),d.createElement(f.Z,{container:!0,spacing:3},d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),this.state.points.length>0?d.createElement(d.Fragment,null,d.createElement(f.Z,{item:!0,xs:6,sm:6},d.createElement(R,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),d.createElement(f.Z,{item:!0,xs:6,sm:6},d.createElement(y.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(A,{classes:this.state.classes,value:this.state.showReady,func:this.changeCheckOrders.bind(this),label:"Показывать готовые"}))):null,d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(E.Z,{component:x.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(v.Z,null,d.createElement(I.Z,null,d.createElement(Z.Z,null,"#"),d.createElement(Z.Z,null,"Тип"),d.createElement(Z.Z,null,"Время заказа"),d.createElement(Z.Z,null,"Время предзакза"),d.createElement(Z.Z,null,"Время выхода на стол"),d.createElement(Z.Z,null,"Во сколько собрали"),d.createElement(Z.Z,null,"Закрыли"),d.createElement(Z.Z,null,"Приготовили"),d.createElement(Z.Z,null,"Отдали"),d.createElement(Z.Z,null,"Обещали"),d.createElement(Z.Z,null,"Статус"),d.createElement(Z.Z,null,"Стол"))),d.createElement(_.Z,null,this.state.read.map((function(e,t){return d.createElement(I.Z,{key:t},d.createElement(Z.Z,null,e.id),d.createElement(Z.Z,null,e.type_order),d.createElement(Z.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),d.createElement(Z.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),d.createElement(Z.Z,null,e.unix_start_stol_or),d.createElement(Z.Z,null,e.give_data_time_),d.createElement(Z.Z,null,e.close_date_time_order),d.createElement(Z.Z,{style:{backgroundColor:1==parseInt(e.type_)?"":e.color}},e.time_),d.createElement(Z.Z,{style:{backgroundColor:1!=parseInt(e.type_)?"":e.color}},e.test_time),d.createElement(Z.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),d.createElement(Z.Z,null,e.status),d.createElement(Z.Z,null,e.stol_sborki))})),this.state.onstol.map((function(e,t){return d.createElement(I.Z,{key:t,style:{backgroundColor:"yellow"}},d.createElement(Z.Z,null,e.id),d.createElement(Z.Z,null,e.type_order),d.createElement(Z.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),d.createElement(Z.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),d.createElement(Z.Z,null,e.unix_start_stol_or),d.createElement(Z.Z,null),d.createElement(Z.Z,null),d.createElement(Z.Z,null),d.createElement(Z.Z,null),d.createElement(Z.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),d.createElement(Z.Z,null,e.status),d.createElement(Z.Z,null,e.stol_sborki))}))))),d.createElement(E.Z,{component:x.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(v.Z,null,d.createElement(I.Z,null,d.createElement(Z.Z,null,"#"),d.createElement(Z.Z,null,"Пред"),d.createElement(Z.Z,null,"Время оформления"),d.createElement(Z.Z,null,"Время выхода на стол"),d.createElement(Z.Z,null,"Время закрытия"),d.createElement(Z.Z,null,"Обещали"))),d.createElement(_.Z,null,this.state.ordersQueue.map((function(e,t){return d.createElement(I.Z,{key:t},d.createElement(Z.Z,null,e.id),d.createElement(Z.Z,null,1==parseInt(e.is_preorder)?e.date_time_preorder:""),d.createElement(Z.Z,null,0==parseInt(e.is_preorder)?e.date_time_order:""),d.createElement(Z.Z,null,e.time_start_order),d.createElement(Z.Z,null,e.time_end_order),d.createElement(Z.Z,null,0==parseInt(e.is_preorder)?e.unix_time_to_client:""))}))))))))}}]),O}(d.Component);function L(){var e=M();return d.createElement(B,{classes:e})}},1034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ordercook:()=>M});var r=n(5671),a=n(3144),i=n(7326),o=n(136),s=n(2963),l=n(1120),c=n(4942),u=(n(7462),n(5987),n(7294)),m=n(9760),p=n(282),d=n(5685),h=n(1749),f=n(4593),y=n(5697),g=n.n(y),_=(n(9956),n(3700)),Z=n(5639),E=n(4436),v=n(3200),I=n(6282),x=n(8811),w=n.n(x),b=n(2692),k=n(5477),O=n(2302),C=n(9613),S=n(8222),P=n(6847),T=n(3750),D=n(7394),N=n(3107);var R=n(7563),A=(0,m.Z)((function(e){return{root2:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center","& > svg, form":{borderRight:"0px!important"}},root3:{"& > *":{margin:e.spacing(1),width:50},"& .MuiOutlinedInput-input":{padding:"5px 10px"}},list:{width:250},fullList:{width:"auto"},root:{flexGrow:1},title:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},paperCat:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,position:"relative",justifyContent:"space-between",height:"calc(100% - 15px)",cursor:"pointer"},paperCatInfo:{position:"absolute",top:0,right:0},size1:{fontSize:"0.8rem"},scrollTable:{maxHeight:250,overflow:"auto",padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));g().node,g().any.isRequired,g().any.isRequired;var j=function(e){(0,o.Z)(y,e);var t,n,m=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function y(e){var t,n,a,o,s,l;return(0,r.Z)(this,y),t=m.call(this,e),(0,c.Z)((0,i.Z)(t),"interval",null),(0,c.Z)((0,i.Z)(t),"componentDidMount",(function(){t.setState({spiner:!0}),t.interval=setInterval((function(){return t.checkLogin()}),36e5),t.checkLogin(),fetch(w().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"get_cat_center",city_id:1})}).then((function(e){return e.json()})).then((function(e){t.setState({cityList:e.city_list})})).catch((function(e){})),fetch(w().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"get_points",city_id:1})}).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({points:e,point:e[0]}),setTimeout((function(){t.getCookOrders()}),500)})).catch((function(e){}))})),t.state={classes:t.props.classes,cityList:[],spiner:!1,data:[],selectedPoint:1,selectedDate:(n=new Date,a=new Date(n),o=""+(a.getMonth()+1),s=""+a.getDate(),l=a.getFullYear(),o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),[l,o,s].join("-")),points:[],point:null,activeCat:0,orders:[],orderCheck:!1,showOrder:null,openDialog:!1,delOrder:!1,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изминились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1},t}return(0,a.Z)(y,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"checkLogin",value:function(){var e=this;fetch(w().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"check_login_center",token:I.Z.getToken()})}).then((function(e){return e.json()})).then((function(t){!0===t||(localStorage.removeItem("token"),clearInterval(e.interval),setTimeout((function(){window.location.href="/auth"}),500))})).catch((function(e){}))}},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({selectedPoint:n}),setTimeout((function(){t.getCookOrders()}),500)}},{key:"getCookOrders",value:function(){var e=this;this.setState({spiner:!0}),fetch(w().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({type:"getCookOrders",point_id:this.state.selectedPoint})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({data:t}),setTimeout((function(){e.setState({spiner:!1})}),500)})).catch((function(e){}))}},{key:"render",value:function(){return u.createElement(h.Z,{container:!0,spacing:0},u.createElement(f.q,null,u.createElement("title",null,"Заказы на кухне")),u.createElement(b.Z,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},u.createElement(k.Z,{color:"inherit"})),u.createElement(h.Z,{item:!0,xs:12},this.state.cityList.length>0?u.createElement(N.h,{classes:this.state.classes,cityList:this.state.cityList,page:"OrderCook"}):null),u.createElement(h.Z,{item:!0,xs:12,style:{display:"flex",alignItems:"center",justifyContent:"center"}},u.createElement(E.Z,{className:this.state.classes.formControl},u.createElement(_.Z,null,"Точка"),u.createElement(v.Z,{value:this.state.selectedPoint,onChange:this.changePoint.bind(this)},this.state.points.map((function(e,t){return u.createElement(Z.Z,{key:t,value:e.id},e.addr)})))),u.createElement(p.Z,{variant:"contained",color:"primary",className:"btnClear",style:{padding:"2px 6px",minWidth:30},onClick:this.getCookOrders.bind(this)},u.createElement(d.Z,null))),u.createElement(h.Z,{item:!0,xs:12},u.createElement(P.Z,null,u.createElement(O.Z,null,u.createElement(T.Z,null,u.createElement(D.Z,null,u.createElement(S.Z,null,"#"),u.createElement(S.Z,null,"Тип"),u.createElement(S.Z,null,"Статус"),u.createElement(S.Z,null,"Время заказа / предзаказа"),u.createElement(S.Z,null,"Время выхода на стол"),u.createElement(S.Z,null,"Во сколько собрали"),u.createElement(S.Z,null,"Закрыли"),u.createElement(S.Z,null,"Приготовили"),u.createElement(S.Z,null,"Отдали"),u.createElement(S.Z,null,"Обещали"))),u.createElement(C.Z,null,this.state.data.ready?this.state.data.ready.map((function(e,t){return u.createElement(D.Z,{key:t,style:{backgroundColor:"green"}},u.createElement(S.Z,{style:{color:"inherit"}},e.id),u.createElement(S.Z,{style:{color:"inherit"}},e.type_order),u.createElement(S.Z,{style:{color:"inherit"}},e.status),u.createElement(S.Z,{style:{color:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.unix_start_stol_or),u.createElement(S.Z,{style:{color:"inherit"}},e.give_data_time_),u.createElement(S.Z,{style:{color:"inherit"}},e.close_date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_),u.createElement(S.Z,{style:{color:"inherit"}},e.test_time),u.createElement(S.Z,{style:{color:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.onstol?this.state.data.onstol.map((function(e,t){return u.createElement(D.Z,{key:t,style:{backgroundColor:"yellow"}},u.createElement(S.Z,{style:{color:"inherit"}},e.id),u.createElement(S.Z,{style:{color:"inherit"}},e.type_order),u.createElement(S.Z,{style:{color:"inherit"}},e.status),u.createElement(S.Z,{style:{color:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.unix_start_stol_or),u.createElement(S.Z,{style:{color:"inherit"}},e.give_data_time_),u.createElement(S.Z,{style:{color:"inherit"}},e.close_date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_),u.createElement(S.Z,{style:{color:"inherit"}},e.test_time),u.createElement(S.Z,{style:{color:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.prestol_new?this.state.data.prestol_new.map((function(e,t){return u.createElement(D.Z,{key:t},u.createElement(S.Z,{style:{color:"inherit"}},e.id),u.createElement(S.Z,{style:{color:"inherit"}},e.type_order),u.createElement(S.Z,{style:{color:"inherit"}},e.status),u.createElement(S.Z,{style:{color:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder:e.date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_start_order),u.createElement(S.Z,{style:{color:"inherit"}},e.give_data_time_),u.createElement(S.Z,{style:{color:"inherit"}},e.close_date_time_order),u.createElement(S.Z,{style:{color:"inherit"}},e.time_),u.createElement(S.Z,{style:{color:"inherit"}},e.test_time),u.createElement(S.Z,{style:{color:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null)))))}}]),y}(u.Component);function M(){var e=A();return u.createElement("div",{className:e.root},u.createElement(j,{classes:e}))}},6754:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Orders:()=>se});var r=n(5671),a=n(3144),i=n(7326),o=n(136),s=n(2963),l=n(1120),c=n(4942),u=n(7462),m=n(5987),p=n(7294),d=n(9760),h=n(282),f=n(5258),y=n(2318),g=n(366),_=n(7812),Z=n(1749),E=n(4593),v=n(65),I=n(1423),x=n(5697),w=n.n(x),b=n(9956),k=n(8286),O=n(4837),C=n(3700),S=n(5639),P=n(4436),T=n(3200),D=n(6282),N=n(8811),R=n.n(N),A=n(2692),j=n(5477),M=n(2302),B=n(9613),L=n(8222),z=n(6847),J=n(3750),W=n(7394),F=n(2663),Y=n(6856),U=n(9525),H=n(6083),q=n(553),G=n(74),K=n(2541),Q=n(8523),V=n(1257),X=n(7827),$=n(8736),ee=n(3107),te=["children","value","index"];var ne=n(7563),re=(0,d.Z)((function(e){return{root2:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"center","& > svg, form":{borderRight:"0px!important"}},root3:{"& > *":{margin:e.spacing(1),width:50},"& .MuiOutlinedInput-input":{padding:"5px 10px"}},list:{width:250},fullList:{width:"auto"},root:{flexGrow:1},title:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},paperCat:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary,position:"relative",justifyContent:"space-between",height:"calc(100% - 15px)",cursor:"pointer"},paperCatInfo:{position:"absolute",top:0,right:0},size1:{fontSize:"0.8rem"},scrollTable:{maxHeight:250,overflow:"auto",padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function ae(e){var t=e.children,n=e.value,r=e.index,a=(0,m.Z)(e,te);return p.createElement("div",(0,u.Z)({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),n===r&&p.createElement(b.Z,{p:3},t))}function ie(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),a=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[a,n,r].join("-")}ae.propTypes={children:w().node,index:w().any.isRequired,value:w().any.isRequired};var oe=function(e){(0,o.Z)(d,e);var t,n,m=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var a=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=m.call(this,e),(0,c.Z)((0,i.Z)(t),"interval",null),(0,c.Z)((0,i.Z)(t),"componentDidMount",(function(){t.interval=setInterval((function(){return t.checkLogin()}),36e5),t.checkLogin(),fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_cat_center",city_id:1})}).then((function(e){return e.json()})).then((function(e){t.setState({cityList:e.city_list}),D.Z.setAllItems(e.all_items),t.getPoints()})).catch((function(e){}))})),(0,c.Z)((0,i.Z)(t),"changeCat",(function(e,n){var r=t.state.points.find((function(e,t){return t==n}));t.setState({activeCat:n,point:r}),t.getOrders()})),(0,c.Z)((0,i.Z)(t),"changeAddr",(function(e){t.setState({typeDel:e.target.value})})),t.state={classes:t.props.classes,cityList:[],spiner:!1,selectedCity:1,selectedDate:ie(new Date),points:[],point:null,activeCat:0,orders:[],orderCheck:!1,showOrder:null,openDialog:!1,delOrder:!1,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изменились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1,number:""},t}return(0,a.Z)(d,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"checkLogin",value:function(){var e=this;fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"check_login_center",token:D.Z.getToken()})}).then((function(e){return e.json()})).then((function(t){!0===t||(localStorage.removeItem("token"),clearInterval(e.interval),setTimeout((function(){window.location.href="/auth"}),500))})).catch((function(e){}))}},{key:"handleDateChange",value:function(e){var t=this;this.setState({selectedDate:ie(e)}),setTimeout((function(){t.getOrders()}),500)}},{key:"changeCity",value:function(e){var t=this,n=e.target.value;this.setState({selectedCity:n}),setTimeout((function(){t.getPoints()}),500)}},{key:"getPoints",value:function(){var e=this;fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_points",city_id:this.state.selectedCity})}).then((function(e){return e.json()})).then((function(t){e.setState({points:t,point:t[0]}),setTimeout((function(){e.getOrders()}),500)})).catch((function(e){}))}},{key:"getOrders",value:function(){var e=this;setTimeout((function(){fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_orders",city_id:e.state.selectedCity,point_id:e.state.point.id,date:e.state.selectedDate})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({orders:t.orders}),setTimeout((function(){e.changeNumber()}),100)})).catch((function(e){}))}),500)}},{key:"getOrder",value:function(e){var t=this;fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"get_order",point_id:this.state.point.id,order_id:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),t.setState({showOrder:e,openDialog:!0})})).catch((function(e){}))}},{key:"closeDialog",value:function(){this.setState({openDialog:!1})}},{key:"closeOrder",value:function(e,t){this.setState({delOrder:!0})}},{key:"closeOrderTrue",value:function(){var e=this,t=this.state.radiogroup_options.find((function(t){return t.id==e.state.typeDel}));"4"==t.id&&(t.label=this.state.textDel),confirm("Отменить заказ #"+this.state.showOrder.order.order_id)&&fetch(R().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ne.stringify({type:"close_order_center",typeCreate:"center",user_id:D.Z.getToken(),order_id:this.state.showOrder.order.order_id,point_id:this.state.showOrder.order.point_id,ans:t.label})}).then((function(e){return e.json()})).then((function(t){console.log(t),setTimeout((function(){t.st?(e.setState({delOrder:!1,openDialog:!1}),e.getOrders()):alert(t.text)}),300)}))}},{key:"repeatOrder",value:function(){var e=[],t=D.Z.getAllItems(),n=null;localStorage.setItem("cityID",this.state.selectedCity),this.state.showOrder.order_items.map((function(r){if(n=t.find((function(e){return e.id==r.item_id}))){var a=parseInt(n.price),i=parseInt(r.count)*parseInt(n.price);e.push({name:r.name,item_id:r.item_id,count:r.count,one_price:a,all_price:i})}}));var r={orderType:parseInt(this.state.showOrder.order.type_order_)-1,orderAddr:this.state.showOrder.street.name,orderPic:parseInt(this.state.showOrder.order.point_id),orderComment:"",orderTimes:"1",orderPredDay:"",orderPredTime:"",orderPay:1==parseInt(this.state.showOrder.order.type_order_)?"cash":"in",orderSdacha:""};D.Z.saveCartData(r),this.state.showOrder.order.promo_name&&""!=this.state.showOrder.order.promo_name&&D.Z.setPromo(this.state.showOrder.promo_info,this.state.showOrder.order.promo_name),D.Z.setItems(e),setTimeout((function(){window.location.pathname="/"}),500)}},{key:"changeText",value:function(e){this.setState({textDel:e.target.value})}},{key:"changeNumber",value:function(){var e=document.querySelectorAll(".order"),t=this.state.number;0==t.length?e.forEach((function(e){e.classList.remove("dis_none")})):e.forEach((function(e){e.getAttribute("datanumber").indexOf(t)>=0?e.classList.remove("dis_none"):e.classList.add("dis_none")}))}},{key:"render",value:function(){var e=this;return p.createElement(Z.Z,{container:!0,spacing:0},p.createElement(E.q,null,p.createElement("title",null,"Оформленные заказы")),p.createElement(A.Z,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},p.createElement(j.Z,{color:"inherit"})),p.createElement(Z.Z,{item:!0,xs:12},this.state.cityList.length>0?p.createElement(ee.h,{classes:this.state.classes,cityList:this.state.cityList,page:"statOrder"}):null),p.createElement(Z.Z,{item:!0,xs:4},p.createElement(X.M,{utils:V.Z,locale:Q.Z},p.createElement(Z.Z,{container:!0,justify:"space-around",style:{alignItems:"baseline"}},p.createElement(P.Z,{className:this.state.classes.formControl},p.createElement(C.Z,null,"Город"),p.createElement(T.Z,{value:this.state.selectedCity,onChange:this.changeCity.bind(this)},this.state.cityList.map((function(e,t){return p.createElement(S.Z,{key:t,value:e.id},e.name)})))),p.createElement($.e,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",id:"date-picker-inline",label:"Дата",value:this.state.selectedDate,onChange:this.handleDateChange.bind(this),KeyboardButtonProps:{"aria-label":"change date"}})))),p.createElement(Z.Z,{item:!0,xs:3},p.createElement(k.Z,{label:"Номер телефона",style:{margin:"16px 8px 8px 8px",flex:1},value:this.state.number,onChange:function(t){return e.setState({number:t.target.value})},onBlur:this.changeNumber.bind(this)})),p.createElement(Z.Z,{item:!0,xs:12},p.createElement(f.Z,{position:"static"},p.createElement(v.Z,{value:this.state.activeCat,onChange:this.changeCat,"aria-label":"simple tabs example"},this.state.points.map((function(e,t){return p.createElement(I.Z,(0,u.Z)({label:e.addr,style:{minWidth:"auto"},key:t},{id:"simple-tab-".concat(n=t),"aria-controls":"simple-tabpanel-".concat(n)}));var n})))),this.state.points.map((function(t,n){return p.createElement(ae,{value:e.state.activeCat,index:n,key:n},p.createElement(z.Z,null,p.createElement(M.Z,null,p.createElement(J.Z,null,p.createElement(W.Z,null,p.createElement(L.Z,null,"#"),p.createElement(L.Z,null,"Оформил"),p.createElement(L.Z,null,"Телефон"),p.createElement(L.Z,null,"Адрес"),p.createElement(L.Z,null,"Оформлен"),p.createElement(L.Z,null,"Ко времени"),p.createElement(L.Z,null,"Закрыт на кухне"),p.createElement(L.Z,null,"Получен клиентом"),p.createElement(L.Z,null,"Тип"),p.createElement(L.Z,null,"Статус"),p.createElement(L.Z,null,"Сумма"),p.createElement(L.Z,null,"Оплата"),p.createElement(L.Z,null,"Курьер"))),p.createElement(B.Z,null,e.state.orders.map((function(t,n){return p.createElement(W.Z,{key:n,className:"order",id:t.id,datanumber:t.number,style:1==t.is_delete?{backgroundColor:"red",color:"#fff"}:{}},p.createElement(L.Z,{style:{color:"inherit",cursor:"pointer"},onClick:e.getOrder.bind(e,t.id)},t.id),p.createElement(L.Z,{style:{color:"inherit"}},t.type_user),p.createElement(L.Z,{style:{color:"inherit"}},t.number),p.createElement(L.Z,{style:{color:"inherit"}},t.street," ",t.home),p.createElement(L.Z,{style:{color:"inherit"}},t.date_time_order),p.createElement(L.Z,{style:{color:"inherit"}},"00:00:00"==t.date_time_preorder?"":t.date_time_preorder),p.createElement(L.Z,{style:{color:"inherit"}},"00:00:00"==t.give_data_time?"":t.give_data_time),p.createElement(L.Z,{style:{color:"inherit"}},t.close_order),p.createElement(L.Z,{style:{color:"inherit"}},t.type_order),p.createElement(L.Z,{style:{color:"inherit"}},t.status),p.createElement(L.Z,{style:{color:"inherit"}},t.order_price),p.createElement(L.Z,{style:{color:"inherit"}},t.type_pay),p.createElement(L.Z,{style:{color:"inherit"}},t.driver))}))))))}))),this.state.showOrder?p.createElement(F.Z,{onClose:this.closeDialog.bind(this),"aria-labelledby":"customized-dialog-title",className:"showOrderDialog",open:this.state.openDialog,fullWidth:!0},p.createElement(H.Z,{disableTypography:!0,style:{margin:0,padding:8}},p.createElement(y.Z,{variant:"h6"},"Заказ ",this.state.showOrder.order.order_id),p.createElement(_.Z,{"aria-label":"close",style:{position:"absolute",top:0,right:0,color:"#000"},onClick:this.closeDialog.bind(this)},p.createElement(g.Z,null))),p.createElement(U.Z,{className:"showOrderDialogContent"},p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.type_order,": ",this.state.showOrder.order.type_order_addr_new),p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.time_order_name,": ",this.state.showOrder.order.time_order),p.createElement(Z.Z,{container:!0,spacing:0},this.state.showOrder.order.number.length>1?p.createElement(Z.Z,{item:!0,xs:12},p.createElement(y.Z,{variant:"h6",component:"b"},"Телефон: "),p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.number)):null),this.state.showOrder.order.delete_reason.length>0?p.createElement(y.Z,{variant:"h6",component:"span",style:{color:"red"}},"Удален: ",this.state.showOrder.order.date_time_delete):null,this.state.showOrder.order.delete_reason.length>0?p.createElement(y.Z,{variant:"h6",component:"span",style:{color:"red"}},this.state.showOrder.order.delete_reason):null,1==parseInt(this.state.showOrder.order.is_preorder)?null:p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.text_time,this.state.showOrder.order.time_to_client),p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.textTime),p.createElement(Z.Z,{container:!0,spacing:0},null==this.state.showOrder.order.promo_name||0==this.state.showOrder.order.promo_name.length?null:p.createElement(p.Fragment,null,p.createElement(Z.Z,{item:!0,xs:12},p.createElement(y.Z,{variant:"h6",component:"b"},"Промокод: "),p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.promo_name)),p.createElement(Z.Z,{item:!0,xs:12},p.createElement(y.Z,{variant:"h6",component:"span",className:"noSpace"},this.state.showOrder.order.promo_text))),null==this.state.showOrder.order.comment||0==this.state.showOrder.order.comment.length?null:p.createElement(Z.Z,{item:!0,xs:12},p.createElement(y.Z,{variant:"h6",component:"b"},"Комментарий: "),p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.comment)),null==this.state.showOrder.order.sdacha||0==parseInt(this.state.showOrder.order.sdacha)?null:p.createElement(Z.Z,{item:!0,xs:12},p.createElement(y.Z,{variant:"h6",component:"b"},"Сдача: "),p.createElement(y.Z,{variant:"h6",component:"span"},this.state.showOrder.order.sdacha))),p.createElement("table",{className:"tableOrderCheck"},p.createElement("tbody",null,this.state.showOrder.order_items.map((function(e,t){return p.createElement("tr",{key:t},p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"},e.name)),p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"},e.count)),p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"},e.price," р")))})),1==parseInt(this.state.showOrder.order.type_order_)?p.createElement("tr",null,p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"},"Доставка")),p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"})),p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"},this.state.showOrder.order.sum_div," р"))):null),p.createElement("tfoot",null,p.createElement("tr",null,p.createElement("th",{style:{textAlign:"left"}},p.createElement(y.Z,{variant:"h5",component:"span"},"Сумма закза")),p.createElement("td",null,p.createElement(y.Z,{variant:"h5",component:"span"})),p.createElement("th",{style:{textAlign:"left"}},p.createElement(y.Z,{variant:"h5",component:"span"},this.state.showOrder.order.sum_order," р")))))),0==parseInt(this.state.showOrder.order.is_delete)&&6!==parseInt(this.state.showOrder.order.status_order)?p.createElement(Y.Z,{style:{justifyContent:"flex-end",padding:"15px 0px"}},p.createElement(O.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.closeOrder.bind(this,this.state.showOrder.order.order_id,this.state.showOrder.order.point_id)},"Отменить заказ"))):null,1==parseInt(this.state.showOrder.order.is_delete)||6==parseInt(this.state.showOrder.order.status_order)?p.createElement(Y.Z,{style:{justifyContent:"flex-end",padding:"15px 0px"}},p.createElement(O.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.repeatOrder.bind(this,this.state.showOrder.order.order_id,this.state.showOrder.order.point_id)},"Повторить заказ"))):null):null,this.state.showOrder?p.createElement(F.Z,{open:this.state.delOrder,onClose:function(){e.setState({delOrder:!1})},"aria-labelledby":"form-dialog-title"},p.createElement(H.Z,{disableTypography:!0,style:{margin:0,padding:8}},p.createElement(y.Z,{variant:"h6"},"Отмена заказа ",this.state.showOrder.order.order_id),p.createElement(_.Z,{"aria-label":"close",style:{position:"absolute",top:0,right:0,color:"#000"},onClick:function(){e.setState({delOrder:!1})}},p.createElement(g.Z,null))),p.createElement(U.Z,null,p.createElement(P.Z,{component:"fieldset"},p.createElement(K.Z,{name:"typeDel",value:this.state.typeDel,onChange:this.changeAddr},this.state.radiogroup_options.map((function(e,t){return p.createElement(q.Z,{key:t,value:e.id,control:p.createElement(G.Z,null),label:e.label})})))),p.createElement(k.Z,{onFocus:function(){e.setState({typeDel:"4"})},value:this.state.textDel,onChange:this.changeText.bind(this),margin:"dense",id:"name",label:"Причина отмены",type:"text",fullWidth:!0})),p.createElement(Y.Z,{style:{paddingBottom:24}},p.createElement(O.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:function(){e.setState({delOrder:!1})}},"К заказу")),p.createElement(O.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(h.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.closeOrderTrue.bind(this)},"Отменить заказ")))):null)}}]),d}(p.Component);function se(){var e=re();return p.createElement("div",{className:e.root},p.createElement(oe,{classes:e}))}},5798:(e,t,n)=>{"use strict";var r=n(7294),a=n(3935),i=n(3727),o=n(7462),s=n(5861),l=n(5671),c=n(3144),u=n(7326),m=n(136),p=n(2963),d=n(1120),h=n(4942),f=n(7757),y=n.n(f),g=n(6010),_=n(9760),Z=n(5834),E=n(2112),v=n(9956),I=n(5258),x=n(8358),w=n(2822),b=n(2318),k=n(5517),O=n(7812),C=n(9009),S=n(3832),P=n(1749),T=n(9659),D=n(8884),N=n(9875),R=n(8825),A=n(998),j=n(5757),M=n(8135),B=n(743),L=n(1201),z=n(4566),J=n(7850),W=n(3457),F=n(5977),Y=n(8286),U=n(5431),H=n(5152),q=n.n(H);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=n(7563),V=(0,J.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}});function X(){return r.createElement(b.Z,{variant:"body2",color:"textSecondary",align:"center"},"Copyright © ",r.createElement(T.Z,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var $=(0,_.Z)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:K({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:(0,h.Z)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),width:"100%"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}})),ee=function(e){(0,m.Z)(_,e);var t,n,a,f=(n=_,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(n);if(a){var r=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function _(e){var t;return(0,l.Z)(this,_),t=f.call(this,e),(0,h.Z)((0,u.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Q.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",open:!1,menu:[],full_menu:[]},t}return(0,c.Z)(_,[{key:"componentDidMount",value:(t=(0,s.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({menu:t.info.left_menu,full_menu:t.info.full_menu});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return r.createElement(r.Fragment,null,r.createElement(I.Z,{className:(0,g.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},r.createElement(x.Z,{className:this.state.classes.toolbar},r.createElement(O.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,g.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},r.createElement(D.Z,null)),r.createElement(b.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:this.state.classes.title},"Dashboard"),r.createElement(O.Z,{color:"inherit"},r.createElement(C.Z,{badgeContent:4,color:"secondary"},r.createElement(R.Z,null))))),r.createElement(E.ZP,{variant:"persistent",classes:{paper:(0,g.Z)(this.state.classes.drawerPaper,!this.state.open&&this.state.classes.drawerPaperClose)},open:this.state.open},r.createElement("div",{className:this.state.classes.toolbarIcon},r.createElement(U.ZP,{size:"small",options:this.state.full_menu,getOptionLabel:function(e){return e.name},onChange:function(t,n){n&&e.state.history.push("/"+n.key_query+"/")},style:{width:300},renderInput:function(e){return r.createElement(Y.Z,(0,o.Z)({},e,{label:"Поиск",variant:"outlined"}))}}),r.createElement(O.Z,{onClick:this.handleDrawerClose.bind(this)},r.createElement(N.Z,null))),r.createElement(k.Z,null),this.state.menu.map((function(t,n){return r.createElement(M.Z,{key:n},r.createElement(B.Z,{expandIcon:r.createElement(z.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.createElement(b.Z,{className:e.state.classes.heading},t.parent.name)),r.createElement(L.Z,null,r.createElement(w.Z,{style:{width:"100%"}},t.chaild.map((function(e,t){return r.createElement(A.Z,{button:!0,key:t},r.createElement(i.OL,{to:"/"+e.key_query+"/"},r.createElement(j.Z,{primary:e.name})))})))))}))))}}]),_}(r.Component);function te(e){var t=e.code,n=e.children;return r.createElement(F.AW,{render:function(e){var r=e.staticContext;return r&&(r.status=t),n}})}function ne(){var e=$(),t=(0,F.k6)();return r.createElement(W.Z,{theme:V},r.createElement("div",{className:e.root},r.createElement(Z.ZP,null),r.createElement(ee,{classes:e,history:t}),r.createElement("main",{className:e.content},r.createElement("div",{className:e.appBarSpacer}),r.createElement(S.Z,{maxWidth:!1,className:e.container},r.createElement(F.rs,null,q().map((function(e,t){return r.createElement(F.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),r.createElement(F.AW,{component:function(){return r.createElement(te,{code:404},r.createElement(P.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},r.createElement(P.Z,{item:!0,xs:12},r.createElement(b.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}})),r.createElement(v.Z,{pt:4},r.createElement(X,null))))))}a.render(r.createElement(i.VK,null,r.createElement(ne,null)),document.getElementById("app"))},8811:e=>{e.exports={urlApi:"https://jacochef.ru/api/site/test_app.php"}},6282:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(3433),a=n(5671),i=n(3144),o=n(4942),s=n(8949),l=n(8),c=n.n(l),u=n(8811),m=n.n(u),p=n(7563);(0,s.jQ)({enforceActions:"never",useProxies:"ifavailable"});var d=new(function(){function e(){var t=this;if((0,a.Z)(this,e),(0,o.Z)(this,"items",""),(0,o.Z)(this,"itemsPromo",""),(0,o.Z)(this,"promoName",""),(0,o.Z)(this,"allItems",""),(0,o.Z)(this,"allItemsCat",""),(0,o.Z)(this,"banners",""),(0,o.Z)(this,"AllPrice",0),(0,o.Z)(this,"sum_div",0),(0,o.Z)(this,"cityName",0),(0,o.Z)(this,"cityNameRU",""),(0,o.Z)(this,"promo",null),(0,o.Z)(this,"userToken",null),(0,o.Z)(this,"userName",""),(0,o.Z)(this,"activePage",""),(0,o.Z)(this,"need_dops",""),(0,o.Z)(this,"free_items",""),(0,o.Z)(this,"cart_data",""),(0,o.Z)(this,"typeOrder",0),(0,o.Z)(this,"clientNumber",""),(0,o.Z)(this,"clear",!1),(0,o.Z)(this,"MyPromos",""),(0,o.Z)(this,"updateMyPromos",""),(0,o.Z)(this,"dateTimeDel",null),(0,o.Z)(this,"free_drive",0),(0,o.Z)(this,"setMyPromos",(function(e){t.MyPromos=JSON.stringify(e),t.updateMyPromos=new Date,localStorage.setItem("MyPromos",JSON.stringify(e))})),(0,o.Z)(this,"setSumDiv",(function(e){t.sum_div=parseInt(e)})),(0,o.Z)(this,"setDops",(function(e){t.need_dops=JSON.stringify(e)})),(0,o.Z)(this,"setFreeItems",(function(e){t.free_items=JSON.stringify(e)})),(0,o.Z)(this,"setCityRU",(function(e){t.cityNameRU=e})),(0,o.Z)(this,"setCity",(function(e){t.cityName=e})),(0,o.Z)(this,"setAllPrice",(function(e){t.AllPrice=e})),(0,o.Z)(this,"setPage",(function(e){t.activePage=e})),(0,o.Z)(this,"setToken",(function(e,n){t.userToken=e,t.setUserName(n),"undefined"!=typeof window&&localStorage.setItem("token",e)})),(0,o.Z)(this,"setPromo",(function(e,n){t.promo=e,localStorage.setItem("promo_name",n)})),(0,o.Z)(this,"setItemsPromo",(function(e){t.itemsPromo=JSON.stringify(e)})),(0,o.Z)(this,"setAllItemsCat",(function(e){t.allItemsCat=JSON.stringify(e)})),(0,o.Z)(this,"setItems",(function(e){var n=0,r=0,a=t.getItemsPromo();if(r=e.reduce((function(e,t){return e+parseInt(t.all_price)}),n),n=0,r+=a.reduce((function(e,t){return e+parseInt(t.all_price)}),n),t.setAllPrice(r),t.items=JSON.stringify(e),"undefined"!=typeof window){var i=e.filter((function(e){return e.count>0}));i=JSON.stringify(i),localStorage.setItem("my_cart",i)}})),(0,o.Z)(this,"saveCartData",(function(e){var n=JSON.stringify(e);t.cart_data=n,"undefined"!=typeof window&&localStorage.setItem("cartData",n)})),(0,o.Z)(this,"setAllItems",(function(e){t.allItems=JSON.stringify(e),t.checkCart()})),"undefined"!=typeof window){if(localStorage.getItem("my_cart")){var n=JSON.parse(localStorage.getItem("my_cart")),r=(this.getAllItems(),[]);n.forEach((function(e){r.push({name:e.name,item_id:e.item_id,count:e.count,one_price:parseInt(e.one_price),all_price:parseInt(e.one_price)*parseInt(e.count)})})),this.setItems(r)}localStorage.getItem("token")&&this.setToken(localStorage.getItem("token")),localStorage.getItem("cartData")&&(this.cartData=localStorage.getItem("cartData")),localStorage.getItem("promo_name")&&setTimeout((function(){t.getInfoPromo(localStorage.getItem("promo_name"))}),300),localStorage.getItem("MyPromos")&&localStorage.getItem("MyPromos").length>0&&this.setMyPromos(JSON.parse(localStorage.getItem("MyPromos"),!0))}(0,s.ky)(this)}return(0,i.Z)(e,[{key:"getMyPromos",value:function(){return 0==this.MyPromos.length?[]:JSON.parse(this.MyPromos,!0)}},{key:"getSumDiv",value:function(){return this.sum_div}},{key:"getDops",value:function(){return 0==this.need_dops.length?[]:JSON.parse(this.need_dops,!0)}},{key:"getFreeItems",value:function(){return 0==this.free_items.length?[]:JSON.parse(this.free_items,!0)}},{key:"getCityRU",value:function(){return this.cityNameRU&&this.cityNameRU.length>0?this.cityNameRU:"Город"}},{key:"getCity",value:function(){return this.cityName}},{key:"getAllPrice",value:function(){return this.AllPrice}},{key:"getPage",value:function(){return this.activePage}},{key:"getUserName",value:function(){return this.userName&&this.userName.length>0?this.userName:""}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getToken",value:function(){return this.userToken}},{key:"getInfoPromo",value:function(e){fetch(m().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:p.stringify({type:"get_promo",city_id:d.getCity(),promo_name:e})}).then((function(e){return e.json()})).then((function(t){console.log(t),d.setPromo(JSON.stringify(t),e),!1===d.checkPromo().st&&localStorage.removeItem("promo_name")}))}},{key:"getPromo",value:function(){return JSON.parse(this.promo,!0)}},{key:"checkPromo",value:function(){var e=d.getCartData();d.setItemsPromo([]);var t=0,n=0,r=e.orderTimes&&1!=parseInt(e.orderTimes)?e.orderPredDay+" "+e.orderPredTime:0,a=this.getPromo(),i=this.getItems(),o=this.getAllItems(),s=[];i.forEach((function(e,t){s.push({name:e.name,item_id:e.item_id,count:e.count,one_price:e.one_price,all_price:parseInt(e.one_price)*parseInt(e.count)})})),i=s,this.setItems(i);var l=[];n=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t);var u,m,p=0,h=0,f=0;(e.orderType||0==e.orderType)&&(p=null!==(u=parseInt(e.orderType))&&void 0!==u?u:0,h=e.orderAddr?parseInt(e.orderAddr.point_id):0,f=null!==(m=parseInt(e.orderPic))&&void 0!==m?m:0);var y="",g="",_="";if(0==r?(y=c()(new Date).tz("Europe/Samara").format("YYYY-MM-DD"),g=c()(new Date).tz("Europe/Samara").format("H:mm"),_=parseInt(c()(new Date).tz("Europe/Samara").format("E"))):(y=c()(r).tz("Europe/Samara").format("YYYY-MM-DD"),g=c()(r).tz("Europe/Samara").format("H:mm"),_=parseInt(c()(r).tz("Europe/Samara").format("E"))),a){if(!a.status_promo)return{st:!1,text:"Промокод не найден или уже активирован"};if(a.limits.date.min&&a.limits.date.max&&!(y>=a.limits.date.min&&y<=a.limits.date.max))return{st:!1,text:"Действует с "+a.limits.date.min+" по "+a.limits.date.max+" "+a.promo_text.false};if(0!=a.limits.time.min&&0!=a.limits.time.max&&!(g>=a.limits.time.min&&g<=a.limits.time.max))return{st:!1,text:g+" Действует с "+a.limits.time.min+" по "+a.limits.time.max+" "+a.promo_text.false};if(0!=a.limits.point_id&&!(0==p&&h==a.limits.point_id||1==p&&f==a.limits.point_id))return{st:!1,text:"Адрес для доставки или самовывоза указан некорректно. Проверьте правильность введённых данных."};if(!(0==a.limits.summ.min&&0==a.limits.summ.max||n>=a.limits.summ.min&&(a.limits.summ.max>=n||0==a.limits.summ.max)))return{st:!1,text:"Сумма от "+a.limits.summ.min+" до "+a.limits.summ.max+"  Общая сумма вашего заказа превышает допустимую стоимость для применения промокода."};if(a.limits.dows&&0==parseInt(a.limits.dows[_]))return{st:!1,text:"Указанный вами день недели недоступен для применения промокода. Пожалуйста, выберите другую дату."};if(a.limits.type_order&&!(1==parseInt(a.limits.type_order)||3==parseInt(a.limits.type_order)&&0==p||2==parseInt(a.limits.type_order)&&1==p))return{st:!1,text:"Действует "+(1==parseInt(a.limits.type_order)?"Все типы заказов":2==parseInt(a.limits.type_order)?"Только самовывоз":4==parseInt(a.limits.type_order)?"Только доставка":"Только в зале")};if(a.limits.only_kassa&&1==parseInt(a.limits.only_kassa))return{st:!1,text:"Указанный вами промокод действителен только при оплате на кассе."};if(a.limits.items.length>0){var Z=null,E=null;if(a.limits.items.map((function(e){Z=s.find((function(t){return t.item_id==e}));var t=o.find((function(t){return t.id==e}));t&&t.name&&(E+=t.name+", ",Z&&t++)})),0!=a.limits.items.length)return{st:!1,text:"Позиции, которые должны быть в корзине: "+E}}d.free_drive=parseInt(a.limits.free_drive);var v=0,I=0,x=null;return 1==parseInt(a.promo_action)?(1==parseInt(a.sale.cat_sale)&&(I=parseInt(a.sale.count_sale),i.forEach((function(e,t){x=o.find((function(t){return t.id==e.item_id})),3!=parseInt(x.type)&&4!=parseInt(x.type)&&a.sale.sale_action.forEach((function(n){parseInt(e.item_id)==parseInt(n)&&(1==parseInt(a.sale.type_price)?I>0&&((v=parseInt(e.one_price)*parseInt(e.count)-parseInt(I))<=0&&(v=1),I-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=v):(v=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(I),i[t].all_price=parseInt(v)))}))}))),2==parseInt(a.sale.cat_sale)&&(I=parseInt(a.sale.count_sale),i.forEach((function(e,t){x=o.find((function(t){return t.id==e.item_id})),3!=parseInt(x.type)&&4!=parseInt(x.type)&&a.sale.sale_action.forEach((function(n){parseInt(x.cat_id)==parseInt(n)&&(1==parseInt(a.sale.type_price)?I>0&&((v=parseInt(e.one_price)*parseInt(e.count)-parseInt(I))<=0&&(v=1),I-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=v):(v=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(I),i[t].all_price=parseInt(v)))}))}))),3==parseInt(a.sale.cat_sale)&&(I=parseInt(a.sale.count_sale),i.forEach((function(e,t){x=o.find((function(t){return t.id==e.item_id})),3!=parseInt(x.type)&&4!=parseInt(x.type)&&(1==parseInt(a.sale.type_price)?I>0&&((v=parseInt(e.one_price)*parseInt(e.count)-parseInt(I))<=0&&(v=1),I-=parseInt(e.one_price)*parseInt(e.count),i[t].all_price=v):(v=parseInt(e.all_price)-parseInt(e.all_price)/100*parseInt(I),i[t].all_price=parseInt(v)))}))),t=0,n=0,n=i.reduce((function(e,t){return e+t.all_price}),t),d.setAllPrice(n),{st:!0,text:a.promo_text.true}):(2==parseInt(a.promo_action)&&(a.items_add.forEach((function(e){x=o.find((function(t){return t.id==e.item_id})),l.push({item_id:e.item_id,count:e.count,one_price:x.price,all_price:e.price})})),t=0,n=0,n=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),t=0,n+=l.reduce((function(e,t){return e+parseInt(t.all_price)}),t),d.setItemsPromo(l),d.setAllPrice(n)),3==parseInt(a.promo_action)&&a.items_on_price.length>0&&(i.forEach((function(e,t){a.items_on_price.forEach((function(n){parseInt(e.item_id)==parseInt(n.id)&&(i[t].new_one_price=parseInt(n.price),i[t].all_price=parseInt(n.price)*parseInt(e.count))}))})),t=0,n=0,n=i.reduce((function(e,t){return e+parseInt(t.all_price)}),t),d.setAllPrice(n)),this.setItems(i),{st:!0,text:a.promo_text.true})}return{st:!1,text:"Промокод не найден",test:a}}},{key:"getItemsPromo",value:function(){return 0==this.itemsPromo.length?[]:JSON.parse(this.itemsPromo,!0)}},{key:"getAllItemsCat",value:function(){return 0==this.allItemsCat.length?[]:JSON.parse(this.allItemsCat,!0)}},{key:"getCartData",value:function(){if("undefined"!=typeof window)return localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[]}},{key:"checkCart",value:function(){var e=this.getItems(),t=this.getAllItems(),n=[];e.forEach((function(e){var r=t.find((function(t){return parseInt(t.id)==parseInt(e.item_id)}));n.push({name:e.name,item_id:e.item_id,count:e.count,one_price:parseInt(r.price),all_price:parseInt(r.price)*parseInt(e.count)})})),this.setItems(n)}},{key:"getItems",value:function(){return 0==this.items.length?[]:JSON.parse(this.items,!0)}},{key:"getAllItems",value:function(){return 0==this.allItems.length?[]:JSON.parse(this.allItems,!0)}},{key:"AddItem",value:function(e){var t=d.getItems(),n=d.getAllItems(),r=d.getPromo(),a=d.getFreeItems();if(!(n.length>0))return 0;var i=t.find((function(t){return t.item_id==e})),o=0;i&&(o=parseInt(i.count));var s=n.find((function(t){return t.id==e}));if(s){var l=o+1,c=parseInt(s.price),u=d.check_max_count(parseInt(e));if(parseInt(u)>=l){var m=a.filter((function(t){return parseInt(t.this_item_id)==parseInt(e)&&1==parseInt(t.is_add)}));return t.some((function(t){return parseInt(t.item_id)==parseInt(e)}))?t.forEach((function(n,r){parseInt(n.item_id)==parseInt(e)&&(t[r].count=l,t[r].all_price=l*c)})):t.push({name:s.name,item_id:e,count:l,one_price:c,all_price:l*c}),m.map((function(e){var r=n.find((function(t){return parseInt(t.id)==parseInt(e.item_id)}));r&&(t.some((function(t){return parseInt(t.item_id)==parseInt(e.item_id)}))?t.forEach((function(n,r){parseInt(n.item_id)==parseInt(e.item_id)&&(t[r].count=parseInt(e.count)*l,t[r].all_price=0)})):t.push({name:r.name,item_id:e.item_id,count:parseInt(e.count)*l,one_price:0,all_price:0}))})),d.setItems(t),r&&d.checkPromo(),l}return l-1}}},{key:"AddCountItem",value:function(e,t){var n=d.getItems(),r=d.getAllItems(),a=d.getPromo();if(!(r.length>0))return 0;var i=n.find((function(t){return parseInt(t.item_id)==parseInt(e)}));i&&parseInt(i.count);var o=r.find((function(t){return parseInt(t.id)==parseInt(e)}));if(o){var s=parseInt(t),l=parseInt(o.price),c=d.check_max_count(parseInt(e));return parseInt(c)>=s?(n.some((function(t){return parseInt(t.item_id)==parseInt(e)}))?n.forEach((function(t,r){t.item_id==e&&(n[r].count=s,n[r].all_price=s*l)})):n.push({name:o.name,item_id:e,count:s,one_price:l,all_price:s*l}),d.setItems(n),a&&d.checkPromo(),s):s-1}}},{key:"MinusItem",value:function(e){var t=d.getItems(),n=d.getAllItems(),r=d.getPromo();if(n.length>0){var a=t.find((function(t){return t.item_id==e}));if(!a)return 0;var i=n.find((function(t){return t.id==e})),o=parseInt(a.count)-1,s=i.price;o<=0&&(o=0);var l=0,c=d.getFreeItems();if(o>=0){var u=c.filter((function(t){return parseInt(t.this_item_id)==parseInt(e)&&1==parseInt(t.is_add)}));t.map((function(n,r){n.item_id==e&&(t[r].count=o,t[r].all_price=o*s)})),d.setItems(t),setTimeout((function(){t.map((function(e,n){l=d.check_max_count(e.item_id),parseInt(l)<0&&(t[n].count=parseInt(e.count)+parseInt(l),t[n].all_price=(parseInt(e.count)+parseInt(l))*parseInt(e.one_price))})),u.map((function(e){var r=n.find((function(t){return parseInt(t.id)==parseInt(e.item_id)}));r&&(t.some((function(t){return parseInt(t.item_id)==parseInt(e.item_id)}))?t.forEach((function(n,r){parseInt(n.item_id)==parseInt(e.item_id)&&(t[r].count=parseInt(e.count)*o,t[r].all_price=0)})):t.push({name:r.name,item_id:e.item_id,count:parseInt(e.count)*o,one_price:0,all_price:0}))})),d.setItems(t)}),300)}return r&&d.checkPromo(),o}return 0}},{key:"delItem",value:function(e){var t=d.getItems(),n=d.getAllItems(),r=d.getPromo();if(n.length>0){if(!t.find((function(t){return t.item_id==e})))return 0;var a=n.find((function(t){return t.id==e})),i=0,o=a.price;if(i<=0&&(i=0),i>=0){t.map((function(n,r){n.item_id==e&&(t[r].count=i,t[r].all_price=i*o)})),d.setItems(t);var s=0;setTimeout((function(){t.map((function(e,n){s=d.check_max_count(e.item_id),parseInt(s)<0&&(t[n].count=parseInt(e.count)+parseInt(s),t[n].all_price=(parseInt(e.count)+parseInt(s))*parseInt(e.one_price))})),d.setItems(t)}),300)}return r&&d.checkPromo(),i}return 0}},{key:"check_need_dops",value:function(){var e=d.getItems(),t=d.getAllItems();if(!t||0==t.length)return[];var n=0,a=0,i=d.getDops();if(0==i.length)return[];e.forEach((function(e){var r=t.find((function(t){return t.id==e.item_id}));if(!r)return[];14==parseInt(r.cat_id)?n+=parseInt(e.count):14!==parseInt(r.cat_id)&&5!==parseInt(r.cat_id)&&6!==parseInt(r.cat_id)&&7!==parseInt(r.cat_id)&&(a+=parseInt(e.count))}));var o=[];a>0&&0==n&&(o=i.rolls),0==a&&n>0&&(o=i.pizza),a>0&&n>0&&(o=[].concat((0,r.Z)(i.rolls),(0,r.Z)(i.pizza))),0==a&&0==n&&(o=[].concat((0,r.Z)(i.rolls),(0,r.Z)(i.pizza)));var s=[],l=[];return e.forEach((function(e){var n=t.find((function(t){return t.id==e.item_id}));if(!n)return[];7==parseInt(n.cat_id)&&s.push(n)})),s.forEach((function(e){var t=!1;o.forEach((function(n){parseInt(n.id)==parseInt(e.id)&&(t=!0)})),t||l.push(e)})),o=[].concat((0,r.Z)(o),l)}},{key:"check_max_count",value:function(e){var t=[],n=[],a=d.getItems(),i=d.getItemsPromo(),o=d.getFreeItems(),s=d.getAllItems(),l=s.find((function(t){return parseInt(t.id)==parseInt(e)}));if(3!=parseInt(l.type)||17!==parseInt(l.id)&&237!==parseInt(l.id))return 99;if(!o)return 99;var c=0;a.forEach((function(e,r){var a=s.find((function(t){return parseInt(t.id)==parseInt(e.item_id)})),i=o.find((function(t){return parseInt(t.this_item_id)==parseInt(e.item_id)}));i&&i.max_count&&3!=parseInt(a.type)&&parseInt(i.max_count),17!=parseInt(a.id)&&237!=parseInt(a.id)||(c+=parseInt(e.count)),o.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),i.forEach((function(e,r){var a=s.find((function(t){return parseInt(t.id)==parseInt(e.item_id)})),i=o.find((function(t){return parseInt(t.this_item_id)==parseInt(e.item_id)}));i&&i.max_count&&3!=parseInt(a.type)&&parseInt(i.max_count),17!=parseInt(a.id)&&237!=parseInt(a.id)||(c+=parseInt(e.count)),o.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),n=(0,r.Z)(new Set(n));var u=[];n.forEach((function(e,n){t.forEach((function(t){if(parseInt(e)==parseInt(t.item_id)){var n=!1;u.forEach((function(r,a){parseInt(r.item_id)==parseInt(e)&&(n=!0,u[a].count+=t.count_in_cart*t.max_count)})),n||u.push({item_id:parseInt(e),count_in_cart:t.count_in_cart,count:t.count_in_cart*t.max_count})}}))}));var m=99;return u.length>0&&(m=u.find((function(e){return 17==parseInt(e.item_id)})))&&(m=parseInt(m.count),c>=m)?m-c:m}},{key:"check_max_count_old",value:function(e){var t=[],n=[],a=d.getItems(),i=d.getFreeItems();if(!i)return 99;a.forEach((function(e,r){i.forEach((function(r){parseInt(e.item_id)==parseInt(r.this_item_id)&&(r.count_in_cart=parseInt(e.count),t.push(r),n.push(parseInt(r.item_id)))}))})),n=(0,r.Z)(new Set(n));var o=[];n.forEach((function(e,n){t.forEach((function(t){if(parseInt(e)==parseInt(t.item_id)){var n=!1;o.forEach((function(r,a){parseInt(r.item_id)==parseInt(e)&&(n=!0,o[a].count+=t.count_in_cart*t.max_count)})),n||o.push({item_id:parseInt(e),count:t.count_in_cart*t.max_count})}}))}));var s=99;return o.forEach((function(t){parseInt(t.item_id)==parseInt(e)&&(s=parseInt(t.count))})),s}}]),e}());const h=d},8293:(e,t,n)=>{var r={"./ru":1793,"./ru.js":1793};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=8293}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.c507bcd23507787bb4bc.js.map