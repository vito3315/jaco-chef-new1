(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[179],{5152:(e,t,a)=>{var n=a(7227).Home,s=a(8433).Auth,i=a(9546).Reg,r=a(9347).LiveOrders,l=a(5650).Events,o=a(7307).RasByBill,c=a(3670).CategoryItems,m=a(432).VendorModule,u=a(8669).VendorItemPrice,d=a(3066).Tender,h=a(5012),p=h.Revizion,f=h.RevizionNew,g=a(3223).WorkSchedule,Z=a(4631),_=Z.SiteSale2,E=Z.SiteSale2_New,v=Z.SiteSale2_Edit,y=Z.SiteSale2_Stat,b=Z.SiteSale2_StatList,w=a(672).DriveMapStatAll,x=a(2156).DriverStat,k=a(8159).Concenter,S=a(964).SocialNetwork,D=a(710).CatWork,I=a(1500).AppWorkPoint,C=a(630).AppWork,P=a(7847).AppWorkShow,T=a(1714).SiteStatMarc;e.exports=[{path:"/",exact:!0,component:n,title:"Главная",code:200},{path:"/auth",exact:!0,component:s,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:i,title:"Регистрация",code:200},{path:"/live_orders",exact:!0,component:r,title:"Оформленные заказы",code:200},{path:"/events",exact:!0,component:l,title:"События",code:200},{path:"/ras_by_bill",exact:!0,component:o,title:"Расход по накладным",code:200},{path:"/category_items",exact:!0,component:c,title:"Категории товаров",code:200},{path:"/vendor_module",exact:!0,component:m,title:"Поставщики",code:200},{path:"/vendor_item_price",exact:!0,component:u,title:"Цены на товары поставщика",code:200},{path:"/tender",exact:!0,component:d,title:"Цены на товары поставщика",code:200},{path:"/revizion",exact:!0,component:p,title:"Ревизия",code:200},{path:"/revizion/new",exact:!0,component:f,title:"Новая ревизия",code:200},{path:"/work_schedule",exact:!0,component:g,title:"График работы",code:200},{path:"/site_sale_2",exact:!0,component:_,title:"Промокоды маркетолога",code:200},{path:"/site_sale_2/new",exact:!0,component:E,title:"Промокоды маркетолога",code:200},{path:"/site_sale_2/edit/:promoId",exact:!0,component:v,title:"Промокоды маркетолога",code:200},{path:"/site_sale_2/stat",exact:!0,component:y,title:"Промокоды маркетолога",code:200},{path:"/site_sale_2/stat_list",exact:!0,component:b,title:"Выписанные промики",code:200},{path:"/drive_map_stat_all",exact:!0,component:w,title:"Курьеры на карте",code:200},{path:"/driver_stat",exact:!0,component:x,title:"Статистика курьеров",code:200},{path:"/concenter",exact:!0,component:k,title:"Контакт-центр",code:200},{path:"/socialnetwork",exact:!0,component:S,title:"Социальные сети",code:200},{path:"/cat_work",exact:!0,component:D,title:"Категории уборок",code:200},{path:"/app_work_point",exact:!0,component:I,title:"Уборки на точке",code:200},{path:"/app_work",exact:!0,component:C,title:"Время уборок",code:200},{path:"/app_work_show",exact:!0,component:P,title:"Просмотр уборок",code:200},{path:"/site_stat_marc",exact:!0,component:T,title:"Статистика маркетолога",code:200}]},630:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppWork:()=>j});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(4603),v=a(9062),y=a(4666),b=a(3447),w=a(7750),x=a(7645),k=a(9573),S=a(8732),D=a(6926),I=a(6011),C=a(3694),P=a(2440),T=a(799),A=a(9334),N=a(594),R=a(2961),O=a(6406);var M=a(7563),L=(0,g.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),B=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:L.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),F=function(e){(0,l.Z)(j,e);var t,a,u,p,f,g,L,B,F=(L=j,B=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(L);if(B){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function j(e){var t;return(0,s.Z)(this,j),t=F.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:M.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"app_work",module_name:"",is_load:!1,items:[],items_min:[],modalDialog:!1,modalDialogNew:!1,dows:[{id:1,name:"Понедельник"},{id:2,name:"Вторник"},{id:3,name:"Среда"},{id:4,name:"Четверг"},{id:5,name:"Пятница"},{id:6,name:"Суббота"},{id:7,name:"Воскресенье"},{id:10,name:"Другое"},{id:11,name:"Каждый день"},{id:12,name:"Каждый день в конце смены"},{id:13,name:"Ручное добавление"},{id:14,name:"После выполнение уборки"}],types:[{id:0,name:"Другое"},{id:1,name:"Только 1 активная"},{id:2,name:"Добавление без ограничений"}],itemsEdit:null,nameWork:"",itemsNew:null,chengeItem1:null,chengeItemNew1:null},t}return(0,i.Z)(j,[{key:"componentDidMount",value:(g=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:(t=e.sent).items.map((function(e,n){t.items[n].dow_name=a.state.dows.find((function(t){return parseInt(t.id)==parseInt(e.dow)})).name})),this.setState({module_name:t.module_info.name,items:t.items,items_min:t.items_min}),document.title=t.module_info.name;case 6:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"openCat",value:function(e){this.setState({modalDialog:!0,showCat:e,nameCat:e.name,editText:e.text})}},{key:"saveEdit",value:(f=(0,n.Z)(d().mark((function e(){var t,a,n,s=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={work:this.state.itemsEdit.item,times_add:this.state.itemsEdit.times_add,times_close:this.state.itemsEdit.times_close},e.next=3,this.getData("save_edit",t);case 3:if(a=e.sent,console.log(a),!1!==a.st){e.next=9;break}alert(a.text),e.next=15;break;case 9:return this.setState({modalDialog:!1,itemsEdit:null,nameWork:""}),e.next=12,this.getData("get_all");case 12:(n=e.sent).items.map((function(e,t){n.items[t].dow_name=s.state.dows.find((function(t){return parseInt(t.id)==parseInt(e.dow)})).name})),this.setState({items:n.items,items_min:n.items_min});case 15:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"saveNew",value:(p=(0,n.Z)(d().mark((function e(){var t,a,n,s=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={work:this.state.itemsNew.item,times_add:this.state.itemsNew.times_add,times_close:this.state.itemsNew.times_close},e.next=3,this.getData("save_new",t);case 3:if(a=e.sent,console.log(a),!1!==a.st){e.next=9;break}alert(a.text),e.next=15;break;case 9:return this.setState({modalDialogNew:!1,itemsNew:null}),e.next=12,this.getData("get_all");case 12:(n=e.sent).items.map((function(e,t){n.items[t].dow_name=s.state.dows.find((function(t){return parseInt(t.id)==parseInt(e.dow)})).name})),this.setState({items:n.items,items_min:n.items_min});case 15:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"openWork",value:(u=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t},e.next=3,this.getData("get_one",a);case 3:n=e.sent,console.log(n),this.setState({itemsEdit:n,modalDialog:!0,nameWork:n.item.name,chengeItem1:this.state.items_min.find((function(e,t){return parseInt(e.id)==parseInt(n.item.work_id)}))});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"openNewWork",value:(a=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all_for_new");case 2:t=e.sent,console.log(t),this.setState({itemsNew:t,modalDialogNew:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"chengeItem",value:function(e,t){var a=t.target.value,n=this.state.itemsEdit;n.item[[e]]=a,"dow"==e&&12==a&&(n.times_add=[{time_action:"19:00"}],n.times_close="23:00"),this.setState({itemsEdit:n})}},{key:"chengeItem1",value:function(e,t,a){var n=this.state.itemsEdit;n.item[[e]]=a.id,this.setState({itemsEdit:n,chengeItem1:a})}},{key:"chengeItemNew",value:function(e,t){var a=t.target.value,n=this.state.itemsNew;n.item[[e]]=a,"dow"==e&&12==a&&(n.times_add=[{time_action:"19:00"}],n.times_close="23:00"),this.setState({itemsNew:n})}},{key:"chengeItemNew1",value:function(e,t,a){var n=this.state.itemsNew;n.item[[e]]=a.id,this.setState({itemsNew:n,chengeItemNew1:a})}},{key:"chengeTime",value:function(e,t){var a=t.target.value,n=this.state.itemsEdit;n.times_add[e].time_action=a,this.setState({itemsEdit:n})}},{key:"chengeTimeNew",value:function(e,t){var a=t.target.value,n=this.state.itemsNew;n.times_add[e].time_action=a,this.setState({itemsNew:n})}},{key:"delTime",value:function(e){var t=this.state.itemsEdit,a=[];t.times_add.map((function(t,n){parseInt(n)!=parseInt(e)&&a.push(t)})),t.times_add=a,this.setState({itemsEdit:t})}},{key:"delTimeNew",value:function(e){var t=this.state.itemsNew,a=[];t.times_add.map((function(t,n){parseInt(n)!=parseInt(e)&&a.push(t)})),t.times_add=a,this.setState({itemsNew:t})}},{key:"addTime",value:function(e){var t=document.getElementById("timePikerNew").value,a=this.state.itemsEdit;""!=t&&(a.times_add.push({time_action:t}),this.setState({itemsEdit:a}))}},{key:"addTimeNew",value:function(e){var t=document.getElementById("timePikerNew").value,a=this.state.itemsNew;""!=t&&(a.times_add.push({time_action:t}),this.setState({itemsNew:a}))}},{key:"chengeTimeClose",value:function(e){var t=e.target.value,a=this.state.itemsEdit;a.times_close=t,this.setState({itemsEdit:a})}},{key:"chengeTimeCloseNew",value:function(e){var t=e.target.value,a=this.state.itemsNew;a.times_close=t,this.setState({itemsNew:a})}},{key:"changeCheck",value:(t=(0,n.Z)(d().mark((function e(t,a,n){var s,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=this.state.items)[t][[a]]=n.target.checked?1:0,i={type:a,value:n.target.checked?1:0,id:s[t].id},e.next=5,this.getData("save_check",i);case 5:e.sent,this.setState({items:s});case 7:case"end":return e.stop()}}),e,this)}))),function(e,a,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(v.Z,{color:"inherit"})),this.state.itemsEdit?h.createElement(y.Z,{open:this.state.modalDialog,maxWidth:"md",onClose:function(){e.setState({modalDialog:!1,itemsEdit:null,nameWork:""})}},h.createElement(x.Z,null,'Уборка "',this.state.nameWork,'"'),h.createElement(w.Z,{style:{paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.rZ,{classes:this.state.classes,value:this.state.itemsEdit.item.name,func:this.chengeItem.bind(this,"name"),label:"Название уборки"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.itemsEdit.cats,value:this.state.itemsEdit.item.type_new,func:this.chengeItem.bind(this,"type_new"),label:"Категория уборки"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.rZ,{classes:this.state.classes,value:this.state.itemsEdit.item.time_min,func:this.chengeItem.bind(this,"time_min"),label:"Время уборки (в минутах)"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(O.rZ,{classes:this.state.classes,value:this.state.itemsEdit.item.max_count,func:this.chengeItem.bind(this,"max_count"),label:"Количество активаций"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:9},h.createElement(O.rZ,{multiline:!0,maxRows:2,classes:this.state.classes,value:this.state.itemsEdit.item.description,func:this.chengeItem.bind(this,"description"),label:"Описание (для внутренного использования)"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.itemsEdit.apps,value:this.state.itemsEdit.item.app_id,func:this.chengeItem.bind(this,"app_id"),label:"Должность"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.dows,value:this.state.itemsEdit.item.dow,func:this.chengeItem.bind(this,"dow"),label:"День недели"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.types,value:this.state.itemsEdit.item.type_time,func:this.chengeItem.bind(this,"type_time"),label:"Тип добавления"})),14!=parseInt(this.state.itemsEdit.item.dow)?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(O.e_,{classes:this.state.classes,data:this.state.items_min,value:this.state.chengeItem1,func:this.chengeItem1.bind(this,"work_id"),multiple:!1,label:"Если эта уборка завершена"})))),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(P.Z,null,h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(A.Z,{primary:"Время добавления уборки"})),this.state.itemsEdit.times_add.map((function(t,a){return h.createElement(T.ZP,{key:a,style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(O.w0,{classes:e.state.classes,label:"",value:t.time_action,func:e.chengeTime.bind(e,a)}),h.createElement(N.Z,{style:{cursor:"pointer"},onClick:e.delTime.bind(e,a)}))})),h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(O.w0,{id:"timePikerNew",classes:this.state.classes,label:"",value:"00:00",onBlur:this.addTime.bind(this)})))),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(P.Z,null,h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(A.Z,{primary:"Время автоматического удаления"})),h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(O.w0,{classes:this.state.classes,label:"",value:this.state.itemsEdit.times_close,func:this.chengeTimeClose.bind(this)})))))),h.createElement(b.Z,null,h.createElement(_.Z,{color:"primary",onClick:this.saveEdit.bind(this)},"Сохранить"))):null,this.state.itemsNew?h.createElement(y.Z,{open:this.state.modalDialogNew,maxWidth:"md",onClose:function(){e.setState({modalDialogNew:!1})}},h.createElement(x.Z,null,"Новая уборка"),h.createElement(w.Z,{style:{paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.rZ,{classes:this.state.classes,value:this.state.itemsNew.item.name,func:this.chengeItemNew.bind(this,"name"),label:"Название уборки"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.itemsNew.cats,value:this.state.itemsNew.item.type_new,func:this.chengeItemNew.bind(this,"type_new"),label:"Категория уборки"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.rZ,{classes:this.state.classes,value:this.state.itemsNew.item.time_min,func:this.chengeItemNew.bind(this,"time_min"),label:"Время уборки (в минутах)"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(O.rZ,{classes:this.state.classes,value:this.state.itemsNew.item.max_count,func:this.chengeItemNew.bind(this,"max_count"),label:"Количество активаций"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:9},h.createElement(O.rZ,{multiline:!0,maxRows:2,classes:this.state.classes,value:this.state.itemsNew.item.description,func:this.chengeItemNew.bind(this,"description"),label:"Описание (для внутренного использования)"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.itemsNew.apps,value:this.state.itemsNew.item.app_id,func:this.chengeItemNew.bind(this,"app_id"),label:"Должность"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.dows,value:this.state.itemsNew.item.dow,func:this.chengeItemNew.bind(this,"dow"),label:"День недели"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(O.$S,{classes:this.state.classes,data:this.state.types,value:this.state.itemsNew.item.type_time,func:this.chengeItemNew.bind(this,"type_time"),label:"Тип добавления"})),14!=parseInt(this.state.itemsNew.item.dow)?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(O.e_,{classes:this.state.classes,data:this.state.items_min,value:this.state.chengeItemNew1,func:this.chengeItemNew1.bind(this,"work_id"),multiple:!1,label:"Если эта уборка завершена"})))),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(P.Z,null,h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(A.Z,{primary:"Время добавления уборки"})),this.state.itemsNew.times_add.map((function(t,a){return h.createElement(T.ZP,{key:a,style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(O.w0,{classes:e.state.classes,label:"",value:t.time_action,func:e.chengeTimeNew.bind(e,a)}),h.createElement(N.Z,{style:{cursor:"pointer"},onClick:e.delTimeNew.bind(e,a)}))})),h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(O.w0,{id:"timePikerNew",classes:this.state.classes,label:"",value:"00:00",onBlur:this.addTimeNew.bind(this)})))),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(P.Z,null,h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(A.Z,{primary:"Время автоматического удаления"})),h.createElement(T.ZP,{style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(O.w0,{classes:this.state.classes,label:"",value:this.state.itemsNew.times_close,func:this.chengeTimeCloseNew.bind(this)})))))),h.createElement(b.Z,null,h.createElement(_.Z,{color:"primary",onClick:this.saveNew.bind(this)},"Сохранить"))):null,h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(_.Z,{variant:"contained",color:"primary",onClick:this.openNewWork.bind(this)},"Добавить уборку")),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(k.Z,null,h.createElement(I.Z,null,h.createElement(C.Z,null,h.createElement(D.Z,null,"Работа"),h.createElement(D.Z,null,"Должность"),h.createElement(D.Z,null,"Время"),h.createElement(D.Z,null,"День недели"),h.createElement(D.Z,null,"Время открытия"),h.createElement(D.Z,null,"Время автоматического удаления"),h.createElement(D.Z,null,"Не удалять в конце смены"),h.createElement(D.Z,null,"Обязательна к выполнению в особый день"),h.createElement(D.Z,null,h.createElement(R.Z,null)))),h.createElement(S.Z,null,this.state.items.map((function(t,a){return h.createElement(C.Z,{key:a},h.createElement(D.Z,{onClick:e.openWork.bind(e,t.id),style:{color:"#c03",cursor:"pointer",fontWeight:"bold"}},t.work_name),h.createElement(D.Z,null,t.app_name),h.createElement(D.Z,null,t.time_min?t.time_min+"мин.":""),h.createElement(D.Z,null,t.dow_name),h.createElement(D.Z,null,t.times_open),h.createElement(D.Z,null,t.times_close),h.createElement(D.Z,null,h.createElement(O.IA,{classes:e.state.classes,value:1==parseInt(t.is_not_del),func:e.changeCheck.bind(e,a,"is_not_del"),label:""})),h.createElement(D.Z,null,h.createElement(O.IA,{classes:e.state.classes,value:1==parseInt(t.is_need),func:e.changeCheck.bind(e,a,"is_need"),label:""})),h.createElement(D.Z,null,h.createElement(O.IA,{classes:e.state.classes,value:1==parseInt(t.is_active),func:e.changeCheck.bind(e,a,"is_active"),label:""})))})))))))}}]),j}(h.Component);function j(){var e=B(),t=(0,p.k6)();return h.createElement(F,{classes:e,history:t})}},1500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppWorkPoint:()=>M});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(4603),v=a(9062),y=a(2440),b=a(799),w=a(9334),x=a(6307),k=a(594),S=a(9573),D=a(8732),I=a(6926),C=a(6011),P=a(3694),T=a(6406);var A=a(7563),N=(0,g.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),R=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:N.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),O=function(e){(0,l.Z)(N,e);var t,a,u,p,f,g=(p=N,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(f){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function N(e){var t;return(0,s.Z)(this,N),t=g.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:A.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"app_work_point",module_name:"",is_load:!1,points:[],point_id:0,apps:[],app_id:0,allList:[],allListRender:[],thisList:[]},t}return(0,i.Z)(N,[{key:"componentDidMount",value:(u=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,points:t.points,point_id:t.points[0].id,apps:t.apps,app_id:t.apps[0].id}),document.title=t.module_info.name,setTimeout((function(){a.getWorks()}),300);case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"changeApp",value:function(e){var t=this;this.setState({app_id:e.target.value}),setTimeout((function(){t.getWorks()}),300)}},{key:"getWorks",value:(a=(0,n.Z)(d().mark((function e(){var t,a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point_id,app_id:this.state.app_id},e.next=3,this.getData("get_works",t);case 3:a=e.sent,console.log(a),this.setState({allList:a.all_work,thisList:a.this_work}),setTimeout((function(){n.checkList()}),300);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"checkList",value:function(){var e=this.state.allList;this.state.thisList.map((function(t){var a=[];e.map((function(e){parseInt(e.id)!=parseInt(t.id)&&a.push(e)})),e=a})),this.setState({allListRender:e})}},{key:"add",value:function(e,t){var a=this,n=this.state.thisList,s=this.state.allList,i=n.find((function(t,a){return parseInt(t.id)==parseInt(e)})),r=s.find((function(t,a){return parseInt(t.id)==parseInt(e)}));i||n.push((0,m.Z)({id:e,name:t,time_min:0,dop_time:0},"time_min",r.time_min)),this.setState({thisList:n}),setTimeout((function(){a.checkList()}),300)}},{key:"del",value:function(e,t){var a=this,n=[];this.state.thisList.map((function(t,a){parseInt(t.id)!=parseInt(e)&&n.push(t)})),this.setState({thisList:n}),setTimeout((function(){a.checkList()}),300)}},{key:"save",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={point_id:this.state.point_id,app_id:this.state.app_id,items:this.state.thisList},a=null,this.state.thisList.map((function(e,t){0==e.dop_time.length&&(a=e)})),console.log(a),!a){e.next=7;break}return alert('У позиции "'+a.name+'" не указано доп время'),e.abrupt("return");case 7:return e.next=9,this.getData("save",t);case 9:n=e.sent,console.log(n),alert(n.text);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeDopTime",value:function(e,t){var a=t.target.value,n=this.state.thisList;isNaN(a)&&""!=a||(n[e].dop_time=""==a?"":parseInt(a),this.setState({thisList:n}))}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(v.Z,{color:"inherit"})),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(T.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point_id,func:function(t){e.setState({point_id:t.target.value})},label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(T.$S,{classes:this.state.classes,data:this.state.apps,value:this.state.app_id,func:this.changeApp.bind(this),label:"Должность"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{variant:"contained",onClick:this.getWorks.bind(this)},"Обновить данные")),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.Z,{style:{width:"100%"}},this.state.allListRender.map((function(t,a){return h.createElement(b.ZP,{key:a,style:{borderBottom:"1px solid #e5e5e5"}},h.createElement(w.Z,{primary:t.name}),h.createElement(x.Z,{onClick:e.add.bind(e,t.id,t.name)}))})))),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(S.Z,{size:"small"},h.createElement(C.Z,null,h.createElement(P.Z,null,h.createElement(I.Z,null,"Наименование"),h.createElement(I.Z,null,"Основное время"),h.createElement(I.Z,null,"Доп время (в минутах)"),h.createElement(I.Z,null,h.createElement(k.Z,null)))),h.createElement(D.Z,null,this.state.thisList.map((function(t,a){return h.createElement(P.Z,{key:a},h.createElement(I.Z,null,t.name),h.createElement(I.Z,null,t.time_min," мин."),h.createElement(I.Z,null,h.createElement(T.rZ,{classes:e.state.classes,value:t.dop_time,func:e.changeDopTime.bind(e,a),label:""})),h.createElement(I.Z,null,h.createElement(k.Z,{onClick:e.del.bind(e,t.id,t.name),style:{cursor:"pointer"}})))}))))),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{variant:"contained",onClick:this.save.bind(this)},"Сохранить"))))}}]),N}(h.Component);function M(){var e=R(),t=(0,p.k6)();return h.createElement(O,{classes:e,history:t})}},7847:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppWorkShow:()=>z});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7462),d=(a(5987),a(7757)),h=a.n(d),p=a(7294),f=a(5977),g=a(225),Z=a(4345),_=a(5725),E=a(4603),v=a(9062),y=a(4666),b=a(7750),w=a(7645),x=a(9573),k=a(8732),S=a(6926),D=a(6011),I=a(3694),C=a(6501),P=a(5697),T=a.n(P),A=a(20),N=a(2640),R=(a(1508),a(2658)),O=a(6406);var M=a(7563),L=(0,Z.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),B=(0,g.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:L.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}T().node,T().number.isRequired,T().number.isRequired;var j=function(e){(0,l.Z)(P,e);var t,a,d,f,g,Z=(f=P,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(g){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function P(e){var t;return(0,s.Z)(this,P),t=Z.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:M.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"app_work_show",module_name:"",is_load:!1,items:[],items_min:[],showItems:[],modalDialog:!1,modalDialogNew:!1,activeTab:0,dows:[{id:1,name:"Понедельник"},{id:2,name:"Вторник"},{id:3,name:"Среда"},{id:4,name:"Четверг"},{id:5,name:"Пятница"},{id:6,name:"Суббота"},{id:7,name:"Воскресенье"},{id:10,name:"Другое"},{id:11,name:"Каждый день"},{id:12,name:"Каждый день в конце смены"},{id:13,name:"Ручное добавление"},{id:14,name:"После выполнение уборки"}],types:[{id:0,name:"Другое"},{id:1,name:"Только 1 активная"},{id:2,name:"Добавление без ограничений"}],itemsEdit:null,nameWork:"",itemsNew:null,chengeItem1:null,chengeItemNew1:null,points:[],point_id:""},t}return(0,i.Z)(P,[{key:"componentDidMount",value:(d=(0,n.Z)(h().mark((function e(){var t,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_points");case 2:t=e.sent,this.setState({points:t,point_id:t[0].id}),setTimeout((function(){a.getWorks()}),300);case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getWorks",value:(a=(0,n.Z)(h().mark((function e(){var t,a,n,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point_id},e.next=3,this.getData("get_all",t);case 3:(a=e.sent).items.map((function(e,t){a.items[t].dow_name=s.state.dows.find((function(t){return parseInt(t.id)==parseInt(e.dow)})).name})),0==(n=parseInt(this.state.activeTab))&&(n=5),1==n&&(n=6),2==n&&(n=21),this.setState({module_name:a.module_info.name,items:a.items,showItems:a.items.filter((function(e){return parseInt(e.app_id)==parseInt(n)})),items_min:a.items_min}),document.title=a.module_info.name;case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"openWork",value:(t=(0,n.Z)(h().mark((function e(t){var a,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t,point_id:this.state.point_id},e.next=3,this.getData("get_one",a);case 3:n=e.sent,console.log(n),this.setState({itemsEdit:n,modalDialog:!0});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changeTab",value:function(e,t){var a=parseInt(t);0==t&&(a=5),1==t&&(a=6),2==t&&(a=21),this.setState({activeTab:t,showItems:this.state.items.filter((function(e){return parseInt(e.app_id)==parseInt(a)}))})}},{key:"render",value:function(){var e=this;return p.createElement(p.Fragment,null,p.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},p.createElement(v.Z,{color:"inherit"})),p.createElement(_.ZP,{container:!0,spacing:3},p.createElement(_.ZP,{item:!0,xs:12,sm:12},p.createElement("h1",null,this.state.module_name)),p.createElement(_.ZP,{item:!0,xs:12,sm:3},p.createElement(O.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point_id,func:function(t){e.setState({point_id:t.target.value})},label:"Точка"})),this.state.itemsEdit?p.createElement(y.Z,{open:this.state.modalDialog,maxWidth:"md",onClose:function(){e.setState({modalDialog:!1,itemsEdit:null,nameWork:""})}},p.createElement(w.Z,null,'Уборка "',this.state.itemsEdit.item.name,'"'),p.createElement(b.Z,null,p.createElement(_.ZP,{container:!0,spacing:0},p.createElement(_.ZP,{item:!0,xs:12},p.createElement(R.Z,null,this.state.itemsEdit.item.cat_name)),0==this.state.itemsEdit.item.show_time?null:p.createElement(_.ZP,{item:!0,xs:12},p.createElement(R.Z,null,"Время за уборку: ",this.state.itemsEdit.item.time_min," мин.")),p.createElement(_.ZP,{item:!0,xs:12},p.createElement(R.Z,null,"Описание процесса уборки: ")),p.createElement(_.ZP,{item:!0,xs:12},p.createElement(R.Z,{dangerouslySetInnerHTML:{__html:this.state.itemsEdit.item.text_work}}))))):null,p.createElement(_.ZP,{item:!0,xs:12,sm:12},p.createElement(C.Z,null,p.createElement(A.Z,{value:this.state.activeTab,onChange:this.changeTab.bind(this)},p.createElement(N.Z,(0,u.Z)({label:"Повар"},F(0))),p.createElement(N.Z,(0,u.Z)({label:"Кассир"},F(1))),p.createElement(N.Z,(0,u.Z)({label:"Кухонный работник"},F(2)))))),p.createElement(_.ZP,{item:!0,xs:12,sm:12},p.createElement(x.Z,null,p.createElement(D.Z,null,p.createElement(I.Z,null,p.createElement(S.Z,null,"Работа"),p.createElement(S.Z,null,"День недели"),p.createElement(S.Z,null,"Время открытия"),p.createElement(S.Z,null,"Время автоматического удаления"))),p.createElement(k.Z,null,this.state.showItems.map((function(t,a){return p.createElement(I.Z,{key:a},p.createElement(S.Z,{onClick:e.openWork.bind(e,t.id),style:{color:"#c03",cursor:"pointer",fontWeight:"bold"}},t.work_name),p.createElement(S.Z,null,t.dow_name," ",t.need_work_name),p.createElement(S.Z,null,t.times_open),p.createElement(S.Z,null,t.times_close))})))))))}}]),P}(p.Component);function z(){var e=B(),t=(0,f.k6)();return p.createElement(j,{classes:e,history:t})}},8433:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Auth:()=>A});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(7109),g=a(5116),Z=a(5725),_=a(2642),E=a(225),v=a(4345),y=a(4666),b=a(3447),w=a(7750),x=a(6408),k=a(7645),S=a(4603),D=a(9062);var I=a(7563),C=(0,v.Z)({palette:{primary:{main:"#c03"}}}),P=(0,E.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:C.spacing(1)},submit:{margin:C.spacing(3,0,2)},textLink:{color:"#c03"}}),T=function(e){(0,l.Z)(C,e);var t,a,u,p,E,v=(p=C,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(E){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function C(e){var t;return(0,s.Z)(this,C),t=v.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;t.state.history.push("/auth")}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,i.Z)(C,[{key:"componentDidMount",value:(u=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"updateData",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:a=e.sent,this.setState({read:a.read,onstol:a.onstol,ordersQueue:a.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"auth",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:a=e.sent,console.log(a),!1===a.st?setTimeout((function(){n.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:a.text})}),500):(localStorage.setItem("token",a.token),setTimeout((function(){window.location.pathname="/"}),300));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(S.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(D.Z,{color:"inherit"})),h.createElement(y.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(k.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(w.Z,null,h.createElement(x.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(b.Z,null,h.createElement(_.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(Z.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(Z.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement("form",{className:this.state.classes.form,noValidate:!0},h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),h.createElement(_.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),h.createElement(Z.ZP,{container:!0},h.createElement(Z.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),C}(h.Component);function A(){var e=P(),t=(0,p.k6)();return h.createElement(T,{classes:e,history:t})}},710:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CatWork:()=>N});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(4603),v=a(9062),y=a(2440),b=a(799),w=a(9334),x=a(4666),k=a(3447),S=a(7750),D=a(7645),I=a(6406);var C=a(7563),P=(0,g.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),T=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:P.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),A=function(e){(0,l.Z)(P,e);var t,a,u,p,f,g=(p=P,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(f){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function P(e){var t;return(0,s.Z)(this,P),t=g.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:C.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"cat_work",module_name:"",is_load:!1,cats:[],modalDialog:!1,modalDialogNew:!1,nameCat:"",editText:"",nameCatNew:"",editTextNew:"",config:{readonly:!1},showCat:null},t}return(0,i.Z)(P,[{key:"componentDidMount",value:(u=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,cats:t.cats}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"openCat",value:function(e){this.setState({modalDialog:!0,showCat:e,nameCat:e.name,editText:e.text})}},{key:"save",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={cat_id:this.state.showCat.id,name:this.state.nameCat,text:document.getElementById("EditorEdit").value},e.next=3,this.getData("save_edit",t);case 3:if(!1!==(a=e.sent).st){e.next=8;break}alert(a.text),e.next=14;break;case 8:return this.setState({modalDialog:!1,showCat:null,nameCat:""}),document.getElementById("EditorEdit").value="",e.next=12,this.getData("get_all");case 12:a=e.sent,this.setState({cats:a.cats});case 14:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"saveNew",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.nameCatNew,text:document.getElementById("EditorNew").value},e.next=3,this.getData("save_new",t);case 3:if(!1!==(a=e.sent).st){e.next=8;break}alert(a.text),e.next=14;break;case 8:return this.setState({modalDialogNew:!1,editTextNew:"",nameCatNew:""}),document.getElementById("EditorNew").value="",e.next=12,this.getData("get_all");case 12:a=e.sent,this.setState({cats:a.cats});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(v.Z,{color:"inherit"})),this.state.showCat?h.createElement(x.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1,showCat:null,editText:"",nameCat:""})}},h.createElement(D.Z,null,'Категория уборки "',this.state.showCat.name,'"'),h.createElement(S.Z,{style:{paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(I.rZ,{classes:this.state.classes,value:this.state.nameCat,func:function(t){e.setState({nameCat:t.target.value})},label:"Название категории"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(I.H4,{id:"EditorEdit",text:this.state.showCat.text})))),h.createElement(k.Z,null,h.createElement(_.Z,{color:"primary",onClick:this.save.bind(this)},"Сохранить"))):null,h.createElement(x.Z,{open:this.state.modalDialogNew,onClose:function(){e.setState({modalDialogNew:!1,editTextNew:"",nameCatNew:""})}},h.createElement(D.Z,null,"Новая категория уборки"),h.createElement(S.Z,{style:{paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(I.rZ,{classes:this.state.classes,value:this.state.nameCatNew,func:function(t){e.setState({nameCatNew:t.target.value})},label:"Название категории"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(I.H4,{id:"EditorNew",text:""})))),h.createElement(k.Z,null,h.createElement(_.Z,{color:"primary",onClick:this.saveNew.bind(this)},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(_.Z,{variant:"contained",color:"primary",onClick:function(){e.setState({modalDialogNew:!0})}},"Добавить категорию")),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(y.Z,{style:{width:"100%"}},this.state.cats.map((function(t,a){return h.createElement(b.ZP,{button:!0,key:a,onClick:e.openCat.bind(e,t)},h.createElement(w.Z,{primary:t.name}))}))))))}}]),P}(h.Component);function N(){var e=T(),t=(0,p.k6)();return h.createElement(A,{classes:e,history:t})}},3670:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CategoryItems:()=>L});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(326),v=a(9941),y=a(7425),b=a(5092),w=a(3508),x=a(5116),k=a(4666),S=a(3447),D=a(7750),I=a(7645),C=a(4603),P=a(9062),T=a(6406),A=a(2658);var N=a(7563),R=(0,g.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),O=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:R.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),M=function(e){(0,l.Z)(O,e);var t,a,u,p,f,g,R=(f=O,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(g){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function O(e){var t;return(0,s.Z)(this,O),t=R.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:N.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"category_items",module_name:"",is_load:!1,modalDialog:!1,modalDialog2:!1,modalDialog3:!1,newMainCatMy:0,editMainCatMy:0,newMainNameMy:"",editMainNameMy:"",editCat:null,allCats:[],allItems:[],thisValItems:[],thisDataItems:[],thisCatId:0},t}return(0,i.Z)(O,[{key:"componentDidMount",value:(p=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,allCats:t.cats,allItems:t.items}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"createCat",value:function(){this.setState({modalDialog:!0,newMainCatMy:0,newMainNameMy:""})}},{key:"changeCatMain",value:function(e){var t=e.target.value;this.setState({newMainCatMy:t})}},{key:"changeCatMainEdit",value:function(e){var t=e.target.value;this.setState({editMainCatMy:t})}},{key:"changeNameMain",value:function(e){var t=e.target.value;this.setState({newMainNameMy:t})}},{key:"changeNameMainEdit",value:function(e){var t=e.target.value;this.setState({editMainNameMy:t})}},{key:"saveCat",value:(u=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.newMainNameMy,cat_id:this.state.newMainCatMy},e.next=3,this.getData("save_cat",t);case 3:if(!1!==(a=e.sent).st){e.next=7;break}return alert(a.text),e.abrupt("return");case 7:this.setState({allCats:a.cats,modalDialog:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"addItems",value:function(e){var t=this.state.allItems.filter((function(t){return parseInt(t.cat_id)==parseInt(e)})),a=this.state.allItems.filter((function(e){return 0==parseInt(e.cat_id)}));this.setState({modalDialog2:!0,thisValItems:t,thisDataItems:a,thisCatId:e})}},{key:"saveItems",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={cat_id:this.state.thisCatId,items:this.state.thisValItems},e.next=3,this.getData("save_items_cat",t);case 3:a=e.sent,this.setState({allCats:a.cats,allItems:a.items,modalDialog2:!1,thisValItems:[],thisDataItems:[],thisCatId:0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"editCat",value:function(e){this.setState({modalDialog3:!0,editMainCatMy:e.parent_id,editMainNameMy:e.name,editCat:e})}},{key:"saveEditCat",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.editMainNameMy,cat_id:this.state.editMainCatMy,id:this.state.editCat.id},e.next=3,this.getData("edit_cat",t);case 3:if(!1!==(a=e.sent).st){e.next=7;break}return alert(a.text),e.abrupt("return");case 7:this.setState({allCats:a.cats,modalDialog:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(C.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(P.Z,{color:"inherit"})),h.createElement(k.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(I.Z,{id:"alert-dialog-title"},"Новая категория"),h.createElement(D.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(T.$S,{classes:this.state.classes,label:"Главная категория",data:this.state.allCats.filter((function(e){return-1==parseInt(e.parent_id)||!e.parent_id})),value:this.state.newMainCatMy,func:this.changeCatMain.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(x.Z,{label:"Название категории",size:"small",variant:"outlined",style:{width:"100%"},color:"primary",value:this.state.newMainNameMy,onChange:this.changeNameMain.bind(this)})))),h.createElement(S.Z,null,h.createElement(_.Z,{onClick:this.saveCat.bind(this),color:"primary"},"Сохранить"))),h.createElement(k.Z,{open:this.state.modalDialog2,onClose:function(){e.setState({modalDialog2:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(I.Z,null,"Позиции категории"),h.createElement(D.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(T.e_,{label:"Выбранные позиции",func:function(t,a){e.setState({thisValItems:a})},data:this.state.thisDataItems,value:this.state.thisValItems})))),h.createElement(S.Z,null,h.createElement(_.Z,{onClick:this.saveItems.bind(this),color:"primary"},"Сохранить"))),h.createElement(k.Z,{open:this.state.modalDialog3,onClose:function(){e.setState({modalDialog3:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(I.Z,{id:"alert-dialog-title"},"Редактирование категории"),h.createElement(D.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(T.$S,{classes:this.state.classes,label:"Главная категория",data:this.state.allCats.filter((function(e){return-1==parseInt(e.parent_id)||!e.parent_id})),value:this.state.editMainCatMy,func:this.changeCatMainEdit.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(x.Z,{label:"Название категории",size:"small",variant:"outlined",style:{width:"100%"},color:"primary",value:this.state.editMainNameMy,onChange:this.changeNameMainEdit.bind(this)})))),h.createElement(S.Z,null,h.createElement(_.Z,{onClick:this.saveEditCat.bind(this),color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(_.Z,{onClick:this.createCat.bind(this)},"Создать категорию")),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},this.state.allCats.map((function(t,a){return-1!=parseInt(t.parent_id)?null:h.createElement(v.Z,{key:a},h.createElement(y.Z,{expandIcon:h.createElement(w.Z,null),"aria-controls":"panel1a-content"},h.createElement(E.Z,{style:{marginRight:10},onClick:e.editCat.bind(e,t)}),h.createElement(A.Z,null,t.name)),h.createElement(b.Z,null,e.state.allCats.map((function(n,s){return parseInt(t.id)!=parseInt(n.parent_id)?null:h.createElement(v.Z,{key:a+"_"+s},h.createElement(y.Z,{expandIcon:h.createElement(w.Z,null),"aria-controls":"panel1a-content"},h.createElement(E.Z,{style:{marginRight:10},onClick:e.editCat.bind(e,n)}),h.createElement(A.Z,null,n.name)),h.createElement(b.Z,null,e.state.allItems.filter((function(e){return parseInt(e.cat_id)==parseInt(n.id)})).map((function(e,t){return h.createElement(v.Z,{key:a+"_"+s+"_"+t},h.createElement(y.Z,{expandIcon:h.createElement(w.Z,null),"aria-controls":"panel1a-content"},h.createElement(A.Z,null,e.name)))})),h.createElement(_.Z,{onClick:e.addItems.bind(e,parseInt(n.id))},"Добавить")))}))))})))))}}]),O}(h.Component);function L(){var e=O(),t=(0,p.k6)();return h.createElement(M,{classes:e,history:t})}},8159:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Concenter:()=>Q});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7462),d=(a(5987),a(7757)),h=a.n(d),p=a(7294),f=a(5977),g=a(225),Z=a(4345),_=a(5725),E=a(2642),v=a(8044),y=a(5697),b=a.n(y),w=a(20),x=a(2640),k=a(9573),S=a(8732),D=a(6926),I=a(6011),C=a(3694),P=a(3887),T=a(9941),A=a(7425),N=a(5092),R=a(3508),O=a(4666),M=a(3447),L=a(7750),B=a(7645),F=a(795),j=a(8061),z=a(542),W=a(6446),V=a(5116),H=a(4603),Y=a(9062),$=a(6406),U=a(2658);var G=a(7563),J=(0,Z.Z)({palette:{primary:{main:"#c03"}}}),X=(0,g.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:J.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function q(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}b().node,b().number.isRequired,b().number.isRequired;var K=function(e){(0,l.Z)(X,e);var t,a,d,f,g,Z,y,b,J=(y=X,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(y);if(b){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function X(e){var t;return(0,s.Z)(this,X),t=J.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:G.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),(0,m.Z)((0,r.Z)(t),"changeAddr",(function(e){t.setState({typeDel:e.target.value})})),t.state={classes:t.props.classes,history:t.props.history,module:"concenter",module_name:"",is_load:!1,modalDialog:!1,modalDialogDel:!1,cities:[],city_id:1,date:q(new Date),point_list:[],need_point_list:[],point_id:0,indexTab:0,orders:[],ordersRender:[],showOrder:null,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изменились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1,number:"",addr:""},t}return(0,i.Z)(X,[{key:"componentDidMount",value:(Z=(0,n.Z)(h().mark((function e(){var t,a,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,a=t.points.filter((function(e,a){return parseInt(e.city_id)==parseInt(t.cities[0].id)})),this.setState({module_name:t.module_info.name,cities:t.cities,point_list:t.points,need_point_list:a,point_id:parseInt(a[0].id)}),document.title=t.module_info.name,setTimeout((function(){n.getOrders()}),300);case 7:case"end":return e.stop()}}),e,this)}))),function(){return Z.apply(this,arguments)})},{key:"changeCity",value:function(e){var t=this;this.setState({number:"",addr:""});var a=e.target.value,n=this.state.point_list.filter((function(e,t){return parseInt(e.city_id)==parseInt(a)}));this.setState({city_id:a,need_point_list:n,point_id:parseInt(n[0].id),indexTab:0}),setTimeout((function(){t.getOrders()}),300)}},{key:"changePoint",value:(g=(0,n.Z)(h().mark((function e(t,a){var n,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(n=t.target.id).split("-")[2],this.setState({point_id:n,indexTab:a}),setTimeout((function(){s.getOrders()}),300);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"getOrders",value:(f=(0,n.Z)(h().mark((function e(){var t,a,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point_id,date:this.state.date},e.next=3,this.getData("get_orders",t);case 3:a=e.sent,console.log(a),this.setState({orders:a.orders}),setTimeout((function(){n.filterNumber()}),300);case 7:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"btnGetOrders",value:function(){this.setState({number:"",addr:""}),this.getOrders()}},{key:"showOrder",value:(d=(0,n.Z)(h().mark((function e(t){var a,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={point_id:this.state.point_id,order_id:t},e.next=3,this.getData("get_order_new",a);case 3:n=e.sent,console.log(n),this.setState({modalDialog:!0,showOrder:n});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"closeOrder",value:function(){this.setState({modalDialogDel:!0})}},{key:"closeOrderTrue",value:(a=(0,n.Z)(h().mark((function e(){var t,a,n,s=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("4"==(t=this.state.radiogroup_options.find((function(e){return e.id==s.state.typeDel}))).id&&(t.label=this.state.textDel),!confirm("Отменить заказ #"+this.state.showOrder.order.order_id)){e.next=8;break}return a={typeCreate:"center",order_id:this.state.showOrder.order.order_id,point_id:this.state.showOrder.order.point_id,ans:t.label},e.next=6,this.getData("close_order_center",a);case 6:!0===(n=e.sent).st?(this.setState({modalDialogDel:!1,modalDialog:!1}),this.getOrders()):alert(n.text);case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fakeUser",value:(t=(0,n.Z)(h().mark((function e(){var t,a,n,s,i,r,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,t=parseInt(this.state.showOrder.order.check_pos)>=0?parseInt(this.state.showOrder.order.check_pos)<=100?1:2:0,0!=parseInt(t)){e.next=5;break}return alert("Создать обращение не возможно"),e.abrupt("return");case 5:if(1!=parseInt(t)){e.next=16;break}if(!((a=prompt("Комментарий к ситуации","")).length>0)){e.next=15;break}return n={text:a,point_id:parseInt(this.state.showOrder.order.point_id),order_id:parseInt(this.state.showOrder.order.order_id)},e.next=11,this.getData("fake_user",n);case 11:1==(s=e.sent).st?(alert("Обращение зафиксировано"),this.setState({modalDialog:!1})):alert(s.text),e.next=16;break;case 15:alert("надо указать комментарий");case 16:if(2!=parseInt(t)){e.next=29;break}if(!confirm("Курьер, предположительно, находиться далеко от клиента, точно оформить довоз ?")){e.next=29;break}if(!((i=prompt("Комментарий к ситуации","")).length>0)){e.next=28;break}return r={text:i,point_id:parseInt(this.state.showOrder.order.point_id),order_id:parseInt(this.state.showOrder.order.order_id)},e.next=24,this.getData("fake_user",r);case 24:1==(l=e.sent).st?(alert("Обращение зафиксировано"),this.setState({modalDialog:!1})):alert(l.text),e.next=29;break;case 28:alert("надо указать комментарий");case 29:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeText",value:function(e){this.setState({textDel:e.target.value})}},{key:"changeDate",value:function(e){var t=this;this.setState({number:"",addr:""}),this.setState({date:q(e)}),setTimeout((function(){t.getOrders()}),300)}},{key:"changeNumber",value:function(e){var t=this,a=e.target.value;isNaN(a)||(this.setState({number:a}),setTimeout((function(){t.filterNumber()}),300))}},{key:"changeAddrSt",value:function(e){var t=this,a=e.target.value;this.setState({addr:a}),setTimeout((function(){t.filterNumber()}),300)}},{key:"filterNumber",value:function(){var e=this,t=this.state.orders;this.state.number.length>0&&(t=t.filter((function(t){return-1!==t.number.indexOf(e.state.number)}))),this.state.addr.length>0&&(t=t.filter((function(t){return-1!==(t.street+" "+t.home).toLowerCase().indexOf(e.state.addr.toLowerCase())}))),this.setState({ordersRender:t})}},{key:"render",value:function(){var e=this;return p.createElement(p.Fragment,null,p.createElement(H.Z,{className:this.state.classes.backdrop,open:this.state.is_load},p.createElement(Y.Z,{color:"inherit"})),this.state.showOrder?p.createElement(O.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.createElement(B.Z,{style:{textAlign:"center"}},"Заказ #",this.state.showOrder.order.order_id),p.createElement(L.Z,null,p.createElement(_.ZP,{container:!0,spacing:0},p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",null,this.state.showOrder.order.type_order,": ",this.state.showOrder.order.type_order_addr_new)),p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",null,this.state.showOrder.order.time_order_name,": ",this.state.showOrder.order.time_order)),this.state.showOrder.order.number.length>1?p.createElement(_.ZP,{item:!0,xs:12},p.createElement("b",null,"Телефон: "),p.createElement("span",null,this.state.showOrder.order.number)):null,this.state.showOrder.order.delete_reason.length>0?p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",{style:{color:"red"}},"Удален: ",this.state.showOrder.order.date_time_delete)):null,this.state.showOrder.order.delete_reason.length>0?p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",{style:{color:"red"}},this.state.showOrder.order.delete_reason)):null,1==parseInt(this.state.showOrder.order.is_preorder)?null:p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",null,this.state.showOrder.order.text_time,this.state.showOrder.order.time_to_client)),p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",null,this.state.showOrder.order.textTime)),null==this.state.showOrder.order.promo_name||0==this.state.showOrder.order.promo_name.length?null:p.createElement(p.Fragment,null,p.createElement(_.ZP,{item:!0,xs:12},p.createElement("b",null,"Промокод: "),p.createElement("span",null,this.state.showOrder.order.promo_name)),p.createElement(_.ZP,{item:!0,xs:12},p.createElement("span",{className:"noSpace"},this.state.showOrder.order.promo_text))),null==this.state.showOrder.order.comment||0==this.state.showOrder.order.comment.length?null:p.createElement(_.ZP,{item:!0,xs:12},p.createElement("b",null,"Комментарий: "),p.createElement("span",null,this.state.showOrder.order.comment)),null==this.state.showOrder.order.sdacha||0==parseInt(this.state.showOrder.order.sdacha)?null:p.createElement(_.ZP,{item:!0,xs:12},p.createElement("b",null,"Сдача: "),p.createElement("span",null,this.state.showOrder.order.sdacha)),p.createElement(_.ZP,{item:!0,xs:12},p.createElement("b",null,"Сумма заказа: "),p.createElement("span",null,this.state.showOrder.order.sum_order," р")),null!=this.state.showOrder.order.check_pos_drive&&this.state.showOrder.order.check_pos_drive?p.createElement(_.ZP,{item:!0,xs:12},p.createElement("b",null,"Довоз оформлен: "),p.createElement("span",null,this.state.showOrder.order.comment)):null,p.createElement(_.ZP,{item:!0,xs:12},p.createElement(k.Z,{size:"small",style:{marginTop:15}},p.createElement(S.Z,null,this.state.showOrder.order_items.map((function(e,t){return p.createElement(C.Z,{key:t},p.createElement(D.Z,null,e.name),p.createElement(D.Z,null,e.count),p.createElement(D.Z,null,e.price," р"))}))),p.createElement(P.Z,null,p.createElement(C.Z,null,p.createElement(D.Z,{style:{fontWeight:"bold",color:"#000"}},"Сумма закза"),p.createElement(D.Z,null),p.createElement(D.Z,{style:{fontWeight:"bold",color:"#000"}},this.state.showOrder.order.sum_order," р"))))),p.createElement(T.Z,{style:{width:"100%"}},p.createElement(A.Z,{expandIcon:p.createElement(R.Z,null)},p.createElement(U.Z,null,"Расформировка")),p.createElement(N.Z,null,p.createElement(k.Z,{size:"small",style:{marginTop:15}},p.createElement(S.Z,null,this.state.showOrder.order_items_.map((function(e,t){return p.createElement(C.Z,{key:t},p.createElement(D.Z,null,e.name),p.createElement(D.Z,{style:{backgroundColor:parseInt(e.ready)>0?"#6ab04c":"#eb4d4b"}}))})))))))),0==parseInt(this.state.showOrder.order.is_delete)&&6!==parseInt(this.state.showOrder.order.status_order)?p.createElement(M.Z,{style:{justifyContent:"flex-end",padding:"15px 0px"}},p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(E.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.closeOrder.bind(this)},"Отменить заказ"))):null,1==parseInt(this.state.showOrder.order.type_order_)&&parseInt(this.state.showOrder.order.status_order)>4&&parseInt(this.state.showOrder.order.check_pos)>=0?p.createElement(M.Z,{style:{justifyContent:"flex-end",padding:"15px 0px"}},p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(E.Z,{variant:"contained",className:"BtnCardMain CardInCardItemYellow",onClick:this.fakeUser.bind(this)},"Клиент не вышел на связь"))):null):null,this.state.showOrder?p.createElement(O.Z,{open:this.state.modalDialogDel,onClose:function(){e.setState({modalDialogDel:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.createElement(B.Z,{style:{textAlign:"center"}},"Отмена заказа ",this.state.showOrder.order.order_id),p.createElement(L.Z,null,p.createElement(W.Z,{component:"fieldset"},p.createElement(j.Z,{name:"typeDel",value:this.state.typeDel,onChange:this.changeAddr},this.state.radiogroup_options.map((function(e,t){return p.createElement(z.Z,{key:t,value:e.id,control:p.createElement(F.Z,null),label:e.label})})))),p.createElement(V.Z,{onFocus:function(){e.setState({typeDel:"4"})},value:this.state.textDel,onChange:this.changeText.bind(this),margin:"dense",id:"name",label:"Причина отмены",type:"text",fullWidth:!0})),p.createElement(M.Z,{style:{paddingBottom:24}},p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(E.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:function(){e.setState({delOrder:!1})}},"К заказу")),p.createElement(v.Z,{disableElevation:!0,disableRipple:!0,variant:"contained",className:"BtnBorderOther",style:{marginRight:24}},p.createElement(E.Z,{variant:"contained",className:"BtnCardMain CardInCardItem",onClick:this.closeOrderTrue.bind(this)},"Отменить заказ")))):null,p.createElement(_.ZP,{container:!0,spacing:3},p.createElement(_.ZP,{item:!0,xs:12,sm:12},p.createElement("h1",null,this.state.module_name)),p.createElement(_.ZP,{item:!0,xs:12,sm:3},p.createElement($.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city_id,func:this.changeCity.bind(this),label:"Город"})),p.createElement(_.ZP,{item:!0,xs:12,sm:3},p.createElement($.Qe,{label:"Дата",value:this.state.date,func:this.changeDate.bind(this)})),p.createElement(_.ZP,{item:!0,xs:12,sm:3},p.createElement($.rZ,{label:"Номер телефона",value:this.state.number,func:this.changeNumber.bind(this)})),p.createElement(_.ZP,{item:!0,xs:12,sm:3},p.createElement($.rZ,{label:"Адрес",value:this.state.addr,func:this.changeAddrSt.bind(this)})),p.createElement(_.ZP,{item:!0,xs:12,sm:3},p.createElement(E.Z,{variant:"contained",onClick:this.btnGetOrders.bind(this)},"Обновить")),p.createElement(_.ZP,{item:!0,xs:12},p.createElement(w.Z,{value:this.state.indexTab,onChange:this.changePoint.bind(this)},this.state.need_point_list.map((function(t,a){return p.createElement(x.Z,(0,u.Z)({key:a,label:t.name,onClick:e.getOrders.bind(e)},(n=parseInt(t.id),{id:"simple-tab-".concat(n),"aria-controls":"simple-tabpanel-".concat(n)})));var n})))),p.createElement(_.ZP,{item:!0,xs:12},p.createElement(k.Z,{size:"small"},p.createElement(I.Z,null,p.createElement(C.Z,null,p.createElement(D.Z,null,"Заказ"),p.createElement(D.Z,null,"Оформил"),p.createElement(D.Z,null,"Номер клиента"),p.createElement(D.Z,null,"Адрес доставки"),p.createElement(D.Z,null,"Время открытия заказа"),p.createElement(D.Z,null,"Ко времени"),p.createElement(D.Z,null,"Закрыт на кухне"),p.createElement(D.Z,null,"Получен клиентом"),p.createElement(D.Z,null,"До просрочки"),p.createElement(D.Z,null,"Время обещ"),p.createElement(D.Z,null,"Тип"),p.createElement(D.Z,null,"Статус"),p.createElement(D.Z,null,"Сумма"),p.createElement(D.Z,null,"Оплата"),p.createElement(D.Z,null,"Водитель"))),p.createElement(S.Z,null,this.state.ordersRender.map((function(t,a){return p.createElement(C.Z,{key:a,style:1==parseInt(t.is_delete)?{backgroundColor:"red",color:"#fff",fontWeight:"bold"}:{}},p.createElement(D.Z,{style:parseInt(t.dist)>=0?{backgroundColor:"yellow",color:"#000",cursor:"pointer",fontWeight:"inherit"}:{color:"inherit",cursor:"pointer",fontWeight:"inherit"},onClick:e.showOrder.bind(e,t.id)},t.id),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.type_user),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.number),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.street," ",t.home),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.date_time_order),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit",backgroundColor:1==parseInt(t.is_preorder)?"#bababa":"inherit"}},t.need_time),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},"00:00:00"==t.give_data_time?"":t.give_data_time),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.close_order),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.to_time),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},"0"==t.unix_time_to_client||1==parseInt(t.is_preorder)?"":t.unix_time_to_client),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.type_order),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.status),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.order_price),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.type_pay),p.createElement(D.Z,{style:{color:"inherit",fontWeight:"inherit"}},t.driver))})))))))}}]),X}(p.Component);function Q(){var e=X(),t=(0,f.k6)();return p.createElement(K,{classes:e,history:t})}},672:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DriveMapStatAll:()=>b});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(5725),g=a(2642),Z=a(4603),_=a(9062),E=a(6406);var v=a(7563),y=function(e){(0,l.Z)(b,e);var t,a,u,p,y=(u=b,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(u);if(p){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function b(e){var t;return(0,s.Z)(this,b),t=y.call(this,e),(0,m.Z)((0,r.Z)(t),"map",null),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={history:t.props.history,module:"drive_map_stat_all",module_name:"",is_load:!1,points:[],point:"0",drivers:[]},t}return(0,i.Z)(b,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,a=e.target.value;this.setState({point:a}),setTimeout((function(){t.updateData()}),50)}},{key:"updateData",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point},e.next=3,this.getData("get_orders",t);case 3:a=e.sent,this.getOrders(a.orders,a.home,a.drivers),this.setState({drivers:a.drivers}),console.log(a.drivers);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getOrders",value:function(e,t,a){var n=this,s=new ymaps.ObjectManager;if(this.map){var i={type:"FeatureCollection",features:[]};i.features.push({type:"Feature",id:0,options:{preset:"islands#blackDotIcon",iconColor:"black"},geometry:{type:"Point",coordinates:[t.latitude,t.longitude]}}),e.map((function(e){i.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),s.add(i),a.map((function(e){e.positions.map((function(t,a){t.xy=JSON.parse(t.xy,!0),i.features.push({type:"Feature",id:t.id,options:{preset:"islands#stretchyIcon",iconColor:e.color},properties:{iconContent:a},geometry:{type:"Point",coordinates:[t.xy[0],t.xy[1]]}})}))})),s.add(i),this.map.geoObjects.removeAll(),this.map.geoObjects.add(s)}else ymaps.ready((function(){n.map=new ymaps.Map("map",{center:[t.latitude,t.longitude],zoom:11},{searchControlProvider:"yandex#search"});var i=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[t.latitude,t.longitude]}},{preset:"islands#blackDotIcon",iconColor:"black"});n.map.geoObjects.add(i);var r={type:"FeatureCollection",features:[]};e.map((function(e){r.features.push({type:"Feature",id:e.id,options:{preset:6==parseInt(e.status_order)?"islands#blueCircleDotIconWithCaption":"islands#circleDotIcon",iconColor:e.point_color?e.point_color:e.color},properties:{iconCaption:e.point_text},geometry:{type:"Point",coordinates:[e.xy.latitude,e.xy.longitude]}})})),s.add(r),a.map((function(e){e.positions.map((function(t,a){t.xy=JSON.parse(t.xy,!0),r.features.push({type:"Feature",id:t.id,options:{preset:"islands#stretchyIcon",iconColor:e.color},properties:{iconContent:a},geometry:{type:"Point",coordinates:[t.xy[0],t.xy[1]]}})}))})),s.add(r),n.map.geoObjects.add(s)}))}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(Z.Z,{open:this.state.is_load},h.createElement(_.Z,{color:"inherit"})),h.createElement(f.ZP,{container:!0,spacing:3},h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(f.ZP,{item:!0,xs:6,sm:6},h.createElement(E.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(f.ZP,{item:!0,xs:6,sm:6},h.createElement(g.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),h.createElement(f.ZP,{item:!0,xs:12,sm:12},this.state.drivers.map((function(e,t){return h.createElement("div",{key:t,style:{display:"flex",flexDirection:"row",alignItems:"center"}},h.createElement("div",{style:{width:50,height:20,backgroundColor:e.color}}),h.createElement("div",null,e.driver_name))}))),h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement("div",{id:"map",name:"map",style:{width:"100%",height:700,paddingTop:10}}))))}}]),b}(h.Component);function b(){var e=(0,p.k6)();return h.createElement(y,{history:e})}},2156:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DriverStat:()=>F});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(9573),v=a(8732),y=a(3887),b=a(6926),w=a(7896),x=a(6011),k=a(3694),S=a(6501),D=a(4666),I=a(3447),C=a(7750),P=a(7645),T=a(4603),A=a(9062),N=a(6406);var R=a(7563),O=(0,g.Z)({palette:{primary:{main:"#c03"}}}),M=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:O.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function L(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}var B=function(e){(0,l.Z)(F,e);var t,a,u,p,f,g,O,M,B=(O=F,M=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(O);if(M){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function F(e){var t;return(0,s.Z)(this,F),t=B.call(this,e),(0,m.Z)((0,r.Z)(t),"click",!1),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"driver_stat",module_name:"",is_load:!1,points:[],point:"0",date_start:L(new Date),date_end:L(new Date),rangeDate:[L(new Date),L(new Date)],modalDialog:!1,drive_stat_full:[],drive_stat_date:null,summ:0,choose_driver_id:0,check_cash:0,getSumm:0,modalDialogGetSumm:!1,getSummDriverId:null,getSummComment:"",modalDialogStatSumm:!1,modalDialogStatSummMain:!1,statSumm:[],statSummMain:[]},t}return(0,i.Z)(F,[{key:"componentDidMount",value:(g=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,console.log(t),this.setState({points:t.points,point:t.points[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){a.updateData()}),50);case 7:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"updateData",value:(f=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,date_start:this.state.rangeDate[0],date_end:this.state.rangeDate[1]},e.next=3,this.getData("get_data",t);case 3:a=e.sent,console.log(a),this.setState({drive_stat_full:a.drive_stat_full,drive_stat_date:a.stat_drive_date});case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"changeDateRange",value:function(e){var t=e[0]?L(e[0]):"",a=e[1]?L(e[1]):"";this.setState({rangeDate:[t,a]})}},{key:"changePoint",value:function(e){var t=e.target.value;this.setState({point:t})}},{key:"giveCash",value:function(e,t){this.setState({modalDialog:!0,choose_driver_id:e,check_cash:t})}},{key:"changeSumm",value:function(e){this.setState({summ:e.target.value})}},{key:"saveGivePrice",value:(p=(0,n.Z)(d().mark((function e(){var t,a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.click){e.next=2;break}return e.abrupt("return");case 2:if(this.click=!0,!(parseInt(this.state.summ)>parseInt(this.state.check_cash))){e.next=7;break}return alert("Нельзя сдать денег больше, чем есть у курьера"),setTimeout((function(){n.click=!1}),300),e.abrupt("return");case 7:return t={point_id:this.state.point,price:this.state.summ,driver_id:this.state.choose_driver_id},e.next=10,this.getData("save_give",t);case 10:a=e.sent,console.log(a),1==a.st?(this.setState({modalDialog:!1,check_cash:0,choose_driver_id:0,summ:0}),this.updateData()):alert(a.text),setTimeout((function(){n.click=!1}),300);case 14:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getCash",value:function(e){this.setState({modalDialogGetSumm:!0,getSumm:0,getSummDriverId:e,getSummComment:""})}},{key:"saveGetPrice",value:(u=(0,n.Z)(d().mark((function e(){var t,a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.click){e.next=2;break}return e.abrupt("return");case 2:if(this.click=!0,!(parseInt(this.state.getSumm)>1e3)){e.next=7;break}return alert("Нельзя выдать больше 1000р за раз"),setTimeout((function(){n.click=!1}),300),e.abrupt("return");case 7:return t={point_id:this.state.point,price:this.state.getSumm,driver_id:this.state.getSummDriverId.driver_id,comment:this.state.getSummComment},e.next=10,this.getData("save_get",t);case 10:a=e.sent,console.log(a),1==a.st?(this.setState({modalDialogGetSumm:!1,getSumm:0,getSummDriverId:null,getSummComment:""}),this.updateData()):alert(a.text),setTimeout((function(){n.click=!1}),300);case 14:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getStatDop",value:(a=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={point_id:this.state.point,driver_id:t.driver_id,date_start:this.state.rangeDate[0],date_end:this.state.rangeDate[1]},e.next=3,this.getData("getStatDop",a);case 3:n=e.sent,console.log(n),this.setState({modalDialogStatSumm:!0,statSumm:n,getSummDriverId:t});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getStatDopMain",value:(t=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={point_id:this.state.point,driver_id:t.driver_id,date_start:this.state.rangeDate[0],date_end:this.state.rangeDate[1]},e.next=3,this.getData("getStatDopMain",a);case 3:n=e.sent,console.log(n),this.setState({modalDialogStatSummMain:!0,statSummMain:n,getSummDriverId:t});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(T.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(A.Z,{color:"inherit"})),h.createElement(D.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1,check_cash:0,choose_driver_id:0,summ:0})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,null,"Какую сумму сдает курьер"),h.createElement(C.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(N.rZ,{label:"",value:this.state.summ,func:this.changeSumm.bind(this)})),h.createElement(I.Z,null,h.createElement(_.Z,{color:"primary",onClick:this.saveGivePrice.bind(this)},"Сохранить"))),h.createElement(D.Z,{open:this.state.modalDialogGetSumm,onClose:function(){e.setState({modalDialogGetSumm:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,null,'Дополнительная выплата курьеру "',this.state.getSummDriverId?this.state.getSummDriverId.name:"",'"'),h.createElement(C.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(N.rZ,{classes:this.state.classes,type:"number",value:this.state.getSumm,func:function(t){e.setState({getSumm:t.target.value})},label:"Сумма"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(N.rZ,{classes:this.state.classes,maxRows:2,value:this.state.getSummComment,func:function(t){e.setState({getSummComment:t.target.value})},label:"Комментарий"})))),h.createElement(I.Z,null,h.createElement(_.Z,{color:"primary",onClick:this.saveGetPrice.bind(this)},"Сохранить"))),h.createElement(D.Z,{open:this.state.modalDialogStatSumm,onClose:function(){e.setState({modalDialogStatSumm:!1,getSummDriverId:null})},fullWidth:!0,maxWidth:"md"},h.createElement(P.Z,null,'Доп выплаты "',this.state.getSummDriverId?this.state.getSummDriverId.name:"",'"'),h.createElement(C.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(E.Z,{size:"small"},h.createElement(x.Z,null,h.createElement(k.Z,null,h.createElement(b.Z,null,"Дата"),h.createElement(b.Z,null,"Кто назначил"),h.createElement(b.Z,null,"Сумма"),h.createElement(b.Z,null,"Комментарий"),h.createElement(b.Z,null,"Тип"))),h.createElement(v.Z,null,this.state.statSumm.map((function(e,t){return h.createElement(k.Z,{key:t},h.createElement(b.Z,null,e.date_time),h.createElement(b.Z,null,e.user_name),h.createElement(b.Z,null,e.price),h.createElement(b.Z,null,e.comment),h.createElement(b.Z,null,parseInt(e.order_id)>0?"Довоз":"Доп выплата"))})))))),h.createElement(D.Z,{open:this.state.modalDialogStatSummMain,onClose:function(){e.setState({modalDialogStatSummMain:!1,getSummDriverId:null})},fullWidth:!0,maxWidth:"md"},h.createElement(P.Z,null,'Выплаты "',this.state.getSummDriverId?this.state.getSummDriverId.name:"",'"'),h.createElement(C.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(E.Z,{size:"small"},h.createElement(x.Z,null,h.createElement(k.Z,null,h.createElement(b.Z,null,"Заказ"),h.createElement(b.Z,null,"Дата"),h.createElement(b.Z,null,"Сумма"),h.createElement(b.Z,null,"Пользователь"),h.createElement(b.Z,null,"Тип"))),h.createElement(v.Z,null,this.state.statSummMain.map((function(e,t){return h.createElement(k.Z,{key:t},h.createElement(b.Z,null,0==parseInt(e.order_id)?"":e.order_id),h.createElement(b.Z,null,e.date_time),h.createElement(b.Z,null,0==parseInt(e.my_cash)?e.give:e.my_cash),h.createElement(b.Z,null,0==parseInt(e.order_id)?e.user_name:""),h.createElement(b.Z,null,0==parseInt(e.order_id)?"Сдал":"С заказа"))})))))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:6,className:"MyDaterange"},h.createElement(N.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(N.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(_.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(w.Z,{component:S.Z},h.createElement(E.Z,null,h.createElement(x.Z,null,h.createElement(k.Z,null,h.createElement(b.Z,null,"Имя"),h.createElement(b.Z,null,"Вся сумма"),h.createElement(b.Z,null,"Сумма по налу"),h.createElement(b.Z,null,"Сумма по безналу"),h.createElement(b.Z,null,"Кол-во по налу"),h.createElement(b.Z,null,"Кол-во по безналу"),h.createElement(b.Z,null,"К сдаче"),h.createElement(b.Z,null,"Сдал за период"),h.createElement(b.Z,null,"Довозы"),h.createElement(b.Z,{style:{display:"none"}},"Ошибки"),h.createElement(b.Z,null,"-"),h.createElement(b.Z,null,"Заказы"),h.createElement(b.Z,null,"Заработал"),h.createElement(b.Z,null,"Налички на руках"),h.createElement(b.Z,null),h.createElement(b.Z,null))),h.createElement(v.Z,null,this.state.drive_stat_full.map((function(t,a){return h.createElement(k.Z,{key:a},h.createElement(b.Z,null,t.name),h.createElement(b.Z,null,t.full_sum),h.createElement(b.Z,null,t.full_cash),h.createElement(b.Z,null,t.full_bank),h.createElement(b.Z,null,t.count_cash),h.createElement(b.Z,null,t.count_bank),h.createElement(b.Z,null,t.sdacha),h.createElement(b.Z,null,t.give_by_date),h.createElement(b.Z,null,h.createElement(_.Z,{variant:"contained",onClick:e.getStatDop.bind(e,t),style:{fontWeight:"bolder"}},t.dop_price?t.dop_price:0)),h.createElement(b.Z,{style:{display:"none"}},t.err_summ),h.createElement(b.Z,null,t.my_price?t.my_price:0),h.createElement(b.Z,null,h.createElement(_.Z,{variant:"contained",onClick:e.getStatDopMain.bind(e,t),style:{fontWeight:"bolder"}},t.my_orders)),h.createElement(b.Z,null,t.my),h.createElement(b.Z,null,t.ost_cash),h.createElement(b.Z,null,h.createElement(_.Z,{variant:"contained",onClick:e.giveCash.bind(e,t.driver_id,t.ost_cash)},"Сдать")),h.createElement(b.Z,null,h.createElement(_.Z,{variant:"contained",onClick:e.getCash.bind(e,t)},"Доп выплата")))})))))),null==this.state.drive_stat_date?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(w.Z,{component:S.Z},h.createElement(E.Z,null,h.createElement(x.Z,null,h.createElement(k.Z,null,h.createElement(b.Z,null,"Курьер"),this.state.drive_stat_date.orders.map((function(e,t){return h.createElement(b.Z,{key:t,colSpan:4,style:{textAlign:"center"}},e.date)}))),h.createElement(k.Z,null,h.createElement(b.Z,null),this.state.drive_stat_date.orders.map((function(e,t){return h.createElement(h.Fragment,null,h.createElement(b.Z,{key:t+"_1",style:{textAlign:"center"}},"Наличка"),h.createElement(b.Z,{key:t+"_2",style:{textAlign:"center"}},"Безнал"),h.createElement(b.Z,{key:t+"_3",style:{textAlign:"center"}},"Сдача"),h.createElement(b.Z,{key:t+"_4",style:{textAlign:"center"}},"Заработал"))})))),h.createElement(v.Z,null,this.state.drive_stat_date.unic_users.map((function(t,a){return h.createElement(k.Z,{key:a},h.createElement(b.Z,{style:{borderRight:"1px solid #eee"}},t.short_name),e.state.drive_stat_date.orders.map((function(e,a){var n=!1,s={};return e.new_users.map((function(a,i){parseInt(a.driver_id)==parseInt(t.driver_id)&&a.date==e.date&&(n=!0,s=a)})),0==n?h.createElement(b.Z,{key:a,colSpan:4,style:{borderRight:"1px solid #eee"}}):h.createElement(h.Fragment,null,h.createElement(b.Z,{key:a+"_1",style:{textAlign:"center"}},s.full_cash),h.createElement(b.Z,{key:a+"_2",style:{textAlign:"center"}},s.full_bank),h.createElement(b.Z,{key:a+"_3",style:{textAlign:"center"}},s.sdacha),h.createElement(b.Z,{key:a+"_4",style:{borderRight:"1px solid #eee",textAlign:"center"}},s.my))})))}))),h.createElement(y.Z,null,h.createElement(k.Z,null,h.createElement(b.Z,{style:{borderRight:"1px solid #eee"}}),this.state.drive_stat_date.orders.map((function(e,t){return h.createElement(h.Fragment,null,h.createElement(b.Z,{key:t+"_1",style:{textAlign:"center"}},e.full_cash),h.createElement(b.Z,{key:t+"_2",style:{textAlign:"center"}},e.full_bank),h.createElement(b.Z,{key:t+"_3",style:{textAlign:"center"}},e.sdacha),h.createElement(b.Z,{key:t+"_4",style:{borderRight:"1px solid #eee",textAlign:"center"}},e.my))})))))))))}}]),F}(h.Component);function F(){var e=M(),t=(0,p.k6)();return h.createElement(B,{classes:e,history:t})}},5650:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Events:()=>U});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(9573),v=a(8732),y=a(6926),b=a(7896),w=a(6011),x=a(3694),k=a(6501),S=a(9941),D=a(7425),I=a(5092),C=a(3508),P=a(594),T=a(2440),A=a(799),N=a(9334),R=a(4666),O=a(3447),M=a(7750),L=a(6408),B=a(7645),F=a(4603),j=a(9062),z=a(6406),W=a(2658);var V=a(7563),H=(0,g.Z)({palette:{primary:{main:"#c03"}}}),Y=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:H.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),$=function(e){(0,l.Z)($,e);var t,a,u,p,f,g,H,Y=(g=$,H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(g);if(H){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function $(e){var t;return(0,s.Z)(this,$),t=Y.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:V.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"events",module_name:"",is_load:!1,points:[],point:"0",mounth:"0",mounths:[],years:[],year:"0",calendar:[],modalDialog:!1,chooseDayHoly:"",events:[],chooseEvent:0,eventPoint1:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",expanded:"",dayEvents:[],events_hist:[]},t}return(0,i.Z)($,[{key:"componentDidMount",value:(f=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,console.log(t),this.setState({points:t.points,point:t.points[0].id,module_name:t.module_info.name,mounths:t.mounth,mounth:t.this_m,years:t.years,year:t.this_y}),document.title=t.module_info.name,setTimeout((function(){a.updateData()}),50);case 7:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,a=e.target.value;this.setState({point:a}),setTimeout((function(){t.updateData()}),50)}},{key:"changeMounth",value:function(e){var t=e.target.value;this.setState({mounth:t}),setTimeout((function(){}),50)}},{key:"changeYear",value:function(e){var t=e.target.value;this.setState({year:t})}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(p=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={m:this.state.mounth,y:this.state.year,point_id:this.state.point},e.next=3,this.getData("get_calendar",t);case 3:a=e.sent,console.log(a),this.setState({calendar:a.year});case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"chooseDay",value:(u=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.full_day){e.next=8;break}return this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1,events_hist:[]}),a={date:t.full_day,point_id:this.state.point},e.next=5,this.getData("get_calendar_day",a);case 5:n=e.sent,console.log("res",n),this.setState({chooseDay:t,chooseDayHoly:n.holy,events:n.events,events_hist:n.hist,dayEvents:n.this_events,modalDialog:!0});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"changeEvent",value:function(e){var t=e.target.value;this.setState({chooseEvent:t})}},{key:"changePoint1",value:function(e){var t=e.target.value;this.setState({eventPoint1:t})}},{key:"changeEveryYear1",value:function(e){var t=e.target.checked;this.setState({everyYear1:t})}},{key:"changeTimeStart2",value:function(e){var t=e.target.value;this.setState({timeStart2:t})}},{key:"changeTimeEnd2",value:function(e){var t=e.target.value;this.setState({timeEnd2:t})}},{key:"save",value:(a=(0,n.Z)(d().mark((function e(){var t,a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={date:this.state.chooseDay.full_day,point_id:this.state.eventPoint1,event:this.state.chooseEvent,every_year:!0===this.state.everyYear1?1:0,time_start:this.state.timeStart2,time_end:this.state.timeEnd2},e.next=3,this.getData("save_event",t);case 3:a=e.sent,console.log(a),!1===a.st?alert(a.text):(this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1}),setTimeout((function(){n.updateData()}),300));case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"handleChange",value:function(e){this.setState({expanded:e})}},{key:"delEvent",value:(t=(0,n.Z)(d().mark((function e(t){var a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("delEvent",t),!confirm('Удалить событие "'+t.title+" "+t.date+'" ?')){e.next=10;break}return a={del_id:t.id},e.next=5,this.getData("del_event",a);case 5:e.sent,this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1}),setTimeout((function(){n.updateData()}),300),e.next=10;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(F.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(j.Z,{color:"inherit"})),h.createElement(R.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(B.Z,{id:"alert-dialog-title"},this.state.chooseDay?this.state.chooseDay.full_day:""),h.createElement(M.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(L.Z,{id:"alert-dialog-description"},h.createElement(Z.ZP,{container:!0,spacing:3},0==this.state.chooseDayHoly.length?null:h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(W.Z,{component:"span"},this.state.chooseDayHoly)),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(z.$S,{classes:this.state.classes,data:this.state.events,value:this.state.chooseEvent,func:this.changeEvent.bind(this),label:"Событие"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(z.$S,{classes:this.state.classes,data:this.state.points,value:this.state.eventPoint1,func:this.changePoint1.bind(this),label:"Точка"})),2!==parseInt(this.state.chooseEvent)?null:h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:6,sm:6},h.createElement(z.w0,{classes:this.state.classes,value:this.state.timeStart2,func:this.changeTimeStart2.bind(this),label:"Время начала работы"})),h.createElement(Z.ZP,{item:!0,xs:6,sm:6},h.createElement(z.w0,{classes:this.state.classes,value:this.state.timeEnd2,func:this.changeTimeEnd2.bind(this),label:"Время окончания работы"}))),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(z.IA,{classes:this.state.classes,value:this.state.everyYear1,func:this.changeEveryYear1.bind(this),label:"Каждый год"}))),h.createElement(T.Z,{component:"nav"},this.state.dayEvents.map((function(t,a){return h.createElement(A.ZP,{key:a},h.createElement(N.Z,{primary:t.title}),4==parseInt(t.type)?null:h.createElement(P.Z,{color:"primary",onClick:e.delEvent.bind(e,t),style:{cursor:"pointer"}}))}))),h.createElement(S.Z,null,h.createElement(D.Z,{expandIcon:h.createElement(C.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},h.createElement(W.Z,null,"История")),h.createElement(I.Z,null,h.createElement(T.Z,{component:"nav"},this.state.events_hist.map((function(e,t){return h.createElement(A.ZP,{key:t},h.createElement(N.Z,{primary:e.title}))}))))))),h.createElement(O.Z,null,h.createElement(_.Z,{onClick:this.save.bind(this),color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(z.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(z.$S,{classes:this.state.classes,data:this.state.mounths,value:this.state.mounth,func:this.changeMounth.bind(this),label:"Месяц"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(z.$S,{classes:this.state.classes,data:this.state.years,value:this.state.year,func:this.changeYear.bind(this),label:"Год"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),h.createElement(Z.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20}},this.state.calendar.map((function(t,a){return h.createElement(Z.ZP,{item:!0,xs:12,sm:4,key:a,style:{padding:20}},h.createElement("h1",{style:{textAlign:"center"}},t[0][0].mounth),h.createElement(b.Z,{component:k.Z},h.createElement(E.Z,{"aria-label":"a dense table",style:{overflow:"hidden"}},h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Пн"),h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Вт"),h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Ср"),h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Чт"),h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Пт"),h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Сб"),h.createElement(y.Z,{className:e.state.classes.tableCelHead},"Вс"))),h.createElement(v.Z,null,t.map((function(t,a){return h.createElement(x.Z,{key:a},t.map((function(t,a){return h.createElement(y.Z,{key:a,onClick:e.chooseDay.bind(e,t),style:{color:t.dir?"yellow":t.holy?"#c03":"#000"},className:t.event?e.state.classes.customCel:e.state.classes.tableCel}," ",t.day," ")})))}))))))})))))}}]),$}(h.Component);function U(){var e=Y(),t=(0,p.k6)();return h.createElement($,{classes:e,history:t})}},7227:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Home:()=>w});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(225),f=a(4345),g=a(5725),Z=a(4603),_=a(9062);var E=a(7563),v=(0,f.Z)({palette:{primary:{main:"#c03"}}}),y=(0,p.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:v.spacing(2)},backdrop:{zIndex:v.zIndex.drawer+1,color:"#fff"}}),b=function(e){(0,l.Z)(f,e);var t,a,u,p=(a=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(u){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function f(e){var t;return(0,s.Z)(this,f),t=p.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:E.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"home",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(Z.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(_.Z,{color:"inherit"})),h.createElement(g.ZP,{container:!0,spacing:3},h.createElement(g.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(g.ZP,{item:!0,xs:12,sm:12,style:{height:"100vh"}})))}}]),f}(h.Component);function w(){var e=y();return h.createElement(b,{classes:e})}},9347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{LiveOrders:()=>C});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(5725),g=a(2642),Z=a(9573),_=a(8732),E=a(6926),v=a(7896),y=a(6011),b=a(3694),w=a(6501),x=a(4603),k=a(9062),S=a(6406);var D=a(7563),I=function(e){(0,l.Z)(C,e);var t,a,u,p,I=(u=C,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(u);if(p){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function C(e){var t;return(0,s.Z)(this,C),t=I.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"live_orders",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,i.Z)(C,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){a.updateData()}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,a=e.target.value;this.setState({point:a}),setTimeout((function(){t.updateData()}),50)}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:a=e.sent,this.setState({read:a.read,onstol:a.onstol,ordersQueue:a.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(x.Z,{open:this.state.is_load},h.createElement(k.Z,{color:"inherit"})),h.createElement(f.ZP,{container:!0,spacing:3},h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),this.state.points.length>0?h.createElement(h.Fragment,null,h.createElement(f.ZP,{item:!0,xs:6,sm:6},h.createElement(S.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(f.ZP,{item:!0,xs:6,sm:6},h.createElement(g.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement(S.IA,{value:this.state.showReady,func:this.changeCheckOrders.bind(this),label:"Показывать готовые"}))):null,h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement(v.Z,{component:w.Z},h.createElement(Z.Z,{"aria-label":"a dense table"},h.createElement(y.Z,null,h.createElement(b.Z,null,h.createElement(E.Z,null,"#"),h.createElement(E.Z,null,"Тип"),h.createElement(E.Z,null,"Время заказа"),h.createElement(E.Z,null,"Время предзакза"),h.createElement(E.Z,null,"Время выхода на стол"),h.createElement(E.Z,null,"Во сколько собрали"),h.createElement(E.Z,null,"Закрыли"),h.createElement(E.Z,null,"Приготовили"),h.createElement(E.Z,null,"Отдали"),h.createElement(E.Z,null,"Обещали"),h.createElement(E.Z,null,"Статус"),h.createElement(E.Z,null,"Стол"))),h.createElement(_.Z,null,this.state.read.map((function(e,t){return h.createElement(b.Z,{key:t},h.createElement(E.Z,null,e.id),h.createElement(E.Z,null,e.type_order),h.createElement(E.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),h.createElement(E.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),h.createElement(E.Z,null,e.unix_start_stol_or),h.createElement(E.Z,null,e.give_data_time_),h.createElement(E.Z,null,e.close_date_time_order),h.createElement(E.Z,{style:{backgroundColor:1==parseInt(e.type_)?"":e.color}},e.time_),h.createElement(E.Z,{style:{backgroundColor:1!=parseInt(e.type_)?"":e.color}},e.test_time),h.createElement(E.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),h.createElement(E.Z,null,e.status),h.createElement(E.Z,null,e.stol_sborki))})),this.state.onstol.map((function(e,t){return h.createElement(b.Z,{key:t,style:{backgroundColor:"yellow"}},h.createElement(E.Z,null,e.id),h.createElement(E.Z,null,e.type_order),h.createElement(E.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),h.createElement(E.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),h.createElement(E.Z,null,e.unix_start_stol_or),h.createElement(E.Z,null),h.createElement(E.Z,null),h.createElement(E.Z,null),h.createElement(E.Z,null),h.createElement(E.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),h.createElement(E.Z,null,e.status),h.createElement(E.Z,null,e.stol_sborki))}))))),h.createElement(v.Z,{component:w.Z},h.createElement(Z.Z,{"aria-label":"a dense table"},h.createElement(y.Z,null,h.createElement(b.Z,null,h.createElement(E.Z,null,"#"),h.createElement(E.Z,null,"Пред"),h.createElement(E.Z,null,"Время оформления"),h.createElement(E.Z,null,"Время выхода на стол"),h.createElement(E.Z,null,"Время закрытия"),h.createElement(E.Z,null,"Обещали"))),h.createElement(_.Z,null,this.state.ordersQueue.map((function(e,t){return h.createElement(b.Z,{key:t},h.createElement(E.Z,null,e.id),h.createElement(E.Z,null,1==parseInt(e.is_preorder)?e.date_time_preorder:""),h.createElement(E.Z,null,0==parseInt(e.is_preorder)?e.date_time_order:""),h.createElement(E.Z,null,e.time_start_order),h.createElement(E.Z,null,e.time_end_order),h.createElement(E.Z,null,0==parseInt(e.is_preorder)?e.unix_time_to_client:""))}))))))))}}]),C}(h.Component);function C(){var e=(0,p.k6)();return h.createElement(I,{history:e})}},7307:(e,t,a)=>{"use strict";a.r(t),a.d(t,{RasByBill:()=>H});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(9573),v=a(8732),y=a(6926),b=a(7896),w=a(6011),x=a(3694),k=a(6501),S=a(9941),D=a(7425),I=a(5092),C=a(3508),P=a(4666),T=a(3447),A=a(7750),N=a(6408),R=a(7645),O=a(4603),M=a(9062),L=a(6406),B=a(2658);var F=a(7563),j=(0,g.Z)({palette:{primary:{main:"#c03"}}}),z=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:j.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function W(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}var V=function(e){(0,l.Z)(j,e);var t,a,u,p,f,g=(p=j,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(f){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function j(e){var t;return(0,s.Z)(this,j),t=g.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:F.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"ras_by_bill",module_name:"",is_load:!1,modalDialog:!1,points:[],point:[],date_start:W(new Date),date_end:W(new Date),rangeDate:[W(new Date),W(new Date)],items:[],cats:[],items_cat:[],item_cat:0,myItems:[],calendar:[]},t}return(0,i.Z)(j,[{key:"componentDidMount",value:(u=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,points:t.points,items:t.items,cats:t.cats,items_cat:t.items_cat}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=e.target.value;this.setState({point:t})}},{key:"changeItems",value:function(e,t){this.setState({myItems:t})}},{key:"getItems",value:(a=(0,n.Z)(d().mark((function e(){var t,a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={points:this.state.point,items:this.state.myItems,item_cat:this.state.item_cat,start_date:this.state.rangeDate[0],end_date:this.state.rangeDate[1]},e.next=3,this.getData("get_this_rev",t);case 3:a=e.sent,n=0,a.items_ras.map((function(e,t){n+=parseFloat(e.sum)})),this.setState({resItems:{items_ras:a.items_ras,pf_ras:a.pf_ras,rec_ras:a.rec_ras,full_sum:n.toFixed(2)},catItems:null});case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getCats",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={points:this.state.point,items:this.state.myItems,start_date:this.state.rangeDate[0],end_date:this.state.rangeDate[1]},e.next=3,this.getData("get_this_rev_cat",t);case 3:a=e.sent,n=0,a.rec_ras.map((function(e,t){n+=parseFloat(e.this_price)})),this.setState({catItems:{count_pos:a.count_pos,items_ras:a.items_ras,rec_ras:a.rec_ras,full_sum:n.toFixed(2)},resItems:null});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeDateRange",value:function(e){var t=e[0]?W(e[0]):"",a=e[1]?W(e[1]):"";this.setState({rangeDate:[t,a]})}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(O.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(M.Z,{color:"inherit"})),h.createElement(P.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(R.Z,{id:"alert-dialog-title"},"  "),h.createElement(A.Z,null,h.createElement(N.Z,{id:"alert-dialog-description"})),h.createElement(T.Z,null,h.createElement(_.Z,{onClick:function(){},color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(L.$S,{classes:this.state.classes,data:this.state.points,multiple:!0,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4,className:"MyDaterange"},h.createElement(L.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:5},h.createElement(L.$S,{classes:this.state.classes,data:this.state.items_cat,multiple:!1,value:this.state.item_cat,func:function(t){e.setState({item_cat:t.target.value})},label:"Категория товара"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(L.e_,{classes:this.state.classes,data:this.state.items,multiple:!0,value:this.state.myItems,func:this.changeItems.bind(this),label:"Заготовки"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{variant:"contained",onClick:this.getItems.bind(this)},"Показать заготовки")),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{variant:"contained",onClick:this.getCats.bind(this)},"Показать категории")),this.state.resItems&&this.state.resItems.items_ras?h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h1",null,"Куплено по наклданым"),h.createElement(b.Z,{component:k.Z},h.createElement(E.Z,{"aria-label":"a dense table"},h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(y.Z,null,"Наименование товара"),h.createElement(y.Z,null,"Объем товра"),h.createElement(y.Z,null,"Объем заготовки"),h.createElement(y.Z,null,"Сумма"),h.createElement(y.Z,null,"Кол-во наклданых"))),h.createElement(v.Z,null,this.state.resItems.items_ras.map((function(e,t){return h.createElement(x.Z,{key:t},h.createElement(y.Z,null," ",e.name," "),h.createElement(y.Z,null," ",e.count_item+" "+e.ei_name," "),h.createElement(y.Z,null," ",e.count_pf+" "+e.ei_name_pf," "),h.createElement(y.Z,null," ",e.sum," "),h.createElement(y.Z,null," ",e.count_bill," "))})),h.createElement(x.Z,null,h.createElement(y.Z,null," Всего: "),h.createElement(y.Z,null," "),h.createElement(y.Z,null," "),h.createElement(y.Z,null," ",this.state.resItems.full_sum," "),h.createElement(y.Z,null," ")))))),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h1",null,"Расход заготовок (включая рецепты)"),h.createElement(b.Z,{component:k.Z},h.createElement(E.Z,{"aria-label":"a dense table"},h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(y.Z,null,"Наименование заготовки"),h.createElement(y.Z,null,"Объем заготовок"),h.createElement(y.Z,null,"Кол-во роллов"),h.createElement(y.Z,null,"Сумма роллов (примерно)"))),h.createElement(v.Z,null,this.state.resItems.pf_ras.map((function(e,t){return h.createElement(x.Z,{key:t},h.createElement(y.Z,null," ",e.pf_name," "),h.createElement(y.Z,null," ",e.count_pf+" "+e.ei_name," "),h.createElement(y.Z,null," ",e.count_rolls," "),h.createElement(y.Z,null," ",e.price_rolls," "))})))))),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h1",null,"Расход рецептов"),h.createElement(b.Z,{component:k.Z},h.createElement(E.Z,{"aria-label":"a dense table"},h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(y.Z,null,"Наименование заготовки"),h.createElement(y.Z,null,"Объем заготовок"),h.createElement(y.Z,null,"Кол-во роллов"))),h.createElement(v.Z,null,this.state.resItems.rec_ras.map((function(e,t){return h.createElement(x.Z,{key:t},h.createElement(y.Z,null," ",e.pf_name," "),h.createElement(y.Z,null," ",e.count_pf+" "+e.ei_name," "),h.createElement(y.Z,null," ",e.count_rolls," "))}))))))):null,this.state.catItems&&this.state.catItems.rec_ras?h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(S.Z,{disabled:!0},h.createElement(D.Z,null,h.createElement(B.Z,{style:{width:"50%"}},"Роллов: ",this.state.catItems.count_pos.count_rolls),h.createElement(B.Z,{style:{width:"50%"}},"Пиццы: ",this.state.catItems.count_pos.count_pizza))),this.state.catItems.rec_ras.map((function(e,t){return h.createElement(S.Z,{key:t},h.createElement(D.Z,{expandIcon:h.createElement(C.Z,null),"aria-controls":"panel1bh-content"},h.createElement(B.Z,{style:{width:"60%"}},e.name),h.createElement(B.Z,{style:{width:"20%"}},e.this_price),h.createElement(B.Z,{style:{width:"20%"}},e.price_by_items)),h.createElement(I.Z,null,e.parent_cat.map((function(e,t){return h.createElement(S.Z,{key:t},h.createElement(D.Z,{expandIcon:h.createElement(C.Z,null),"aria-controls":"panel1bh-content"},h.createElement(B.Z,{style:{width:"60%",paddingLeft:20}},e.name),h.createElement(B.Z,{style:{width:"20%",paddingLeft:20}},e.this_price),h.createElement(B.Z,{style:{width:"20%",paddingLeft:20}},e.price_by_items)),h.createElement(I.Z,null,h.createElement(S.Z,{disabled:!0},h.createElement(D.Z,null,h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},"Товар"),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},"Товара"),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},"Заготовок"),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},"Накладных"),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},"Сумма"))),e.items.map((function(e,t){return h.createElement(S.Z,{key:t,disabled:!0},h.createElement(D.Z,null,h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},e.name),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},e.count_item," ",e.ei_name),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},e.count_pf," ",e.ei_name),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},e.count_bill),h.createElement(B.Z,{style:{width:"20%",paddingLeft:40}},e.sum)))}))))}))))})),h.createElement(S.Z,{disabled:!0},h.createElement(D.Z,null,h.createElement(B.Z,{style:{width:"60%",marginRight:-15}},"Всего:"),h.createElement(B.Z,{style:{width:"40%"}},this.state.catItems.full_sum)))):null))}}]),j}(h.Component);function H(){var e=z(),t=(0,p.k6)();return h.createElement(V,{classes:e,history:t})}},9546:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Reg:()=>O});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(7109),g=a(5116),Z=a(5725),_=a(2642),E=a(225),v=a(4345),y=a(4436),b=a(5272),w=a(5162),x=a(4666),k=a(3447),S=a(7750),D=a(6408),I=a(7645),C=a(4603),P=a(9062);var T=a(7563),A=(0,v.Z)({palette:{primary:{main:"#c03"}}}),N=(0,E.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:A.spacing(1)},submit:{margin:A.spacing(3,0,2)},backButton:{marginRight:A.spacing(1)},instructions:{marginTop:A.spacing(1),marginBottom:A.spacing(1)},textLink:{color:"#c03"}}),R=function(e){(0,l.Z)(A,e);var t,a,u,p,E,v=(p=A,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(E){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function A(e){var t;return(0,s.Z)(this,A),t=v.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:T.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;t.state.history.push("/auth")}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение","Новый пароль"],phone:"",code:"",pwd:""},t}return(0,i.Z)(A,[{key:"componentDidMount",value:(u=(0,n.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"updateData",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:a=e.sent,this.setState({read:a.read,onstol:a.onstol,ordersQueue:a.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"nextStep",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n,s,i,r,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value},e.next=4,this.getData("check_phone",t);case 4:!1===(a=e.sent).st?setTimeout((function(){l.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:a.text})}),500):this.setState({activeStep:this.state.activeStep+1,phone:t.login}),e.next=22;break;case 8:if(1!=this.state.activeStep){e.next=16;break}return n={login:this.state.phone,code:document.getElementById("code").value},e.next=12,this.getData("check_code",n);case 12:!1===(s=e.sent).st?setTimeout((function(){l.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:s.text})}),500):this.setState({activeStep:this.state.activeStep+1,code:n.code}),e.next=22;break;case 16:if(2!=this.state.activeStep){e.next=22;break}return i={login:this.state.phone,code:this.state.code,pwd:document.getElementById("password").value},e.next=20,this.getData("save_new_pwd",i);case 20:!1===(r=e.sent).st?setTimeout((function(){l.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:r.text})}),500):(localStorage.setItem("token",r.token),setTimeout((function(){window.location.pathname="/"}),300));case 22:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(C.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(P.Z,{color:"inherit"})),h.createElement(x.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(I.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(S.Z,null,h.createElement(D.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(k.Z,null,h.createElement(_.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(Z.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(Z.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement(y.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return h.createElement(b.Z,{key:e},h.createElement(w.Z,null,e))}))),h.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0,onKeyPress:this.enterNextStep.bind(this)}):null,1==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0,onKeyPress:this.enterNextStep.bind(this)}):null,2==this.state.activeStep?h.createElement(g.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,h.createElement(_.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),h.createElement(Z.ZP,{container:!0},h.createElement(Z.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),A}(h.Component);function O(){var e=N(),t=(0,p.k6)();return h.createElement(R,{classes:e,history:t})}},5012:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Revizion:()=>ie,RevizionNew:()=>re});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7462),d=a(5987),h=a(7757),p=a.n(h),f=a(7294),g=a(5977),Z=a(3727),_=a(225),E=a(5725),v=a(2642),y=a(9941),b=a(7425),w=a(5092),x=a(2658),k=a(3508),S=a(5697),D=a.n(S),I=a(20),C=a(2640),P=a(1508),T=a(9573),A=a(8732),N=a(6926),R=a(7896),O=a(6011),M=a(3694),L=a(5116),B=a(594),F=a(4603),j=a(9062),z=a(4172),W=a(2004),V=a(7097),H=a(6501),Y=a(2440),$=a(799),U=a(9334),G=a(5159),J=a(6406),X=["children","value","index"];function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.Z)(e);if(t){var s=(0,c.Z)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,o.Z)(this,a)}}var K=a(7563);function Q(e){var t=e.children,a=e.value,n=e.index,s=(0,d.Z)(e,X);return f.createElement("div",(0,u.Z)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},s),a===n&&f.createElement(P.Z,{sx:{p:3}},t))}function ee(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}Q.propTypes={children:D().node,index:D().number.isRequired,value:D().number.isRequired};var te=(0,_.Z)((function(e){return{}})),ae=function(e){(0,l.Z)(g,e);var t,a,o,c,d,h=q(g);function g(e){var t;return(0,s.Z)(this,g),t=h.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:K.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"revizion",module_name:"",is_load:!1,points:[],point:"0",revList:[],chooseRev:"",items:[],pf:[],all_data:[],chooseTab:0},t}return(0,i.Z)(g,[{key:"componentDidMount",value:(d=(0,n.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:1==t.point_list.length?t.point_list[0].id:"0",module_name:t.module_info.name,all_data:t.get_data_for_new_rev}),document.title=t.module_info.name,setTimeout((function(){}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,a=e.target.value;this.setState({point:a}),setTimeout((function(){t.getRevList()}),50)}},{key:"changeRev",value:function(e){var t=this,a=e.target.value;this.setState({chooseRev:a}),setTimeout((function(){t.getDataRev()}),300)}},{key:"search",value:(c=(0,n.Z)(p().mark((function e(t){var a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.point,this.state.showReady,a=this.state,console.log("res2"),console.log(a);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"updateData",value:(o=(0,n.Z)(p().mark((function e(){var t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={rev_id:this.state.chooseRev,point_id:this.state.point},console.log("data="),console.log(t),e.next=5,this.getData("get_data_rev",t);case 5:a=e.sent,this.setState({items:a.item,rec:a.rec,pf:a.pf}),console.log("res="),console.log(a);case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getRevList",value:(a=(0,n.Z)(p().mark((function e(){var t,a,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point},e.next=3,this.getData("get_rev_list",t);case 3:a=e.sent,this.setState({revList:a,chooseRev:a.length>0?a[0].id:""}),a.length>0&&setTimeout((function(){n.getDataRev()}),300);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getDataRev",value:(t=(0,n.Z)(p().mark((function e(){var t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,rev_id:this.state.chooseRev},e.next=3,this.getData("get_data_rev",t);case 3:a=e.sent,this.setState({items:a.items,pf:a.pf});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(F.Z,{className:this.state.classes.backdrop,open:this.state.is_load},f.createElement(j.Z,{color:"inherit"})),f.createElement(E.ZP,{container:!0,spacing:3},f.createElement(E.ZP,{item:!0,xs:12,sm:12},f.createElement("h1",null,this.state.module_name)),f.createElement(E.ZP,{item:!0,xs:12},f.createElement(Z.OL,{to:"/revizion/new"},"Новая ревизия2")),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(J.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(J.$S,{data:this.state.revList,value:this.state.chooseRev,func:this.changeRev.bind(this),label:"Ревизия"})),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(J.rZ,{classes:this.state.classes,func:this.search.bind(this),label:"Поиск"})),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(v.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),f.createElement(E.ZP,{item:!0,xs:12,sm:12,id:"revTable"},f.createElement(I.Z,{value:this.state.chooseTab,onChange:function(t,a){e.setState({chooseTab:a})},textColor:"primary",indicatorColor:"primary",centered:!0},f.createElement(C.Z,(0,u.Z)({label:"Товары"},ee(0))),f.createElement(C.Z,(0,u.Z)({label:"Заготовки"},ee(1)))),f.createElement(Q,{value:this.state.chooseTab,index:0},f.createElement(R.Z,{component:H.Z},f.createElement(T.Z,null,f.createElement(O.Z,null,f.createElement(M.Z,null,f.createElement(N.Z,null,"Товар"),f.createElement(N.Z,null,"Объем"))),f.createElement(A.Z,null,this.state.items.map((function(e,t){return f.createElement(M.Z,{key:t},f.createElement(N.Z,null,e.name),f.createElement(N.Z,null,e.value," ",e.ei_name))})))))),f.createElement(Q,{value:this.state.chooseTab,index:1},f.createElement(R.Z,{component:H.Z},f.createElement(T.Z,null,f.createElement(O.Z,null,f.createElement(M.Z,null,f.createElement(N.Z,null,"Заготовка"),f.createElement(N.Z,null,"Объем"))),f.createElement(A.Z,null,this.state.pf.map((function(e,t){return f.createElement(M.Z,{key:t},f.createElement(N.Z,null,e.name),f.createElement(N.Z,null,e.value," ",e.ei_name))})))))))))}}]),g}(f.Component),ne=function(e){(0,l.Z)(a,e);var t=q(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={item:n.props.item,change:n.props.change},n}return(0,i.Z)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.change!==t.change||this.state.change!==e.change}},{key:"render",value:function(){var e=this;return f.createElement(y.Z,null,f.createElement(b.Z,{expandIcon:f.createElement(k.Z,null)},f.createElement(x.Z,{style:{width:"60%"}},this.state.item.name),f.createElement(x.Z,{style:{width:"40%"}},this.state.item.value," ",this.state.item.ei_name)),f.createElement(w.Z,null,this.state.item.counts.map((function(t,a){return f.createElement(E.ZP,{container:!0,spacing:3,key:a,style:{paddingTop:10,paddingBottom:10}},f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(J.$S,{data:e.state.item.size,value:t.need_pq,func:e.props.func.bind(e,"item",e.props.itemKey,"need_pq",a),label:"Объем упаковки"})),f.createElement(E.ZP,{item:!0,xs:0==a?12:9,sm:5},f.createElement(L.Z,{value:t.value,onChange:e.props.func.bind(e,"item",e.props.itemKey,"value",a),fullWidth:!0,variant:"outlined",size:"small",label:"Количество"})),0==a?null:f.createElement(E.ZP,{item:!0,xs:3,sm:1},f.createElement(v.Z,{onClick:e.props.clear.bind(e,"item",e.props.itemKey,a),variant:"contained"}," ",f.createElement(B.Z,null)," ")))})),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(v.Z,{variant:"contained",onClick:this.props.copy.bind(this,"item",this.props.itemKey)},"Дублировать"))))}}]),a}(f.Component),se=function(e){(0,l.Z)(c,e);var t,a,o=q(c);function c(e){var t;return(0,s.Z)(this,c),t=o.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:K.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"revizion",module_name:"",is_load:!1,points:[],point:"0",revList:[],chooseRev:"",storages:[],items:[],rec:[],pf:[],chooseTab:0,open:!1},t}return(0,i.Z)(c,[{key:"componentDidMount",value:(a=(0,n.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:1==t.point_list.length?t.point_list[0].id:"0",module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,a=e.target.value;this.setState({point:a}),setTimeout((function(){t.getDataRev()}),300)}},{key:"getDataRev",value:(t=(0,n.Z)(p().mark((function e(){var t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point},e.next=3,this.getData("get_data_for_new_rev",t);case 3:a=e.sent,this.setState({storages:a.storages,items:a.items,rec:a.rec,pf:a.pf});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"saveData",value:function(e,t,a,n,s){if("item"==e){var i=this.state.items;i[t].counts[n][[a]]=s.target.value;var r=0;i[t].counts.map((function(e,t){r+=parseFloat(e.need_pq)*parseFloat(e.value)})),i[t].value=r,i[t].change++,this.setState({items:i})}}},{key:"copyData",value:function(e,t){if("item"==e){var a=this.state.items;a[t].counts.push({need_pq:a[t].counts[0].need_pq,value:0}),a[t].change++,this.setState({items:a})}}},{key:"clearData",value:function(e,t,a){if("item"==e){var n=this.state.items,s=[];n[t].counts.map((function(e,t){t!=a&&s.push(e)})),n[t].counts=s;var i=0;n[t].counts.map((function(e,t){i+=parseFloat(e.need_pq)*parseFloat(e.value)})),n[t].value=i,n[t].change++,this.setState({items:n})}}},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(F.Z,{className:this.state.classes.backdrop,open:this.state.is_load},f.createElement(j.Z,{color:"inherit"})),f.createElement(E.ZP,{container:!0,spacing:3},f.createElement(E.ZP,{item:!0,xs:12,sm:12},f.createElement("h1",null,this.state.module_name)),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(J.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),f.createElement(E.ZP,{item:!0,xs:12,sm:12,id:"revTable"},f.createElement(I.Z,{value:this.state.chooseTab,onChange:function(t,a){e.setState({chooseTab:a})},textColor:"primary",indicatorColor:"primary",centered:!0},f.createElement(C.Z,(0,u.Z)({label:"Товары"},ee(0))),f.createElement(C.Z,(0,u.Z)({label:"Заготовки"},ee(1)))),f.createElement(Q,{value:this.state.chooseTab,index:0},this.state.items.map((function(t,a){return f.createElement(ne,{key:a,itemKey:a,item:t,change:t.change,func:e.saveData.bind(e),copy:e.copyData.bind(e),clear:e.clearData.bind(e)})}))),f.createElement(Q,{value:this.state.chooseTab,index:1}))),f.createElement(f.Fragment,null,f.createElement(G.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},f.createElement(Y.Z,{style:{width:"100%"}},this.state.storages.map((function(e,t){return f.createElement($.ZP,{button:!0,key:t},f.createElement(U.Z,{primary:e.name}))}))))),0==this.state.storages.length?null:f.createElement(H.Z,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3},f.createElement(z.Z,{showLabels:!0,onChange:function(t,a){e.setState({open:!0})}},f.createElement(W.Z,{label:"Recents",icon:f.createElement(V.Z,null)}))))}}]),c}(f.Component);function ie(){var e=te(),t=(0,g.k6)();return f.createElement(ae,{classes:e,history:t})}function re(){var e=te(),t=(0,g.k6)();return f.createElement(se,{classes:e,history:t})}},4631:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SiteSale2:()=>se,SiteSale2_Edit:()=>ne,SiteSale2_New:()=>ae,SiteSale2_Stat:()=>ie,SiteSale2_StatList:()=>re});var n=a(5861),s=a(7326),i=a(4942),r=a(5671),l=a(3144),o=a(136),c=a(6215),m=a(1120),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(3727),_=a(5725),E=a(2642),v=a(9573),y=a(8732),b=a(6926),w=a(6011),x=a(3694),k=a(3887),S=a(7720),D=a(594),I=a(7036),C=a(4666),P=a(3447),T=a(7750),A=a(7645),N=a(9941),R=a(7425),O=a(5092),M=a(3508),L=a(4603),B=a(9062),F=a(6406),j=a(2658),z=a(7598),W=a(6278);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.Z)(e);if(t){var s=(0,m.Z)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var H=function(e){(0,o.Z)(a,e);var t=V(a);function a(e){var n;return(0,r.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,l.Z)(a,[{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(j.Z,null,this.props.label),h.createElement(W.ZP,{format:"YYYY-MM-DD",multiple:!0,sort:!0,style:{width:"100%"},label:this.props.label,value:this.props.value,onChange:this.props.func}))}}]),a}(h.PureComponent),Y=a(7563),$=(0,g.Z)({palette:{primary:{main:"#c03"}}}),U=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:$.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function G(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}function J(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[n,a,s].join(".")}function X(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate();t.getFullYear(),n.length<2&&(n="0"+n);var s="";switch(parseInt(a)){case 1:s="Января";break;case 2:s="Февраля";break;case 3:s="Марта";break;case 4:s="Апреля";break;case 5:s="Мая";break;case 6:s="Июня";break;case 7:s="Июля";break;case 8:s="Августа";break;case 9:s="Сентября";break;case 10:s="Октября";break;case 11:s="Ноября";break;case 12:s="Декабря"}return[n,s].join(" ")}var q=function(e){(0,o.Z)(m,e);var t,a,c=V(m);function m(e){var t;return(0,r.Z)(this,m),t=c.call(this,e),(0,i.Z)((0,s.Z)(t),"click",!1),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),setTimeout((function(){t.setState({is_load:!1}),t.click=!1}),300)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"site_sale_2",module_name:"",is_load:!1,modalText:"",points:[],point:0,cities:[],city:0,modalDialog:!1,modalLink:"",where_promo_list:[{id:1,name:"Создать"},{id:2,name:"Создать и показать"},{id:3,name:"Отправить на почту"},{id:4,name:"Отправить в смс"},{id:5,name:"Рассылка смс"},{id:6,name:"Отправить в ЛК (через 8)"},{id:7,name:"Создать сертификат(ы)"},{id:8,name:"Отправить через бота ВК"}],promo_action_list:[],sale_list:[{id:1,name:"На товары"},{id:2,name:"На категории"},{id:3,name:"На все меню (кроме допов и закусок)"}],promo_conditions_list:[{id:1,name:"В корзине есть определенные товар(ы)"},{id:2,name:"В корзине набрана определенная сумма"}],promo_sale_list:[],type_sale_list:[{id:1,name:"В рублях"},{id:2,name:"В процентах"}],date_promo_list:[{id:1,name:"В определенные даты"},{id:2,name:"14 дней с 10:00 до 21:40"},{id:3,name:"14 дней с 00:00 до 23:59"},{id:4,name:"30 дней с 10:00 до 21:40"},{id:5,name:"30 дней с 00:00 до 23:59"}],type_order_list:[{id:1,name:"Все"},{id:2,name:"Доставка"},{id:3,name:"Самовывоз"},{id:4,name:"Зал"}],where_order_list:[{id:1,name:"В городе"},{id:2,name:"На точке"}],promo_prizw_vk:"Привет!\r\nПоздравляем 🎉\r\nПромокод --promo-- на --position--, действует до --endDate--. Активировать можно при заказе на доставку, самовывоз и в кафе.\r\n\r\nОбратите внимание, что за подарочную позицию надо будет заплатить 1 руб, это необходимое условие для получения приза. В промокод не входят соевый соус, имбирь и васаби.\r\n\r\nЗаказы принимаем на сайте --site--\r\n\r\nРежим работы: с 10:00 до 21:30\r\nАдреса наших кафе:\r\n--addrCity--",spamNameSMS:"",auto_text:!0,where_promo:1,promo_name:"",generate_new:!1,count_action:1,promo_action:1,type_sale:3,promo_sale:1,sale_type:2,promo_conditions:2,price_start:0,price_end:0,date_promo:1,date_start:G(new Date),date_end:G(new Date),rangeDate:[G(new Date),G(new Date)],time_start:"10:00",time_end:"21:30",promo_length:5,promo_count:1,day_1:!0,day_2:!0,day_3:!0,day_4:!0,day_5:!0,day_6:!0,day_7:!0,type_order:1,where_order:1,numberList:"",promo_desc_true:"",promo_desc_false:"",textSMS:"",addItem:null,addItemCount:1,addItemPrice:1,addItemAllPrice:0,itemsAdd:[],itemsAddPrice:[],items:[],cats:[],saleCat:[],saleItem:[],priceItem:null,conditionItems:[],testDate:[],createdPromo:[]},t}return(0,l.Z)(m,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t,a,n,s,i,r,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all_for_new");case 2:t=e.sent,a=new Date,s=a.getFullYear(),i=a.getMonth()+1,r=a.getDate(),n=s+"-"+(parseInt(i)>9?i:"0"+i)+"-"+(parseInt(r)>9?r:"0"+r),this.setState({points:t.points,cities:t.cities,module_name:t.module_info.name,promo_action_list:t.promo_action_list,promo_sale_list:t.promo_sale_list,date_start:n,date_end:n,items:t.items,cats:t.cats}),document.title=t.module_info.name,setTimeout((function(){l.generateTextDescFalse(),l.generateTextDescTrue()}),300);case 12:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"save",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n,s,i,r,l,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.click){e.next=30;break}return this.click=!0,this.setState({createdPromo:[]}),0,t=2==parseInt(this.state.sale_type)?this.state.promo_sale_list.find((function(e){return parseInt(e.id)==parseInt(o.state.promo_sale)})).name:parseInt(this.state.promo_sale),a=[],this.state.conditionItems.map((function(e){a.push(e.id)})),n=[],this.state.saleItem.map((function(e){n.push(e.id)})),s=[],this.state.saleCat.map((function(e){s.push(e.id)})),i=[],this.state.testDate.map((function(e){i.push(new Date(e).toISOString().split("T")[0])})),i=i.join(","),r={spamNameSMS:this.state.spamNameSMS,promo_vk_prize:this.state.promo_prizw_vk,cert_text:this.state.cert_text,addr:this.state.numberList,where_promo:this.state.where_promo,promo_count:this.state.promo_count,promo_len:this.state.promo_length,promo_name:this.state.promo_name,generate:this.state.generate_new?1:0,promo_in_count:this.state.count_action,promo_action:this.state.promo_action,promo_type_sale:this.state.type_sale,count_promo:t,promo_type:this.state.sale_type,promo_conditions:this.state.promo_conditions,promo_summ:this.state.price_start,promo_summ_to:this.state.price_end,promo_when:this.state.date_promo,date_start:this.state.date_start,date_end:this.state.date_end,time_start:this.state.time_start,time_end:this.state.time_end,day_1:this.state.day_1?1:0,day_2:this.state.day_2?1:0,day_3:this.state.day_3?1:0,day_4:this.state.day_4?1:0,day_5:this.state.day_5?1:0,day_6:this.state.day_6?1:0,day_7:this.state.day_7?1:0,promo_type_order:this.state.type_order,promo_where:this.state.where_order,numberList:this.state.numberList,promo_city:this.state.city,promo_point:this.state.point,about_promo_text:this.state.promo_desc_true,condition_promo_text:this.state.promo_desc_false,textSMS:this.state.textSMS,promo_items:JSON.stringify(n),promo_cat:JSON.stringify(s),promo_items_add:JSON.stringify(this.state.itemsAdd),promo_items_sale:JSON.stringify(this.state.itemsAddPrice),promo_conditions_items:JSON.stringify(a),date_between:i},e.next=17,this.getData("save_new_promo",r);case 17:if(l=e.sent,console.log(l),0!=l.st){e.next=23;break}return this.setState({modalDialog:!0,modalText:l.text_err}),setTimeout((function(){o.click=!1}),300),e.abrupt("return");case 23:this.setState({createdPromo:l.promo_text}),1!=parseInt(this.state.where_promo)&&8!=parseInt(this.state.where_promo)||this.setState({modalDialog:!0,modalText:"Создано"}),2==parseInt(this.state.where_promo)&&this.setState({modalDialog:!0,modalText:"Промокоды: "+l.promo_text.join(", ")}),3==parseInt(this.state.where_promo)&&this.setState({modalDialog:!0,modalText:l.text}),4!=parseInt(this.state.where_promo)&&5!=parseInt(this.state.where_promo)&&6!=parseInt(this.state.where_promo)||this.setState({modalDialog:!0,modalText:l.text}),7==parseInt(this.state.where_promo)&&this.setState({modalDialog:!0,modalText:l.text,modalLink:l.link}),setTimeout((function(){o.click=!1}),300);case 30:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeData",value:function(e,t){var a=this;if(this.setState((0,i.Z)({},e,t.target.value)),"date_promo"==e&&(2==t.target.value||3==t.target.value)){var n=new Date,s=new Date;s.setDate(s.getDate()+14),this.setState({rangeDate:[G(n),G(s)],date_start:G(n),date_end:G(s),time_start:2==t.target.value?"10:00":"00:00",time_end:2==t.target.value?"21:40":"23:59"})}if("date_promo"==e&&(4==t.target.value||5==t.target.value)){var r=new Date,l=new Date;l.setDate(l.getDate()+30),this.setState({rangeDate:[G(r),G(l)],date_start:G(r),date_end:G(l),time_start:4==t.target.value?"10:00":"00:00",time_end:4==t.target.value?"21:40":"23:59"})}setTimeout((function(){a.generateTextDescFalse(),a.generateTextDescTrue()}),300)}},{key:"changeDataCheck",value:function(e,t){var a=this;this.setState((0,i.Z)({},e,t.target.checked)),setTimeout((function(){a.generateTextDescFalse(),a.generateTextDescTrue()}),300)}},{key:"changeDateRange",value:function(e){var t=this,a=e[0]?G(e[0]):"",n=e[1]?G(e[1]):"";this.setState({rangeDate:[a,n],date_start:a,date_end:n}),setTimeout((function(){t.generateTextDescFalse(),t.generateTextDescTrue()}),300)}},{key:"changeDataData",value:function(e,t){var a=this;this.setState((0,i.Z)({},e,t)),setTimeout((function(){a.generateTextDescFalse(),a.generateTextDescTrue()}),300)}},{key:"generateTextDescTrue",value:function(){var e=this;if(this.state.auto_text){var t=this.state.promo_action,a="";if(1==parseInt(t)){var n=this.state.type_sale,s=this.state.sale_type,i=0;if(i=2==parseInt(this.state.sale_type)?i=this.state.promo_sale_list.find((function(t){return parseInt(t.id)==parseInt(e.state.promo_sale)})).name:parseInt(this.state.promo_sale),1==parseInt(n)){var r=this.state.saleItem,l="";r.map((function(e,t){l+=e.name+", "})),a="скидку на "+(l=l.substring(0,l.length-2))+" в размере "+i+(1==parseInt(s)?"руб.":"%")}2==parseInt(n)&&(r=this.state.saleCat,l="",r.map((function(e,t){l+=e.name+", "})),a="скидку на "+(l=l.substring(0,l.length-2))+" в размере "+i+(1==parseInt(s)?"руб.":"%")),3==parseInt(n)&&(a="скидку на всё меню, кроме напитков, соусов, приправ и палочек, в размере "+i+(1==parseInt(s)?"руб.":"%"))}if(2==parseInt(t)){var o="";this.state.itemsAdd.map((function(e,t){0==parseInt(e.price)?o+="бесплатную "+e.name+" "+e.count+"шт. за "+e.price+"руб., ":o+=e.name+" "+e.count+"шт. за "+e.price+"руб., "})),o=o.substring(0,o.length-2),a=1==this.state.itemsAdd.length?"позицию "+o:"позиции "+o}3==parseInt(t)&&(o="",this.state.itemsAddPrice.map((function(e,t){o+=e.name+" по "+e.price+"руб., "})),o=o.substring(0,o.length-2),a=this.state.itemsAddPrice.length-1==1?"позицию "+o:"позиции "+o);var c="Промокод --promo_name--, действует до "+X(this.state.date_end)+". Заказывай на jacofood.ru!";this.setState({promo_desc_true:a,textSMS:c,cert_text:a})}}},{key:"generateTextDescFalse",value:function(){var e=this;if(this.state.auto_text){var t="",a="";if(console.log(this.state.testDate),this.state.testDate.length>0){var n=[];this.state.testDate.map((function(e){n.push(new Date(e).toISOString().split("T")[0])})),a="(кроме ",n.map((function(e){a+=X(e)+", "})),a=(a=a.slice(0,-1)).slice(0,-1),a+=")",console.log("text",a)}1==parseInt(this.state.where_order)&&0!=parseInt(this.state.city)&&(t=" в г. "+this.state.cities.find((function(t){return parseInt(t.id)==parseInt(e.state.city)})).name),2==parseInt(this.state.where_order)&&0!=parseInt(this.state.point)&&(t=" в г. "+this.state.points.find((function(t){return parseInt(t.id)==parseInt(e.state.point)})).name);var s="Промокод действует c "+J(this.state.date_start)+" до "+J(this.state.date_end)+" с "+this.state.time_start+" до "+this.state.time_end+" "+a+t;this.setState({promo_desc_false:s})}}},{key:"addItemAdd",value:function(){var e=this,t=this.state.itemsAdd;if(!t.find((function(t){return parseInt(t.item_id)==parseInt(e.state.addItem.id)}))){var a=this.state.items.find((function(t){return parseInt(t.id)==parseInt(e.state.addItem.id)}));t.push({item_id:this.state.addItem.id,name:a.name,count:this.state.addItemCount,price:this.state.addItemPrice});var n=0;t.map((function(e){n+=parseInt(e.price)})),this.setState({itemsAdd:t,addItemAllPrice:n})}setTimeout((function(){e.generateTextDescFalse(),e.generateTextDescTrue()}),300)}},{key:"delItemAdd",value:function(e){var t=this,a=this.state.itemsAdd.filter((function(t){return parseInt(t.item_id)!=parseInt(e.item_id)})),n=0;a.map((function(e){n+=parseInt(e.price)})),this.setState({itemsAdd:a,addItemAllPrice:n}),setTimeout((function(){t.generateTextDescFalse(),t.generateTextDescTrue()}),300)}},{key:"priceItemAdd",value:function(){var e=this,t=this.state.itemsAddPrice;if(!t.find((function(t){return parseInt(t.item_id)==parseInt(e.state.priceItem.id)}))){var a=this.state.items.find((function(t){return parseInt(t.id)==parseInt(e.state.priceItem.id)}));t.push({id:this.state.priceItem.id,name:a.name,price:this.state.addItemCount}),this.setState({itemsAddPrice:t})}setTimeout((function(){e.generateTextDescFalse(),e.generateTextDescTrue()}),300)}},{key:"delItemPrice",value:function(e){var t=this,a=this.state.itemsAddPrice.filter((function(t){return parseInt(t.item_id)!=parseInt(e.item_id)}));a.map((function(e){parseInt(e.price)})),this.setState({itemsAddPrice:a}),setTimeout((function(){t.generateTextDescFalse(),t.generateTextDescTrue()}),300)}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(L.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(B.Z,{color:"inherit"})),h.createElement(C.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1,modalLink:""})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(A.Z,{id:"alert-dialog-title"},"Результат операции"),h.createElement(T.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(j.Z,null,this.state.modalText),h.createElement("br",null),h.createElement(j.Z,null,"Созданыне промокоды: ",this.state.createdPromo.join(", ")),h.createElement("br",null),""==this.state.modalLink?null:h.createElement("a",{href:this.state.modalLink,style:{color:"red"}},"Скачать")),h.createElement(P.Z,null,h.createElement(E.Z,{color:"primary",onClick:function(){e.setState({modalDialog:!1})}},"Хорошо"))),h.createElement(_.ZP,{container:!0},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},!0===this.state.generate_new?null:h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_name,func:this.changeData.bind(this,"promo_name"),label:"Название промокода"})),!1===this.state.generate_new?null:h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_length,func:this.changeData.bind(this,"promo_length"),label:"Длина промокода"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.IA,{classes:this.state.classes,value:this.state.generate_new,func:this.changeDataCheck.bind(this,"generate_new"),label:"Сгенерировать"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.count_action,func:this.changeData.bind(this,"count_action"),label:"Количество активаций"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_count,func:this.changeData.bind(this,"promo_count"),label:"Количество промокодов"}))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.$S,{classes:this.state.classes,data:this.state.promo_action_list,value:this.state.promo_action,func:this.changeData.bind(this,"promo_action"),label:"Промокод дает:"}))),1!==parseInt(this.state.promo_action)?null:h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.$S,{classes:this.state.classes,data:this.state.sale_list,value:this.state.type_sale,func:this.changeData.bind(this,"type_sale"),label:"Скидка"})),1!==parseInt(this.state.type_sale)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:9},h.createElement(F.e_,{classes:this.state.classes,data:this.state.items,value:this.state.saleItem,func:function(t,a){e.changeDataData("saleItem",a)},multiple:!0,label:"Товары"})),2!==parseInt(this.state.type_sale)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:9},h.createElement(F.e_,{classes:this.state.classes,data:this.state.cats,value:this.state.saleCat,func:function(t,a){e.changeDataData("saleCat",a)},multiple:!0,label:"Категории"})),1==parseInt(this.state.sale_type)?h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_sale,func:this.changeData.bind(this,"promo_sale"),label:"Размер скидки"})):h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.$S,{classes:this.state.classes,data:this.state.promo_sale_list,value:this.state.promo_sale,func:this.changeData.bind(this,"promo_sale"),label:"Размер скидки"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.$S,{classes:this.state.classes,data:this.state.type_sale_list,value:this.state.sale_type,func:this.changeData.bind(this,"sale_type"),label:"Какая скидка"}))),2!==parseInt(this.state.promo_action)?null:h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.e_,{classes:this.state.classes,data:this.state.items,value:this.state.addItem,func:function(t,a){e.changeDataData("addItem",a)},label:"Позиция"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.addItemCount,func:this.changeData.bind(this,"addItemCount"),label:"Количество"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.addItemPrice,func:this.changeData.bind(this,"addItemPrice"),label:"Цена за все"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{variant:"contained",onClick:this.addItemAdd.bind(this)},"Добавить"))),2!==parseInt(this.state.promo_action)?null:h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:6},h.createElement(v.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null,"Позиция"),h.createElement(b.Z,null,"Количество"),h.createElement(b.Z,null,"Цена за все"),h.createElement(b.Z,null))),h.createElement(y.Z,null,this.state.itemsAdd.map((function(t,a){return h.createElement(x.Z,{key:a},h.createElement(b.Z,null,t.name),h.createElement(b.Z,null,t.count),h.createElement(b.Z,null,t.price),h.createElement(b.Z,null," ",h.createElement(D.Z,{onClick:e.delItemAdd.bind(e,t),style:{cursor:"pointer"}})," "))}))),h.createElement(k.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null),h.createElement(b.Z,null),h.createElement(b.Z,null,this.state.addItemAllPrice),h.createElement(b.Z,null)))))),3!==parseInt(this.state.promo_action)?null:h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.e_,{classes:this.state.classes,data:this.state.items,value:this.state.priceItem,func:function(t,a){e.changeDataData("priceItem",a)},label:"Позиция"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.addItemCount,func:this.changeData.bind(this,"addItemCount"),label:"Цена за 1 ед"})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{variant:"contained",onClick:this.priceItemAdd.bind(this)},"Добавить"))),3!==parseInt(this.state.promo_action)?null:h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:6},h.createElement(v.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null,"Позиция"),h.createElement(b.Z,null,"Цена за 1 ед"),h.createElement(b.Z,null))),h.createElement(y.Z,null,this.state.itemsAddPrice.map((function(t,a){return h.createElement(x.Z,{key:a},h.createElement(b.Z,null,t.name),h.createElement(b.Z,null,t.price),h.createElement(b.Z,null," ",h.createElement(D.Z,{onClick:e.delItemPrice.bind(e,t),style:{cursor:"pointer"}})," "))})))))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.promo_conditions_list,value:this.state.promo_conditions,func:this.changeData.bind(this,"promo_conditions"),label:"Условие"})),1!==parseInt(this.state.promo_conditions)?null:h.createElement(h.Fragment,null,h.createElement(_.ZP,{item:!0,xs:12,sm:8},h.createElement(F.e_,{classes:this.state.classes,data:this.state.items,value:this.state.conditionItems,func:function(t,a){e.changeDataData("conditionItems",a)},multiple:!0,label:"Товары"}))),2!==parseInt(this.state.promo_conditions)?null:h.createElement(h.Fragment,null,h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.price_start,func:this.changeData.bind(this,"price_start"),label:"Сумма от"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.price_end,func:this.changeData.bind(this,"price_end"),label:"Сумма до"})))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.$S,{classes:this.state.classes,data:this.state.date_promo_list,value:this.state.date_promo,func:this.changeData.bind(this,"date_promo"),label:"Когда работает промокод"}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:6,className:"MyDaterange"},h.createElement(F.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.w0,{classes:this.state.classes,label:"Время от",value:this.state.time_start,func:this.changeData.bind(this,"time_start")})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.w0,{classes:this.state.classes,label:"Время до",value:this.state.time_end,func:this.changeData.bind(this,"time_end")}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(H,{multiple:!1,label:"Кроме дат",value:this.state.testDate,func:this.changeDataData.bind(this,"testDate")}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{marginTop:20},spacing:3},h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_1,func:this.changeDataCheck.bind(this,"day_1"),label:"Понедельник"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_2,func:this.changeDataCheck.bind(this,"day_2"),label:"Вторник"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_3,func:this.changeDataCheck.bind(this,"day_3"),label:"Среда"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_4,func:this.changeDataCheck.bind(this,"day_4"),label:"Четверг"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_5,func:this.changeDataCheck.bind(this,"day_5"),label:"Пятница"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_6,func:this.changeDataCheck.bind(this,"day_6"),label:"Суббота"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_7,func:this.changeDataCheck.bind(this,"day_7"),label:"Воскресенье"})),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.type_order_list,value:this.state.type_order,func:this.changeData.bind(this,"type_order"),label:"Тип заказа"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.where_order_list,value:this.state.where_order,func:this.changeData.bind(this,"where_order"),label:"Где работает"})),1!==parseInt(this.state.where_order)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city,func:this.changeData.bind(this,"city"),label:"Город"})),2!==parseInt(this.state.where_order)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changeData.bind(this,"point"),label:"Точка"}))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.where_promo_list,value:this.state.where_promo,func:this.changeData.bind(this,"where_promo"),label:"Что сделать с промокодом"})),1==parseInt(this.state.where_promo)||2==parseInt(this.state.where_promo)?null:5==parseInt(this.state.where_promo)?h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement("span",null,"Список номеров для рассылки"),h.createElement(z.Z,{"aria-label":"empty textarea",placeholder:"",minRows:3,value:this.state.numberList,onChange:this.changeData.bind(this,"numberList"),label:"Куда отправить",style:{width:"100%"}})):h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.numberList,func:this.changeData.bind(this,"numberList"),label:"Куда отправить"}))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},8!==parseInt(this.state.where_promo)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement("span",null,"Текст расссылки"),h.createElement(z.Z,{"aria-label":"empty textarea",placeholder:"",minRows:3,value:this.state.promo_prizw_vk,onChange:this.changeData.bind(this,"promo_prizw_vk"),style:{width:"100%"}})),5==parseInt(this.state.where_promo)?h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.spamNameSMS,func:this.changeData.bind(this,"spamNameSMS"),label:"Наименование рассылки"})):null,4==parseInt(this.state.where_promo)||5==parseInt(this.state.where_promo)?h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.textSMS,func:this.changeData.bind(this,"textSMS"),label:"Текст СМС ( --promo_name-- )"})):null,7==parseInt(this.state.where_promo)?h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.cert_text,func:this.changeData.bind(this,"cert_text"),label:"Текст для описания сертификата"})):null,h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.IA,{classes:this.state.classes,value:this.state.auto_text,func:this.changeDataCheck.bind(this,"auto_text"),label:"Авто-текст"})),h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_desc_true,func:this.changeData.bind(this,"promo_desc_true"),label:"Описание промокода после активации (Промокод дает: )"})),h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_desc_false,func:this.changeData.bind(this,"promo_desc_false"),label:"Условие промокода, когда условия не соблюдены"}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"end",style:{paddingTop:50},spacing:3},h.createElement(E.Z,{variant:"contained",onClick:this.save.bind(this)},"Сохранить"))))}}]),m}(h.Component),K=function(e){(0,o.Z)(m,e);var t,a,c=V(m);function m(e){var t;return(0,r.Z)(this,m),t=c.call(this,e),(0,i.Z)((0,s.Z)(t),"click",!1),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),setTimeout((function(){t.setState({is_load:!1}),t.click=!1}),300)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"site_sale_2",module_name:"",is_load:!1,modalText:"",points:[],point:0,cities:[],city:0,modalDialog:!1,modalLink:"",where_promo_list:[{id:1,name:"Создать"},{id:2,name:"Создать и показать"},{id:3,name:"Отправить на почту"},{id:4,name:"Отправить в смс"},{id:5,name:"Рассылка смс"},{id:6,name:"Отправить в ЛК (через 8)"},{id:7,name:"Создать сертификат(ы)"}],promo_action_list:[],sale_list:[{id:1,name:"На товары"},{id:2,name:"На категории"},{id:3,name:"На все меню (кроме допов и закусок)"}],promo_conditions_list:[{id:1,name:"В корзине есть определенные товар(ы)"},{id:2,name:"В корзине набрана определенная сумма"}],promo_sale_list:[],type_sale_list:[{id:1,name:"В рублях"},{id:2,name:"В процентах"}],date_promo_list:[{id:1,name:"В определенные даты"},{id:2,name:"14 дней с 10:00 до 21:40"},{id:3,name:"14 дней с 00:00 до 23:59"},{id:4,name:"30 дней с 10:00 до 21:40"},{id:5,name:"30 дней с 00:00 до 23:59"}],type_order_list:[{id:1,name:"Все"},{id:2,name:"Доставка"},{id:3,name:"Самовывоз"},{id:4,name:"Зал"}],where_order_list:[{id:1,name:"В городе"},{id:2,name:"На точке"}],auto_text:!1,where_promo:1,promo_name:"",generate_new:!1,count_action:1,promo_action:1,type_sale:3,promo_sale:1,sale_type:2,promo_conditions:2,price_start:0,price_end:0,date_promo:1,date_start:G(new Date),date_end:G(new Date),rangeDate:[G(new Date),G(new Date)],time_start:"10:00",time_end:"21:30",promo_length:5,promo_count:1,day_1:!0,day_2:!0,day_3:!0,day_4:!0,day_5:!0,day_6:!0,day_7:!0,type_order:1,where_order:1,numberList:"",promo_desc_true:"",promo_desc_false:"",textSMS:"",addItem:1,addItemCount:1,addItemPrice:1,addItemAllPrice:0,itemsAdd:[],itemsAddPrice:[],items:[],cats:[],saleCat:[],saleItem:[],priceItem:1,conditionItems:[],testDate:[]},t}return(0,l.Z)(m,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t,a,n,s=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={promo_id:this.props.promoId},e.next=3,this.getData("get_all_for_edit",t);case 3:a=e.sent,n=[],a.promo.promo_conditions_items.length>4&&(a.promo.promo_conditions_items=JSON.parse(a.promo.promo_conditions_items,!0),a.promo.promo_conditions_items.map((function(e){var t=a.items.find((function(t){return parseInt(t.id)==parseInt(e)}));n.push(t)}))),setTimeout((function(){console.log("conditionItems",n),console.log("items",a.items);var e=[];a.limit.map((function(t){e.push(new Date(t.date))})),s.setState({points:a.points,cities:a.cities,module_name:a.module_info.name,promo_action_list:a.promo_action_list,promo_sale_list:a.promo_sale_list,date_start:a.promo.date1,date_end:a.promo.date2,time_start:a.promo.time1,time_end:a.promo.time2,rangeDate:[a.promo.date1,a.promo.date2],items:a.items,cats:a.cats,day_1:1==parseInt(a.promo.d1),day_2:1==parseInt(a.promo.d2),day_3:1==parseInt(a.promo.d3),day_4:1==parseInt(a.promo.d4),day_5:1==parseInt(a.promo.d5),day_6:1==parseInt(a.promo.d6),day_7:1==parseInt(a.promo.d7),count_action:a.promo.count,promo_name:a.promo.name,price_start:a.promo.promo_summ,price_end:a.promo.promo_summ_to,conditionItems:n,promo_conditions:n.length>0?1:2,point:a.promo.point_id,city:a.promo.city_id,where_order:parseInt(a.promo.city_id)>0?1:parseInt(a.promo.point_id)>0?2:1,type_order:a.promo.type_order,promo_desc_true:a.promo.coment,promo_desc_false:a.promo.condition_text,promo_id:a.promo.id,testDate:e})}),300),document.title=a.module_info.name,setTimeout((function(){s.generateTextDescFalse(),s.generateTextDescTrue()}),300);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"save",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n,s,i,r,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.click){e.next=16;break}return this.click=!0,t=[],this.state.conditionItems.map((function(e){t.push(e.id)})),a=[],n=[],s=[],this.state.testDate.map((function(e){s.push(new Date(e).toISOString().split("T")[0])})),s=s.join(","),i={promo_id:this.state.promo_id,cert_text:this.state.cert_text,addr:this.state.numberList,where_promo:this.state.where_promo,promo_count:this.state.promo_count,promo_len:this.state.promo_length,promo_name:this.state.promo_name,generate:this.state.generate_new?1:0,promo_in_count:this.state.count_action,promo_action:this.state.promo_action,promo_type_sale:this.state.type_sale,promo_type:this.state.sale_type,promo_conditions:this.state.promo_conditions,promo_summ:this.state.price_start,promo_summ_to:this.state.price_end,promo_when:this.state.date_promo,date_start:this.state.date_start,date_end:this.state.date_end,time_start:this.state.time_start,time_end:this.state.time_end,day_1:this.state.day_1?1:0,day_2:this.state.day_2?1:0,day_3:this.state.day_3?1:0,day_4:this.state.day_4?1:0,day_5:this.state.day_5?1:0,day_6:this.state.day_6?1:0,day_7:this.state.day_7?1:0,promo_type_order:this.state.type_order,promo_where:this.state.where_order,numberList:this.state.numberList,promo_city:this.state.city,promo_point:this.state.point,about_promo_text:this.state.promo_desc_true,condition_promo_text:this.state.promo_desc_false,textSMS:this.state.textSMS,promo_items:JSON.stringify(a),promo_cat:JSON.stringify(n),promo_items_add:JSON.stringify(this.state.itemsAdd),promo_items_sale:JSON.stringify(this.state.itemsAddPrice),promo_conditions_items:JSON.stringify(t),date_between:s},e.next=12,this.getData("save_edit_promo",i);case 12:r=e.sent,console.log(r),this.setState({modalDialog:!0,modalText:r.text}),setTimeout((function(){l.click=!1}),300);case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeData",value:function(e,t){var a=this;if(this.setState((0,i.Z)({},e,t.target.value)),"date_promo"==e&&(2==t.target.value||3==t.target.value)){var n=new Date,s=new Date;s.setDate(s.getDate()+14),this.setState({rangeDate:[G(n),G(s)],date_start:G(n),date_end:G(s),time_start:2==t.target.value?"10:00":"00:00",time_end:2==t.target.value?"21:40":"23:59"})}if("date_promo"==e&&(4==t.target.value||5==t.target.value)){var r=new Date,l=new Date;l.setDate(l.getDate()+30),this.setState({rangeDate:[G(r),G(l)],date_start:G(r),date_end:G(l),time_start:4==t.target.value?"10:00":"00:00",time_end:4==t.target.value?"21:40":"23:59"})}setTimeout((function(){a.generateTextDescFalse(),a.generateTextDescTrue()}),300)}},{key:"changeDataCheck",value:function(e,t){var a=this;this.setState((0,i.Z)({},e,t.target.checked)),setTimeout((function(){a.generateTextDescFalse(),a.generateTextDescTrue()}),300)}},{key:"changeDateRange",value:function(e){var t=this,a=e[0]?G(e[0]):"",n=e[1]?G(e[1]):"";this.setState({rangeDate:[a,n],date_start:a,date_end:n}),setTimeout((function(){t.generateTextDescFalse(),t.generateTextDescTrue()}),300)}},{key:"changeDataData",value:function(e,t){var a=this;this.setState((0,i.Z)({},e,t)),setTimeout((function(){a.generateTextDescFalse(),a.generateTextDescTrue()}),300)}},{key:"generateTextDescTrue",value:function(){var e=this;if(this.state.auto_text){var t=this.state.promo_action,a="";if(1==parseInt(t)){var n=this.state.type_sale,s=this.state.promo_sale_list.find((function(t){return parseInt(t.id)==parseInt(e.state.promo_sale)})).name,i=this.state.sale_type;if(1==parseInt(n)){var r=this.state.saleItem,l="";r.map((function(e,t){l+=e.name+", "})),a="скидку на "+(l=l.substring(0,l.length-2))+" в размере "+s+(1==parseInt(i)?"руб.":"%")}2==parseInt(n)&&(r=this.state.saleCat,l="",r.map((function(e,t){l+=e.name+", "})),a="скидку на "+(l=l.substring(0,l.length-2))+" в размере "+s+(1==parseInt(i)?"руб.":"%")),3==parseInt(n)&&(a="скидку на всё меню, кроме напитков, соусов, приправ и палочек, в размере "+s+(1==parseInt(i)?"руб.":"%"))}if(2==parseInt(t)){var o="";this.state.itemsAdd.map((function(e,t){0==parseInt(e.price)?o+="бесплатную "+e.name+" "+e.count+"шт. за "+e.price+"руб., ":o+=e.name+" "+e.count+"шт. за "+e.price+"руб., "})),o=o.substring(0,item.length-2),a=1==this.state.itemsAdd.length?"позицию "+o:"позиции "+o}3==parseInt(t)&&(o="",this.state.promo_items_sale.map((function(e,t){o+=e.name+" по "+e.price+"руб., "})),o=o.substring(0,o.length-2),a=this.state.promo_items_sale.length-1==1?"позицию "+o:"позиции "+o);var c="Промокод --promo_name--, действует до "+X(this.state.date_end)+". Заказывай на jacofood.ru!";this.setState({promo_desc_true:a,textSMS:c,cert_text:a})}}},{key:"generateTextDescFalse",value:function(){var e=this;if(this.state.auto_text){var t="";1==parseInt(this.state.where_order)&&0!=parseInt(this.state.city)&&(t=" в г. "+this.state.cities.find((function(t){return parseInt(t.id)==parseInt(e.state.city)})).name),2==parseInt(this.state.where_order)&&0!=parseInt(this.state.point)&&(t=" в г. "+this.state.points.find((function(t){return parseInt(t.id)==parseInt(e.state.point)})).name);var a="Промокод действует c "+J(this.state.date_start)+" до "+J(this.state.date_end)+" с "+this.state.time_start+" до "+this.state.time_end+t;this.setState({promo_desc_false:a})}}},{key:"addItemAdd",value:function(){var e=this,t=this.state.itemsAdd;if(!t.find((function(t){return parseInt(t.item_id)==parseInt(e.state.addItem)}))){var a=this.state.items.find((function(t){return parseInt(t.id)==parseInt(e.state.addItem)}));t.push({item_id:this.state.addItem,name:a.name,count:this.state.addItemCount,price:this.state.addItemPrice});var n=0;t.map((function(e){n+=parseInt(e.price)})),this.setState({itemsAdd:t,addItemAllPrice:n})}}},{key:"priceItemAdd",value:function(){var e=this,t=this.state.itemsAddPrice;if(!t.find((function(t){return parseInt(t.item_id)==parseInt(e.state.priceItem)}))){var a=this.state.items.find((function(t){return parseInt(t.id)==parseInt(e.state.priceItem)}));t.push({id:this.state.priceItem,name:a.name,price:this.state.addItemCount}),this.setState({itemsAddPrice:t})}}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(L.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(B.Z,{color:"inherit"})),h.createElement(C.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1,modalLink:""})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(A.Z,{id:"alert-dialog-title"},"Результат операции"),h.createElement(T.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(j.Z,null,this.state.modalText),h.createElement("br",null),""==this.state.modalLink?null:h.createElement("a",{href:this.state.modalLink,style:{color:"red"}},"Скачать")),h.createElement(P.Z,null,h.createElement(E.Z,{color:"primary",onClick:function(){e.setState({modalDialog:!1})}},"Хорошо"))),h.createElement(_.ZP,{container:!0},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(j.Z,null,"Промокод: ",this.state.promo_name)),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.count_action,func:this.changeData.bind(this,"count_action"),label:"Количество активаций"}))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.promo_conditions_list,value:this.state.promo_conditions,func:this.changeData.bind(this,"promo_conditions"),label:"Условие"})),1!==parseInt(this.state.promo_conditions)?null:h.createElement(h.Fragment,null,h.createElement(_.ZP,{item:!0,xs:12,sm:8},h.createElement(F.e_,{classes:this.state.classes,data:this.state.items,value:this.state.conditionItems,func:function(t,a){e.changeDataData("conditionItems",a)},multiple:!0,label:"Товары"}))),2!==parseInt(this.state.promo_conditions)?null:h.createElement(h.Fragment,null,h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.price_start,func:this.changeData.bind(this,"price_start"),label:"Сумма от"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.price_end,func:this.changeData.bind(this,"price_end"),label:"Сумма до"})))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.$S,{classes:this.state.classes,data:this.state.date_promo_list,value:this.state.date_promo,func:this.changeData.bind(this,"date_promo"),label:"Когда работает промокод"}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:6,className:"MyDaterange"},h.createElement(F.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.w0,{classes:this.state.classes,label:"Время от",value:this.state.time_start,func:this.changeData.bind(this,"time_start")})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(F.w0,{classes:this.state.classes,label:"Время до",value:this.state.time_end,func:this.changeData.bind(this,"time_end")}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(H,{multiple:!1,label:"Кроме дат",value:this.state.testDate,func:this.changeDataData.bind(this,"testDate")}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{marginTop:20},spacing:3},h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_1,func:this.changeDataCheck.bind(this,"day_1"),label:"Понедельник"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_2,func:this.changeDataCheck.bind(this,"day_2"),label:"Вторник"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_3,func:this.changeDataCheck.bind(this,"day_3"),label:"Среда"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_4,func:this.changeDataCheck.bind(this,"day_4"),label:"Четверг"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_5,func:this.changeDataCheck.bind(this,"day_5"),label:"Пятница"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_6,func:this.changeDataCheck.bind(this,"day_6"),label:"Суббота"}),h.createElement(F.IA,{classes:this.state.classes,value:this.state.day_7,func:this.changeDataCheck.bind(this,"day_7"),label:"Воскресенье"})),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.type_order_list,value:this.state.type_order,func:this.changeData.bind(this,"type_order"),label:"Тип заказа"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.where_order_list,value:this.state.where_order,func:this.changeData.bind(this,"where_order"),label:"Где работает"})),1!==parseInt(this.state.where_order)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city,func:this.changeData.bind(this,"city"),label:"Город"})),2!==parseInt(this.state.where_order)?null:h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changeData.bind(this,"point"),label:"Точка"}))),h.createElement(S.Z,{style:{width:"100%",marginTop:20}}),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_desc_true,func:this.changeData.bind(this,"promo_desc_true"),label:"Описание промокода после активации (Промокод дает: )"})),h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promo_desc_false,func:this.changeData.bind(this,"promo_desc_false"),label:"Условие промокода, когда условия не соблюдены"}))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"end",style:{paddingTop:50},spacing:3},h.createElement(E.Z,{variant:"contained",onClick:this.save.bind(this)},"Сохранить"))))}}]),m}(h.Component),Q=function(e){(0,o.Z)(u,e);var t,a,c,m=V(u);function u(e){var t;return(0,r.Z)(this,u),t=m.call(this,e),(0,i.Z)((0,s.Z)(t),"click",!1),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),setTimeout((function(){t.setState({is_load:!1})}),300)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"site_sale_2",module_name:"",is_load:!1,modalText:"",modalDialog:!1,modalLink:"",city_list:[],city_id:0,promoName:"",findPromoList:[]},t}return(0,l.Z)(u,[{key:"componentDidMount",value:(c=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,city_list:t.all_city_list}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"showPromoList",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={city_id:this.state.city_id,promo_name:this.state.promoName},e.next=3,this.getData("search_promo",t);case 3:a=e.sent,console.log(a),this.setState({findPromoList:a});case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"delPromo",value:(t=(0,n.Z)(d().mark((function e(t){var a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Удалить промокод ?")){e.next=7;break}return a={promo_id:t},e.next=5,this.getData("remove_promo",a);case 5:e.sent,setTimeout((function(){n.showPromoList()}),300);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(L.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(B.Z,{color:"inherit"})),h.createElement(C.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1,modalLink:""})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(A.Z,{id:"alert-dialog-title"},"Результат операции"),h.createElement(T.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(j.Z,null,this.state.modalText),h.createElement("br",null),""==this.state.modalLink?null:h.createElement("a",{href:this.state.modalLink,style:{color:"red"}},"Скачать")),h.createElement(P.Z,null,h.createElement(E.Z,{color:"primary",onClick:function(){e.setState({modalDialog:!1})}},"Хорошо"))),h.createElement(_.ZP,{container:!0},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12},h.createElement(Z.OL,{to:"/site_sale_2/new",style:{zIndex:10}},h.createElement(E.Z,{variant:"contained"},"Новый промокод")),h.createElement(Z.OL,{to:"/site_sale_2/stat",style:{zIndex:10,marginLeft:20}},h.createElement(E.Z,{variant:"contained"},"Статистика")),h.createElement(Z.OL,{to:"/site_sale_2/stat_list",style:{zIndex:10,marginLeft:20}},h.createElement(E.Z,{variant:"contained"},"Выписанные промокоды"))),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.city_list,value:this.state.city_id,func:function(t){e.setState({city_id:t.target.value})},label:"Город"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.rZ,{classes:this.state.classes,value:this.state.promoName,func:function(t){e.setState({promoName:t.target.value})},label:"Промокод"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(E.Z,{variant:"contained",onClick:this.showPromoList.bind(this)},"Найти"))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12},h.createElement(v.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null,"Промокод"),h.createElement(b.Z,null,"Город"),h.createElement(b.Z,null,"Было кол-во"),h.createElement(b.Z,null,"Ост. кол-во"),h.createElement(b.Z,null,"Дата окончания"),h.createElement(b.Z,null,"Описание"),h.createElement(b.Z,null))),h.createElement(y.Z,null,this.state.findPromoList.map((function(t,a){return h.createElement(x.Z,{key:a},h.createElement(b.Z,null,h.createElement(Z.OL,{to:"/site_sale_2/edit/"+t.id,style:{zIndex:10}},t.name)),h.createElement(b.Z,null,0==parseInt(t.city_id)?"Все города":t.city_name),h.createElement(b.Z,null,t.def_count),h.createElement(b.Z,null,t.count),h.createElement(b.Z,null,t.date2),h.createElement(b.Z,null,t.coment),h.createElement(b.Z,null," ",h.createElement(D.Z,{style:{cursor:"pointer"},onClick:e.delPromo.bind(e,t.id)})," "))}))))))))}}]),u}(h.Component),ee=function(e){(0,o.Z)(m,e);var t,a,c=V(m);function m(e){var t;return(0,r.Z)(this,m),t=c.call(this,e),(0,i.Z)((0,s.Z)(t),"click",!1),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),setTimeout((function(){t.setState({is_load:!1})}),300)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"site_sale_2",module_name:"",is_load:!1,spam_list:[],spam_id:0,findPromoList:[],spam_list_data:[],spam_list_data_stat:{true:0,all:0,percent:0}},t}return(0,l.Z)(m,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_spam_list");case 2:t=e.sent,console.log(t),this.setState({module_name:t.module_info.name,spam_list:t.spam_list}),document.title=t.module_info.name;case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"show",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={spam_id:this.state.spam_id},e.next=3,this.getData("get_spam_data",t);case 3:a=e.sent,console.log(a),this.setState({spam_list_data:a.spam_list,spam_list_data_stat:a.stat});case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeSpam",value:function(e){var t=this;this.setState({spam_id:e.target.value}),setTimeout((function(){t.show()}),300)}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(L.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(B.Z,{color:"inherit"})),h.createElement(_.ZP,{container:!0},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(_.ZP,{container:!0,direction:"row",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(F.$S,{classes:this.state.classes,data:this.state.spam_list,value:this.state.spam_id,func:this.changeSpam.bind(this),label:"Рассылка"})),h.createElement(_.ZP,{item:!0,xs:12,sm:4},h.createElement(E.Z,{variant:"contained",onClick:this.show.bind(this)},"Обновить"))),h.createElement(_.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:6},h.createElement(v.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null,"Всего"),h.createElement(b.Z,null,"Использовали"),h.createElement(b.Z,null,"%"))),h.createElement(y.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null,this.state.spam_list_data_stat.all),h.createElement(b.Z,null,this.state.spam_list_data_stat.true),h.createElement(b.Z,null,this.state.spam_list_data_stat.percent))))),h.createElement(_.ZP,{item:!0,xs:6},h.createElement(v.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(b.Z,null,"#"),h.createElement(b.Z,null,"Номер"),h.createElement(b.Z,null,"Ост активаций"))),h.createElement(y.Z,null,this.state.spam_list_data.map((function(e,t){return h.createElement(x.Z,{key:t},h.createElement(b.Z,null,t+1),h.createElement(b.Z,null,e.number),h.createElement(b.Z,null,e.count))}))))))))}}]),m}(h.Component),te=function(e){(0,o.Z)(u,e);var t,a,c,m=V(u);function u(e){var t;return(0,r.Z)(this,u),t=m.call(this,e),(0,i.Z)((0,s.Z)(t),"click",!1),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),setTimeout((function(){t.setState({is_load:!1})}),300)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"site_sale_2",module_name:"",is_load:!1,date_start:G(new Date),date_end:G(new Date),rangeDate:[G(new Date),G(new Date)],promo_list:[]},t}return(0,l.Z)(u,[{key:"componentDidMount",value:(c=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_spam_list");case 2:t=e.sent,console.log(t),this.setState({module_name:t.module_info.name,spam_list:t.spam_list}),document.title=t.module_info.name;case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"show",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={spam_id:this.state.spam_id},e.next=3,this.getData("get_spam_data",t);case 3:a=e.sent,console.log(a),this.setState({spam_list_data:a.spam_list,spam_list_data_stat:a.stat});case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getUsers",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={dateStart:this.state.date_start,dateEnd:this.state.date_end},e.next=3,this.getData("get_promo_users",t);case 3:a=e.sent,this.setState({promo_list:a.promo_list});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeDateRange",value:function(e){var t=e[0]?G(e[0]):"",a=e[1]?G(e[1]):"";this.setState({rangeDate:[t,a],date_start:t,date_end:a})}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(L.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(B.Z,{color:"inherit"})),h.createElement(_.ZP,{container:!0},h.createElement(_.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(_.ZP,{container:!0,direction:"row",style:{paddingTop:20},spacing:3},h.createElement(_.ZP,{item:!0,xs:12,sm:6,className:"MyDaterange"},h.createElement(F.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(_.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{variant:"contained",onClick:this.getUsers.bind(this)},"Обновить"))),h.createElement(_.ZP,{item:!0,xs:12,sm:12,style:{marginTop:20}},this.state.promo_list.map((function(e,t){return h.createElement(N.Z,{key:t,style:{width:"100%"}},h.createElement(R.Z,{expandIcon:h.createElement(M.Z,null)},h.createElement(j.Z,null,e.name)),h.createElement(O.Z,null,h.createElement(v.Z,{size:"small",style:{marginTop:15}},h.createElement(y.Z,null,e.promo_list.map((function(e,t){return h.createElement(x.Z,{key:t,style:{backgroundColor:1==parseInt(e.is_delete)?"#c03":"white",color:1==parseInt(e.is_delete)?"white":"black"}},h.createElement(b.Z,{style:{color:"inherit"}},t+1),h.createElement(b.Z,{style:{color:"inherit",backgroundColor:0==parseInt(e.count)?"green":"#c03"}},e.name),h.createElement(b.Z,{style:{color:"inherit"}},e.coment),h.createElement(b.Z,{style:{color:"inherit"}},0==parseInt(e.count)?h.createElement(I.Z,null):h.createElement(D.Z,null)))}))))))})))))}}]),u}(h.Component);function ae(){var e=U(),t=(0,p.k6)();return h.createElement(q,{classes:e,history:t})}function ne(){var e=U(),t=(0,p.k6)(),a=(0,p.UO)().promoId;return h.createElement(K,{promoId:a,classes:e,history:t})}function se(){var e=U(),t=(0,p.k6)();return h.createElement(Q,{classes:e,history:t})}function ie(){var e=U(),t=(0,p.k6)();return h.createElement(ee,{classes:e,history:t})}function re(){var e=U(),t=(0,p.k6)();return h.createElement(te,{classes:e,history:t})}},1714:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SiteStatMarc:()=>$});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(4603),v=a(9062),y=a(9573),b=a(8732),w=a(6926),x=a(7896),k=a(6011),S=a(3694),D=a(6501),I=a(579),C=a(4767),P=a(6392),T=a(7504),A=a(8273),N=a(3640),R=a(8613),O=a(1315),M=a(5409),L=a(9293),B=a(562),F=a(350),j=a(6406);var z=a(7563),W=(0,g.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),V=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:W.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function H(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}var Y=function(e){(0,l.Z)(g,e);var t,a,u,p,f=(u=g,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(u);if(p){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function g(e){var t;return(0,s.Z)(this,g),t=f.call(this,e),(0,m.Z)((0,r.Z)(t),"chartnewusers",null),(0,m.Z)((0,r.Z)(t),"chartorders",null),(0,m.Z)((0,r.Z)(t),"chartavgsumm",null),(0,m.Z)((0,r.Z)(t),"chartcountpos",null),(0,m.Z)((0,r.Z)(t),"chartnewusersD",null),(0,m.Z)((0,r.Z)(t),"chartordersD",null),(0,m.Z)((0,r.Z)(t),"chartavgsummD",null),(0,m.Z)((0,r.Z)(t),"chartcountposD",null),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:z.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"site_stat_marc",module_name:"",is_load:!1,choosePoint:[],points:[],rangeDate:[H(new Date),H(new Date)],promoName:"",newUsersTable:[],countOrdersTable:[],avgSumm:[],countPos:[],typesShow:[{id:1,name:"Итоговый результат"},{id:2,name:"График по месяцам"},{id:3,name:"График по дням"}],typeShow:1},t}return(0,i.Z)(g,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,points:t.points}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"show",value:(t=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={points:this.state.choosePoint,dateStart:this.state.rangeDate[0],dateEnd:this.state.rangeDate[1],typeShow:this.state.typeShow,promoName:this.state.promoName},e.next=3,this.getData("show",t);case 3:a=e.sent,console.log(a),1==parseInt(this.state.typeShow)&&this.setState({newUsersTable:a.new_users,countOrdersTable:a.count_orders,avgSumm:a.avg_summ,countPos:a.count_pos}),2==parseInt(this.state.typeShow)&&(this.renderGraphNewUsers(a.new_users),this.renderGraphOrders(a.count_orders),this.renderGraphAvgSumm(a.avg_summ),this.renderCountPos(a.count_pos)),3==parseInt(this.state.typeShow)&&(this.renderGraphNewUsersD(a.new_users),this.renderGraphOrdersD(a.count_orders),this.renderGraphAvgSummD(a.avg_summ),this.renderCountPosD(a.count_pos));case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderGraphNewUsers",value:function(e){this.chartnewusers&&this.chartnewusers.dispose();var t=I.f.new("chartnewusers");this.chartnewusers=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[],i=[];e.site.map((function(e){var t=e.date.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.center.map((function(e){var t=e.date.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.all.map((function(e){var t=e.date.split("-");i.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})}));var r=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),l=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"month",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function o(e,n,s){var i=a.series.push(L.e.new(t,{name:e,xAxis:l,yAxis:r,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));i.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:i.get("fill")})})})),i.strokes.template.set("strokeWidth",2),i.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),i.data.setAll(s)}l.get("dateFormats").day="MM/dd",l.get("periodChangeDateFormats").day="MM/dd",o("Сайт","value",n),o("Контакт-центр","value",s),o("Всего","value",i),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:l})),l.set("tooltip",C.u.new(t,{themeTags:["axis"]})),r.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderGraphNewUsersD",value:function(e){this.chartnewusersD&&this.chartnewusersD.dispose();var t=I.f.new("chartnewusersD");this.chartnewusersD=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[],i=[];e.site.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.center.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.all.map((function(e){var t=e.date_new.split("-");i.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})}));var r=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),l=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"day",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function o(e,n,s){var i=a.series.push(L.e.new(t,{name:e,xAxis:l,yAxis:r,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));i.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:i.get("fill")})})})),i.strokes.template.set("strokeWidth",2),i.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),i.data.setAll(s)}l.get("dateFormats").day="MM/dd",l.get("periodChangeDateFormats").day="MM/dd",o("Сайт","value",n),o("Контакт-центр","value",s),o("Всего","value",i),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:l})),l.set("tooltip",C.u.new(t,{themeTags:["axis"]})),r.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderGraphOrders",value:function(e){this.chartorders&&this.chartorders.dispose();var t=I.f.new("chartorders");this.chartorders=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[],i=[],r=[];e.all.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.pic.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.dev.map((function(e){var t=e.date_new.split("-");i.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.hall.map((function(e){var t=e.date_new.split("-");r.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})}));var l=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),o=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"month",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function c(e,n,s){var i=a.series.push(L.e.new(t,{name:e,xAxis:o,yAxis:l,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));i.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:i.get("fill")})})})),i.strokes.template.set("strokeWidth",2),i.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),i.data.setAll(s)}o.get("dateFormats").day="MM/dd",o.get("periodChangeDateFormats").day="MM/dd",c("Всего","value",n),c("Самовывозов","value",s),c("Доставок","value",i),c("Зал","value",r),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:o})),o.set("tooltip",C.u.new(t,{themeTags:["axis"]})),l.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderGraphOrdersD",value:function(e){this.chartordersD&&this.chartordersD.dispose();var t=I.f.new("chartordersD");this.chartordersD=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[],i=[],r=[];e.all.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.pic.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.dev.map((function(e){var t=e.date_new.split("-");i.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.hall.map((function(e){var t=e.date_new.split("-");r.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})}));var l=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),o=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"day",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function c(e,n,s){var i=a.series.push(L.e.new(t,{name:e,xAxis:o,yAxis:l,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));i.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:i.get("fill")})})})),i.strokes.template.set("strokeWidth",2),i.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),i.data.setAll(s)}o.get("dateFormats").day="MM/dd",o.get("periodChangeDateFormats").day="MM/dd",c("Всего","value",n),c("Самовывозов","value",s),c("Доставок","value",i),c("Зал","value",r),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:o})),o.set("tooltip",C.u.new(t,{themeTags:["axis"]})),l.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderGraphAvgSumm",value:function(e){this.chartavgsumm&&this.chartavgsumm.dispose();var t=I.f.new("chartavgsumm");this.chartavgsumm=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[],i=[],r=[];e.all.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.pic.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.dev.map((function(e){var t=e.date_new.split("-");i.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.hall.map((function(e){var t=e.date_new.split("-");r.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})}));var l=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),o=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"month",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function c(e,n,s){var i=a.series.push(L.e.new(t,{name:e,xAxis:o,yAxis:l,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));i.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:i.get("fill")})})})),i.strokes.template.set("strokeWidth",2),i.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),i.data.setAll(s)}o.get("dateFormats").day="MM/dd",o.get("periodChangeDateFormats").day="MM/dd",c("Всего","value",n),c("Самовывозов","value",s),c("Доставок","value",i),c("Зал","value",r),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:o})),o.set("tooltip",C.u.new(t,{themeTags:["axis"]})),l.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderGraphAvgSummD",value:function(e){this.chartavgsummD&&this.chartavgsummD.dispose();var t=I.f.new("chartavgsummD");this.chartavgsummD=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[],i=[],r=[];e.all.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.pic.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.dev.map((function(e){var t=e.date_new.split("-");i.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.hall.map((function(e){var t=e.date_new.split("-");r.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})}));var l=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),o=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"day",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function c(e,n,s){var i=a.series.push(L.e.new(t,{name:e,xAxis:o,yAxis:l,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));i.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:i.get("fill")})})})),i.strokes.template.set("strokeWidth",2),i.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),i.data.setAll(s)}o.get("dateFormats").day="MM/dd",o.get("periodChangeDateFormats").day="MM/dd",c("Всего","value",n),c("Самовывозов","value",s),c("Доставок","value",i),c("Зал","value",r),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:o})),o.set("tooltip",C.u.new(t,{themeTags:["axis"]})),l.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderCountPos",value:function(e){this.chartcountpos&&this.chartcountpos.dispose();var t=I.f.new("chartcountpos");this.chartcountpos=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[];e.count_pizza.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})})),e.count_rolls.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,1).getTime(),value:parseInt(e.count)})}));var i=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),r=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"month",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function l(e,n,s){var l=a.series.push(L.e.new(t,{name:e,xAxis:r,yAxis:i,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));l.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:l.get("fill")})})})),l.strokes.template.set("strokeWidth",2),l.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),l.data.setAll(s)}r.get("dateFormats").day="MM/dd",r.get("periodChangeDateFormats").day="MM/dd",l("Роллов","value",s),l("Пиццы","value",n),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:r})),r.set("tooltip",C.u.new(t,{themeTags:["axis"]})),i.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"renderCountPosD",value:function(e){this.chartcountposD&&this.chartcountposD.dispose();var t=I.f.new("chartcountposD");this.chartcountposD=t,t.setThemes([F.Z.new(t)]);var a=t.container.children.push(A.z.new(t,{panY:!1,wheelY:"zoomX",layout:t.verticalLayout,maxTooltipDistance:0})),n=[],s=[];e.count_pizza.map((function(e){var t=e.date_new.split("-");n.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})})),e.count_rolls.map((function(e){var t=e.date_new.split("-");s.push({date:new Date(t[0],parseInt(t[1])-1,parseInt(t[2])).getTime(),value:parseInt(e.count)})}));var i=a.yAxes.push(N.m.new(t,{extraTooltipPrecision:1,renderer:R.j.new(t,{})})),r=a.xAxes.push(O.S.new(t,{baseInterval:{timeUnit:"day",count:1},startLocation:.5,endLocation:.5,renderer:M.n.new(t,{minGridDistance:30})}));function l(e,n,s){var l=a.series.push(L.e.new(t,{name:e,xAxis:r,yAxis:i,valueYField:n,valueXField:"date",tooltip:C.u.new(t,{}),maskBullets:!1}));l.bullets.push((function(){return P.g.new(t,{sprite:T.C.new(t,{radius:5,fill:l.get("fill")})})})),l.strokes.template.set("strokeWidth",2),l.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}"),l.data.setAll(s)}r.get("dateFormats").day="MM/dd",r.get("periodChangeDateFormats").day="MM/dd",l("Роллов","value",s),l("Пиццы","value",n),a.set("cursor",B.L.new(t,{behavior:"zoomXY",xAxis:r})),r.set("tooltip",C.u.new(t,{themeTags:["axis"]})),i.set("tooltip",C.u.new(t,{themeTags:["axis"]}))}},{key:"changeDateRange",value:function(e){var t=e[0]?H(e[0]):"",a=e[1]?H(e[1]):"";this.setState({rangeDate:[t,a]})}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(v.Z,{color:"inherit"})),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:6,className:"MyDaterange"},h.createElement(j.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(j.e_,{classes:this.state.classes,data:this.state.points,value:this.state.choosePoint,func:function(t,a){e.setState({choosePoint:a})},multiple:!0,label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:6,sm:3},h.createElement(j.rZ,{value:this.state.promoName,func:function(t){e.setState({promoName:t.target.value})},label:"Промокод"})),h.createElement(Z.ZP,{item:!0,xs:6,sm:3},h.createElement(j.$S,{data:this.state.typesShow,value:this.state.typeShow,func:function(t){e.setState({typeShow:t.target.value})},label:"Как показать"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{variant:"contained",onClick:this.show.bind(this)},"Обновить данные")),1!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Новые клиенты итог"),h.createElement(x.Z,{component:D.Z},h.createElement(y.Z,null,h.createElement(k.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},"Всего"),h.createElement(w.Z,{style:{textAlign:"center"}},"Контакт-центр"),h.createElement(w.Z,{style:{textAlign:"center"}},"Сайт"))),h.createElement(b.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},this.state.newUsersTable.all?this.state.newUsersTable.all:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.newUsersTable.center?this.state.newUsersTable.center:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.newUsersTable.site?this.state.newUsersTable.site:0)))))),1!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Заказы итог"),h.createElement(x.Z,{component:D.Z},h.createElement(y.Z,null,h.createElement(k.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},"Всего"),h.createElement(w.Z,{style:{textAlign:"center"}},"Доставок"),h.createElement(w.Z,{style:{textAlign:"center"}},"Зал"),h.createElement(w.Z,{style:{textAlign:"center"}},"Самовывоз"))),h.createElement(b.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},this.state.countOrdersTable.all?this.state.countOrdersTable.all:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.countOrdersTable.dev?this.state.countOrdersTable.dev:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.countOrdersTable.hall?this.state.countOrdersTable.hall:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.countOrdersTable.pic?this.state.countOrdersTable.pic:0)))))),1!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Средний чек итог"),h.createElement(x.Z,{component:D.Z},h.createElement(y.Z,null,h.createElement(k.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},"Всего"),h.createElement(w.Z,{style:{textAlign:"center"}},"Доставка"),h.createElement(w.Z,{style:{textAlign:"center"}},"Зал"),h.createElement(w.Z,{style:{textAlign:"center"}},"Самовывоз"))),h.createElement(b.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},this.state.avgSumm.all?this.state.avgSumm.all:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.avgSumm.dev?this.state.avgSumm.dev:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.avgSumm.hall?this.state.avgSumm.hall:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.avgSumm.pic?this.state.avgSumm.pic:0)))))),1!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Позиций итог"),h.createElement(x.Z,{component:D.Z},h.createElement(y.Z,null,h.createElement(k.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},"Роллов"),h.createElement(w.Z,{style:{textAlign:"center"}},"Пиццы"))),h.createElement(b.Z,null,h.createElement(S.Z,null,h.createElement(w.Z,{style:{textAlign:"center"}},this.state.countPos.count_rolls?this.state.countPos.count_rolls:0),h.createElement(w.Z,{style:{textAlign:"center"}},this.state.countPos.count_pizza?this.state.countPos.count_pizza:0)))))),2!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Новые клиенты по месяцам"),h.createElement("div",{id:"chartnewusers",style:{width:"100%",height:"500px"}})),2!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Заказы по месяцам"),h.createElement("div",{id:"chartorders",style:{width:"100%",height:"500px"}})),2!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Средний чек по месяцам"),h.createElement("div",{id:"chartavgsumm",style:{width:"100%",height:"500px"}})),2!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Позиций по месяцам"),h.createElement("div",{id:"chartcountpos",style:{width:"100%",height:"500px"}})),3!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Новые клиенты по дням"),h.createElement("div",{id:"chartnewusersD",style:{width:"100%",height:"500px"}})),3!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Заказы по дням"),h.createElement("div",{id:"chartordersD",style:{width:"100%",height:"500px"}})),3!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Средний чек по дням"),h.createElement("div",{id:"chartavgsummD",style:{width:"100%",height:"500px"}})),3!=this.state.typeShow?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h2",{style:{textAlign:"center"}},"Позиций по дням"),h.createElement("div",{id:"chartcountposD",style:{width:"100%",height:"500px"}}))))}}]),g}(h.Component);function $(){var e=V(),t=(0,p.k6)();return h.createElement(Y,{classes:e,history:t})}},964:(e,t,a)=>{"use strict";a.r(t),a.d(t,{SocialNetwork:()=>I});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(4603),v=a(9062),y=a(6406),b=a(9669),w=a.n(b);var x=a(7563),k=(0,g.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),S=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:k.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),D=function(e){(0,l.Z)(b,e);var t,a,u,p,f,g=(p=b,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(f){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function b(e){var t;return(0,s.Z)(this,b),t=g.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:x.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"socialnetwork",module_name:"",is_load:!1,cityList:[],city_id:0,dataInfo:null,file:null},t}return(0,i.Z)(b,[{key:"componentDidMount",value:(u=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,cityList:t.cities,city_id:t.cities[0].id}),document.title=t.module_info.name,setTimeout((function(){a.updateData()}),50);case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"changeCity",value:function(e){var t=this,a=e.target.value;this.setState({city_id:a,dataInfo:null,file:null}),setTimeout((function(){t.updateData()}),50)}},{key:"updateData",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={city_id:this.state.city_id},e.next=3,this.getData("get_data",t);case 3:a=e.sent,this.setState({dataInfo:a,file:null});case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changeData",value:function(e,t){var a=t.target.value,n=this.state.dataInfo;n[[e]]=a,this.setState({dataInfo:n})}},{key:"saveData",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={city_id:this.state.city_id,vk:this.state.dataInfo.vk,inst:this.state.dataInfo.inst,ok:this.state.dataInfo.ok,tg:this.state.dataInfo.tg,fb:this.state.dataInfo.fb,file1:this.state.file?this.state.file.name:""},e.next=3,this.getData("save_data",t);case 3:e.sent,this.state.file&&(setTimeout((function(){n.setState({is_load:!0})}),350),(a=new FormData).append("file",this.state.file,this.state.file.name),w().post("https://jacochef.ru/api/files/v2/upload/upload.php",a).then((function(e){console.log(e),n.setState({is_load:!1,file:null})})).catch((function(e){console.log(e)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleFileInput",value:function(e){var t=e.target.files[0];console.log(t),this.setState({file:t})}},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(E.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(v.Z,{color:"inherit"})),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:6,sm:6},h.createElement(y.$S,{data:this.state.cityList,value:this.state.city_id,func:this.changeCity.bind(this),label:"Город"})),null==this.state.dataInfo?null:h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.rZ,{label:"Вконтакте",value:this.state.dataInfo?this.state.dataInfo.vk:"",func:this.changeData.bind(this,"vk")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.rZ,{label:"Инстаграм",value:this.state.dataInfo?this.state.dataInfo.inst:"",func:this.changeData.bind(this,"inst")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.rZ,{label:"Одноклассники",value:this.state.dataInfo?this.state.dataInfo.ok:"",func:this.changeData.bind(this,"ok")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.rZ,{label:"Телеграм",value:this.state.dataInfo?this.state.dataInfo.tg:"",func:this.changeData.bind(this,"tg")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.rZ,{label:"Facebook",value:this.state.dataInfo?this.state.dataInfo.fb:"",func:this.changeData.bind(this,"fb")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(y.rZ,{type:"file",label:"",func:this.handleFileInput.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(_.Z,{variant:"contained",onClick:this.saveData.bind(this)},"Обновить данные"))))))}}]),b}(h.Component);function I(){var e=S(),t=(0,p.k6)();return h.createElement(D,{classes:e,history:t})}},3066:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Tender:()=>I});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(5725),g=a(2642),Z=a(4666),_=a(3447),E=a(7750),v=a(7645),y=a(4603),b=a(9062),w=a(6406),x=a(4e3);var k=a(7563),S=function(e){return"Цена"==e.colDef.headerName?{borderRight:"1px solid #bababa"}:null},D=function(e){(0,l.Z)(I,e);var t,a,u,p,D=(u=I,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(u);if(p){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function I(e){var t;return(0,s.Z)(this,I),t=D.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:k.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"tender",module_name:"",is_load:!1,modalDialog:!1,testTable:[],vendors:[],myVendors:[],showVendors:[],params_api:null,params_columnApi:null},t}return(0,i.Z)(I,[{key:"componentDidMount",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,a=[],t.items.map((function(e,n){a.push({section:"big-title",item:e.name}),e.cats.map((function(e,n){a.push({section:"big-title",item:e.name}),e.items.map((function(e,n){var s={};t.vendors.map((function(a,n){var i=t.vendor_price.find((function(t){return parseInt(t.vendor_id)==parseInt(a.id)&&parseInt(t.item_id)==parseInt(e.id)}));i?(s["vend_price_"+a.id]=i.price,s["vend_city_"+a.id]="тлт"):(s["vend_price_"+a.id]="",s["vend_city_"+a.id]="")})),s.item=e.name,s.section="last";var i=t.ras.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}));s.ras=i?i.count_pf:"",a.push(s)}))}))})),this.setState({module_name:t.module_info.name,testTable:a,vendors:t.vendors,showVendors:t.vendors}),document.title=t.module_info.name;case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onCellClicked",value:function(e){console.log(e.data),console.log(e.colDef.field)}},{key:"onGridReady",value:function(e){this.setState({params_api:e.api,params_columnApi:e.columnApi})}},{key:"show",value:(t=(0,n.Z)(d().mark((function e(){var t,a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendors:this.state.myVendors},e.next=3,this.getData("get_data",t);case 3:a=e.sent,n=[],a.items.map((function(e,t){n.push({section:"big-title",item:e.name}),e.cats.map((function(e,t){n.push({section:"big-title",item:e.name}),e.items.map((function(e,t){var s={};a.vendors.map((function(t,n){var i=a.vendor_price.find((function(a){return parseInt(a.vendor_id)==parseInt(t.id)&&parseInt(a.item_id)==parseInt(e.id)}));i?(s["vend_price_"+t.id]=i.price,s["vend_city_"+t.id]="тлт"):(s["vend_price_"+t.id]="",s["vend_city_"+t.id]="")})),s.item=e.name,s.section="last";var i=a.ras.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}));s.ras=i?i.count_pf:"",n.push(s)}))}))})),this.setState({testTable:n,showVendors:a.vendors});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(y.Z,{open:this.state.is_load},h.createElement(b.Z,{color:"inherit"})),h.createElement(Z.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(v.Z,{id:"alert-dialog-title"},"Новая категория"),h.createElement(E.Z,null),h.createElement(_.Z,null,h.createElement(g.Z,{color:"primary"},"Сохранить"))),h.createElement(f.ZP,{container:!0,spacing:3},h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement(w.e_,{data:this.state.vendors,multiple:!0,value:this.state.myVendors,func:function(t,a){e.setState({myVendors:a})},label:"Поставщики"})),h.createElement(f.ZP,{item:!0,xs:12,sm:3},h.createElement(g.Z,{variant:"contained",onClick:this.show.bind(this)},"Показать")),h.createElement(f.ZP,{item:!0,xs:12},h.createElement("div",{className:"ag-theme-alpine",style:{height:600,width:"100%"}},h.createElement(x.AgGridReact,{onGridReady:this.onGridReady.bind(this),onCellClicked:this.onCellClicked,rowData:this.state.testTable},h.createElement(x.AgGridColumn,{field:"ras",width:120,pinned:"left"}),h.createElement(x.AgGridColumn,{field:"item",width:300,pinned:"left",cellClassRules:{"cell-span":"data.section==='big-title'"}}),h.createElement(x.AgGridColumn,{hide:!0}),this.state.showVendors.map((function(e,t){return h.createElement(x.AgGridColumn,{key:t,headerName:e.name,resizable:!0,width:180},h.createElement(x.AgGridColumn,{field:"vend_city_"+e.id,headerName:"Город",resizable:!0,width:90}),h.createElement(x.AgGridColumn,{field:"vend_price_"+e.id,headerName:"Цена",resizable:!0,width:90,cellStyle:S}))}))))),h.createElement(f.ZP,{item:!0,xs:12,sm:12})))}}]),I}(h.Component);function I(){var e=(0,p.k6)();return h.createElement(D,{history:e})}},8669:(e,t,a)=>{"use strict";a.r(t),a.d(t,{VendorItemPrice:()=>B});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(9573),v=a(8732),y=a(6926),b=a(7896),w=a(6011),x=a(3694),k=a(6501),S=a(4666),D=a(3447),I=a(7750),C=a(6408),P=a(7645),T=a(4603),A=a(9062),N=a(6406);var R=a(7563),O=(0,g.Z)({palette:{primary:{main:"#c03"}}}),M=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:O.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),L=function(e){(0,l.Z)(M,e);var t,a,u,p,f,g,O=(f=M,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(g){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function M(e){var t;return(0,s.Z)(this,M),t=O.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){setTimeout((function(){t.setState({is_load:!1})}),300),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"vendor_item_price",module_name:"",is_load:!1,modalDialog:!1,vendors:[],vendor:0,items:[],cities:[],city:-1,allCity:!1,isPrioriti:!1},t}return(0,i.Z)(M,[{key:"componentDidMount",value:(p=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,cities:t.cities}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"changeCity",value:(u=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={city:t.target.value},e.next=3,this.getData("get_vendors",a);case 3:n=e.sent,this.setState({vendors:n,city:t.target.value,vendor:0,items:[]});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"changeVendor",value:(a=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={city:this.state.city,vendor_id:t.target.value},e.next=3,this.getData("get_vendor_items",a);case 3:n=e.sent,this.setState({items:n,vendor:t.target.value});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"update",value:function(e,t,a){var n=this.state.items;n.map((function(s,i){parseInt(s.item_id)==parseInt(e)&&(n[i][t]=a.target.value,n[i].price=(parseFloat(n[i].full_price)/parseFloat(n[i].rec_pq)).toFixed(2))})),this.setState({items:n})}},{key:"save",value:(t=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=(t={vendor_id:this.state.vendor,items:this.state.items,city_id:this.state.city,all_city:!0===this.state.allCity?1:0,is_prioriti:!0===this.state.isPrioriti?1:0}).all_city){e.next=8;break}if(!confirm("Точно сохранить на все города поставщика ?")){e.next=6;break}return e.next=5,this.getData("save_price",t);case 5:e.sent;case 6:e.next=11;break;case 8:return e.next=10,this.getData("save_price",t);case 10:e.sent;case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(T.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(A.Z,{color:"inherit"})),h.createElement(S.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,{id:"alert-dialog-title"}),h.createElement(I.Z,null,h.createElement(C.Z,{id:"alert-dialog-description"})),h.createElement(D.Z,null,h.createElement(_.Z,{color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(N.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city,func:this.changeCity.bind(this),label:"Город"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(N.$S,{classes:this.state.classes,data:this.state.vendors,value:this.state.vendor,func:this.changeVendor.bind(this),label:"Поставщик"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(N.IA,{classes:this.state.classes,value:this.state.allCity,func:function(t){e.setState({allCity:t.target.checked})},label:"На все города поставщика"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(N.IA,{classes:this.state.classes,value:this.state.isPrioriti,func:function(t){e.setState({isPrioriti:t.target.checked})},label:"Приоритетный постащик"})),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(_.Z,{onClick:this.save.bind(this),variant:"contained"},"Сохранить")),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(b.Z,{component:k.Z},h.createElement(E.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(y.Z,null,"Позиция"),h.createElement(y.Z,null),h.createElement(y.Z,null,"Комментарий"),h.createElement(y.Z,null,"Цена за упаковку"),h.createElement(y.Z,null,"Объем упаковки"),h.createElement(y.Z,null,"Цена за 1 ед."))),h.createElement(v.Z,null,this.state.items.map((function(t,a){return h.createElement(x.Z,{key:a},h.createElement(y.Z,null,t.name),h.createElement(y.Z,null,t.name_for_vendor),h.createElement(y.Z,null,h.createElement(N.rZ,{label:"",value:t.comment,func:e.update.bind(e,t.item_id,"comment")})),h.createElement(y.Z,null,h.createElement(N.rZ,{label:"",value:t.full_price,func:e.update.bind(e,t.item_id,"full_price")})),h.createElement(y.Z,null,h.createElement(N.$S,{classes:e.state.classes,data:t.pqs,value:t.rec_pq,func:e.update.bind(e,t.item_id,"rec_pq"),label:""})),h.createElement(y.Z,null,t.price," / ",t.ei_name))}))))))))}}]),M}(h.Component);function B(){var e=M(),t=(0,p.k6)();return h.createElement(L,{classes:e,history:t})}},432:(e,t,a)=>{"use strict";a.r(t),a.d(t,{VendorModule:()=>V});var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),o=a(6215),c=a(1120),m=a(4942),u=a(7757),d=a.n(u),h=a(7294),p=a(5977),f=a(225),g=a(4345),Z=a(5725),_=a(2642),E=a(9573),v=a(8732),y=a(6926),b=a(7896),w=a(6011),x=a(3694),k=a(6501),S=a(2961),D=a(2450),I=a(4637),C=a(6540),P=a(594),T=a(4666),A=a(3447),N=a(7750),R=a(7645),O=a(4603),M=a(9062),L=a(6406),B=a(2658);var F=a(7563),j=(0,g.Z)({palette:{primary:{main:"#c03"}}}),z=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:j.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),W=function(e){(0,l.Z)(Y,e);var t,a,u,p,f,g,j,z,W,V,H=(W=Y,V=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(W);if(V){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function Y(e){var t;return(0,s.Z)(this,Y),t=H.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:F.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){setTimeout((function(){t.setState({is_load:!1})}),300),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"vendor_module",module_name:"",is_load:!1,modalItems:!1,modalVendor:!1,modalVendorNew:!1,vendors:[],allItems:[],vendor_items:[],openVendor:null,customAdd:0,vendorCities:[],allCities:[],nds:[{id:-1,name:"Без НДС"},{id:10,name:"10% НДС"},{id:20,name:"20% НДС"}],nds_:[-1,10,20],cities:[],city:-1},t}return(0,i.Z)(Y,[{key:"componentDidMount",value:(z=(0,n.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,vendors:t.vendors,cities:t.cities}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return z.apply(this,arguments)})},{key:"changeNDS",value:function(e,t){this.state.vendor_items.map((function(a,n){parseInt(a.item_id)==parseInt(e)&&(a.nds=t.target.value)})),this.setState({vendor_items:this.state.vendor_items})}},{key:"openModalItems",value:(j=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={vendor_id:t.id},e.next=3,this.getData("get_vendor_items",a);case 3:n=e.sent,this.setState({modalItems:!0,allItems:n.all_items,vendor_items:n.vendor_items,openVendor:t});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"openModalVendor",value:(g=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={vendor_id:t.id},e.next=3,this.getData("get_vendor_info",a);case 3:n=e.sent,this.setState({modalVendor:!0,openVendor:n.vendor,vendorCities:n.vendor_cities,allCities:n.all_cities});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"openModalVendorNew",value:(f=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendor_id:0},e.next=3,this.getData("get_vendor_info",t);case 3:a=e.sent,this.setState({modalVendorNew:!0,openVendor:{addr:"",bill_ex:"0",email:"",email_2:"",inn:"",min_price:"",name:"",need_img_bill_ex:"0",ogrn:"",phone:"",text:""},vendorCities:[],allCities:a.all_cities});case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"saveVendorItems",value:(p=(0,n.Z)(d().mark((function e(){var t,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t={vendor_id:this.state.openVendor.id,items:this.state.vendor_items}).items.filter((function(e,t){return!a.state.nds_.includes(parseInt(e.nds))})).length>0)){e.next=5;break}return alert("У одной или нескольких позиций не заполнен НДС"),e.abrupt("return");case 5:return e.next=7,this.getData("save_vendor_items",t);case 7:e.sent,this.setState({modalItems:!1,vendor_items:[],openVendor:null});case 9:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"saveVendor",value:(u=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendor:this.state.openVendor,vendor_cities:this.state.vendorCities,city:this.state.city},e.next=3,this.getData("update_vendor",t);case 3:a=e.sent,this.setState({modalVendor:!1,openVendor:null,vendorCities:[],allCities:[],vendors:a.vendors});case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"addVendor",value:(a=(0,n.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendor:this.state.openVendor,vendor_cities:this.state.vendorCities,city:this.state.city},e.next=3,this.getData("new_vendor",t);case 3:if(!1!==(a=e.sent).st){e.next=7;break}return alert(a.text),e.abrupt("return");case 7:this.setState({modalVendorNew:!1,openVendor:null,vendorCities:[],allCities:[],vendors:a.vendors});case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"delItem",value:function(e){var t=this.state.vendor_items;t=t.filter((function(t){return parseInt(t.item_id)!=parseInt(e)})),this.setState({vendor_items:t})}},{key:"addItem",value:function(e){var t=this.state.vendor_items;t.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}))||t.push({item_id:e.id,item_name:e.name,nds:-2}),this.setState({vendor_items:t})}},{key:"addItemCustom",value:function(){var e=this,t=this.state.allItems.find((function(t){return parseInt(t.id)==parseInt(e.state.customAdd)}));this.addItem(t)}},{key:"testChange",value:function(e,t){var a=this.state.openVendor;a[e]="bill_ex"==e||"need_img_bill_ex"==e?!0===t.target.checked?1:0:t.target.value,this.setState({openVendor:a})}},{key:"changeCity",value:(t=(0,n.Z)(d().mark((function e(t){var a,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={city:t.target.value},e.next=3,this.getData("get_vendors",a);case 3:n=e.sent,this.setState({vendors:n,city:t.target.value});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changeSort",value:function(e,t){var a=this;this.state.vendor_items.map((function(n,s){parseInt(n.item_id)==parseInt(e)&&(a.state.vendor_items[s].sort=t.target.value)})),this.setState({vendor_items:this.state.vendor_items})}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(O.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(M.Z,{color:"inherit"})),h.createElement(T.Z,{open:this.state.modalItems,fullWidth:!0,maxWidth:"md",onClose:function(){e.setState({modalItems:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(R.Z,{id:"alert-dialog-title"},"Товары поставщика ",this.state.openVendor?this.state.openVendor.name:""),h.createElement(N.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,style:{paddingTop:20}},h.createElement(Z.ZP,{item:!0,xs:12,sm:5,style:{paddingRight:10}},h.createElement(E.Z,null,h.createElement(v.Z,null,h.createElement(x.Z,{style:{height:75}},h.createElement(y.Z,null,h.createElement(L.$S,{classes:this.state.classes,data:this.state.allItems,value:this.state.customAdd,func:function(t){e.setState({customAdd:t.target.value})}})),h.createElement(y.Z,null,h.createElement(C.Z,{onClick:this.addItemCustom.bind(this),style:{cursor:"pointer"}}))),this.state.allItems.map((function(t,a){return h.createElement(x.Z,{key:a,style:{height:75}},h.createElement(y.Z,null,t.name),h.createElement(y.Z,null,h.createElement(C.Z,{onClick:e.addItem.bind(e,t),style:{cursor:"pointer"}})))}))))),h.createElement(Z.ZP,{item:!0,xs:12,sm:7},h.createElement(E.Z,null,h.createElement(v.Z,null,this.state.vendor_items.map((function(t,a){return h.createElement(x.Z,{key:a,style:{height:75}},h.createElement(y.Z,null,t.item_name),h.createElement(y.Z,null,h.createElement(L.rZ,{label:"",value:t.sort,func:e.changeSort.bind(e,t.item_id)})),h.createElement(y.Z,null,h.createElement(L.$S,{classes:e.state.classes,data:e.state.nds,value:t.nds,func:e.changeNDS.bind(e,t.item_id)})),h.createElement(y.Z,null,h.createElement(P.Z,{onClick:e.delItem.bind(e,t.item_id),style:{cursor:"pointer"}})))}))))))),h.createElement(A.Z,null,h.createElement(_.Z,{onClick:this.saveVendorItems.bind(this),color:"primary"},"Сохранить"))),h.createElement(T.Z,{open:this.state.modalVendor,fullWidth:!0,maxWidth:"md",onClose:function(){e.setState({modalVendor:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(R.Z,{id:"alert-dialog-title"},"Поставщик ",this.state.openVendor?this.state.openVendor.name:""),h.createElement(N.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},this.state.openVendor?h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:12,sm:5},h.createElement(L.rZ,{label:"Наименование",value:this.state.openVendor.name,func:this.testChange.bind(this,"name")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Описание",value:this.state.openVendor.text,func:this.testChange.bind(this,"text")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(L.rZ,{label:"Мин. сумма заявки",value:this.state.openVendor.min_price,func:this.testChange.bind(this,"min_price")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.rZ,{label:"ИНН",value:this.state.openVendor.inn,func:this.testChange.bind(this,"inn"),disabled:!0})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.rZ,{label:"ОГРН",value:this.state.openVendor.ogrn,func:this.testChange.bind(this,"ogrn")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:8},h.createElement(L.rZ,{label:"Адрес компании",value:this.state.openVendor.addr,func:this.testChange.bind(this,"addr")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Контактное лицо",value:this.state.openVendor.user,func:this.testChange.bind(this,"user")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Телефон",value:this.state.openVendor.phone,func:this.testChange.bind(this,"phone")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Почта",value:this.state.openVendor.email,func:this.testChange.bind(this,"email")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Доп почта",value:this.state.openVendor.email_2,func:this.testChange.bind(this,"email_2")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.IA,{label:"Работа по счетам",value:1==parseInt(this.state.openVendor.bill_ex),func:this.testChange.bind(this,"bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.IA,{label:"Необходима картинка",value:1==parseInt(this.state.openVendor.need_img_bill_ex),func:this.testChange.bind(this,"need_img_bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.e_,{multiple:!0,label:"Города",data:this.state.allCities,value:this.state.vendorCities,func:function(t,a){console.log(a),e.setState({vendorCities:a})}}))):null)),h.createElement(A.Z,null,h.createElement(_.Z,{onClick:this.saveVendor.bind(this),color:"primary"},"Сохранить"))),h.createElement(T.Z,{open:this.state.modalVendorNew,fullWidth:!0,maxWidth:"md",onClose:function(){e.setState({modalVendorNew:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(R.Z,{id:"alert-dialog-title"},"Новый поставщик"),h.createElement(N.Z,null,h.createElement(Z.ZP,{container:!0,spacing:3},this.state.openVendor?h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:12,sm:5},h.createElement(L.rZ,{label:"Наименование",value:this.state.openVendor.name,func:this.testChange.bind(this,"name")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Описание",value:this.state.openVendor.text,func:this.testChange.bind(this,"text")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(L.rZ,{label:"Мин. сумма заявки",value:this.state.openVendor.min_price,func:this.testChange.bind(this,"min_price")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.rZ,{label:"ИНН",value:this.state.openVendor.inn,func:this.testChange.bind(this,"inn")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.rZ,{label:"ОГРН",value:this.state.openVendor.ogrn,func:this.testChange.bind(this,"ogrn")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:8},h.createElement(L.rZ,{label:"Адрес компании",value:this.state.openVendor.addr,func:this.testChange.bind(this,"addr")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Контактное лицо",value:this.state.openVendor.user,func:this.testChange.bind(this,"user")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Телефон",value:this.state.openVendor.phone,func:this.testChange.bind(this,"phone")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Почта",value:this.state.openVendor.email,func:this.testChange.bind(this,"email")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(L.rZ,{label:"Доп почта",value:this.state.openVendor.email_2,func:this.testChange.bind(this,"email_2")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.IA,{label:"Работа по счетам",value:1==parseInt(this.state.openVendor.bill_ex),func:this.testChange.bind(this,"bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.IA,{label:"Необходима картинка",value:1==parseInt(this.state.openVendor.need_img_bill_ex),func:this.testChange.bind(this,"need_img_bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(L.e_,{label:"Города",data:this.state.allCities,value:this.state.vendorCities,func:function(t,a){e.setState({vendorCities:a})}}))):null)),h.createElement(A.Z,null,h.createElement(_.Z,{onClick:this.addVendor.bind(this),color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(L.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city,func:this.changeCity.bind(this),label:"Город"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(_.Z,{onClick:this.openModalVendorNew.bind(this),variant:"contained"},"Добавить поставщика")),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(b.Z,{component:k.Z},h.createElement(E.Z,null,h.createElement(w.Z,null,h.createElement(x.Z,null,h.createElement(y.Z,{component:"th"},"Название"),h.createElement(y.Z,{component:"th"},"Назначенные товары"),h.createElement(y.Z,{component:"th"},h.createElement(S.Z,null)))),h.createElement(v.Z,null,this.state.vendors.map((function(t,a){return h.createElement(x.Z,{key:a},h.createElement(y.Z,null,h.createElement(B.Z,{onClick:e.openModalVendor.bind(e,t),style:{cursor:"pointer",width:"max-content"}},t.name)),h.createElement(y.Z,null,h.createElement(I.Z,{onClick:e.openModalItems.bind(e,t),style:{cursor:"pointer"}})),h.createElement(y.Z,null,1==parseInt(t.is_show)?h.createElement(S.Z,null):h.createElement(D.Z,null)))}))))))))}}]),Y}(h.Component);function V(){var e=z(),t=(0,p.k6)();return h.createElement(W,{classes:e,history:t})}},3223:(e,t,a)=>{"use strict";a.r(t),a.d(t,{WorkSchedule:()=>he});var n=a(5861),s=a(7326),i=a(4942),r=a(5671),l=a(3144),o=a(136),c=a(6215),m=a(1120),u=a(7462),d=a(5987),h=a(7757),p=a.n(h),f=a(7294),g=a(5977),Z=a(225),_=a(4345),E=a(5725),v=a(2642),y=a(9573),b=a(8732),w=a(6926),x=a(7896),k=a(3694),S=a(3887),D=a(6501),I=a(4603),C=a(9062),P=a(4666),T=a(3447),A=a(7750),N=a(7645),R=a(9941),O=a(7425),M=a(5092),L=a(2658),B=a(244),F=a(594),j=a(6540),z=a(20),W=a(2640),V=a(1508),H=a(5697),Y=a.n(H),$=a(7109),U=a(2440),G=a(799),J=a(417),X=a(9334),q=a(5433),K=a(4336),Q=a(4893),ee=a(9316),te=a(1497),ae=a(6755),ne=a(7036),se=a(6406),ie=["children","value","index"];function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,m.Z)(e);if(t){var s=(0,m.Z)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var le=a(7563),oe=((0,_.Z)({palette:{primary:{main:"#c03"}}}),(0,Z.Z)({timePicker:{width:"100%"}}));function ce(e){var t=e.children,a=e.value,n=e.index,s=(0,d.Z)(e,ie);return f.createElement("div",(0,u.Z)({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},s),a===n&&f.createElement(V.Z,{sx:{p:3}},t))}function me(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}Y().func.isRequired,Y().bool.isRequired,Y().string.isRequired,ce.propTypes={children:Y().node,index:Y().number.isRequired,value:Y().number.isRequired};var ue=function(e){(0,o.Z)(a,e);var t=re(a);function a(){return(0,r.Z)(this,a),t.apply(this,arguments)}return(0,l.Z)(a,[{key:"render",value:function(){return f.createElement(f.Fragment,null,f.createElement(k.Z,null,f.createElement(w.Z,{style:{minWidth:140,minHeight:38}},"Ур. кафе: ",this.props.lv_cafe),f.createElement(w.Z,{style:{minWidth:165,minHeight:38}},"Число месяца"),"manager"==this.props.kind?null:f.createElement(w.Z,null),this.props.days.map((function(e,t){return f.createElement(w.Z,{className:"min_block",style:{backgroundColor:"Пт"==e.day||"Сб"==e.day||"Вс"==e.day?"#ffe9bd":"#fff"},key:t},e.date)})),"manager"==this.props.kind?null:f.createElement(f.Fragment,null,f.createElement(w.Z,null),this.props.dataKey>0?f.createElement(f.Fragment,null,f.createElement(w.Z,{style:{textAlign:"center"}}),f.createElement(w.Z,{style:{textAlign:"center"}})):f.createElement(f.Fragment,null,f.createElement(w.Z,{style:{textAlign:"center",cursor:"pointer"},onClick:this.props.changeDopBonus},this.props.bonus_other?1==parseInt(this.props.bonus_other)?f.createElement(j.Z,{style:{fontSize:30,color:"green"}}):f.createElement(F.Z,{style:{fontSize:30,color:"red"}}):"+ / -"),f.createElement(w.Z,{style:{textAlign:"center",cursor:"pointer"},onClick:this.props.changeLVDir},"Ур. дира: ",this.props.lv_dir)),f.createElement(w.Z,null),f.createElement(w.Z,null),f.createElement(w.Z,null),f.createElement(w.Z,null))),f.createElement(k.Z,null,f.createElement(w.Z,{style:{minWidth:140,minHeight:38}},"Сотрудник"),f.createElement(w.Z,{style:{minWidth:165,minHeight:38}},"Должность"),"manager"==this.props.kind?null:f.createElement(w.Z,null),this.props.days.map((function(e,t){return f.createElement(w.Z,{className:"min_block",style:{backgroundColor:"Пт"==e.day||"Сб"==e.day||"Вс"==e.day?"#ffe9bd":"#fff"},key:t},e.day)})),"manager"==this.props.kind?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{style:{textAlign:"center"}},"За 1ч"),f.createElement(w.Z,{style:{textAlign:"center"}},"Командный бонус"),f.createElement(w.Z,{style:{textAlign:"center"}},"За часы"),f.createElement(w.Z,{style:{textAlign:"center"}},"Ошибки"),f.createElement(w.Z,{style:{textAlign:"center"}},"Бонус"),1==this.props.show_zp||0==this.props.show_zp?f.createElement(w.Z,{style:{textAlign:"center"}},"Всего"):null,f.createElement(w.Z,{style:{textAlign:"center"}},"Выдано"))),f.createElement(k.Z,{style:{backgroundColor:"#e5e5e5"}},f.createElement(w.Z,{style:{textAlign:"center"},colSpan:this.props.days.length+3+7},this.props.item.data)))}}]),a}(f.Component),de=function(e){(0,o.Z)(Y,e);var t,a,c,m,d,h,g,Z,_,H=re(Y);function Y(e){var t;return(0,r.Z)(this,Y),t=H.call(this,e),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:le.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){setTimeout((function(){t.setState({is_load:!1})}),300),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"work_schedule",module_name:"",is_load:!1,points:[],mounths:[],point:"0",mounth:"0",one:null,two:null,test_one:[],test_two:[],isOpenModalH:!1,userInfo:null,hList:[],mList:[],newTimeStart:"10:00",newTimeEnd:"22:00",openNewTimeAdd:!1,otherAppList:[],otherApp:"",testVal:"",testOpen:!1,mainMenu:!1,mainMenuH:!1,mainMenuSmena:!1,show_bonus:!1,mainMenuPrice:!1,mainMenuLVDIR:!1,mainMenuDopBonus:!1,show_zp_one:0,show_zp_two:0,kind:"",myOtherSmens:[],chooseUser:null,tabTable:1,lv_cafe:0,lv_dir:0,arr_dir_lv:[]},t}return(0,l.Z)(Y,[{key:"componentDidMount",value:(_=(0,n.Z)(p().mark((function e(){var t,a,n,s,i,r,l,o,c=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,this.getData("get_all",t);case 3:for(a=e.sent,n=[],s=[],i=0;i<=23;i++)n.push({id:i,name:i});for(r=0;r<=50;r+=10)s.push({id:r,name:r});for(this.setState({points:a.point_list,point:a.point_list[0].id,mounths:a.mounths,mounth:a.mounths.find((function(e){return 1==parseInt(e.is_active)})).id,hList:n,mList:s,module_name:a.module_info.name}),document.title=a.module_info.name,l=[],o=1;o<=20;o++)l.push(o);this.setState({arr_dir_lv:l}),setTimeout((function(){c.updateData()}),100);case 14:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(Z=(0,n.Z)(p().mark((function e(){var t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,mounth:this.state.mounth},e.next=3,this.getData("get_graph",t);case 3:a=e.sent,console.log(a),this.setState({one:a.date.one,two:a.date.two,test_one:a.one,test_two:a.two,show_zp_one:a.show_zp_one,show_zp_two:a.show_zp_two,kind:a.kind,lv_cafe:a.lv_cafe,lv_dir:a.lv_dir});case 6:case"end":return e.stop()}}),e,this)}))),function(){return Z.apply(this,arguments)})},{key:"openH",value:(g=(0,n.Z)(p().mark((function e(t,a){var n,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n={smena_id:t.smena_id,app_id:t.app_id,user_id:t.id,date:a,date_start:t.date},e.next=4,this.getData("get_user_day",n);case 4:s=e.sent,console.log(s),this.setState({isOpenModalH:!0,userInfo:s.h_info,otherAppList:s.other_app,show_bonus:s.show_bonus});case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"delTime",value:function(e){var t=this.state.userInfo;t.hours=t.hours.filter((function(t,a){return parseInt(a)!=parseInt(e)})),this.setState({userInfo:t})}},{key:"changeHourse",value:function(e,t,a){var n=this.state.userInfo;n.hours[t][[e]]=a.target.value,this.setState({userInfo:n})}},{key:"saveDayHourse",value:(h=(0,n.Z)(p().mark((function e(){var t,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={date:this.state.userInfo.date,user_id:this.state.userInfo.user_id,smena_id:this.state.userInfo.smena_id,app_id:this.state.userInfo.app_id,hours:this.state.userInfo.hours,new_app:this.state.userInfo.new_app,mentor_id:this.state.userInfo.mentor_id},e.next=3,this.getData("save_user_day",t);case 3:1==(a=e.sent).st?(this.setState({mainMenu:!1,mainMenuH:!1,mainMenuSmena:!1}),this.updateData()):alert(a.text);case 5:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"addTime",value:function(){var e=this,t=this.state.userInfo;t.hours.find((function(t){return t.time_start==e.state.newTimeStart&&t.time_end==e.state.newTimeEnd}))?this.setState({openNewTimeAdd:!1}):(t.hours.push({time_start:this.state.newTimeStart,time_end:this.state.newTimeEnd}),this.setState({userInfo:t,openNewTimeAdd:!1}))}},{key:"fastTime",value:(d=(0,n.Z)(p().mark((function e(t){var a,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:t,user_id:this.state.chooseUser.id,app_id:this.state.chooseUser.app_id,smena_id:this.state.chooseUser.smena_id,date:this.state.mounth},e.next=3,this.getData("save_fastTime",a);case 3:n=e.sent,console.log(n),1==n.st?(this.setState({mainMenu:!1,mainMenuH:!1,mainMenuSmena:!1}),this.updateData()):alert(n.text);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"fastSmena",value:(m=(0,n.Z)(p().mark((function e(t){var a,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={new_smena_id:t,user_id:this.state.chooseUser.id,app_id:this.state.chooseUser.app_id,smena_id:this.state.chooseUser.smena_id,date:this.state.mounth,part:this.state.tabTable},e.next=3,this.getData("save_fastSmena",a);case 3:n=e.sent,console.log(n),1==n.st?(this.setState({mainMenu:!1,mainMenuH:!1,mainMenuSmena:!1}),this.updateData()):alert(n.text);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"changePriceH",value:(c=(0,n.Z)(p().mark((function e(t){var a,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={price:t,user_id:this.state.chooseUser.id,app_id:this.state.chooseUser.app_id,smena_id:this.state.chooseUser.smena_id,date:this.state.mounth,part:this.state.tabTable},e.next=3,this.getData("save_userPriceH",a);case 3:n=e.sent,console.log(n),1==n.st?(this.setState({mainMenu:!1,mainMenuH:!1,mainMenuPrice:!1}),this.updateData()):alert(n.text);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"changeLVDir",value:function(){this.setState({mainMenuLVDIR:!0})}},{key:"newLvDir",value:(a=(0,n.Z)(p().mark((function e(t){var a,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={date:this.state.mounth,point_id:this.state.point,dir_lv:t},e.next=3,this.getData("save_dir_lv",a);case 3:n=e.sent,console.log(n),1==n.st?(this.setState({mainMenuLVDIR:!1}),this.updateData()):alert(n.text);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"changeDopBonus",value:function(){this.setState({mainMenuDopBonus:!0})}},{key:"dop_bonus",value:(t=(0,n.Z)(p().mark((function e(t){var a,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={date:this.state.mounth,part:this.state.tabTable,point_id:this.state.point,type:t},e.next=3,this.getData("save_dop_bonus",a);case 3:n=e.sent,console.log(n),1==n.st?(this.setState({mainMenuDopBonus:!1}),this.updateData()):alert(n.text);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(I.Z,{open:this.state.is_load},f.createElement(C.Z,{color:"inherit"})),f.createElement(P.Z,{onClose:function(){e.setState({mainMenu:!1})},open:this.state.mainMenu},this.state.chooseUser?f.createElement(N.Z,null,this.state.chooseUser.full_app_name," ",this.state.chooseUser.user_name," ",this.state.mounth):null,f.createElement(U.Z,{sx:{pt:0}},f.createElement(G.ZP,{button:!0,onClick:function(){e.setState({mainMenu:!1,mainMenuH:!0})}},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(B.Z,null))),f.createElement(X.Z,{primary:"Сменить часы на месяц"})),f.createElement(G.ZP,{button:!0,onClick:function(){e.setState({mainMenu:!1,mainMenuSmena:!0,myOtherSmens:e.state.chooseUser.other_smens})}},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(K.Z,null))),f.createElement(X.Z,{primary:"Сменить смену"})),f.createElement(G.ZP,{button:!0},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(q.Z,null))),f.createElement(X.Z,{primary:"Сменить точку"})))),f.createElement(P.Z,{onClose:function(){e.setState({mainMenuH:!1})},open:this.state.mainMenuH},this.state.chooseUser?f.createElement(N.Z,null,this.state.chooseUser.user_name," ",this.state.mounth," Часы"):null,f.createElement(U.Z,{sx:{pt:0}},f.createElement(G.ZP,{button:!0,onClick:this.fastTime.bind(this,1)},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(Q.Z,null))),f.createElement(X.Z,{primary:"С 1 числа 2/2 с 10 до 22 на месяц"})),f.createElement(G.ZP,{button:!0,onClick:this.fastTime.bind(this,2)},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(ee.Z,null))),f.createElement(X.Z,{primary:"Со 2 числа 2/2 с 10 до 22 на месяц"})),f.createElement(G.ZP,{button:!0,onClick:this.fastTime.bind(this,3)},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(te.Z,null))),f.createElement(X.Z,{primary:"С 3 числа 2/2 с 10 до 22 на месяц"})),f.createElement(G.ZP,{button:!0,onClick:this.fastTime.bind(this,4)},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(te.Z,null))),f.createElement(X.Z,{primary:"С 4 числа 2/2 с 10 до 22 на месяц"})))),f.createElement(P.Z,{onClose:function(){e.setState({mainMenuSmena:!1})},open:this.state.mainMenuSmena},this.state.chooseUser?f.createElement(N.Z,null,this.state.chooseUser.user_name," ",this.state.mounth," Смена"):null,f.createElement(U.Z,{sx:{pt:0}},this.state.myOtherSmens.map((function(t,a){return f.createElement(G.ZP,{key:a,button:!0,onClick:e.fastSmena.bind(e,t.id)},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(ae.Z,null))),f.createElement(X.Z,{primary:t.name}))})))),f.createElement(P.Z,{onClose:function(){e.setState({mainMenuPrice:!1})},open:this.state.mainMenuPrice},this.state.chooseUser?f.createElement(N.Z,null,this.state.chooseUser.user_name," ",this.state.mounth," Часовая ставка"):null,this.state.chooseUser?f.createElement(U.Z,{sx:{pt:0}},this.state.chooseUser.price_arr.map((function(t,a){return f.createElement(G.ZP,{key:a,button:!0,onClick:e.changePriceH.bind(e,t),style:parseFloat(e.state.chooseUser.price_p_h)==parseFloat(t)?{backgroundColor:"green",color:"#fff"}:{}},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(ae.Z,null))),f.createElement(X.Z,{primary:t}))}))):null),f.createElement(P.Z,{onClose:function(){e.setState({mainMenuLVDIR:!1})},open:this.state.mainMenuLVDIR},f.createElement(N.Z,null,this.state.mounth," Уровень директора"),f.createElement(U.Z,{sx:{pt:0}},this.state.arr_dir_lv.map((function(t,a){return f.createElement(G.ZP,{key:a,button:!0,style:parseFloat(e.state.lv_dir)==parseFloat(t)?{backgroundColor:"green",color:"#fff"}:{},onClick:e.newLvDir.bind(e,t)},f.createElement(J.Z,null,f.createElement($.Z,null,f.createElement(ae.Z,null))),f.createElement(X.Z,{primary:t+" уровень"}))})))),f.createElement(P.Z,{onClose:function(){e.setState({mainMenuDopBonus:!1})},open:this.state.mainMenuDopBonus},f.createElement(N.Z,null,this.state.mounth," Командный бонус"),f.createElement(U.Z,{sx:{pt:0}},f.createElement(G.ZP,{button:!0},f.createElement(J.Z,null,f.createElement($.Z,{style:{backgroundColor:"green"}},f.createElement(ne.Z,{style:{color:"#fff"}}))),f.createElement(X.Z,{primary:"Выдать"})),f.createElement(G.ZP,{button:!0},f.createElement(J.Z,null,f.createElement($.Z,{style:{backgroundColor:"red"}},f.createElement(F.Z,{style:{color:"#fff"}}))),f.createElement(X.Z,{primary:"Отказать"})))),this.state.userInfo?f.createElement(P.Z,{open:this.state.isOpenModalH,onClose:function(){e.setState({isOpenModalH:!1})},scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},f.createElement(N.Z,{id:"scroll-dialog-title"},this.state.userInfo.user.app_name+" "+this.state.userInfo.user.user_name+" "+this.state.userInfo.date),f.createElement(A.Z,{dividers:!0},f.createElement(L.Z,{style:{marginBottom:10}},"Моя нагрузка: "+this.state.userInfo.user.my_load_h+" / Средняя нагрузка: "+this.state.userInfo.user.all_load_h),!1===this.state.show_bonus?null:f.createElement(L.Z,{style:{marginBottom:20}},"Бонус: "+this.state.userInfo.user.bonus),0==this.state.otherAppList.length?null:f.createElement(se.$S,{data:this.state.otherAppList,value:this.state.userInfo.new_app,func:function(t){var a=e.state.userInfo;a.new_app=t.target.value,e.setState({userInfo:a})},label:"Кем работает"}),0==this.state.userInfo.mentor_list.length?null:f.createElement(se.$S,{data:this.state.userInfo.mentor_list,value:this.state.userInfo.mentor_id,func:function(t){var a=e.state.userInfo;a.mentor_id=t.target.value,e.setState({userInfo:a})},label:"Кем работает"}),f.createElement(R.Z,{style:{marginTop:10},expanded:this.state.openNewTimeAdd,onChange:function(){e.setState({openNewTimeAdd:!e.state.openNewTimeAdd})}},f.createElement(O.Z,{expandIcon:f.createElement(j.Z,null)},f.createElement(B.Z,{style:{marginRight:10}}),f.createElement(L.Z,null,"Добавить время")),f.createElement(M.Z,{style:{display:"flex",flexDirection:"row"}},f.createElement(se.w0,{value:this.state.newTimeStart,func:function(t){e.setState({newTimeStart:t.target.value})},classes:this.state.classes,label:"Время начала работы"}),f.createElement(se.w0,{value:this.state.newTimeEnd,func:function(t){e.setState({newTimeEnd:t.target.value})},classes:this.state.classes,label:"Время окончания работы"}),f.createElement(j.Z,{style:{minWidth:50,minHeight:38,cursor:"pointer"},onClick:this.addTime.bind(this)}))),this.state.userInfo.hours.map((function(t,a){return f.createElement(R.Z,{key:a},f.createElement(O.Z,{expandIcon:f.createElement(F.Z,{onClick:e.delTime.bind(e,a)})},f.createElement(B.Z,{style:{marginRight:10}}),f.createElement(L.Z,null,t.time_start+" - "+t.time_end)),f.createElement(M.Z,{style:{display:"flex",flexDirection:"row"}},f.createElement(se.w0,{value:t.time_start,func:e.changeHourse.bind(e,"time_start",a),classes:e.state.classes,label:"Время начала работы"}),f.createElement(se.w0,{value:t.time_end,func:e.changeHourse.bind(e,"time_end",a),classes:e.state.classes,label:"Время окончания работы"})))})),f.createElement(R.Z,{style:{marginTop:50},disabled:!0},f.createElement(O.Z,null,f.createElement(L.Z,null,"История"))),this.state.userInfo.hist.map((function(e,t){return f.createElement(R.Z,{key:t},f.createElement(O.Z,null,f.createElement(L.Z,null,e.date+" - "+e.user_name)),f.createElement(M.Z,{style:{display:"flex",flexDirection:"column"}},e.items.map((function(e,t){return f.createElement(L.Z,{key:t},e.time_start+" - "+e.time_end," ",""==e.app_name?"":" - "+e.app_name," ")}))))}))),f.createElement(T.Z,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},f.createElement(v.Z,{style:{backgroundColor:"green",color:"#fff"},onClick:this.saveDayHourse.bind(this)},"Сохранить"),f.createElement(v.Z,{style:{backgroundColor:"red",color:"#fff"},onClick:function(){e.setState({isOpenModalH:!1})}},"Отмена"))):null,f.createElement(E.ZP,{container:!0,spacing:3},f.createElement(E.ZP,{item:!0,xs:12,sm:12},f.createElement("h1",null,this.state.module_name)),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(se.$S,{data:this.state.points,value:this.state.point,func:function(t){e.setState({point:t.target.value})},label:"Точка"})),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(se.$S,{data:this.state.mounths,value:this.state.mounth,func:function(t){e.setState({mounth:t.target.value})},label:"Месяц"})),f.createElement(E.ZP,{item:!0,xs:12,sm:6},f.createElement(v.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),f.createElement(V.Z,{sx:{width:"100%"}},f.createElement(V.Z,{sx:{borderBottom:1,borderColor:"divider"}},f.createElement(z.Z,{value:this.state.tabTable,onChange:function(t,a){e.setState({tabTable:a})},centered:!0},f.createElement(W.Z,(0,u.Z)({label:"С 1 по 15 числа"},me(0))),f.createElement(W.Z,(0,u.Z)({label:"С 16 по конец месяца"},me(1))))),f.createElement(ce,{value:this.state.tabTable,index:0},this.state.one?f.createElement(x.Z,{component:D.Z},f.createElement(y.Z,{"aria-label":"a dense table",id:"table_graph_one"},f.createElement(b.Z,null,this.state.test_one.map((function(t,a){return"header"==t.row?f.createElement(ue,{key:a,bonus_other:e.state.one.bonus_other,changeLVDir:e.changeLVDir.bind(e),changeDopBonus:e.changeDopBonus.bind(e),kind:e.state.kind,show_zp:e.state.show_zp_one,lv_dir:e.state.lv_dir,lv_cafe:e.state.lv_cafe,dataKey:a,days:e.state.one.days,item:t}):f.createElement(k.Z,{key:a},f.createElement(w.Z,{style:{minWidth:140,minHeight:38,position:"absolute",backgroundColor:"#fff",marginLeft:"-1px",borderBottom:"2px solid #e5e5e5"}},t.data.user_name),f.createElement(w.Z,{style:{minWidth:165,minHeight:38}},t.data.app_name),"manager"==e.state.kind?null:f.createElement(w.Z,{style:{textAlign:"center"}}," ",f.createElement(K.Z,{style:{cursor:"pointer"},onClick:function(){e.setState({mainMenu:!0,chooseUser:t.data})}})," "),t.data.dates.map((function(a,n){return f.createElement(w.Z,{onClick:e.openH.bind(e,t.data,a.date),className:"min_block",style:{backgroundColor:a.info?a.info.color:"#fff",cursor:"pointer"},key:n},a.info?a.info.hours:"")})),"manager"==e.state.kind?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{style:{textAlign:"center",minWidth:70,cursor:"pointer"},onClick:function(){e.setState({mainMenuPrice:!0,chooseUser:t.data})}},t.data.price_p_h),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.dop_bonus),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.h_price),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.err_price),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.my_bonus),1==e.state.show_zp_one||0==e.state.show_zp_one?f.createElement(w.Z,{style:{textAlign:"center"}},parseInt(t.data.dop_bonus)+parseInt(t.data.dir_price_dop)+parseInt(t.data.h_price)+parseInt(t.data.my_bonus)-parseInt(t.data.err_price)+""):null,f.createElement(w.Z,{style:{textAlign:"center"}},t.data.given)))}))),f.createElement(S.Z,null,f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,null),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.one.bonus.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",style:{backgroundColor:"cur"==e.type?"#98e38d":"#fff"},key:t},e.res)}))),f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,null,"Роллов"),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.one.bonus.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",key:t},e.count_rolls)}))),f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,null,"Пиццы"),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.one.bonus.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",key:t},e.count_pizza)}))),f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,{className:"min_size"},"Заказы готовились больше 40 минут"),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.one.order_stat.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",key:t},e.count_false)})))))):null),f.createElement(ce,{value:this.state.tabTable,index:1},this.state.two?f.createElement(x.Z,{component:D.Z},f.createElement(y.Z,{"aria-label":"a dense table",id:"table_graph_two"},f.createElement(b.Z,null,this.state.test_two.map((function(t,a){return"header"==t.row?f.createElement(ue,{bonus_other:e.state.two.bonus_other,changeLVDir:e.changeLVDir.bind(e),changeDopBonus:e.changeDopBonus.bind(e),key:a,kind:e.state.kind,show_zp:e.state.show_zp_two,lv_dir:e.state.lv_dir,lv_cafe:e.state.lv_cafe,dataKey:a,days:e.state.two.days,item:t}):f.createElement(k.Z,{key:a},f.createElement(w.Z,{style:{minWidth:140,minHeight:38,position:"absolute",backgroundColor:"#fff",marginLeft:"-1px",borderBottom:"2px solid #e5e5e5"}},t.data.user_name),f.createElement(w.Z,{style:{minWidth:165,minHeight:38}},t.data.app_name),"manager"==e.state.kind?null:f.createElement(w.Z,{style:{textAlign:"center"}}," ",f.createElement(K.Z,{style:{cursor:"pointer"},onClick:function(){e.setState({mainMenu:!0,chooseUser:t.data})}})," "),t.data.dates.map((function(a,n){return f.createElement(w.Z,{onClick:e.openH.bind(e,t.data,a.date),className:"min_block",style:{backgroundColor:a.info?a.info.color:"#fff",cursor:"pointer"},key:n},a.info?a.info.hours:"")})),"manager"==e.state.kind?null:f.createElement(f.Fragment,null,f.createElement(w.Z,{style:{textAlign:"center",minWidth:70,cursor:"pointer"},onClick:function(){e.setState({mainMenuPrice:!0,chooseUser:t.data})}},t.data.price_p_h),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.dop_bonus),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.h_price),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.err_price),f.createElement(w.Z,{style:{textAlign:"center"}},t.data.my_bonus),1==e.state.show_zp_two||0==e.state.show_zp_two?f.createElement(w.Z,{style:{textAlign:"center"}},parseInt(t.data.dop_bonus)+parseInt(t.data.dir_price_dop)+parseInt(t.data.h_price)+parseInt(t.data.my_bonus)-parseInt(t.data.err_price)+""):null,f.createElement(w.Z,{style:{textAlign:"center"}},t.data.given)))}))),f.createElement(S.Z,null,f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,null),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.two.bonus.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",style:{backgroundColor:"cur"==e.type?"#98e38d":"#fff"},key:t},e.res)}))),f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,null,"Роллов"),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.two.bonus.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",key:t},e.count_rolls)}))),f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,null,"Пиццы"),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.two.bonus.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",key:t},e.count_pizza)}))),f.createElement(k.Z,null,f.createElement(w.Z,null),f.createElement(w.Z,{className:"min_size"},"Заказы готовились больше 40 минут"),"manager"==this.state.kind?null:f.createElement(w.Z,null),this.state.two.order_stat.map((function(e,t){return f.createElement(w.Z,{className:"min_block min_size",key:t},e.count_false)})))))):null))))}}]),Y}(f.Component);function he(){var e=oe(),t=(0,g.k6)();return f.createElement(de,{classes:e,history:t})}},5798:(e,t,a)=>{"use strict";var n=a(7294),s=a(3935),i=a(3727),r=a(7462),l=a(5861),o=a(5671),c=a(3144),m=a(7326),u=a(136),d=a(6215),h=a(1120),p=a(4942),f=a(7757),g=a.n(f),Z=a(6010),_=a(225),E=a(6720),v=a(3720),y=a(4386),b=a(2440),w=a(799),x=a(9334),k=a(2658),S=a(7720),D=a(6867),I=a(7212),C=a(4065),P=a(5725),T=a(326),A=a(9572),N=a(5817),R=a(9941),O=a(7425),M=a(5092),L=a(3508),B=a(4345),F=a(1807),j=a(5977),z=a(5116),W=a(1174),V=a(5159),H=a(5152),Y=a.n(H);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var U=a(7563),G=(0,B.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),J=(0,_.Z)({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){(0,p.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},G.mixins.toolbar),appBar:{zIndex:G.zIndex.drawer+1,transition:G.transitions.create(["width","margin"],{easing:G.transitions.easing.sharp,duration:G.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:G.transitions.create(["width","margin"],{easing:G.transitions.easing.sharp,duration:G.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:G.transitions.create("width",{easing:G.transitions.easing.sharp,duration:G.transitions.duration.enteringScreen})},drawerPaperClose:(0,p.Z)({overflowX:"hidden",transition:G.transitions.create("width",{easing:G.transitions.easing.sharp,duration:G.transitions.duration.leavingScreen}),width:G.spacing(7)},G.breakpoints.up("sm"),{width:G.spacing(9)}),appBarSpacer:G.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:G.spacing(4),paddingBottom:G.spacing(4),width:"100%"},paper:{padding:G.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:G.typography.pxToRem(15),fontWeight:G.typography.fontWeightRegular}}),X=function(e){(0,u.Z)(_,e);var t,a,s,f=(a=_,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,h.Z)(a);if(s){var n=(0,h.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,d.Z)(this,e)});function _(e){var t;return(0,o.Z)(this,_),t=f.call(this,e),(0,p.Z)((0,m.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:U.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(console.log(e),!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",open:!1,menu:[],full_menu:[],left:!1},t}return(0,c.Z)(_,[{key:"componentDidMount",value:(t=(0,l.Z)(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({menu:t.info.left_menu,full_menu:t.info.full_menu});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement(v.Z,{className:(0,Z.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},n.createElement(y.Z,{className:this.state.classes.toolbar},n.createElement(D.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,Z.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},n.createElement(T.Z,null)),n.createElement(k.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:this.state.classes.title},"Dashboard"),n.createElement(D.Z,{color:"inherit"},n.createElement(I.Z,{badgeContent:4,color:"secondary"},n.createElement(N.Z,null))))),n.createElement(n.Fragment,null,n.createElement(V.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},n.createElement("div",{className:this.state.classes.toolbarIcon},n.createElement(W.Z,{size:"small",options:this.state.full_menu,getOptionLabel:function(e){return e.name},onChange:function(t,a){a&&e.state.history.push("/"+a.key_query+"/")},style:{width:300},renderInput:function(e){return n.createElement(z.Z,(0,r.Z)({},e,{label:"Поиск",variant:"outlined"}))}}),n.createElement(D.Z,{onClick:this.handleDrawerClose.bind(this)},n.createElement(A.Z,null))),n.createElement(S.Z,null),this.state.menu.map((function(t,a){return n.createElement(R.Z,{key:a},n.createElement(O.Z,{expandIcon:n.createElement(L.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},n.createElement(k.Z,{className:e.state.classes.heading},t.parent.name)),n.createElement(M.Z,null,n.createElement(b.Z,{style:{width:"100%"}},t.chaild.map((function(e,t){return n.createElement(w.ZP,{button:!0,key:t},n.createElement(i.OL,{to:"/"+e.key_query+"/"},n.createElement(x.Z,{primary:e.name})))})))))})))))}}]),_}(n.Component);function q(e){var t=e.code,a=e.children;return n.createElement(j.AW,{render:function(e){var n=e.staticContext;return n&&(n.status=t),a}})}function K(){var e=J(),t=(0,j.k6)(),a=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(a=!1),n.createElement(F.Z,{theme:G},n.createElement("div",{className:e.root},a?n.createElement(n.Fragment,null,n.createElement(E.ZP,null),n.createElement(X,{classes:e,history:t})):null,n.createElement("main",{className:e.content},n.createElement("div",{className:e.appBarSpacer}),n.createElement(C.Z,{maxWidth:!1,className:e.container},n.createElement(j.rs,null,Y().map((function(e,t){return n.createElement(j.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),n.createElement(j.AW,{component:function(){return n.createElement(q,{code:404},n.createElement(P.ZP,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},n.createElement(P.ZP,{item:!0,xs:12},n.createElement(k.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}s.render(n.createElement(i.VK,null,n.createElement(K,null)),document.getElementById("app"))},6406:(e,t,a)=>{"use strict";a.d(t,{lp:()=>S,e_:()=>D,$S:()=>I,rZ:()=>C,w0:()=>P,Qe:()=>T,IA:()=>A,H4:()=>N});var n=a(7462),s=a(5671),i=a(3144),r=a(136),l=a(6215),o=a(1120),c=a(7294),m=a(7666),u=a(5305),d=a(6446),h=a(2681),p=a(5116),f=a(3709),g=a(542),Z=a(4212),_=a(1174),E=a(6447),v=a(8523),y=a(5005),b=a(4424),w=a(5344),x=(a(2658),a(8304));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,o.Z)(e);if(t){var s=(0,o.Z)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,l.Z)(this,a)}}var S=function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,i.Z)(a,[{key:"render",value:function(){return c.createElement(w.Z,{dateAdapter:b.Z,locale:v.Z,size:"small"},c.createElement(y.Z,{allowSameDateSelection:!0,showTodayButton:!0,startText:this.props.startText,endText:this.props.endText,value:this.props.value,inputFormat:"yyyy-MM-dd",onChange:this.props.func,renderInput:function(e,t){return c.createElement(c.Fragment,null,c.createElement(p.Z,(0,n.Z)({style:{width:"100%"}},e)),c.createElement(p.Z,(0,n.Z)({style:{width:"100%"}},t)))}}))}}]),a}(c.PureComponent),D=function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,i.Z)(a,[{key:"render",value:function(){var e,t=this;return c.createElement(E.Z,{spacing:3},c.createElement(_.Z,{size:"small",disableCloseOnSelect:!0,id:null!==(e=this.props.id)&&void 0!==e?e:null,options:this.props.data,getOptionLabel:function(e){return e.name},value:this.props.value,onChange:this.props.func,filterSelectedOptions:!0,multiple:!(!this.props.multiple||!0!==this.props.multiple),isOptionEqualToValue:function(e,t){return parseInt(e.id)===parseInt(t.id)},renderInput:function(e){return c.createElement(p.Z,(0,n.Z)({},e,{label:t.props.label,placeholder:t.props.placeholder}))}}))}}]),a}(c.PureComponent),I=function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,i.Z)(a,[{key:"render",value:function(){return c.createElement(d.Z,{fullWidth:!0,variant:"outlined",size:"small"},c.createElement(m.Z,null,this.props.label),c.createElement(h.Z,{value:this.props.value,label:this.props.label,onChange:this.props.func,multiple:!(!this.props.multiple||!0!==this.props.multiple)},c.createElement(u.Z,{value:""},c.createElement("em",null,"None")),this.props.data.map((function(e,t){return c.createElement(u.Z,{key:t,value:e.id},e.name)}))))}}]),a}(c.PureComponent),C=function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes,type:"text"},n}return(0,i.Z)(a,[{key:"render",value:function(){return c.createElement(p.Z,{label:this.props.label,value:this.props.value,onChange:this.props.func,onBlur:this.props.onBlur?this.props.onBlur:null,disabled:!(!this.props.disabled&&!0!==this.props.disabled),variant:"outlined",size:"small",color:"primary",multiline:!!this.props.multiline&&this.props.multiline,maxRows:this.props.maxRows?this.props.maxRows:1,type:this.props.type?this.props.type:this.state.type,style:{width:"100%"}})}}]),a}(c.PureComponent),P=function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes,thisVal:""},n}return(0,i.Z)(a,[{key:"onChange",value:function(e){this.setState({thisVal:e.target.value})}},{key:"onBlur",value:function(){this.setState({thisVal:""}),this.props.onBlur()}},{key:"render",value:function(){return c.createElement(p.Z,{variant:"outlined",size:"small",color:"primary",label:this.props.label,type:"time",id:this.props.id?this.props.id:null,value:this.props.func?this.props.value:this.state.thisVal,className:this.state.classes.timePicker,onChange:this.props.func?this.props.func:this.onChange.bind(this),onBlur:this.props.onBlur?this.onBlur.bind(this):null,InputLabelProps:{shrink:!0},step:600,inputProps:{step:600}})}}]),a}(c.PureComponent),T=(c.PureComponent,function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,i.Z)(a,[{key:"render",value:function(){return c.createElement(w.Z,{dateAdapter:b.Z,locale:v.Z},c.createElement(x.Z,{multiple:!0,inputFormat:"yyyy-MM-dd",label:this.props.label,value:this.props.value,onChange:this.props.func,renderInput:function(e){return c.createElement(p.Z,(0,n.Z)({variant:"outlined",size:"small",color:"primary",style:{width:"100%"}},e))}}))}}]),a}(c.PureComponent)),A=(c.PureComponent,function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,i.Z)(a,[{key:"render",value:function(){return c.createElement(f.Z,{row:!0},c.createElement(g.Z,{control:c.createElement(Z.Z,{checked:this.props.value,onChange:this.props.func,color:"primary"}),label:this.props.label}))}}]),a}(c.PureComponent)),N=function(e){(0,r.Z)(a,e);var t=k(a);function a(e){var n;return(0,s.Z)(this,a),(n=t.call(this,e)).state={classes:n.props.classes},n}return(0,i.Z)(a,[{key:"render",value:function(){return c.createElement("tinymce-editor",{apiKey:"r0ihgs4ukfpmudzw7aexxgb88tnx5jw26h1xx9x6409ji3gx",id:this.props.id,menubar:!0,plugins:"advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code help wordcount",toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},this.props.text)}}]),a}(c.PureComponent)}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.c2d770d1e6b3409ce70c.js.map