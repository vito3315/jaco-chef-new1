"use strict";(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[224],{6224:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R}),a(7643);var n=a(5861),s=a(5671),i=a(3144),r=a(7326),l=a(136),c=a(6215),o=a(1120),m=a(4942),u=a(7462),h=a(4687),_=a.n(h),d=a(7294),f=a(30),p=a(1822),g=a(3150),Z=a(6140),E=a(3030),v=a(8561),b=a(8736),w=a(3406),x=a(3892),y=a(5705),k=a(9633),P=a(5620),C=a(6406);var I=d.forwardRef((function(e,t){return d.createElement(P.Z,(0,u.Z)({elevation:6,ref:t,variant:"filled"},e))})),S=a(7563),D=function(e){(0,l.Z)(D,e);var t,a,u,h,P=(u=D,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,o.Z)(u);if(h){var a=(0,o.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function D(e){var t;return(0,s.Z)(this,D),t=P.call(this,e),(0,m.Z)((0,r.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:S.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e)}))})),t.state={module:"list_fake_users",module_name:"",is_load:!1,points:[],point:[],items:[],item:[],users:[],snackbar:!1,error:"",date_start_true:"",date_end_true:"",date_start_false:"",date_end_false:"",count_orders:0,max_summ:0,is_show_claim:0,is_show_claim_last:0,is_show_marketing:0},t}return(0,i.Z)(D,[{key:"componentDidMount",value:(a=(0,n.Z)(_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.points,items:t.items,module_name:t.module_info.name}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getUsers",value:(t=(0,n.Z)(_().mark((function e(){var t,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point:this.state.point,date_start_true:this.state.date_start_true,date_end_true:this.state.date_end_true,date_start_false:this.state.date_start_false,date_end_false:this.state.date_end_false,count_orders:this.state.count_orders,max_summ:this.state.max_summ,items:this.state.item,is_show_claim:this.state.is_show_claim,is_show_claim_last:this.state.is_show_claim_last,is_show_marketing:this.state.is_show_marketing},e.next=3,this.getData("get_users",t);case 3:(a=e.sent).st?this.setState({users:a.users}):this.setState({error:a.text,snackbar:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeNumber",value:function(e,t){this.setState((0,m.Z)({},e,t.target.value))}},{key:"changeItem",value:function(e,t,a){this.setState((0,m.Z)({},e,a))}},{key:"changeDateRange",value:function(e,t){var a,n,s,i;this.setState((0,m.Z)({},e,t?(n=""+((a=new Date(t)).getMonth()+1),s=""+a.getDate(),i=a.getFullYear(),n.length<2&&(n="0"+n),s.length<2&&(s="0"+s),[i,n,s].join("-")):""))}},{key:"changeItemChecked",value:function(e,t){var a=!0===t.target.checked?1:0;this.setState((0,m.Z)({},e,a))}},{key:"render",value:function(){var e=this;return d.createElement(d.Fragment,null,d.createElement(x.Z,{style:{zIndex:99},open:this.state.is_load},d.createElement(y.Z,{color:"inherit"})),d.createElement(k.Z,{open:this.state.snackbar,autoHideDuration:3e4,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:function(){e.setState({snackbar:!1})}},d.createElement(I,{onClose:function(){e.setState({snackbar:!1})},severity:"error",sx:{width:"100%"}},this.state.error)),d.createElement(f.ZP,{item:!0,xs:12,mb:3},d.createElement("h1",null,this.state.module_name)),d.createElement(f.ZP,{item:!0,container:!0,spacing:3,justifyContent:"center",mb:3,sx:{flexDirection:{sm:"row",xs:"column-reverse"}}},d.createElement(f.ZP,{item:!0,xs:12,sm:3,sx:{order:{sm:0,xs:1}}},d.createElement(C.Qe,{label:"Делал заказ от",value:this.state.date_start_true,func:this.changeDateRange.bind(this,"date_start_true")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3,sx:{order:{sm:1,xs:0}}},d.createElement(C.Qe,{label:"Делал заказ до",value:this.state.date_end_true,func:this.changeDateRange.bind(this,"date_end_true")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3,sx:{order:{sm:2,xs:2}}},d.createElement(p.Z,{variant:"contained",style:{whiteSpace:"nowrap"},onClick:this.getUsers.bind(this)},"Получить список клиентов"))),d.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.Qe,{label:"Не заказывал от",value:this.state.date_start_false,func:this.changeDateRange.bind(this,"date_start_false")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.Qe,{label:"Не заказывал до",value:this.state.date_end_false,func:this.changeDateRange.bind(this,"date_end_false")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.IA,{label:"Была оформлена ошибка на заказ",value:1==parseInt(this.state.is_show_claim),func:this.changeItemChecked.bind(this,"is_show_claim")}))),d.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.rZ,{label:"Количество заказов",value:this.state.count_orders,type:"number",func:this.changeNumber.bind(this,"count_orders")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.rZ,{label:"От суммы",value:this.state.max_summ,type:"number",func:this.changeNumber.bind(this,"max_summ")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.IA,{label:"Была оформлена ошибка на последний заказ",value:1==parseInt(this.state.is_show_claim_last),func:this.changeItemChecked.bind(this,"is_show_claim_last")}))),d.createElement(f.ZP,{container:!0,spacing:3,justifyContent:"center",mb:3},d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.e_,{label:"Точки",multiple:!0,data:this.state.points,value:this.state.point,func:this.changeItem.bind(this,"point")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.e_,{label:"Позиции в заказе",multiple:!0,data:this.state.items,value:this.state.item,func:this.changeItem.bind(this,"item")})),d.createElement(f.ZP,{item:!0,xs:12,sm:3},d.createElement(C.IA,{label:"Подписка на рекламную рассылку",value:1==parseInt(this.state.is_show_marketing),func:this.changeItemChecked.bind(this,"is_show_marketing")}))),this.state.users.length?d.createElement(f.ZP,{container:!0,justifyContent:"center"},d.createElement(f.ZP,{item:!0,xs:12,sm:9},d.createElement(w.Z,null,d.createElement(g.Z,null,d.createElement(v.Z,null,d.createElement(b.Z,null,d.createElement(E.Z,{style:{width:"5%"}},"#"),d.createElement(E.Z,{style:{width:"35%"}},"Имя"),d.createElement(E.Z,{style:{width:"60%"}},"Телефон"))),d.createElement(Z.Z,null,this.state.users.map((function(e,t){return d.createElement(b.Z,{key:t},d.createElement(E.Z,null,t+1),d.createElement(E.Z,null,e.name),d.createElement(E.Z,null,e.login))}))))))):null)}}]),D}(d.Component);function R(){return d.createElement(D,null)}},7643:(e,t,a)=>{var n=a(4783)(e.id,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)}}]);
//# sourceMappingURL=224.242d9a818d244d10dd59.js.map