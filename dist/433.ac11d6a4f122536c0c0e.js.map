{"version":3,"file":"433.ac11d6a4f122536c0c0e.js","mappings":"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","sources":["webpack://package.json/./src/components/auth/auth.component.jsx","webpack://package.json/./src/components/auth/auth.style.scss"],"sourcesContent":["import React from 'react';\r\n\r\nimport Avatar from '@mui/material/Avatar';\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nconst queryString = require('query-string');\r\n\r\nclass Auth_ extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            module: 'auth',\r\n            module_name: '',\r\n            is_load: false,\r\n\r\n            modalDialog: false,\r\n            dialogTitle: '',\r\n            dialogText: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if((window.location.protocol == 'http:' || window.location.protocol == 'http') && window.location.hostname != 'localhost'){\r\n            window.location.href = 'https://jacosoft-dop.ru'+window.location.pathname;\r\n        }\r\n    }\r\n\r\n    getData = (method, data = {}) => {\r\n\r\n        this.setState({\r\n            is_load: true\r\n        })\r\n\r\n        return fetch('https://jacochef.ru/api/index_new.php', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded'\r\n            },\r\n            body: queryString.stringify({\r\n                method: method,\r\n                module: this.state.module,\r\n                version: 2,\r\n                //login: '+79879340391',\r\n                login: localStorage.getItem('login'),\r\n                data: JSON.stringify(data)\r\n            })\r\n        }).then(res => res.json()).then(json => {\r\n\r\n            if (json.st === false && json.type == 'redir') {\r\n                window.location.pathname = '/';\r\n                return;\r\n            }\r\n\r\n            if (json.st === false && json.type == 'auth') {\r\n                window.location.pathname = '/auth';\r\n                return;\r\n            }\r\n\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    is_load: false\r\n                })\r\n            }, 300)\r\n\r\n            return json;\r\n        })\r\n            .catch(err => {\r\n                console.log(err)\r\n            });\r\n    }\r\n\r\n    async updateData() {\r\n        let data = {\r\n            point_id: this.state.point,\r\n            showReady: this.state.showReady === true ? 1 : 0\r\n        };\r\n\r\n        let res = await this.getData('get_orders', data);\r\n\r\n        this.setState({\r\n            read: res.read,\r\n            onstol: res.onstol,\r\n            ordersQueue: res.prestol_new\r\n        })\r\n    }\r\n\r\n    async auth() {\r\n        let data = {\r\n            login: document.getElementById('phone').value,\r\n            pwd: document.getElementById('password').value\r\n        };\r\n\r\n        let res = await this.getData('auth', data);\r\n\r\n        console.log(res)\r\n\r\n        if (res.st === false) {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    modalDialog: true,\r\n                    dialogTitle: 'Предупреждение',\r\n                    dialogText: res.text\r\n                })\r\n            }, 500)\r\n        } else {\r\n            localStorage.setItem('token', res.token)\r\n\r\n            setTimeout(() => {\r\n                window.location.pathname = '/'\r\n            }, 300)\r\n        }\r\n    }\r\n\r\n    // функция проверка телефона\r\n    checkPhone(e) {\r\n\r\n        let v = event.target.value;\r\n        let maxLen = 0;\r\n\r\n        v       = v.replace(/[^\\d+]/ig, \"\");\r\n        maxLen  = v.substring(0, 1) == '+' ? 12 : 11;\r\n        v       = v.substring(0, maxLen);\r\n        document.getElementById('phone').value = v;\r\n\r\n        return;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\r\n                    <CircularProgress color=\"inherit\" />\r\n                </Backdrop>\r\n\r\n                <Dialog\r\n                    open={this.state.modalDialog}\r\n                    onClose={() => { this.setState({ modalDialog: false }) }}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">{this.state.dialogTitle}</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">{this.state.dialogText}</DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={() => { this.setState({ modalDialog: false }) }} color=\"primary\" autoFocus>Хорошо</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={12} sm={6} md={6} lg={4} xl={3}>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', }}>\r\n                            <Avatar style={{ borderRadius: 0, width: '100%', height: 150, margin: 0, backgroundColor: '#fff' }}>\r\n                                <img alt=\"Жако доставка роллов и пиццы\" src=\"../assets/img_other/Favikon.png\" style={{ height: '100%' }} />\r\n                            </Avatar>\r\n                            <form style={{ width: '100%' }} noValidate>\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    size=\"small\"\r\n                                    required\r\n                                    fullWidth\r\n                                    id=\"phone\"\r\n                                    label=\"Номер телефона\"\r\n                                    name=\"phone\"\r\n                                    autoComplete=\"phone\"\r\n                                    autoFocus\r\n                                    onChange={this.checkPhone.bind(this)}\r\n                                   \r\n                                />\r\n                                <TextField\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    size=\"small\"\r\n                                    required\r\n                                    fullWidth\r\n                                    name=\"password\"\r\n                                    label=\"Пароль\"\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    autoComplete=\"current-password\"\r\n                                />\r\n                                <Button\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    style={{ marginTop: 10, marginBottom: 10 }}\r\n                                    onClick={this.auth.bind(this)}\r\n                                >\r\n                                    Войти\r\n                                </Button>\r\n                                <Grid container>\r\n                                    <Grid item xs>\r\n                                        <a href=\"/registration\" style={{ color: '#c03' }}>Восстановить пароль</a>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </form>\r\n                        </div>\r\n                    </Grid>\r\n                </Grid>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport function Auth() {\r\n    return (\r\n        <Auth_ />\r\n    );\r\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1668339426090\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","Auth_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","modalDialog","dialogTitle","dialogText","protocol","hostname","href","point_id","this","point","showReady","getData","read","onstol","ordersQueue","prestol_new","document","getElementById","value","pwd","text","setItem","token","e","maxLen","v","event","target","replace","substring","Backdrop","style","zIndex","open","CircularProgress","color","Dialog","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","autoFocus","Grid","container","spacing","direction","justifyContent","alignItems","item","xs","sm","md","lg","xl","display","flexDirection","Avatar","borderRadius","width","height","margin","backgroundColor","alt","src","noValidate","TextField","variant","size","required","fullWidth","label","name","autoComplete","onChange","checkPhone","bind","marginTop","marginBottom","auth","React","Auth","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}