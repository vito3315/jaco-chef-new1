{"version":3,"file":"546.4ec003a12e0c04c93309.js","mappings":"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","sources":["webpack://package.json/./src/components/registration/registration.component.jsx","webpack://package.json/./src/components/registration/registration.style.scss"],"sourcesContent":["import React from 'react';\n\nimport Avatar from '@mui/material/Avatar';\nimport TextField from '@mui/material/TextField';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\n\nimport Stepper from '@mui/material/Stepper';\nimport Step from '@mui/material/Step';\nimport StepLabel from '@mui/material/StepLabel';\n\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nconst queryString = require('query-string');\n\nclass Reg_ extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            module: 'auth',\n            module_name: '',\n            is_load: false,\n\n            modalDialog: false,\n            dialogTitle: '',\n            dialogText: '',\n\n            activeStep: 0,\n            steps: ['Телефон', 'Подтверждение', 'Новый пароль'],\n\n            phone: '',\n            code: '',\n            pwd: ''\n        };\n    }\n\n    getData = (method, data = {}) => {\n\n        this.setState({\n            is_load: true\n        })\n\n        return fetch('https://jacochef.ru/api/index_new.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: queryString.stringify({\n                method: method,\n                module: this.state.module,\n                version: 2,\n                //login: '+79879340391',\n                login: localStorage.getItem('login'),\n                data: JSON.stringify(data)\n            })\n        }).then(res => res.json()).then(json => {\n\n            if (json.st === false && json.type == 'redir') {\n                window.location.pathname = '/';\n                return;\n            }\n\n            if (json.st === false && json.type == 'auth') {\n                window.location.pathname = '/auth';\n                return;\n            }\n\n            setTimeout(() => {\n                this.setState({\n                    is_load: false\n                })\n            }, 300)\n\n            return json;\n        })\n            .catch(err => {\n                console.log(err)\n            });\n    }\n\n    async updateData() {\n        let data = {\n            point_id: this.state.point,\n            showReady: this.state.showReady === true ? 1 : 0\n        };\n\n        let res = await this.getData('get_orders', data);\n\n        this.setState({\n            read: res.read,\n            onstol: res.onstol,\n            ordersQueue: res.prestol_new\n        })\n    }\n\n    async nextStep() {\n        if (this.state.activeStep == 0) {\n            let data = {\n                login: document.getElementById('phone').value\n            }\n\n            let res = await this.getData('check_phone', data);\n\n            if (res.st === false) {\n                setTimeout(() => {\n                    this.setState({\n                        modalDialog: true,\n                        dialogTitle: 'Предупреждение',\n                        dialogText: res.text\n                    })\n                }, 500)\n            } else {\n                this.setState({\n                    activeStep: this.state.activeStep + 1,\n                    phone: data.login\n                })\n            }\n        } else if (this.state.activeStep == 1) {\n            let data = {\n                login: this.state.phone,\n                code: document.getElementById('code').value\n            }\n\n            let res = await this.getData('check_code', data);\n\n            if (res.st === false) {\n                setTimeout(() => {\n                    this.setState({\n                        modalDialog: true,\n                        dialogTitle: 'Предупреждение',\n                        dialogText: res.text\n                    })\n                }, 500)\n            } else {\n                this.setState({\n                    activeStep: this.state.activeStep + 1,\n                    code: data.code\n                })\n            }\n        } else if (this.state.activeStep == 2) {\n            let data = {\n                login: this.state.phone,\n                code: this.state.code,\n                pwd: document.getElementById('password').value\n            }\n\n            let res = await this.getData('save_new_pwd', data);\n\n            if (res.st === false) {\n                setTimeout(() => {\n                    this.setState({\n                        modalDialog: true,\n                        dialogTitle: 'Предупреждение',\n                        dialogText: res.text\n                    })\n                }, 500)\n            } else {\n                localStorage.setItem('token', res.token)\n\n                setTimeout(() => {\n                    window.location.pathname = '/'\n                }, 300)\n            }\n        }\n    }\n\n    enterNextStep(event) {\n        if (event.charCode == 13) {\n            this.nextStep();\n        }\n    }\n\n    // функция проверка телефона\n    checkPhone(e) {\n\n        let v = event.target.value;\n        let maxLen = 0;\n\n        v = v.replace(/[^\\d+]/ig, \"\");\n        maxLen = v.substring(0, 1) == '+' ? 12 : 11;\n        v = v.substring(0, maxLen);\n        document.getElementById('phone').value = v;\n\n        return;\n    }\n\n    render() {\n        return (\n            <>\n                <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\n                    <CircularProgress color=\"inherit\" />\n                </Backdrop>\n\n                <Dialog\n                    open={this.state.modalDialog}\n                    onClose={() => { this.setState({ modalDialog: false }) }}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{this.state.dialogTitle}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\">{this.state.dialogText}</DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={() => { this.setState({ modalDialog: false }) }} color=\"primary\" autoFocus>Хорошо</Button>\n                    </DialogActions>\n                </Dialog>\n\n                <Grid container spacing={3} direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\n                    <Grid item xs={12} sm={6} md={6} lg={4} xl={3}>\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', }}>\n                            <Avatar style={{ borderRadius: 0, width: '100%', height: 150, margin: 0, backgroundColor: '#fff', marginBottom: 20 }}>\n                                <img alt=\"Жако доставка роллов и пиццы\" src=\"../assets/img_other/Favikon.png\" style={{ height: '100%' }} />\n                            </Avatar>\n\n                            <Stepper activeStep={this.state.activeStep} alternativeLabel style={{ width: '100%' }}>\n                                {this.state.steps.map((label) => (\n                                    <Step key={label}>\n                                        <StepLabel>{label}</StepLabel>\n                                    </Step>\n                                ))}\n                            </Stepper>\n                            <div style={{ width: '100%' }}>\n\n                                {this.state.activeStep == 0 ?\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        size=\"small\"\n                                        required\n                                        fullWidth\n                                        id=\"phone\"\n                                        label=\"Номер телефона\"\n                                        name=\"phone\"\n                                        autoComplete=\"phone\"\n                                        autoFocus\n                                        onKeyPress={this.enterNextStep.bind(this)}\n                                        onChange={this.checkPhone.bind(this)}\n                                    />\n                                    :\n                                    null\n                                }\n\n                                {this.state.activeStep == 1 ?\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        size=\"small\"\n                                        required\n                                        fullWidth\n                                        id=\"code\"\n                                        label=\"Код из смс\"\n                                        name=\"code\"\n                                        autoComplete=\"code\"\n                                        autoFocus\n                                        onKeyPress={this.enterNextStep.bind(this)}\n                                    />\n                                    :\n                                    null\n                                }\n\n                                {this.state.activeStep == 2 ?\n                                    <TextField\n                                        variant=\"outlined\"\n                                        margin=\"normal\"\n                                        size=\"small\"\n                                        required\n                                        fullWidth\n                                        name=\"password\"\n                                        label=\"Пароль\"\n                                        type=\"password\"\n                                        id=\"password\"\n                                        autoComplete=\"current-password\"\n                                        onKeyPress={this.enterNextStep.bind(this)}\n                                    />\n                                    :\n                                    null\n                                }\n\n                                <Button\n                                    fullWidth\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    style={{ marginTop: 10, marginBottom: 10 }}\n                                    onClick={this.nextStep.bind(this)}\n                                >\n                                    Дальше\n                                </Button>\n                                <Grid container>\n                                    <Grid item xs>\n                                        <a href=\"/auth\" style={{ color: '#c03' }}>Вернуться к авторизации</a>\n                                    </Grid>\n                                </Grid>\n\n\n                            </div>\n\n\n                        </div>\n                    </Grid>\n                </Grid>\n            </>\n        )\n    }\n}\n\nexport function Reg() {\n    return (\n        <Reg_ />\n    );\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1666590096545\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","Reg_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","modalDialog","dialogTitle","dialogText","activeStep","steps","phone","code","pwd","point_id","this","point","showReady","getData","read","onstol","ordersQueue","prestol_new","document","getElementById","value","text","setItem","token","event","charCode","nextStep","e","maxLen","v","target","replace","substring","Backdrop","style","zIndex","open","CircularProgress","color","Dialog","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","Button","onClick","autoFocus","Grid","container","spacing","direction","justifyContent","alignItems","item","xs","sm","md","lg","xl","display","flexDirection","Avatar","borderRadius","width","height","margin","backgroundColor","marginBottom","alt","src","Stepper","alternativeLabel","map","label","Step","key","StepLabel","TextField","variant","size","required","fullWidth","name","autoComplete","onKeyPress","enterNextStep","bind","onChange","checkPhone","marginTop","href","React","Reg","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}