"use strict";(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[741],{7741:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T}),n(7500);var i=n(5861),a=n(7326),r=n(4942),s=n(5671),l=n(3144),c=n(136),o=n(6215),m=n(1120),h=n(4687),d=n.n(h),u=n(7294),p=n(30),f=n(1822),Z=n(3150),E=n(6140),v=n(3030),g=n(8561),_=n(8736),y=n(2961),w=n(2450),b=n(9620),k=n(2962),P=n(4498),x=n(7745),C=n(3892),I=n(5705),S=n(6406);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,m.Z)(e);if(t){var a=(0,m.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,o.Z)(this,n)}}var M=n(7563),F=function(e){(0,c.Z)(n,e);var t=D(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"shouldComponentUpdate",value:function(e){var t=e.cameras,n=this.props.cameras;return!(t.length==n.length&&t.every((function(e,t){return e===n[t]})))}},{key:"render",value:function(){var e=this;return u.createElement(u.Fragment,null,u.createElement(p.ZP,null,"Ошибки по камерам"),u.createElement(Z.Z,null,u.createElement(g.Z,null,u.createElement(_.Z,null,u.createElement(v.Z,{style:{width:"50%"}},"Наименование"),u.createElement(v.Z,{style:{width:"15%"}},"Размер штрафа за первый раз"),u.createElement(v.Z,{style:{width:"15%"}},"Размер штрафа за второй раз"),u.createElement(v.Z,{style:{width:"15%"}},"Размер штрафа за третий и последующие"),u.createElement(v.Z,{style:{width:"5%"}}))),u.createElement(E.Z,null,this.props.cameras.map((function(t,n){return u.createElement(_.Z,{key:n},u.createElement(v.Z,{style:{cursor:"pointer"},onClick:e.props.openModal.bind(e,"Штраф по камерам",t)},t.name),u.createElement(v.Z,null,"".concat(t.first," руб")),u.createElement(v.Z,null,"".concat(t.second," руб")),u.createElement(v.Z,null,"".concat(t.third," руб")),u.createElement(v.Z,null,1==parseInt(t.is_show)?u.createElement(y.Z,null):u.createElement(w.Z,null)))})))))}}]),n}(u.Component),N=function(e){(0,c.Z)(n,e);var t=D(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"shouldComponentUpdate",value:function(e){var t=e.reviews,n=this.props.reviews;return!(t.length==n.length&&t.every((function(e,t){return e===n[t]})))}},{key:"render",value:function(){var e=this;return u.createElement(u.Fragment,null,u.createElement(p.ZP,{mb:3},"Ошибки по камерам"),u.createElement(Z.Z,null,u.createElement(g.Z,null,u.createElement(_.Z,null,u.createElement(v.Z,{style:{width:"50%"}},"Наименование"),u.createElement(v.Z,{style:{width:"15%"}},"Процент за первый раз"),u.createElement(v.Z,{style:{width:"15%"}},"Процент за второй раз"),u.createElement(v.Z,{style:{width:"15%"}},"Процент за третий и последующие"),u.createElement(v.Z,{style:{width:"5%"}}))),u.createElement(E.Z,null,this.props.reviews.map((function(t,n){return u.createElement(u.Fragment,{key:t.id},u.createElement(_.Z,null,u.createElement(v.Z,{style:{cursor:"pointer"},rowSpan:"2",onClick:e.props.openModal.bind(e,"Штраф по отзывам",t)},t.name),u.createElement(v.Z,null,"".concat(t.first_percent," %")),u.createElement(v.Z,null,"".concat(t.second_percent," %")),u.createElement(v.Z,null,"".concat(t.third_percent," %")),u.createElement(v.Z,{rowSpan:"2"},1==parseInt(t.is_show)?u.createElement(y.Z,null):u.createElement(w.Z,null))),u.createElement(_.Z,null,u.createElement(v.Z,null,"".concat(t.first," руб")),u.createElement(v.Z,null,"".concat(t.second," руб")),u.createElement(v.Z,null,"".concat(t.third," руб"))))})))))}}]),n}(u.Component),R=function(e){(0,c.Z)(n,e);var t=D(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).state={item:null},i}return(0,l.Z)(n,[{key:"changeItem",value:function(e,t){var n=this.state.item;n[e]=t.target.value,this.setState({item:n})}},{key:"changeItemChecked",value:function(e,t){var n=this.state.item;n[e]=!0===t.target.checked?1:0,this.setState({item:n})}},{key:"onClose",value:function(){this.setState({item:null}),this.props.onClose()}},{key:"render",value:function(){return u.createElement(b.Z,{open:this.props.open,onClose:this.onClose.bind(this),fullWidth:!0,maxWidth:"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},u.createElement(x.Z,{id:"alert-dialog-title"},this.props.method,this.props.itemName?": ".concat(this.props.itemName):""),u.createElement(P.Z,{style:{paddingBottom:10,paddingTop:10}},u.createElement(p.ZP,{container:!0,spacing:3},u.createElement(p.ZP,{item:!0,xs:12},u.createElement(p.ZP,{container:!0,spacing:3},u.createElement(p.ZP,{item:!0,xs:12,sm:8,mb:2},u.createElement(S.rZ,{label:"Наименование штрафа",value:this.state.item.name,func:this.changeItem.bind(this,"name")}))),"Новый штраф по отзывам"===this.props.method||"Штраф по отзывам"===this.props.method?u.createElement(p.ZP,{container:!0,spacing:3},u.createElement(p.ZP,{item:!0,xs:12,sm:4,mb:2},u.createElement(S.rZ,{label:"Процент за первый раз",value:this.state.item.first_percent,func:this.changeItem.bind(this,"first_percent")})),u.createElement(p.ZP,{item:!0,xs:12,sm:4,mb:2},u.createElement(S.rZ,{label:"Процент за второй раз",value:this.state.item.second_percent,func:this.changeItem.bind(this,"second_percent")})),u.createElement(p.ZP,{item:!0,xs:12,sm:4,mb:2},u.createElement(S.rZ,{label:"Процент за третий и последующие",value:this.state.item.third_percent,func:this.changeItem.bind(this,"third_percent")}))):null,u.createElement(p.ZP,{container:!0,spacing:3},u.createElement(p.ZP,{item:!0,xs:12,sm:4},u.createElement(S.rZ,{label:"Размер штрафа за первый раз",value:this.state.item.first,func:this.changeItem.bind(this,"first")})),u.createElement(p.ZP,{item:!0,xs:12,sm:4},u.createElement(S.rZ,{label:"Размер штрафа за второй раз",value:this.state.item.second,func:this.changeItem.bind(this,"second")})),u.createElement(p.ZP,{item:!0,xs:12,sm:4},u.createElement(S.rZ,{label:"Размер штрафа за третий и последующие",value:this.state.item.third,func:this.changeItem.bind(this,"third")})),"Новый штраф по камерам"===this.props.method||"Штраф по камерам"===this.props.method?u.createElement(p.ZP,{item:!0,xs:12},u.createElement(S.IA,{label:"Картинка",value:1==parseInt(this.state.item.is_show),func:this.changeItemChecked.bind(this,"is_show")})):null,"Штраф по отзывам"===this.props.method||"Штраф по камерам"===this.props.method?u.createElement(p.ZP,{item:!0,xs:12},u.createElement(S.IA,{label:"Активность",value:1==parseInt(this.state.item.is),func:this.changeItemChecked.bind(this,"is")})):null)))),u.createElement(k.Z,null,u.createElement(f.Z,{onClick:this.props.save.bind(this,this.props.method,this.state.item),color:"primary"},"Сохранить")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.event&&e.event!==t.event?{item:e.event}:null}}]),n}(u.Component),j=function(e){(0,c.Z)(o,e);var t,n=D(o);function o(e){var t;return(0,s.Z)(this,o),t=n.call(this,e),(0,r.Z)((0,a.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:M.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e)}))})),t.state={module:"fines",module_name:"",is_load:!1,modalDialog:!1,itemName:"",cameras:[{id:"1",name:"Немытые руки",first:"50",second:"100",third:"200",is_show:1,is:1},{id:"2",name:"Внешний вид",first:"50",second:"100",third:"200",is_show:1,is:1},{id:"3",name:"Употребление продуктов компании",first:"50",second:"100",third:"200",is_show:1,is:0},{id:"4",name:"Хищение продуктов",first:"50",second:"100",third:"200",is_show:0,is:0},{id:"5",name:"Ингредиенты разложены или порезаны не по стандартам",first:"50",second:"100",third:"200",is_show:1,is:1}],reviews:[{id:"1",name:"Ошибка не выявлена",first_percent:0,second_percent:0,third_percent:0,first:"50",second:"100",third:"200",is_show:1,is:0},{id:"2",name:"Извинение",first_percent:100,second_percent:100,third_percent:100,first:"50",second:"100",third:"200",is_show:1,is:1},{id:"3",name:"Скидка 10%",first_percent:0,second_percent:0,third_percent:0,first:"50",second:"100",third:"200",is_show:1,is:1},{id:"4",name:"Скидка 20%",first_percent:10,second_percent:10,third_percent:10,first:"50",second:"100",third:"200",is_show:1,is:1},{id:"5",name:"Замена товара на аналогичный",first_percent:50,second_percent:50,third_percent:50,first:"50",second:"100",third:"200",is_show:1,is:0}],event:{},newFine:{id:"",name:"",first_percent:"",second_percent:"",third_percent:"",first:"",second:"",third:"",is_show:0}},t}return(0,l.Z)(o,[{key:"componentDidMount",value:(t=(0,i.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,mounths:t.mounth}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"openModal",value:function(e,t){"Новый штраф по камерам"===e&&this.setState({modalDialog:!0,method:e,event:this.state.newFine}),"Новый штраф по отзывам"===e&&this.setState({modalDialog:!0,method:e,event:this.state.newFine}),"Штраф по камерам"===e&&this.setState({modalDialog:!0,method:e,event:t,itemName:t.name}),"Штраф по отзывам"===e&&this.setState({modalDialog:!0,method:e,event:t,itemName:t.name})}},{key:"saveItem",value:function(e,t){console.log(e),console.log(t),this.setState({modalDialog:!1})}},{key:"render",value:function(){var e=this;return u.createElement(u.Fragment,null,u.createElement(C.Z,{style:{zIndex:99},open:this.state.is_load},u.createElement(I.Z,{color:"inherit"})),u.createElement(p.ZP,{container:!0,spacing:3},u.createElement(p.ZP,{item:!0,xs:12,sm:12},u.createElement("h1",null,this.state.module_name)),u.createElement(p.ZP,{item:!0,xs:12,sm:6},u.createElement(f.Z,{onClick:this.openModal.bind(this,"Новый штраф по камерам"),variant:"contained"},"Добавить ошибку по камерам")),u.createElement(p.ZP,{item:!0,xs:12,sm:6},u.createElement(f.Z,{onClick:this.openModal.bind(this,"Новый штраф по отзывам"),variant:"contained"},"Добавить ошибку по отзывам")),u.createElement(p.ZP,{item:!0,xs:12,sm:6},u.createElement(F,{cameras:this.state.cameras,openModal:this.openModal.bind(this)})),u.createElement(p.ZP,{item:!0,xs:12,sm:6},u.createElement(N,{reviews:this.state.reviews,openModal:this.openModal.bind(this)}))),u.createElement(R,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},method:this.state.method,event:this.state.event,save:this.saveItem.bind(this),itemName:this.state.itemName}))}}]),o}(u.Component);function T(){return u.createElement(j,null)}},7500:(e,t,n)=>{var i=n(4783)(e.id,{locals:!1});e.hot.dispose(i),e.hot.accept(void 0,i)}}]);
//# sourceMappingURL=741.47796187a91c4dd4422e.js.map