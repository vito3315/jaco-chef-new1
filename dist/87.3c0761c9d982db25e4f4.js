"use strict";(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[87],{4087:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F}),n(6044);var a=n(5861),i=n(4942),r=n(5671),l=n(3144),s=n(7326),o=n(136),m=n(6215),d=n(1120),c=n(4687),u=n.n(c),h=n(7294),p=n(30),y=n(1822),_=n(130),f=n(3150),Z=n(6140),E=n(3030),v=n(3406),w=n(8561),g=n(8736),k=n(8727),b=n(808),S=n(231),x=n(3508),C=n(594),q=n(9620),P=n(2962),D=n(4498),R=n(7745),z=n(3892),I=n(5705),j=n(1647),T=n(6482),W=n(4373),M=n(6406);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var i=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,m.Z)(this,n)}}var N=n(7563),O=function(e){(0,o.Z)(n,e);var t=B(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).handleResize=a.handleResize.bind((0,s.Z)(a)),a.state={item:{},fullScreen:!1},a}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function(e){this.props.event&&this.props.event!==e.event&&this.setState({item:this.props.event})}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){window.innerWidth<601?this.setState({fullScreen:!0}):this.setState({fullScreen:!1})}},{key:"changeTimeStart",value:function(e,t){var n=this.state.item;n[e]=t.target.value,this.setState({item:n})}},{key:"changeTimeEnd",value:function(e,t){var n=this.state.item;n[e]=t.target.value,this.setState({item:n})}},{key:"changeDateRange",value:function(e,t){var n,a,i,r,l=this.state.item;l[e]=(a=""+((n=new Date(t)).getMonth()+1),i=""+n.getDate(),r=n.getFullYear(),a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[r,a,i].join("-")),this.setState({item:l})}},{key:"save",value:function(){this.props.save(this,this.state.item),this.setState({item:this.props.event?this.props.event:{}}),this.props.onClose()}},{key:"onClose",value:function(){this.setState({item:this.props.event?this.props.event:{}}),this.props.onClose()}},{key:"render",value:function(){var e=this;return h.createElement(q.Z,{open:this.props.open,onClose:this.onClose.bind(this),fullScreen:this.state.fullScreen,fullWidth:!0,maxWidth:"Особый день"!==this.props.method?"md":"lg","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(R.Z,{className:"button"},h.createElement(j.Z,{style:{fontWeight:"normal"}},this.props.method),this.state.fullScreen?h.createElement(_.Z,{onClick:this.onClose.bind(this),style:{cursor:"pointer"}},h.createElement(C.Z,null)):null),h.createElement(D.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(p.ZP,{container:!0,spacing:3,mb:3,item:!0,xs:12},"Особый день"!==this.props.method?null:h.createElement(p.ZP,{item:!0,sm:3,xs:12},h.createElement(M.Qe,{label:"Дата",value:this.state.item.data,func:this.changeDateRange.bind(this,"data")})),h.createElement(p.ZP,{item:!0,sm:"Особый день"!==this.props.method?4:3,xs:6},h.createElement(M.w0,{value:this.state.item.time_start,func:this.changeTimeStart.bind(this,"time_start"),label:"Время начала"})),h.createElement(p.ZP,{item:!0,sm:"Особый день"!==this.props.method?4:3,xs:6},h.createElement(M.w0,{value:this.state.item.time_end,func:this.changeTimeEnd.bind(this,"time_end"),label:"Время окончания"})),h.createElement(p.ZP,{item:!0,sm:"Особый день"!==this.props.method?4:3,xs:12},h.createElement(M.e_,{label:"Количество",multiple:!1,freeSolo:!0,func:function(t,n){var a=e.state.item;a.quantity=n,e.setState({item:a})},data:this.state.item.array,value:this.state.item.quantity})))),h.createElement(P.Z,null,h.createElement(y.Z,{onClick:this.save.bind(this)},"Сохранить")))}}]),n}(h.Component),A=function(e){(0,o.Z)(m,e);var t,n=B(m);function m(e){var t;return(0,r.Z)(this,m),t=n.call(this,e),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:N.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e)}))})),t.state={module:"event_time_1",module_name:"",is_load:!1,points:[],point:"0",modalDialog:!1,method:"",item:[{id:"1",id_row:"1",data:"2022-10-05",time_start:"19:30",time_end:"20:30",quantity:10},{id:"1",id_row:"2",data:"2022-10-06",time_start:"19:30",time_end:"20:30",quantity:20}],itemNew:{id:"",id_row:"",data:"",time_start:"",time_end:"",quantity:0,array:[{name:"5"},{name:"10"},{name:"15"},{name:"20"}]},event:{},cardData:[{id:"1",day_id:"1",day_week:"Понедельник",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]},{id:"1",day_id:"2",day_week:"Вторник",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]},{id:"1",day_id:"3",day_week:"Среда",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]},{id:"1",day_id:"4",day_week:"Четверг",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]},{id:"1",day_id:"5",day_week:"Пятница",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]},{id:"1",day_id:"6",day_week:"Суббота",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]},{id:"1",day_id:"7",day_week:"Воскресенье",data:[{id_row:"1",time_start:"19:30",time_end:"20:30",quantity:20},{id_row:"2",time_start:"20:30",time_end:"21:30",quantity:30}]}]},t}return(0,l.Z)(m,[{key:"componentDidMount",value:(t=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.points,point:t.points[0].id,module_name:t.module_info.name});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=e.target.value;this.setState({point:t})}},{key:"openModal",value:function(e,t,n){var a=this.state.itemNew;a.id=this.state.point,this.setState({modalDialog:!0,method:e,event:a})}},{key:"saveItem",value:function(e,t){console.log(t)}},{key:"deleteItemAccordion",value:function(e){}},{key:"deleteItemCard",value:function(e){}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(z.Z,{style:{zIndex:99},open:this.state.is_load},h.createElement(I.Z,{color:"inherit"})),h.createElement(p.ZP,{container:!0,spacing:3,mb:2},h.createElement(p.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name))),h.createElement(O,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},method:this.state.method,event:this.state.event,save:this.saveItem.bind(this)}),h.createElement(p.ZP,{container:!0,spacing:3,justifyContent:"center",direction:"column"},h.createElement(p.ZP,{container:!0,spacing:3,justifyContent:"center",item:!0,xs:12},h.createElement(p.ZP,{item:!0,xs:12,sm:4},h.createElement(M.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(p.ZP,{item:!0,xs:12,sm:2},h.createElement(y.Z,{disabled:this.state.point<1,variant:this.state.point<1?"outlined":"contained",style:{whiteSpace:"nowrap"},onClick:this.openModal.bind(this,"Особый день")},"Добавить особый день"))),this.state.point<1?null:h.createElement(p.ZP,{container:!0,justifyContent:"center",spacing:3,p:3},h.createElement(p.ZP,{item:!0,sm:5,xs:12},h.createElement(k.Z,null,h.createElement(b.Z,{expandIcon:h.createElement(x.Z,null),"aria-controls":"panel1a-content"},h.createElement(j.Z,{style:{whiteSpace:"nowrap"}},"Особые дни")),h.createElement(S.Z,null,h.createElement(k.Z,null,h.createElement(v.Z,null,h.createElement(f.Z,{size:"small",style:{whiteSpace:"nowrap"}},h.createElement(w.Z,null,h.createElement(g.Z,null,h.createElement(E.Z,{style:{width:"30%"}},"Дата"),h.createElement(E.Z,{style:{width:"30%"}},"Время"),h.createElement(E.Z,{style:{width:"30%"}},"Доставка"),h.createElement(E.Z,{style:{width:"10%"}}))),this.state.item.map((function(t,n){return h.createElement(Z.Z,{key:n+100,sx:{"& td":{border:0},borderBottom:1,borderColor:"divider"}},h.createElement(g.Z,null,h.createElement(E.Z,null,t.data),h.createElement(E.Z,null,t.time_start," - ",t.time_end),h.createElement(E.Z,null,t.quantity),h.createElement(E.Z,null,h.createElement(C.Z,{onClick:e.deleteItemAccordion.bind(e,t.id_row),style:{cursor:"pointer"}}))))})))))))))),this.state.point<1&&this.state.cardData.length?null:h.createElement(p.ZP,{container:!0,item:!0,xs:12,spacing:3,direction:"row"},this.state.cardData.map((function(t,n){return h.createElement(p.ZP,{item:!0,sm:3,key:n},h.createElement(T.Z,{variant:"outlined",sx:{border:1,boxShadow:1,borderRadius:2,p:2}},h.createElement(p.ZP,{align:"center"},t.day_week),h.createElement(W.Z,null),h.createElement(f.Z,{size:"small",style:{whiteSpace:"nowrap"}},h.createElement(w.Z,null,h.createElement(g.Z,null,h.createElement(E.Z,{style:{maxWidth:"40%"}},"Время"),h.createElement(E.Z,{style:{maxWidth:"40%"}}," ","Доставка"),h.createElement(E.Z,{style:{maxWidth:"20%"}}))),t.data.map((function(t,n){return h.createElement(Z.Z,{key:n+100,sx:{"& td":{border:0},borderBottom:1,borderColor:"divider"}},h.createElement(g.Z,null,h.createElement(E.Z,null,t.time_start," - ",t.time_end),h.createElement(E.Z,null,t.quantity),h.createElement(E.Z,null,h.createElement(C.Z,{onClick:e.deleteItemCard.bind(e,t.id_row),style:{cursor:"pointer"}}))))}))),h.createElement(y.Z,{size:"sm",fullWidth:!0,onClick:e.openModal.bind(e,"Добавить в текущие заказы")},"Добавить")))}))))}}]),m}(h.Component);function F(){return h.createElement(A,null)}},6044:(e,t,n)=>{var a=n(4783)(e.id,{locals:!1});e.hot.dispose(a),e.hot.accept(void 0,a)}}]);
//# sourceMappingURL=87.3c0761c9d982db25e4f4.js.map