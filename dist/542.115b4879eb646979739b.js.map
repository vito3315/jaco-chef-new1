{"version":3,"file":"542.115b4879eb646979739b.js","mappings":"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","sources":["webpack://package.json/./src/components/hot_map/hot_map.component.jsx","webpack://package.json/./src/components/hot_map/hot_map.style.scss"],"sourcesContent":["import React from 'react';\n\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\n\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nimport Typography from '@mui/material/Typography';\n\nimport { MySelect, MyDatePickerNew, MyTimePicker, MyCheckBox } from '../../stores/elements';\n\nconst queryString = require('query-string');\n\nfunction formatDate(date) {\n  var d = new Date(date),\n      month = '' + (d.getMonth() + 1),\n      day = '' + d.getDate(),\n      year = d.getFullYear();\n\n  if (month.length < 2) \n      month = '0' + month;\n  if (day.length < 2) \n      day = '0' + day;\n\n  return [year, month, day].join('-');\n}\n\nexport class HotMap extends React.Component {\n  map = null;\n  heatmap = null;\n\n  constructor(props) {\n    super(props);\n        \n    this.state = {\n      module: 'hot_map',\n      module_name: '',\n      is_load: false,\n      \n      cities: [],\n      city_id: '',\n      \n      date_start: formatDate(new Date()),\n      date_end: formatDate(new Date()),\n      time_start: '00:00',\n      time_end: '23:59',\n\n      statAllCount: '',\n      statTrueCount: '',\n\n      is_new: 0\n    };\n  }\n  \n  async componentDidMount(){\n    \n    let data = await this.getData('get_all');\n    \n    this.setState({\n      cities: data.cities,\n      city_id: data.cities[0].id,\n      module_name: data.module_info.name\n    })\n    \n    document.title = data.module_info.name;\n  }\n  \n  getData = (method, data = {}) => {\n    \n    this.setState({\n      is_load: true\n    })\n    \n    return fetch('https://jacochef.ru/api/index_new.php', {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify({\n        method: method, \n        module: this.state.module,\n        version: 2,\n        login: localStorage.getItem('token'),\n        data: JSON.stringify( data )\n      })\n    }).then(res => res.json()).then(json => {\n      \n      if( json.st === false && json.type == 'redir' ){\n        window.location.pathname = '/';\n        return;\n      }\n      \n      if( json.st === false && json.type == 'auth' ){\n        window.location.pathname = '/auth';\n        return;\n      }\n      \n      setTimeout( () => {\n        this.setState({\n          is_load: false\n        })\n      }, 300 )\n      \n      return json;\n    })\n    .catch(err => { \n      console.log( err )\n    });\n  }\n   \n  changeCity(event){\n    let data = event.target.value;\n    \n    this.setState({\n      city_id: data\n    })\n    \n    setTimeout( () => {\n      //this.updateData();\n    }, 50 )\n  }\n  \n  async updateData(){\n    let data = {\n      city_id: this.state.city_id,\n      date_start: this.state.date_start,\n      date_end: this.state.date_end,\n      time_start: this.state.time_start,\n      time_end: this.state.time_end,\n      is_new: this.state.is_new,\n    };\n    \n    let res = await this.getData('get_orders', data);\n    \n    console.log( res )\n\n    this.getOrders(res.points, res.all_points)\n  }\n  \n  getOrders(home, all_points){\n    //let objectManager = new ymaps.ObjectManager();\n    \n    var new_data = [];\n\t\t\t\t\n    all_points.map(function(item){\n      new_data.push([\n        parseFloat(item[0]),\n        parseFloat(item[1])\n      ])\n    })\n\n    \n    if( !this.map ){\n      ymaps.ready(() => {\n        this.map = new ymaps.Map('map', {\n          center: [home[0].home.latitude, home[0].home.longitude],\n          zoom: 11\n        }, {\n          searchControlProvider: 'yandex#search'\n        })\n        \n        var gradients = [\n          {\n            0.1: 'rgba(128, 255, 0, 0.7)',\n            0.2: 'rgba(255, 255, 0, 0.8)',\n            0.7: 'rgba(234, 72, 58, 0.9)',\n            1.0: 'rgba(162, 36, 25, 1)'\n          }, {\n            0.1: 'rgba(162, 36, 25, 0.7)',\n            0.2: 'rgba(234, 72, 58, 0.8)',\n            0.7: 'rgba(255, 255, 0, 0.9)',\n            1.0: 'rgba(128, 255, 0, 1)'\n          }\n        ],\n        radiuses = [5, 10, 20, 30],\n        opacities = [0.4, 0.6, 0.8, 1];\n\n       \n        ymaps.modules.require(['Heatmap'], (Heatmap) => {\n          this.heatmap = new Heatmap(new_data, {\n              gradient: gradients[0],\n              radius: radiuses[1],\n              opacity: opacities[2]\n          });\n          this.heatmap.setMap(this.map);\n        });\n\n        //return ;\n        \n\n        home.map( (item, key) => {\n          //дом\n          let myGeoObject = new ymaps.GeoObject({\n            geometry: {\n              type: \"Point\",\n              coordinates: [item.home.latitude, item.home.longitude]\n            },\n          }, {\n            preset: 'islands#blackDotIcon', \n            iconColor: 'black'\n          })\n\n          this.map.geoObjects.add(myGeoObject);\n\n          let points_zone = [];\n\n          item.zone.map( (zon, k) => {\n            points_zone.push( JSON.parse(zon['zone']) );\n          } )\n          \n          let myGeoObject2 = [];\n\n          for(var poly = 0; poly < points_zone.length; poly++){\n\t\t\t\t\t\tmyGeoObject2[poly] = new ymaps.Polygon([points_zone[poly]], {\n\t\t\t\t\t\t\thintContent: \"\"\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tfillColor: 'rgba(187, 0, 37, 0)',\n\t\t\t\t\t\t\tstrokeColor: 'rgb(187, 0, 37)',\n\t\t\t\t\t\t\tstrokeWidth: 5\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.geoObjects.add(myGeoObject2[poly]);\n\t\t\t\t\t}\n\n        } )\n\n        // Создаем многоугольник, используя класс GeoObject.\n        var myGeoObject1 = new ymaps.GeoObject({\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [  ],\n            fillRule: \"nonZero\"\n          }\t\t\t\t\n        }, {\n          // Описываем опции геообъекта.\n          // Цвет заливки.\n          fillColor: '#00FF00',\n          // Цвет обводки.\n          strokeColor: '#0000FF',\n          // Общая прозрачность (как для заливки, так и для обводки).\n          opacity: 0.5,\n          // Ширина обводки.\n          strokeWidth: 5,\n          // Стиль обводки.\n          strokeStyle: 'shortdash'\n        });\n\n        this.map.geoObjects.add(myGeoObject1);\n\n        myGeoObject1.editor.startDrawing();\n      });\n    }else{\n      \n      \n\n      this.map.geoObjects.removeAll()\n      this.heatmap.destroy();\n      \n\n      this.map.setCenter([home[0].home.latitude, home[0].home.longitude]);\n\n      var gradients = [\n        {\n          0.1: 'rgba(128, 255, 0, 0.7)',\n          0.2: 'rgba(255, 255, 0, 0.8)',\n          0.7: 'rgba(234, 72, 58, 0.9)',\n          1.0: 'rgba(162, 36, 25, 1)'\n        }, {\n          0.1: 'rgba(162, 36, 25, 0.7)',\n          0.2: 'rgba(234, 72, 58, 0.8)',\n          0.7: 'rgba(255, 255, 0, 0.9)',\n          1.0: 'rgba(128, 255, 0, 1)'\n        }\n      ],\n      radiuses = [5, 10, 20, 30],\n      opacities = [0.4, 0.6, 0.8, 1];\n\n     \n      ymaps.modules.require(['Heatmap'], (Heatmap) => {\n        var heatmap = new Heatmap(new_data, {\n          gradient: gradients[0],\n          radius: radiuses[1],\n          opacity: opacities[2]\n        });\n        heatmap.setMap(this.map);\n      });\n      \n\n      home.map( (item, key) => {\n        //дом\n        let myGeoObject = new ymaps.GeoObject({\n          geometry: {\n            type: \"Point\",\n            coordinates: [item.home.latitude, item.home.longitude]\n          },\n        }, {\n          preset: 'islands#blackDotIcon', \n          iconColor: 'black'\n        })\n\n        this.map.geoObjects.add(myGeoObject);\n\n        let points_zone = [];\n\n        item.zone.map( (zon, k) => {\n          points_zone.push( JSON.parse(zon['zone']) );\n        } )\n        \n        let myGeoObject2 = [];\n\n        for(var poly = 0; poly < points_zone.length; poly++){\n          myGeoObject2[poly] = new ymaps.Polygon([points_zone[poly]], {\n            hintContent: \"\"\n          }, {\n            fillColor: 'rgba(187, 0, 37, 0)',\n            strokeColor: 'rgb(187, 0, 37)',\n            strokeWidth: 5\n          });\n          this.map.geoObjects.add(myGeoObject2[poly]);\n        }\n\n      } )\n\n      // Создаем многоугольник, используя класс GeoObject.\n      var myGeoObject1 = new ymaps.GeoObject({\n        geometry: {\n          type: \"Polygon\",\n          coordinates: [  ],\n          fillRule: \"nonZero\"\n        }\t\t\t\t\n      }, {\n        // Описываем опции геообъекта.\n        // Цвет заливки.\n        fillColor: '#00FF00',\n        // Цвет обводки.\n        strokeColor: '#0000FF',\n        // Общая прозрачность (как для заливки, так и для обводки).\n        opacity: 0.5,\n        // Ширина обводки.\n        strokeWidth: 5,\n        // Стиль обводки.\n        strokeStyle: 'shortdash'\n      });\n\n      this.map.geoObjects.add(myGeoObject1);\n\n      myGeoObject1.editor.startDrawing();\n\n      //this.map.geoObjects.add(objectManager);\n    }\n  }\n\n  async getCount(){\n    var new_this_zone = [];\n\t\t\n    this.map.geoObjects.each(function (geoObject) {\n\t\t\tnew_this_zone = new_this_zone.concat( geoObject.geometry.getCoordinates() );\n\t\t});\n\n    let data = {\n      city_id: this.state.city_id,\n      date_start: this.state.date_start,\n      date_end: this.state.date_end,\n      time_start: this.state.time_start,\n      time_end: this.state.time_end,\n      is_new: this.state.is_new,\n      \n      zone: new_this_zone[ new_this_zone.length - 1 ]\n    };\n\n    let res = await this.getData('getCount', data);\n\n    this.setState({\n      statAllCount: res.all_count,\n      statTrueCount: res.true + ' ( ' + res.true_percent + '% ) ',\n    })\n\n    console.log( res )\n  }\n\n  changeDateRange(data, event){\n    this.setState({\n      [data]: formatDate(event)\n    })\n  }\n\n  changeData(type, event){\n\n    let data = '';\n\n    if( type == 'is_new' ){\n      data = event.target.checked == true ? 1 : 0;\n    }else{\n      data = event.target.value;\n    }\n\n    this.setState({\n      [ type ]: data\n    })\n  }\n\n  render(){\n    return (\n      <>\n        <Backdrop open={this.state.is_load} style={{ zIndex: 99 }}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        \n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12}>\n            <h1>{this.state.module_name}</h1>\n          </Grid>\n          \n          <Grid item xs={12} sm={6}>\n            <MySelect data={this.state.cities} value={this.state.city_id} func={ this.changeCity.bind(this) } label='Город' />\n          </Grid>\n          <Grid item xs={12} sm={3}>\n            <MyCheckBox value={ this.state.is_new == 1 ? true : false } func={ this.changeData.bind(this, 'is_new') } label='Только новые клиенты' />\n          </Grid>\n          <Grid item xs={12} sm={3}>\n            <Button variant=\"contained\" onClick={this.updateData.bind(this)}>Обновить данные</Button>\n          </Grid>\n\n          <Grid item xs={12} sm={3}>\n            <MyDatePickerNew label=\"Дата от\" value={ this.state.date_start } func={ this.changeDateRange.bind(this, 'date_start') } />\n          </Grid>\n          <Grid item xs={12} sm={3}>\n            <MyTimePicker label=\"Время от\" value={this.state.time_start} func={ this.changeData.bind(this, 'time_start') } />\n          </Grid>\n          <Grid item xs={12} sm={3}>\n            <MyDatePickerNew label=\"Дата до\" value={ this.state.date_end } func={ this.changeDateRange.bind(this, 'date_end') } />\n          </Grid>\n          <Grid item xs={12} sm={3}>\n            <MyTimePicker label=\"Время до\" value={this.state.time_end} func={ this.changeData.bind(this, 'time_end') } />\n          </Grid>\n\n\n          <Grid item xs={12} sm={6}>\n            <Button variant=\"contained\" onClick={this.getCount.bind(this)}>Подсчитать количество</Button>\n          </Grid>\n          \n\n          <Grid item xs={12}>\n            <Grid container spacing={3}>\n              <Grid item xs={6}>\n                <Typography>Заказов в зоне: {this.state.statTrueCount}</Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <Typography>Всего заказов в городе: {this.state.statAllCount}</Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n\n\n\n          <Grid item xs={12} sm={12}>\n            <div id=\"map\" name=\"map\" style={{ width: '100%', height: 700, paddingTop: 10 }} />\n          </Grid>\n        </Grid>\n      </>\n    )\n  }\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1658329533016\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","length","join","HotMap","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","cities","city_id","date_start","date_end","time_start","time_end","statAllCount","statTrueCount","is_new","this","getData","id","module_info","name","document","title","event","target","value","getOrders","points","all_points","home","new_data","map","item","push","parseFloat","geoObjects","removeAll","heatmap","destroy","setCenter","latitude","longitude","gradients","radiuses","opacities","ymaps","modules","Heatmap","gradient","radius","opacity","setMap","key","myGeoObject","GeoObject","geometry","coordinates","preset","iconColor","add","points_zone","zone","zon","k","parse","myGeoObject2","poly","Polygon","hintContent","fillColor","strokeColor","strokeWidth","myGeoObject1","fillRule","strokeStyle","editor","startDrawing","ready","Map","center","zoom","searchControlProvider","new_this_zone","each","geoObject","concat","getCoordinates","all_count","true_percent","checked","Backdrop","open","style","zIndex","CircularProgress","color","Grid","container","spacing","xs","sm","func","changeCity","bind","label","changeData","Button","variant","onClick","updateData","changeDateRange","getCount","Typography","width","height","paddingTop","React","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}