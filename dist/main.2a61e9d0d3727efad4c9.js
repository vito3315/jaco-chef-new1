(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var a=n(7227).Home,r=n(8433).Auth,s=n(9546).Reg,i=n(9347).LiveOrders,l=n(5650).Events,o=n(7307).RasByBill,c=n(3670).CategoryItems,u=n(432).VendorModule,m=n(8669).VendorItemPrice,d=n(3066).Tender,h=n(5012),p=h.Revizion,f=h.RevizionNew;e.exports=[{path:"/",exact:!0,component:a,title:"Главная",code:200},{path:"/auth",exact:!0,component:r,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:s,title:"Регистрация",code:200},{path:"/live_orders",exact:!0,component:i,title:"Оформленные заказы",code:200},{path:"/events",exact:!0,component:l,title:"События",code:200},{path:"/ras_by_bill",exact:!0,component:o,title:"Расход по накладным",code:200},{path:"/category_items",exact:!0,component:c,title:"Категории товаров",code:200},{path:"/vendor_module",exact:!0,component:u,title:"Поставщики",code:200},{path:"/vendor_item_price",exact:!0,component:m,title:"Цены на товары поставщика",code:200},{path:"/tender",exact:!0,component:d,title:"Цены на товары поставщика",code:200},{path:"/revizion",exact:!0,component:p,title:"Ревизия",code:200},{path:"/revizion/new",exact:!0,component:f,title:"Новая ревизия",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>T});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(7109),v=n(5116),Z=n(5725),E=n(2642),g=n(225),y=n(4345),_=n(4666),b=n(8979),x=n(7750),w=n(6408),k=n(8538),C=n(821),S=n(9062);var P=n(7563),D=(0,y.Z)({palette:{primary:{main:"#c03"}}}),I=(0,g.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:D.spacing(1)},submit:{margin:D.spacing(3,0,2)},textLink:{color:"#c03"}}),R=function(e){(0,l.Z)(D,e);var t,n,m,p,g,y=(p=D,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(g){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function D(e){var t;return(0,r.Z)(this,D),t=y.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:P.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;t.state.history.push("/auth")}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,s.Z)(D,[{key:"componentDidMount",value:(m=(0,a.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"updateData",value:(n=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auth",value:(t=(0,a.Z)(d().mark((function e(){var t,n,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:n=e.sent,console.log(n),!1===n.st?setTimeout((function(){a.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):(localStorage.setItem("token",n.token),setTimeout((function(){window.location.pathname="/"}),300));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(C.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(S.Z,{color:"inherit"})),h.createElement(_.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(k.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(x.Z,null,h.createElement(w.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(b.Z,null,h.createElement(E.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(Z.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(Z.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement("form",{className:this.state.classes.form,noValidate:!0},h.createElement(v.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),h.createElement(v.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),h.createElement(E.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),h.createElement(Z.ZP,{container:!0},h.createElement(Z.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),D}(h.Component);function T(){var e=I(),t=(0,p.k6)();return h.createElement(R,{classes:e,history:t})}},3670:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CategoryItems:()=>B});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(225),v=n(4345),Z=n(5725),E=n(2642),g=n(326),y=n(9941),_=n(7425),b=n(5092),x=n(3508),w=n(5116),k=n(4666),C=n(8979),S=n(7750),P=n(8538),D=n(821),I=n(9062),R=n(6406),T=n(2658);var N=n(7563),V=(0,v.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),M=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:V.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),O=function(e){(0,l.Z)(M,e);var t,n,m,p,f,v,V=(f=M,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(v){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function M(e){var t;return(0,r.Z)(this,M),t=V.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:N.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"category_items",module_name:"",is_load:!1,modalDialog:!1,modalDialog2:!1,modalDialog3:!1,newMainCatMy:0,editMainCatMy:0,newMainNameMy:"",editMainNameMy:"",editCat:null,allCats:[],allItems:[],thisValItems:[],thisDataItems:[],thisCatId:0},t}return(0,s.Z)(M,[{key:"componentDidMount",value:(p=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,allCats:t.cats,allItems:t.items}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"createCat",value:function(){this.setState({modalDialog:!0,newMainCatMy:0,newMainNameMy:""})}},{key:"changeCatMain",value:function(e){var t=e.target.value;this.setState({newMainCatMy:t})}},{key:"changeCatMainEdit",value:function(e){var t=e.target.value;this.setState({editMainCatMy:t})}},{key:"changeNameMain",value:function(e){var t=e.target.value;this.setState({newMainNameMy:t})}},{key:"changeNameMainEdit",value:function(e){var t=e.target.value;this.setState({editMainNameMy:t})}},{key:"saveCat",value:(m=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.newMainNameMy,cat_id:this.state.newMainCatMy},e.next=3,this.getData("save_cat",t);case 3:if(!1!==(n=e.sent).st){e.next=7;break}return alert(n.text),e.abrupt("return");case 7:this.setState({allCats:n.cats,modalDialog:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"addItems",value:function(e){var t=this.state.allItems.filter((function(t){return parseInt(t.cat_id)==parseInt(e)})),n=this.state.allItems.filter((function(e){return 0==parseInt(e.cat_id)}));this.setState({modalDialog2:!0,thisValItems:t,thisDataItems:n,thisCatId:e})}},{key:"saveItems",value:(n=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={cat_id:this.state.thisCatId,items:this.state.thisValItems},e.next=3,this.getData("save_items_cat",t);case 3:n=e.sent,this.setState({allCats:n.cats,allItems:n.items,modalDialog2:!1,thisValItems:[],thisDataItems:[],thisCatId:0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"editCat",value:function(e){this.setState({modalDialog3:!0,editMainCatMy:e.parent_id,editMainNameMy:e.name,editCat:e})}},{key:"saveEditCat",value:(t=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:this.state.editMainNameMy,cat_id:this.state.editMainCatMy,id:this.state.editCat.id},e.next=3,this.getData("edit_cat",t);case 3:if(!1!==(n=e.sent).st){e.next=7;break}return alert(n.text),e.abrupt("return");case 7:this.setState({allCats:n.cats,modalDialog:!1});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(D.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(I.Z,{color:"inherit"})),h.createElement(k.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,{id:"alert-dialog-title"},"Новая категория"),h.createElement(S.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(R.$S,{classes:this.state.classes,label:"Главная категория",data:this.state.allCats.filter((function(e){return-1==parseInt(e.parent_id)||!e.parent_id})),value:this.state.newMainCatMy,func:this.changeCatMain.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(w.Z,{label:"Название категории",size:"small",variant:"outlined",style:{width:"100%"},color:"primary",value:this.state.newMainNameMy,onChange:this.changeNameMain.bind(this)})))),h.createElement(C.Z,null,h.createElement(E.Z,{onClick:this.saveCat.bind(this),color:"primary"},"Сохранить"))),h.createElement(k.Z,{open:this.state.modalDialog2,onClose:function(){e.setState({modalDialog2:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,null,"Позиции категории"),h.createElement(S.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(R.e_,{label:"Выбранные позиции",func:function(t,n){e.setState({thisValItems:n})},data:this.state.thisDataItems,value:this.state.thisValItems})))),h.createElement(C.Z,null,h.createElement(E.Z,{onClick:this.saveItems.bind(this),color:"primary"},"Сохранить"))),h.createElement(k.Z,{open:this.state.modalDialog3,onClose:function(){e.setState({modalDialog3:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,{id:"alert-dialog-title"},"Редактирование категории"),h.createElement(S.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(R.$S,{classes:this.state.classes,label:"Главная категория",data:this.state.allCats.filter((function(e){return-1==parseInt(e.parent_id)||!e.parent_id})),value:this.state.editMainCatMy,func:this.changeCatMainEdit.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(w.Z,{label:"Название категории",size:"small",variant:"outlined",style:{width:"100%"},color:"primary",value:this.state.editMainNameMy,onChange:this.changeNameMainEdit.bind(this)})))),h.createElement(C.Z,null,h.createElement(E.Z,{onClick:this.saveEditCat.bind(this),color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(E.Z,{onClick:this.createCat.bind(this)},"Создать категорию")),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},this.state.allCats.map((function(t,n){return-1!=parseInt(t.parent_id)?null:h.createElement(y.Z,{key:n},h.createElement(_.Z,{expandIcon:h.createElement(x.Z,null),"aria-controls":"panel1a-content"},h.createElement(g.Z,{style:{marginRight:10},onClick:e.editCat.bind(e,t)}),h.createElement(T.Z,null,t.name)),h.createElement(b.Z,null,e.state.allCats.map((function(a,r){return parseInt(t.id)!=parseInt(a.parent_id)?null:h.createElement(y.Z,{key:n+"_"+r},h.createElement(_.Z,{expandIcon:h.createElement(x.Z,null),"aria-controls":"panel1a-content"},h.createElement(g.Z,{style:{marginRight:10},onClick:e.editCat.bind(e,a)}),h.createElement(T.Z,null,a.name)),h.createElement(b.Z,null,e.state.allItems.filter((function(e){return parseInt(e.cat_id)==parseInt(a.id)})).map((function(e,t){return h.createElement(y.Z,{key:n+"_"+r+"_"+t},h.createElement(_.Z,{expandIcon:h.createElement(x.Z,null),"aria-controls":"panel1a-content"},h.createElement(T.Z,null,e.name)))})),h.createElement(E.Z,{onClick:e.addItems.bind(e,parseInt(a.id))},"Добавить")))}))))})))))}}]),M}(h.Component);function B(){var e=M(),t=(0,p.k6)();return h.createElement(O,{classes:e,history:t})}},5650:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Events:()=>G});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(225),v=n(4345),Z=n(5725),E=n(2642),g=n(9573),y=n(8732),_=n(6926),b=n(7896),x=n(6011),w=n(3694),k=n(6501),C=n(9941),S=n(7425),P=n(5092),D=n(3508),I=n(594),R=n(2440),T=n(799),N=n(9334),V=n(4666),M=n(8979),O=n(7750),B=n(6408),A=n(8538),j=n(821),F=n(9062),z=n(6406),L=n(2658);var W=n(7563),H=(0,v.Z)({palette:{primary:{main:"#c03"}}}),$=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:H.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),q=function(e){(0,l.Z)(q,e);var t,n,m,p,f,v,H,$=(v=q,H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(v);if(H){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function q(e){var t;return(0,r.Z)(this,q),t=$.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:W.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"events",module_name:"",is_load:!1,points:[],point:"0",mounth:"0",mounths:[],years:[],year:"0",calendar:[],modalDialog:!1,chooseDayHoly:"",events:[],chooseEvent:0,eventPoint1:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",expanded:"",dayEvents:[],events_hist:[]},t}return(0,s.Z)(q,[{key:"componentDidMount",value:(f=(0,a.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,console.log(t),this.setState({points:t.points,point:t.points[0].id,module_name:t.module_info.name,mounths:t.mounth,mounth:t.this_m,years:t.years,year:t.this_y}),document.title=t.module_info.name,setTimeout((function(){n.updateData()}),50);case 7:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeMounth",value:function(e){var t=e.target.value;this.setState({mounth:t}),setTimeout((function(){}),50)}},{key:"changeYear",value:function(e){var t=e.target.value;this.setState({year:t})}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(p=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={m:this.state.mounth,y:this.state.year,point_id:this.state.point},e.next=3,this.getData("get_calendar",t);case 3:n=e.sent,console.log(n),this.setState({calendar:n.year});case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"chooseDay",value:(m=(0,a.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.full_day){e.next=8;break}return this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1,events_hist:[]}),n={date:t.full_day,point_id:this.state.point},e.next=5,this.getData("get_calendar_day",n);case 5:a=e.sent,console.log("res",a),this.setState({chooseDay:t,chooseDayHoly:a.holy,events:a.events,events_hist:a.hist,dayEvents:a.this_events,modalDialog:!0});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"changeEvent",value:function(e){var t=e.target.value;this.setState({chooseEvent:t})}},{key:"changePoint1",value:function(e){var t=e.target.value;this.setState({eventPoint1:t})}},{key:"changeEveryYear1",value:function(e){var t=e.target.checked;this.setState({everyYear1:t})}},{key:"changeTimeStart2",value:function(e){var t=e.target.value;this.setState({timeStart2:t})}},{key:"changeTimeEnd2",value:function(e){var t=e.target.value;this.setState({timeEnd2:t})}},{key:"save",value:(n=(0,a.Z)(d().mark((function e(){var t,n,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={date:this.state.chooseDay.full_day,point_id:this.state.eventPoint1,event:this.state.chooseEvent,every_year:!0===this.state.everyYear1?1:0,time_start:this.state.timeStart2,time_end:this.state.timeEnd2},e.next=3,this.getData("save_event",t);case 3:n=e.sent,console.log(n),!1===n.st?alert(n.text):(this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1}),setTimeout((function(){a.updateData()}),300));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleChange",value:function(e){this.setState({expanded:e})}},{key:"delEvent",value:(t=(0,a.Z)(d().mark((function e(t){var n,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("delEvent",t),!confirm('Удалить событие "'+t.title+" "+t.date+'" ?')){e.next=10;break}return n={del_id:t.id},e.next=5,this.getData("del_event",n);case 5:e.sent,this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1}),setTimeout((function(){a.updateData()}),300),e.next=10;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(j.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(F.Z,{color:"inherit"})),h.createElement(V.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(A.Z,{id:"alert-dialog-title"},this.state.chooseDay?this.state.chooseDay.full_day:""),h.createElement(O.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(B.Z,{id:"alert-dialog-description"},h.createElement(Z.ZP,{container:!0,spacing:3},0==this.state.chooseDayHoly.length?null:h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(L.Z,{component:"span"},this.state.chooseDayHoly)),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(z.$S,{classes:this.state.classes,data:this.state.events,value:this.state.chooseEvent,func:this.changeEvent.bind(this),label:"Событие"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(z.$S,{classes:this.state.classes,data:this.state.points,value:this.state.eventPoint1,func:this.changePoint1.bind(this),label:"Точка"})),2!==parseInt(this.state.chooseEvent)?null:h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:6,sm:6},h.createElement(z.w0,{classes:this.state.classes,value:this.state.timeStart2,func:this.changeTimeStart2.bind(this),label:"Время начала работы"})),h.createElement(Z.ZP,{item:!0,xs:6,sm:6},h.createElement(z.w0,{classes:this.state.classes,value:this.state.timeEnd2,func:this.changeTimeEnd2.bind(this),label:"Время окончания работы"}))),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(z.IA,{classes:this.state.classes,value:this.state.everyYear1,func:this.changeEveryYear1.bind(this),label:"Каждый год"}))),h.createElement(R.Z,{component:"nav"},this.state.dayEvents.map((function(t,n){return h.createElement(T.ZP,{key:n},h.createElement(N.Z,{primary:t.title}),4==parseInt(t.type)?null:h.createElement(I.Z,{color:"primary",onClick:e.delEvent.bind(e,t),style:{cursor:"pointer"}}))}))),h.createElement(C.Z,null,h.createElement(S.Z,{expandIcon:h.createElement(D.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},h.createElement(L.Z,null,"История")),h.createElement(P.Z,null,h.createElement(R.Z,{component:"nav"},this.state.events_hist.map((function(e,t){return h.createElement(T.ZP,{key:t},h.createElement(N.Z,{primary:e.title}))}))))))),h.createElement(M.Z,null,h.createElement(E.Z,{onClick:this.save.bind(this),color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(z.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(z.$S,{classes:this.state.classes,data:this.state.mounths,value:this.state.mounth,func:this.changeMounth.bind(this),label:"Месяц"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(z.$S,{classes:this.state.classes,data:this.state.years,value:this.state.year,func:this.changeYear.bind(this),label:"Год"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),h.createElement(Z.ZP,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20}},this.state.calendar.map((function(t,n){return h.createElement(Z.ZP,{item:!0,xs:12,sm:4,key:n,style:{padding:20}},h.createElement("h1",{style:{textAlign:"center"}},t[0][0].mounth),h.createElement(b.Z,{component:k.Z},h.createElement(g.Z,{"aria-label":"a dense table",style:{overflow:"hidden"}},h.createElement(x.Z,null,h.createElement(w.Z,null,h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Пн"),h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Вт"),h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Ср"),h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Чт"),h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Пт"),h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Сб"),h.createElement(_.Z,{className:e.state.classes.tableCelHead},"Вс"))),h.createElement(y.Z,null,t.map((function(t,n){return h.createElement(w.Z,{key:n},t.map((function(t,n){return h.createElement(_.Z,{key:n,onClick:e.chooseDay.bind(e,t),style:{color:t.dir?"yellow":t.holy?"#c03":"#000"},className:t.event?e.state.classes.customCel:e.state.classes.tableCel}," ",t.day," ")})))}))))))})))))}}]),q}(h.Component);function G(){var e=$(),t=(0,p.k6)();return h.createElement(q,{classes:e,history:t})}},7227:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Home:()=>x});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(225),f=n(4345),v=n(5725),Z=n(821),E=n(9062);var g=n(7563),y=(0,f.Z)({palette:{primary:{main:"#c03"}}}),_=(0,p.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:y.spacing(2)},backdrop:{zIndex:y.zIndex.drawer+1,color:"#fff"}}),b=function(e){(0,l.Z)(f,e);var t,n,m,p=(n=f,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(m){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function f(e){var t;return(0,r.Z)(this,f),t=p.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"home",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,s.Z)(f,[{key:"componentDidMount",value:(t=(0,a.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(Z.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(E.Z,{color:"inherit"})),h.createElement(v.ZP,{container:!0,spacing:3},h.createElement(v.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(v.ZP,{item:!0,xs:12,sm:12,style:{height:"100vh"}})))}}]),f}(h.Component);function x(){var e=_();return h.createElement(b,{classes:e})}},9347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LiveOrders:()=>D});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(5725),v=n(2642),Z=n(9573),E=n(8732),g=n(6926),y=n(7896),_=n(6011),b=n(3694),x=n(6501),w=n(821),k=n(9062),C=n(6406);var S=n(7563),P=function(e){(0,l.Z)(D,e);var t,n,m,p,P=(m=D,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(p){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function D(e){var t;return(0,r.Z)(this,D),t=P.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:S.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"live_orders",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,s.Z)(D,[{key:"componentDidMount",value:(n=(0,a.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){n.updateData()}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(t=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return h.createElement(h.Fragment,null,h.createElement(w.Z,{open:this.state.is_load},h.createElement(k.Z,{color:"inherit"})),h.createElement(f.ZP,{container:!0,spacing:3},h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),this.state.points.length>0?h.createElement(h.Fragment,null,h.createElement(f.ZP,{item:!0,xs:6,sm:6},h.createElement(C.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(f.ZP,{item:!0,xs:6,sm:6},h.createElement(v.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement(C.IA,{value:this.state.showReady,func:this.changeCheckOrders.bind(this),label:"Показывать готовые"}))):null,h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement(y.Z,{component:x.Z},h.createElement(Z.Z,{"aria-label":"a dense table"},h.createElement(_.Z,null,h.createElement(b.Z,null,h.createElement(g.Z,null,"#"),h.createElement(g.Z,null,"Тип"),h.createElement(g.Z,null,"Время заказа"),h.createElement(g.Z,null,"Время предзакза"),h.createElement(g.Z,null,"Время выхода на стол"),h.createElement(g.Z,null,"Во сколько собрали"),h.createElement(g.Z,null,"Закрыли"),h.createElement(g.Z,null,"Приготовили"),h.createElement(g.Z,null,"Отдали"),h.createElement(g.Z,null,"Обещали"),h.createElement(g.Z,null,"Статус"),h.createElement(g.Z,null,"Стол"))),h.createElement(E.Z,null,this.state.read.map((function(e,t){return h.createElement(b.Z,{key:t},h.createElement(g.Z,null,e.id),h.createElement(g.Z,null,e.type_order),h.createElement(g.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),h.createElement(g.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),h.createElement(g.Z,null,e.unix_start_stol_or),h.createElement(g.Z,null,e.give_data_time_),h.createElement(g.Z,null,e.close_date_time_order),h.createElement(g.Z,{style:{backgroundColor:1==parseInt(e.type_)?"":e.color}},e.time_),h.createElement(g.Z,{style:{backgroundColor:1!=parseInt(e.type_)?"":e.color}},e.test_time),h.createElement(g.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),h.createElement(g.Z,null,e.status),h.createElement(g.Z,null,e.stol_sborki))})),this.state.onstol.map((function(e,t){return h.createElement(b.Z,{key:t,style:{backgroundColor:"yellow"}},h.createElement(g.Z,null,e.id),h.createElement(g.Z,null,e.type_order),h.createElement(g.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),h.createElement(g.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),h.createElement(g.Z,null,e.unix_start_stol_or),h.createElement(g.Z,null),h.createElement(g.Z,null),h.createElement(g.Z,null),h.createElement(g.Z,null),h.createElement(g.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),h.createElement(g.Z,null,e.status),h.createElement(g.Z,null,e.stol_sborki))}))))),h.createElement(y.Z,{component:x.Z},h.createElement(Z.Z,{"aria-label":"a dense table"},h.createElement(_.Z,null,h.createElement(b.Z,null,h.createElement(g.Z,null,"#"),h.createElement(g.Z,null,"Пред"),h.createElement(g.Z,null,"Время оформления"),h.createElement(g.Z,null,"Время выхода на стол"),h.createElement(g.Z,null,"Время закрытия"),h.createElement(g.Z,null,"Обещали"))),h.createElement(E.Z,null,this.state.ordersQueue.map((function(e,t){return h.createElement(b.Z,{key:t},h.createElement(g.Z,null,e.id),h.createElement(g.Z,null,1==parseInt(e.is_preorder)?e.date_time_preorder:""),h.createElement(g.Z,null,0==parseInt(e.is_preorder)?e.date_time_order:""),h.createElement(g.Z,null,e.time_start_order),h.createElement(g.Z,null,e.time_end_order),h.createElement(g.Z,null,0==parseInt(e.is_preorder)?e.unix_time_to_client:""))}))))))))}}]),D}(h.Component);function D(){var e=(0,p.k6)();return h.createElement(P,{history:e})}},7307:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RasByBill:()=>H});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(225),v=n(4345),Z=n(5725),E=n(2642),g=n(9573),y=n(8732),_=n(6926),b=n(7896),x=n(6011),w=n(3694),k=n(6501),C=n(9941),S=n(7425),P=n(5092),D=n(3508),I=n(4666),R=n(8979),T=n(7750),N=n(6408),V=n(8538),M=n(821),O=n(9062),B=n(6406),A=n(2658);var j=n(7563),F=(0,v.Z)({palette:{primary:{main:"#c03"}}}),z=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:F.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}});function L(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}var W=function(e){(0,l.Z)(F,e);var t,n,m,p,f,v=(p=F,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(f){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function F(e){var t;return(0,r.Z)(this,F),t=v.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"ras_by_bill",module_name:"",is_load:!1,modalDialog:!1,points:[],point:[],date_start:L(new Date),date_end:L(new Date),rangeDate:[L(new Date),L(new Date)],items:[],cats:[],items_cat:[],item_cat:0,myItems:[],calendar:[]},t}return(0,s.Z)(F,[{key:"componentDidMount",value:(m=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,points:t.points,items:t.items,cats:t.cats,items_cat:t.items_cat}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=e.target.value;this.setState({point:t})}},{key:"changeItems",value:function(e,t){this.setState({myItems:t})}},{key:"getItems",value:(n=(0,a.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={points:this.state.point,items:this.state.myItems,item_cat:this.state.item_cat,start_date:this.state.rangeDate[0],end_date:this.state.rangeDate[1]},e.next=3,this.getData("get_this_rev",t);case 3:n=e.sent,a=0,n.items_ras.map((function(e,t){a+=parseFloat(e.sum)})),this.setState({resItems:{items_ras:n.items_ras,pf_ras:n.pf_ras,rec_ras:n.rec_ras,full_sum:a.toFixed(2)},catItems:null});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getCats",value:(t=(0,a.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={points:this.state.point,items:this.state.myItems,start_date:this.state.rangeDate[0],end_date:this.state.rangeDate[1]},e.next=3,this.getData("get_this_rev_cat",t);case 3:n=e.sent,a=0,n.rec_ras.map((function(e,t){a+=parseFloat(e.this_price)})),this.setState({catItems:{count_pos:n.count_pos,items_ras:n.items_ras,rec_ras:n.rec_ras,full_sum:a.toFixed(2)},resItems:null});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeDateRange",value:function(e){var t=e[0]?L(e[0]):"",n=e[1]?L(e[1]):"";this.setState({rangeDate:[t,n]})}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(M.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(O.Z,{color:"inherit"})),h.createElement(I.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(V.Z,{id:"alert-dialog-title"},"  "),h.createElement(T.Z,null,h.createElement(N.Z,{id:"alert-dialog-description"})),h.createElement(R.Z,null,h.createElement(E.Z,{onClick:function(){},color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(B.$S,{classes:this.state.classes,data:this.state.points,multiple:!0,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4,className:"MyDaterange"},h.createElement(B.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),h.createElement(Z.ZP,{item:!0,xs:12,sm:5},h.createElement(B.$S,{classes:this.state.classes,data:this.state.items_cat,multiple:!1,value:this.state.item_cat,func:function(t){e.setState({item_cat:t.target.value})},label:"Категория товара"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(B.e_,{classes:this.state.classes,data:this.state.items,multiple:!0,value:this.state.myItems,func:this.changeItems.bind(this),label:"Заготовки"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{variant:"contained",onClick:this.getItems.bind(this)},"Показать заготовки")),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{variant:"contained",onClick:this.getCats.bind(this)},"Показать категории")),this.state.resItems&&this.state.resItems.items_ras?h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h1",null,"Куплено по наклданым"),h.createElement(b.Z,{component:k.Z},h.createElement(g.Z,{"aria-label":"a dense table"},h.createElement(x.Z,null,h.createElement(w.Z,null,h.createElement(_.Z,null,"Наименование товара"),h.createElement(_.Z,null,"Объем товра"),h.createElement(_.Z,null,"Объем заготовки"),h.createElement(_.Z,null,"Сумма"),h.createElement(_.Z,null,"Кол-во наклданых"))),h.createElement(y.Z,null,this.state.resItems.items_ras.map((function(e,t){return h.createElement(w.Z,{key:t},h.createElement(_.Z,null," ",e.name," "),h.createElement(_.Z,null," ",e.count_item+" "+e.ei_name," "),h.createElement(_.Z,null," ",e.count_pf+" "+e.ei_name_pf," "),h.createElement(_.Z,null," ",e.sum," "),h.createElement(_.Z,null," ",e.count_bill," "))})),h.createElement(w.Z,null,h.createElement(_.Z,null," Всего: "),h.createElement(_.Z,null," "),h.createElement(_.Z,null," "),h.createElement(_.Z,null," ",this.state.resItems.full_sum," "),h.createElement(_.Z,null," ")))))),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h1",null,"Расход заготовок (включая рецепты)"),h.createElement(b.Z,{component:k.Z},h.createElement(g.Z,{"aria-label":"a dense table"},h.createElement(x.Z,null,h.createElement(w.Z,null,h.createElement(_.Z,null,"Наименование заготовки"),h.createElement(_.Z,null,"Объем заготовок"),h.createElement(_.Z,null,"Кол-во роллов"),h.createElement(_.Z,null,"Сумма роллов (примерно)"))),h.createElement(y.Z,null,this.state.resItems.pf_ras.map((function(e,t){return h.createElement(w.Z,{key:t},h.createElement(_.Z,null," ",e.pf_name," "),h.createElement(_.Z,null," ",e.count_pf+" "+e.ei_name," "),h.createElement(_.Z,null," ",e.count_rolls," "),h.createElement(_.Z,null," ",e.price_rolls," "))})))))),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement("h1",null,"Расход рецептов"),h.createElement(b.Z,{component:k.Z},h.createElement(g.Z,{"aria-label":"a dense table"},h.createElement(x.Z,null,h.createElement(w.Z,null,h.createElement(_.Z,null,"Наименование заготовки"),h.createElement(_.Z,null,"Объем заготовок"),h.createElement(_.Z,null,"Кол-во роллов"))),h.createElement(y.Z,null,this.state.resItems.rec_ras.map((function(e,t){return h.createElement(w.Z,{key:t},h.createElement(_.Z,null," ",e.pf_name," "),h.createElement(_.Z,null," ",e.count_pf+" "+e.ei_name," "),h.createElement(_.Z,null," ",e.count_rolls," "))}))))))):null,this.state.catItems&&this.state.catItems.rec_ras?h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(C.Z,{disabled:!0},h.createElement(S.Z,null,h.createElement(A.Z,{style:{width:"50%"}},"Роллов: ",this.state.catItems.count_pos.count_rolls),h.createElement(A.Z,{style:{width:"50%"}},"Пиццы: ",this.state.catItems.count_pos.count_pizza))),this.state.catItems.rec_ras.map((function(e,t){return h.createElement(C.Z,{key:t},h.createElement(S.Z,{expandIcon:h.createElement(D.Z,null),"aria-controls":"panel1bh-content"},h.createElement(A.Z,{style:{width:"60%"}},e.name),h.createElement(A.Z,{style:{width:"20%"}},e.this_price),h.createElement(A.Z,{style:{width:"20%"}},e.price_by_items)),h.createElement(P.Z,null,e.parent_cat.map((function(e,t){return h.createElement(C.Z,{key:t},h.createElement(S.Z,{expandIcon:h.createElement(D.Z,null),"aria-controls":"panel1bh-content"},h.createElement(A.Z,{style:{width:"60%",paddingLeft:20}},e.name),h.createElement(A.Z,{style:{width:"20%",paddingLeft:20}},e.this_price),h.createElement(A.Z,{style:{width:"20%",paddingLeft:20}},e.price_by_items)),h.createElement(P.Z,null,h.createElement(C.Z,{disabled:!0},h.createElement(S.Z,null,h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},"Товар"),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},"Товара"),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},"Заготовок"),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},"Накладных"),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},"Сумма"))),e.items.map((function(e,t){return h.createElement(C.Z,{key:t,disabled:!0},h.createElement(S.Z,null,h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},e.name),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},e.count_item," ",e.ei_name),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},e.count_pf," ",e.ei_name),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},e.count_bill),h.createElement(A.Z,{style:{width:"20%",paddingLeft:40}},e.sum)))}))))}))))})),h.createElement(C.Z,{disabled:!0},h.createElement(S.Z,null,h.createElement(A.Z,{style:{width:"60%",marginRight:-15}},"Всего:"),h.createElement(A.Z,{style:{width:"40%"}},this.state.catItems.full_sum)))):null))}}]),F}(h.Component);function H(){var e=z(),t=(0,p.k6)();return h.createElement(W,{classes:e,history:t})}},9546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Reg:()=>M});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(7109),v=n(5116),Z=n(5725),E=n(2642),g=n(225),y=n(4345),_=n(4436),b=n(5272),x=n(5162),w=n(4666),k=n(8979),C=n(7750),S=n(6408),P=n(8538),D=n(821),I=n(9062);var R=n(7563),T=(0,y.Z)({palette:{primary:{main:"#c03"}}}),N=(0,g.Z)({paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:T.spacing(1)},submit:{margin:T.spacing(3,0,2)},backButton:{marginRight:T.spacing(1)},instructions:{marginTop:T.spacing(1),marginBottom:T.spacing(1)},textLink:{color:"#c03"}}),V=function(e){(0,l.Z)(T,e);var t,n,m,p,g,y=(p=T,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(g){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function T(e){var t;return(0,r.Z)(this,T),t=y.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;t.state.history.push("/auth")}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение","Новый пароль"],phone:"",code:"",pwd:""},t}return(0,s.Z)(T,[{key:"componentDidMount",value:(m=(0,a.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"updateData",value:(n=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nextStep",value:(t=(0,a.Z)(d().mark((function e(){var t,n,a,r,s,i,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value},e.next=4,this.getData("check_phone",t);case 4:!1===(n=e.sent).st?setTimeout((function(){l.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):this.setState({activeStep:this.state.activeStep+1,phone:t.login}),e.next=22;break;case 8:if(1!=this.state.activeStep){e.next=16;break}return a={login:this.state.phone,code:document.getElementById("code").value},e.next=12,this.getData("check_code",a);case 12:!1===(r=e.sent).st?setTimeout((function(){l.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:r.text})}),500):this.setState({activeStep:this.state.activeStep+1,code:a.code}),e.next=22;break;case 16:if(2!=this.state.activeStep){e.next=22;break}return s={login:this.state.phone,code:this.state.code,pwd:document.getElementById("password").value},e.next=20,this.getData("save_new_pwd",s);case 20:!1===(i=e.sent).st?setTimeout((function(){l.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:i.text})}),500):(localStorage.setItem("token",i.token),setTimeout((function(){window.location.pathname="/"}),300));case 22:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(D.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(I.Z,{color:"inherit"})),h.createElement(w.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(P.Z,{id:"alert-dialog-title"},this.state.dialogTitle),h.createElement(C.Z,null,h.createElement(S.Z,{id:"alert-dialog-description"},this.state.dialogText)),h.createElement(k.Z,null,h.createElement(E.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),h.createElement(Z.ZP,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},h.createElement(Z.ZP,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},h.createElement("div",{className:this.state.classes.paper},h.createElement(f.Z,{className:this.state.classes.avatar},h.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),h.createElement(_.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return h.createElement(b.Z,{key:e},h.createElement(x.Z,null,e))}))),h.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?h.createElement(v.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0,onKeyPress:this.enterNextStep.bind(this)}):null,1==this.state.activeStep?h.createElement(v.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0,onKeyPress:this.enterNextStep.bind(this)}):null,2==this.state.activeStep?h.createElement(v.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,h.createElement(E.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),h.createElement(Z.ZP,{container:!0},h.createElement(Z.ZP,{item:!0,xs:!0},h.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),T}(h.Component);function M(){var e=N(),t=(0,p.k6)();return h.createElement(V,{classes:e,history:t})}},5012:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Revizion:()=>se,RevizionNew:()=>ie});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7462),d=n(5987),h=n(7757),p=n.n(h),f=n(7294),v=n(5977),Z=n(3727),E=n(225),g=n(5725),y=n(2642),_=n(9941),b=n(7425),x=n(5092),w=n(2658),k=n(3508),C=n(5697),S=n.n(C),P=n(4656),D=n(2640),I=n(1508),R=n(9573),T=n(8732),N=n(6926),V=n(7896),M=n(6011),O=n(3694),B=n(5116),A=n(594),j=n(821),F=n(9062),z=n(4172),L=n(2004),W=n(7097),H=n(6501),$=n(2440),q=n(799),G=n(9334),J=n(9449),Y=n(6406),K=["children","value","index"];function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.Z)(e);if(t){var r=(0,c.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,o.Z)(this,n)}}var U=n(7563);function X(e){var t=e.children,n=e.value,a=e.index,r=(0,d.Z)(e,K);return f.createElement("div",(0,m.Z)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),n===a&&f.createElement(I.Z,{sx:{p:3}},t))}function ee(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}X.propTypes={children:S().node,index:S().number.isRequired,value:S().number.isRequired};var te=(0,E.Z)((function(e){return{}})),ne=function(e){(0,l.Z)(h,e);var t,n,o,c,d=Q(h);function h(e){var t;return(0,r.Z)(this,h),t=d.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:U.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"revizion",module_name:"",is_load:!1,points:[],point:"0",revList:[],chooseRev:"",items:[],pf:[],chooseTab:0},t}return(0,s.Z)(h,[{key:"componentDidMount",value:(c=(0,a.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:1==t.point_list.length?t.point_list[0].id:"0",module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.getRevList()}),50)}},{key:"changeRev",value:function(e){var t=this,n=e.target.value;this.setState({chooseRev:n}),setTimeout((function(){t.getDataRev()}),300)}},{key:"updateData",value:(o=(0,a.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getRevList",value:(n=(0,a.Z)(p().mark((function e(){var t,n,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point},e.next=3,this.getData("get_rev_list",t);case 3:n=e.sent,this.setState({revList:n,chooseRev:n.length>0?n[0].id:""}),n.length>0&&setTimeout((function(){a.getDataRev()}),300);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getDataRev",value:(t=(0,a.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,rev_id:this.state.chooseRev},e.next=3,this.getData("get_data_rev",t);case 3:n=e.sent,this.setState({items:n.items,pf:n.pf});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(j.Z,{className:this.state.classes.backdrop,open:this.state.is_load},f.createElement(F.Z,{color:"inherit"})),f.createElement(g.ZP,{container:!0,spacing:3},f.createElement(g.ZP,{item:!0,xs:12,sm:12},f.createElement("h1",null,this.state.module_name)),f.createElement(g.ZP,{item:!0,xs:12},f.createElement(Z.OL,{to:"/revizion/new"},"Новая ревизия")),f.createElement(g.ZP,{item:!0,xs:12,sm:6},f.createElement(Y.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),f.createElement(g.ZP,{item:!0,xs:12,sm:6},f.createElement(Y.$S,{data:this.state.revList,value:this.state.chooseRev,func:this.changeRev.bind(this),label:"Ревизия"})),f.createElement(g.ZP,{item:!0,xs:12,sm:6},f.createElement(y.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),f.createElement(g.ZP,{item:!0,xs:12,sm:12,id:"revTable"},f.createElement(P.Z,{value:this.state.chooseTab,onChange:function(t,n){e.setState({chooseTab:n})},textColor:"primary",indicatorColor:"primary",centered:!0},f.createElement(D.Z,(0,m.Z)({label:"Товары"},ee(0))),f.createElement(D.Z,(0,m.Z)({label:"Заготовки"},ee(1)))),f.createElement(X,{value:this.state.chooseTab,index:0},f.createElement(V.Z,{component:H.Z},f.createElement(R.Z,null,f.createElement(M.Z,null,f.createElement(O.Z,null,f.createElement(N.Z,null,"Товар"),f.createElement(N.Z,null,"Объем"))),f.createElement(T.Z,null,this.state.items.map((function(e,t){return f.createElement(O.Z,{key:t},f.createElement(N.Z,null,e.name),f.createElement(N.Z,null,e.value," ",e.ei_name))})))))),f.createElement(X,{value:this.state.chooseTab,index:1},f.createElement(V.Z,{component:H.Z},f.createElement(R.Z,null,f.createElement(M.Z,null,f.createElement(O.Z,null,f.createElement(N.Z,null,"Заготовка"),f.createElement(N.Z,null,"Объем"))),f.createElement(T.Z,null,this.state.pf.map((function(e,t){return f.createElement(O.Z,{key:t},f.createElement(N.Z,null,e.name),f.createElement(N.Z,null,e.value," ",e.ei_name))})))))))))}}]),h}(f.Component),ae=function(e){(0,l.Z)(n,e);var t=Q(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={item:a.props.item,change:a.props.change},a}return(0,s.Z)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.change!==t.change||this.state.change!==e.change}},{key:"render",value:function(){var e=this;return f.createElement(_.Z,null,f.createElement(b.Z,{expandIcon:f.createElement(k.Z,null)},f.createElement(w.Z,{style:{width:"60%"}},this.state.item.name),f.createElement(w.Z,{style:{width:"40%"}},this.state.item.value," ",this.state.item.ei_name)),f.createElement(x.Z,null,this.state.item.counts.map((function(t,n){return f.createElement(g.ZP,{container:!0,spacing:3,key:n,style:{paddingTop:10,paddingBottom:10}},f.createElement(g.ZP,{item:!0,xs:12,sm:6},f.createElement(Y.$S,{data:e.state.item.size,value:t.need_pq,func:e.props.func.bind(e,"item",e.props.itemKey,"need_pq",n),label:"Объем упаковки"})),f.createElement(g.ZP,{item:!0,xs:0==n?12:9,sm:5},f.createElement(B.Z,{value:t.value,onChange:e.props.func.bind(e,"item",e.props.itemKey,"value",n),fullWidth:!0,variant:"outlined",size:"small",label:"Количество"})),0==n?null:f.createElement(g.ZP,{item:!0,xs:3,sm:1},f.createElement(y.Z,{onClick:e.props.clear.bind(e,"item",e.props.itemKey,n),variant:"contained"}," ",f.createElement(A.Z,null)," ")))})),f.createElement(g.ZP,{item:!0,xs:12,sm:6},f.createElement(y.Z,{variant:"contained",onClick:this.props.copy.bind(this,"item",this.props.itemKey)},"Дублировать"))))}}]),n}(f.Component),re=function(e){(0,l.Z)(c,e);var t,n,o=Q(c);function c(e){var t;return(0,r.Z)(this,c),t=o.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:U.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"revizion",module_name:"",is_load:!1,points:[],point:"0",revList:[],chooseRev:"",storages:[],items:[],rec:[],pf:[],chooseTab:0,open:!1},t}return(0,s.Z)(c,[{key:"componentDidMount",value:(n=(0,a.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:1==t.point_list.length?t.point_list[0].id:"0",module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.getDataRev()}),300)}},{key:"getDataRev",value:(t=(0,a.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point},e.next=3,this.getData("get_data_for_new_rev",t);case 3:n=e.sent,this.setState({storages:n.storages,items:n.items,rec:n.rec,pf:n.pf});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"saveData",value:function(e,t,n,a,r){if("item"==e){var s=this.state.items;s[t].counts[a][[n]]=r.target.value;var i=0;s[t].counts.map((function(e,t){i+=parseFloat(e.need_pq)*parseFloat(e.value)})),s[t].value=i,s[t].change++,this.setState({items:s})}}},{key:"copyData",value:function(e,t){if("item"==e){var n=this.state.items;n[t].counts.push({need_pq:n[t].counts[0].need_pq,value:0}),n[t].change++,this.setState({items:n})}}},{key:"clearData",value:function(e,t,n){if("item"==e){var a=this.state.items,r=[];a[t].counts.map((function(e,t){t!=n&&r.push(e)})),a[t].counts=r;var s=0;a[t].counts.map((function(e,t){s+=parseFloat(e.need_pq)*parseFloat(e.value)})),a[t].value=s,a[t].change++,this.setState({items:a})}}},{key:"render",value:function(){var e=this;return f.createElement(f.Fragment,null,f.createElement(j.Z,{className:this.state.classes.backdrop,open:this.state.is_load},f.createElement(F.Z,{color:"inherit"})),f.createElement(g.ZP,{container:!0,spacing:3},f.createElement(g.ZP,{item:!0,xs:12,sm:12},f.createElement("h1",null,this.state.module_name)),f.createElement(g.ZP,{item:!0,xs:12,sm:6},f.createElement(Y.$S,{data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),f.createElement(g.ZP,{item:!0,xs:12,sm:12,id:"revTable"},f.createElement(P.Z,{value:this.state.chooseTab,onChange:function(t,n){e.setState({chooseTab:n})},textColor:"primary",indicatorColor:"primary",centered:!0},f.createElement(D.Z,(0,m.Z)({label:"Товары"},ee(0))),f.createElement(D.Z,(0,m.Z)({label:"Заготовки"},ee(1)))),f.createElement(X,{value:this.state.chooseTab,index:0},this.state.items.map((function(t,n){return f.createElement(ae,{key:n,itemKey:n,item:t,change:t.change,func:e.saveData.bind(e),copy:e.copyData.bind(e),clear:e.clearData.bind(e)})}))),f.createElement(X,{value:this.state.chooseTab,index:1}))),f.createElement(f.Fragment,null,f.createElement(J.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},f.createElement($.Z,{style:{width:"100%"}},this.state.storages.map((function(e,t){return f.createElement(q.ZP,{button:!0,key:t},f.createElement(G.Z,{primary:e.name}))}))))),0==this.state.storages.length?null:f.createElement(H.Z,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3},f.createElement(z.Z,{showLabels:!0,onChange:function(t,n){e.setState({open:!0})}},f.createElement(L.Z,{label:"Recents",icon:f.createElement(W.Z,null)}))))}}]),c}(f.Component);function se(){var e=te(),t=(0,v.k6)();return f.createElement(ne,{classes:e,history:t})}function ie(){var e=te(),t=(0,v.k6)();return f.createElement(re,{classes:e,history:t})}},3066:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Tender:()=>P});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(5725),v=n(2642),Z=n(4666),E=n(8979),g=n(7750),y=n(8538),_=n(821),b=n(9062),x=n(6406),w=n(4e3);var k=n(7563),C=function(e){return"Цена"==e.colDef.headerName?{borderRight:"1px solid #bababa"}:null},S=function(e){(0,l.Z)(P,e);var t,n,m,p,S=(m=P,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(p){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function P(e){var t;return(0,r.Z)(this,P),t=S.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:k.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e),t.setState({is_load:!1})}))})),t.state={classes:t.props.classes,history:t.props.history,module:"tender",module_name:"",is_load:!1,modalDialog:!1,testTable:[],vendors:[],myVendors:[],showVendors:[],params_api:null,params_columnApi:null},t}return(0,s.Z)(P,[{key:"componentDidMount",value:(n=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,n=[],t.items.map((function(e,a){n.push({section:"big-title",item:e.name}),e.cats.map((function(e,a){n.push({section:"big-title",item:e.name}),e.items.map((function(e,a){var r={};t.vendors.map((function(n,a){var s=t.vendor_price.find((function(t){return parseInt(t.vendor_id)==parseInt(n.id)&&parseInt(t.item_id)==parseInt(e.id)}));s?(r["vend_price_"+n.id]=s.price,r["vend_city_"+n.id]="тлт"):(r["vend_price_"+n.id]="",r["vend_city_"+n.id]="")})),r.item=e.name,r.section="last";var s=t.ras.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}));r.ras=s?s.count_pf:"",n.push(r)}))}))})),this.setState({module_name:t.module_info.name,testTable:n,vendors:t.vendors,showVendors:t.vendors}),document.title=t.module_info.name;case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onCellClicked",value:function(e){console.log(e.data),console.log(e.colDef.field)}},{key:"onGridReady",value:function(e){this.setState({params_api:e.api,params_columnApi:e.columnApi})}},{key:"show",value:(t=(0,a.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendors:this.state.myVendors},e.next=3,this.getData("get_data",t);case 3:n=e.sent,a=[],n.items.map((function(e,t){a.push({section:"big-title",item:e.name}),e.cats.map((function(e,t){a.push({section:"big-title",item:e.name}),e.items.map((function(e,t){var r={};n.vendors.map((function(t,a){var s=n.vendor_price.find((function(n){return parseInt(n.vendor_id)==parseInt(t.id)&&parseInt(n.item_id)==parseInt(e.id)}));s?(r["vend_price_"+t.id]=s.price,r["vend_city_"+t.id]="тлт"):(r["vend_price_"+t.id]="",r["vend_city_"+t.id]="")})),r.item=e.name,r.section="last";var s=n.ras.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}));r.ras=s?s.count_pf:"",a.push(r)}))}))})),this.setState({testTable:a,showVendors:n.vendors});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(_.Z,{open:this.state.is_load},h.createElement(b.Z,{color:"inherit"})),h.createElement(Z.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(y.Z,{id:"alert-dialog-title"},"Новая категория"),h.createElement(g.Z,null),h.createElement(E.Z,null,h.createElement(v.Z,{color:"primary"},"Сохранить"))),h.createElement(f.ZP,{container:!0,spacing:3},h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(f.ZP,{item:!0,xs:12,sm:12},h.createElement(x.e_,{data:this.state.vendors,multiple:!0,value:this.state.myVendors,func:function(t,n){e.setState({myVendors:n})},label:"Поставщики"})),h.createElement(f.ZP,{item:!0,xs:12,sm:3},h.createElement(v.Z,{variant:"contained",onClick:this.show.bind(this)},"Показать")),h.createElement(f.ZP,{item:!0,xs:12},h.createElement("div",{className:"ag-theme-alpine",style:{height:600,width:"100%"}},h.createElement(w.AgGridReact,{onGridReady:this.onGridReady.bind(this),onCellClicked:this.onCellClicked,rowData:this.state.testTable},h.createElement(w.AgGridColumn,{field:"ras",width:120,pinned:"left"}),h.createElement(w.AgGridColumn,{field:"item",width:300,pinned:"left",cellClassRules:{"cell-span":"data.section==='big-title'"}}),h.createElement(w.AgGridColumn,{hide:!0}),this.state.showVendors.map((function(e,t){return h.createElement(w.AgGridColumn,{key:t,headerName:e.name,resizable:!0,width:180},h.createElement(w.AgGridColumn,{field:"vend_city_"+e.id,headerName:"Город",resizable:!0,width:90}),h.createElement(w.AgGridColumn,{field:"vend_price_"+e.id,headerName:"Цена",resizable:!0,width:90,cellStyle:C}))}))))),h.createElement(f.ZP,{item:!0,xs:12,sm:12})))}}]),P}(h.Component);function P(){var e=(0,p.k6)();return h.createElement(S,{history:e})}},8669:(e,t,n)=>{"use strict";n.r(t),n.d(t,{VendorItemPrice:()=>A});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(225),v=n(4345),Z=n(5725),E=n(2642),g=n(9573),y=n(8732),_=n(6926),b=n(7896),x=n(6011),w=n(3694),k=n(6501),C=n(4666),S=n(8979),P=n(7750),D=n(6408),I=n(8538),R=n(821),T=n(9062),N=n(6406);var V=n(7563),M=(0,v.Z)({palette:{primary:{main:"#c03"}}}),O=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:M.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),B=function(e){(0,l.Z)(O,e);var t,n,m,p,f,v,M=(f=O,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(f);if(v){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function O(e){var t;return(0,r.Z)(this,O),t=M.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:V.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){setTimeout((function(){t.setState({is_load:!1})}),300),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"vendor_item_price",module_name:"",is_load:!1,modalDialog:!1,vendors:[],vendor:0,items:[],cities:[],city:-1,allCity:!1,isPrioriti:!1},t}return(0,s.Z)(O,[{key:"componentDidMount",value:(p=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,cities:t.cities}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"changeCity",value:(m=(0,a.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={city:t.target.value},e.next=3,this.getData("get_vendors",n);case 3:a=e.sent,this.setState({vendors:a,city:t.target.value,vendor:0,items:[]});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"changeVendor",value:(n=(0,a.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={city:this.state.city,vendor_id:t.target.value},e.next=3,this.getData("get_vendor_items",n);case 3:a=e.sent,this.setState({items:a,vendor:t.target.value});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"update",value:function(e,t,n){var a=this.state.items;a.map((function(r,s){parseInt(r.item_id)==parseInt(e)&&(a[s][t]=n.target.value,a[s].price=(parseFloat(a[s].full_price)/parseFloat(a[s].rec_pq)).toFixed(2))})),this.setState({items:a})}},{key:"save",value:(t=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=(t={vendor_id:this.state.vendor,items:this.state.items,city_id:this.state.city,all_city:!0===this.state.allCity?1:0,is_prioriti:!0===this.state.isPrioriti?1:0}).all_city){e.next=8;break}if(!confirm("Точно сохранить на все города поставщика ?")){e.next=6;break}return e.next=5,this.getData("save_price",t);case 5:e.sent;case 6:e.next=11;break;case 8:return e.next=10,this.getData("save_price",t);case 10:e.sent;case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(R.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(T.Z,{color:"inherit"})),h.createElement(C.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(I.Z,{id:"alert-dialog-title"}),h.createElement(P.Z,null,h.createElement(D.Z,{id:"alert-dialog-description"})),h.createElement(S.Z,null,h.createElement(E.Z,{color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(N.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city,func:this.changeCity.bind(this),label:"Город"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(N.$S,{classes:this.state.classes,data:this.state.vendors,value:this.state.vendor,func:this.changeVendor.bind(this),label:"Поставщик"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(N.IA,{classes:this.state.classes,value:this.state.allCity,func:function(t){e.setState({allCity:t.target.checked})},label:"На все города поставщика"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement(N.IA,{classes:this.state.classes,value:this.state.isPrioriti,func:function(t){e.setState({isPrioriti:t.target.checked})},label:"Приоритетный постащик"})),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(E.Z,{onClick:this.save.bind(this),variant:"contained"},"Сохранить")),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(b.Z,{component:k.Z},h.createElement(g.Z,null,h.createElement(x.Z,null,h.createElement(w.Z,null,h.createElement(_.Z,null,"Позиция"),h.createElement(_.Z,null),h.createElement(_.Z,null,"Комментарий"),h.createElement(_.Z,null,"Цена за упаковку"),h.createElement(_.Z,null,"Объем упаковки"),h.createElement(_.Z,null,"Цена за 1 ед."))),h.createElement(y.Z,null,this.state.items.map((function(t,n){return h.createElement(w.Z,{key:n},h.createElement(_.Z,null,t.name),h.createElement(_.Z,null,t.name_for_vendor),h.createElement(_.Z,null,h.createElement(N.rZ,{label:"",value:t.comment,func:e.update.bind(e,t.item_id,"comment")})),h.createElement(_.Z,null,h.createElement(N.rZ,{label:"",value:t.full_price,func:e.update.bind(e,t.item_id,"full_price")})),h.createElement(_.Z,null,h.createElement(N.$S,{classes:e.state.classes,data:t.pqs,value:t.rec_pq,func:e.update.bind(e,t.item_id,"rec_pq"),label:""})),h.createElement(_.Z,null,t.price," / ",t.ei_name))}))))))))}}]),O}(h.Component);function A(){var e=O(),t=(0,p.k6)();return h.createElement(B,{classes:e,history:t})}},432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{VendorModule:()=>H});var a=n(5861),r=n(5671),s=n(3144),i=n(7326),l=n(136),o=n(6215),c=n(1120),u=n(4942),m=n(7757),d=n.n(m),h=n(7294),p=n(5977),f=n(225),v=n(4345),Z=n(5725),E=n(2642),g=n(9573),y=n(8732),_=n(6926),b=n(7896),x=n(6011),w=n(3694),k=n(6501),C=n(2961),S=n(2450),P=n(4637),D=n(6540),I=n(594),R=n(4666),T=n(8979),N=n(7750),V=n(6408),M=n(8538),O=n(821),B=n(9062),A=n(6406),j=n(2658);var F=n(7563),z=(0,v.Z)({palette:{primary:{main:"#c03"}}}),L=(0,f.Z)({formControl:{width:"100%"},selectEmpty:{marginTop:z.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}),W=function(e){(0,l.Z)(q,e);var t,n,m,p,f,v,z,L,W,H,$=(W=q,H=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(W);if(H){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function q(e){var t;return(0,r.Z)(this,q),t=$.call(this,e),(0,u.Z)((0,i.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:F.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){setTimeout((function(){t.setState({is_load:!1})}),300),console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"vendor_module",module_name:"",is_load:!1,modalDialog:!1,modalItems:!1,modalVendor:!1,modalVendorNew:!1,vendors:[],allItems:[],vendor_items:[],openVendor:null,customAdd:0,vendorCities:[],allCities:[],nds:[{id:-1,name:"Без НДС"},{id:10,name:"10% НДС"},{id:20,name:"20% НДС"}],nds_:[-1,10,20],cities:[],city:-1},t}return(0,s.Z)(q,[{key:"componentDidMount",value:(L=(0,a.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,vendors:t.vendors,cities:t.cities}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"changeNDS",value:function(e,t){this.state.vendor_items.map((function(n,a){parseInt(n.item_id)==parseInt(e)&&(n.nds=t.target.value)})),this.setState({vendor_items:this.state.vendor_items})}},{key:"openModalItems",value:(z=(0,a.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={vendor_id:t.id},e.next=3,this.getData("get_vendor_items",n);case 3:a=e.sent,this.setState({modalItems:!0,allItems:a.all_items,vendor_items:a.vendor_items,openVendor:t});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return z.apply(this,arguments)})},{key:"openModalVendor",value:(v=(0,a.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={vendor_id:t.id},e.next=3,this.getData("get_vendor_info",n);case 3:a=e.sent,this.setState({modalVendor:!0,openVendor:a.vendor,vendorCities:a.vendor_cities,allCities:a.all_cities});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"openModalVendorNew",value:(f=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendor_id:0},e.next=3,this.getData("get_vendor_info",t);case 3:n=e.sent,this.setState({modalVendorNew:!0,openVendor:{addr:"",bill_ex:"0",email:"",email_2:"",inn:"",min_price:"",name:"",need_img_bill_ex:"0",ogrn:"",phone:"",text:""},vendorCities:[],allCities:n.all_cities});case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"saveVendorItems",value:(p=(0,a.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t={vendor_id:this.state.openVendor.id,items:this.state.vendor_items}).items.filter((function(e,t){return!n.state.nds_.includes(parseInt(e.nds))})).length>0)){e.next=5;break}return alert("У одной или нескольких позиций не заполнен НДС"),e.abrupt("return");case 5:return e.next=7,this.getData("save_vendor_items",t);case 7:e.sent,this.setState({modalItems:!1,vendor_items:[],openVendor:null});case 9:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"saveVendor",value:(m=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendor:this.state.openVendor,vendor_cities:this.state.vendorCities,city:this.state.city},e.next=3,this.getData("update_vendor",t);case 3:n=e.sent,this.setState({modalVendor:!1,openVendor:null,vendorCities:[],allCities:[],vendors:n.vendors});case 5:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"addVendor",value:(n=(0,a.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={vendor:this.state.openVendor,vendor_cities:this.state.vendorCities,city:this.state.city},e.next=3,this.getData("new_vendor",t);case 3:if(!1!==(n=e.sent).st){e.next=7;break}return alert(n.text),e.abrupt("return");case 7:this.setState({modalVendorNew:!1,openVendor:null,vendorCities:[],allCities:[],vendors:n.vendors});case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"delItem",value:function(e){var t=this.state.vendor_items;t=t.filter((function(t){return parseInt(t.item_id)!=parseInt(e)})),this.setState({vendor_items:t})}},{key:"addItem",value:function(e){var t=this.state.vendor_items;t.find((function(t){return parseInt(t.item_id)==parseInt(e.id)}))||t.push({item_id:e.id,item_name:e.name,nds:-2}),this.setState({vendor_items:t})}},{key:"addItemCustom",value:function(){var e=this,t=this.state.allItems.find((function(t){return parseInt(t.id)==parseInt(e.state.customAdd)}));this.addItem(t)}},{key:"testChange",value:function(e,t){var n=this.state.openVendor;n[e]="bill_ex"==e||"need_img_bill_ex"==e?!0===t.target.checked?1:0:t.target.value,this.setState({openVendor:n})}},{key:"changeCity",value:(t=(0,a.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={city:t.target.value},e.next=3,this.getData("get_vendors",n);case 3:a=e.sent,this.setState({vendors:a,city:t.target.value});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changeSort",value:function(e,t){var n=this;this.state.vendor_items.map((function(a,r){parseInt(a.item_id)==parseInt(e)&&(n.state.vendor_items[r].sort=t.target.value)})),this.setState({vendor_items:this.state.vendor_items})}},{key:"render",value:function(){var e=this;return h.createElement(h.Fragment,null,h.createElement(O.Z,{className:this.state.classes.backdrop,open:this.state.is_load},h.createElement(B.Z,{color:"inherit"})),h.createElement(R.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(M.Z,{id:"alert-dialog-title"}),h.createElement(N.Z,null,h.createElement(V.Z,{id:"alert-dialog-description"})),h.createElement(T.Z,null,h.createElement(E.Z,{color:"primary"},"Сохранить"))),h.createElement(R.Z,{open:this.state.modalItems,fullWidth:!0,maxWidth:"md",onClose:function(){e.setState({modalItems:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(M.Z,{id:"alert-dialog-title"},"Товары поставщика ",this.state.openVendor?this.state.openVendor.name:""),h.createElement(N.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,style:{paddingTop:20}},h.createElement(Z.ZP,{item:!0,xs:12,sm:5,style:{paddingRight:10}},h.createElement(g.Z,null,h.createElement(y.Z,null,h.createElement(w.Z,{style:{height:75}},h.createElement(_.Z,null,h.createElement(A.$S,{classes:this.state.classes,data:this.state.allItems,value:this.state.customAdd,func:function(t){e.setState({customAdd:t.target.value})}})),h.createElement(_.Z,null,h.createElement(D.Z,{onClick:this.addItemCustom.bind(this),style:{cursor:"pointer"}}))),this.state.allItems.map((function(t,n){return h.createElement(w.Z,{key:n,style:{height:75}},h.createElement(_.Z,null,t.name),h.createElement(_.Z,null,h.createElement(D.Z,{onClick:e.addItem.bind(e,t),style:{cursor:"pointer"}})))}))))),h.createElement(Z.ZP,{item:!0,xs:12,sm:7},h.createElement(g.Z,null,h.createElement(y.Z,null,this.state.vendor_items.map((function(t,n){return h.createElement(w.Z,{key:n,style:{height:75}},h.createElement(_.Z,null,t.item_name),h.createElement(_.Z,null,h.createElement(A.rZ,{label:"",value:t.sort,func:e.changeSort.bind(e,t.item_id)})),h.createElement(_.Z,null,h.createElement(A.$S,{classes:e.state.classes,data:e.state.nds,value:t.nds,func:e.changeNDS.bind(e,t.item_id)})),h.createElement(_.Z,null,h.createElement(I.Z,{onClick:e.delItem.bind(e,t.item_id),style:{cursor:"pointer"}})))}))))))),h.createElement(T.Z,null,h.createElement(E.Z,{onClick:this.saveVendorItems.bind(this),color:"primary"},"Сохранить"))),h.createElement(R.Z,{open:this.state.modalVendor,fullWidth:!0,maxWidth:"md",onClose:function(){e.setState({modalVendor:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(M.Z,{id:"alert-dialog-title"},"Поставщик ",this.state.openVendor?this.state.openVendor.name:""),h.createElement(N.Z,{style:{paddingBottom:10,paddingTop:10}},h.createElement(Z.ZP,{container:!0,spacing:3},this.state.openVendor?h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:12,sm:5},h.createElement(A.rZ,{label:"Наименование",value:this.state.openVendor.name,func:this.testChange.bind(this,"name")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Описание",value:this.state.openVendor.text,func:this.testChange.bind(this,"text")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(A.rZ,{label:"Мин. сумма заявки",value:this.state.openVendor.min_price,func:this.testChange.bind(this,"min_price")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.rZ,{label:"ИНН",value:this.state.openVendor.inn,func:this.testChange.bind(this,"inn"),disabled:!0})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.rZ,{label:"ОГРН",value:this.state.openVendor.ogrn,func:this.testChange.bind(this,"ogrn")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:8},h.createElement(A.rZ,{label:"Адрес компании",value:this.state.openVendor.addr,func:this.testChange.bind(this,"addr")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Контактное лицо",value:this.state.openVendor.user,func:this.testChange.bind(this,"user")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Телефон",value:this.state.openVendor.phone,func:this.testChange.bind(this,"phone")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Почта",value:this.state.openVendor.email,func:this.testChange.bind(this,"email")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Доп почта",value:this.state.openVendor.email_2,func:this.testChange.bind(this,"email_2")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.IA,{label:"Работа по счетам",value:1==parseInt(this.state.openVendor.bill_ex),func:this.testChange.bind(this,"bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.IA,{label:"Необходима картинка",value:1==parseInt(this.state.openVendor.need_img_bill_ex),func:this.testChange.bind(this,"need_img_bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.e_,{label:"Города",data:this.state.allCities,value:this.state.vendorCities,func:function(t,n){e.setState({vendorCities:n})}}))):null)),h.createElement(T.Z,null,h.createElement(E.Z,{onClick:this.saveVendor.bind(this),color:"primary"},"Сохранить"))),h.createElement(R.Z,{open:this.state.modalVendorNew,fullWidth:!0,maxWidth:"md",onClose:function(){e.setState({modalVendorNew:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},h.createElement(M.Z,{id:"alert-dialog-title"},"Новый поставщик"),h.createElement(N.Z,null,h.createElement(Z.ZP,{container:!0,spacing:3},this.state.openVendor?h.createElement(h.Fragment,null,h.createElement(Z.ZP,{item:!0,xs:12,sm:5},h.createElement(A.rZ,{label:"Наименование",value:this.state.openVendor.name,func:this.testChange.bind(this,"name")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Описание",value:this.state.openVendor.text,func:this.testChange.bind(this,"text")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(A.rZ,{label:"Мин. сумма заявки",value:this.state.openVendor.min_price,func:this.testChange.bind(this,"min_price")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.rZ,{label:"ИНН",value:this.state.openVendor.inn,func:this.testChange.bind(this,"inn")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.rZ,{label:"ОГРН",value:this.state.openVendor.ogrn,func:this.testChange.bind(this,"ogrn")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:8},h.createElement(A.rZ,{label:"Адрес компании",value:this.state.openVendor.addr,func:this.testChange.bind(this,"addr")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Контактное лицо",value:this.state.openVendor.user,func:this.testChange.bind(this,"user")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Телефон",value:this.state.openVendor.phone,func:this.testChange.bind(this,"phone")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Почта",value:this.state.openVendor.email,func:this.testChange.bind(this,"email")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:4},h.createElement(A.rZ,{label:"Доп почта",value:this.state.openVendor.email_2,func:this.testChange.bind(this,"email_2")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.IA,{label:"Работа по счетам",value:1==parseInt(this.state.openVendor.bill_ex),func:this.testChange.bind(this,"bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.IA,{label:"Необходима картинка",value:1==parseInt(this.state.openVendor.need_img_bill_ex),func:this.testChange.bind(this,"need_img_bill_ex")})),h.createElement(Z.ZP,{item:!0,xs:12,sm:6},h.createElement(A.e_,{label:"Города",data:this.state.allCities,value:this.state.vendorCities,func:function(t,n){e.setState({vendorCities:n})}}))):null)),h.createElement(T.Z,null,h.createElement(E.Z,{onClick:this.addVendor.bind(this),color:"primary"},"Сохранить"))),h.createElement(Z.ZP,{container:!0,spacing:3},h.createElement(Z.ZP,{item:!0,xs:12,sm:12},h.createElement("h1",null,this.state.module_name)),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(A.$S,{classes:this.state.classes,data:this.state.cities,value:this.state.city,func:this.changeCity.bind(this),label:"Город"})),h.createElement(Z.ZP,{item:!0,xs:12,sm:3},h.createElement(E.Z,{onClick:this.openModalVendorNew.bind(this),variant:"contained"},"Добавить поставщика")),h.createElement(Z.ZP,{item:!0,xs:12},h.createElement(b.Z,{component:k.Z},h.createElement(g.Z,null,h.createElement(x.Z,null,h.createElement(w.Z,null,h.createElement(_.Z,{component:"th"},"Название"),h.createElement(_.Z,{component:"th"},"Назначенные товары"),h.createElement(_.Z,{component:"th"},h.createElement(C.Z,null)))),h.createElement(y.Z,null,this.state.vendors.map((function(t,n){return h.createElement(w.Z,{key:n},h.createElement(_.Z,null,h.createElement(j.Z,{onClick:e.openModalVendor.bind(e,t),style:{cursor:"pointer",width:"max-content"}},t.name)),h.createElement(_.Z,null,h.createElement(P.Z,{onClick:e.openModalItems.bind(e,t),style:{cursor:"pointer"}})),h.createElement(_.Z,null,1==parseInt(t.is_show)?h.createElement(C.Z,null):h.createElement(S.Z,null)))}))))))))}}]),q}(h.Component);function H(){var e=L(),t=(0,p.k6)();return h.createElement(W,{classes:e,history:t})}},5798:(e,t,n)=>{"use strict";var a=n(7294),r=n(3935),s=n(3727),i=n(7462),l=n(5861),o=n(5671),c=n(3144),u=n(7326),m=n(136),d=n(6215),h=n(1120),p=n(4942),f=n(7757),v=n.n(f),Z=n(6010),E=n(225),g=n(6720),y=n(3720),_=n(4386),b=n(2440),x=n(799),w=n(9334),k=n(2658),C=n(7720),S=n(6867),P=n(2583),D=n(4065),I=n(5725),R=n(326),T=n(9572),N=n(5817),V=n(9941),M=n(7425),O=n(5092),B=n(3508),A=n(4345),j=n(1807),F=n(5977),z=n(5116),L=n(9599),W=n(9449),H=n(5152),$=n.n(H);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var G=n(7563),J=(0,A.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),Y=(0,E.Z)({root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},J.mixins.toolbar),appBar:{zIndex:J.zIndex.drawer+1,transition:J.transitions.create(["width","margin"],{easing:J.transitions.easing.sharp,duration:J.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:J.transitions.create(["width","margin"],{easing:J.transitions.easing.sharp,duration:J.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:J.transitions.create("width",{easing:J.transitions.easing.sharp,duration:J.transitions.duration.enteringScreen})},drawerPaperClose:(0,p.Z)({overflowX:"hidden",transition:J.transitions.create("width",{easing:J.transitions.easing.sharp,duration:J.transitions.duration.leavingScreen}),width:J.spacing(7)},J.breakpoints.up("sm"),{width:J.spacing(9)}),appBarSpacer:J.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:J.spacing(4),paddingBottom:J.spacing(4),width:"100%"},paper:{padding:J.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:J.typography.pxToRem(15),fontWeight:J.typography.fontWeightRegular}}),K=function(e){(0,m.Z)(E,e);var t,n,r,f=(n=E,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,h.Z)(n);if(r){var a=(0,h.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,d.Z)(this,e)});function E(e){var t;return(0,o.Z)(this,E),t=f.call(this,e),(0,p.Z)((0,u.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:G.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(console.log(e),!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",open:!1,menu:[],full_menu:[],left:!1},t}return(0,c.Z)(E,[{key:"componentDidMount",value:(t=(0,l.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({menu:t.info.left_menu,full_menu:t.info.full_menu});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement(y.Z,{className:(0,Z.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},a.createElement(_.Z,{className:this.state.classes.toolbar},a.createElement(S.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,Z.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},a.createElement(R.Z,null)),a.createElement(k.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:this.state.classes.title},"Dashboard"),a.createElement(S.Z,{color:"inherit"},a.createElement(P.Z,{badgeContent:4,color:"secondary"},a.createElement(N.Z,null))))),a.createElement(a.Fragment,null,a.createElement(W.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},a.createElement("div",{className:this.state.classes.toolbarIcon},a.createElement(L.Z,{size:"small",options:this.state.full_menu,getOptionLabel:function(e){return e.name},onChange:function(t,n){n&&e.state.history.push("/"+n.key_query+"/")},style:{width:300},renderInput:function(e){return a.createElement(z.Z,(0,i.Z)({},e,{label:"Поиск",variant:"outlined"}))}}),a.createElement(S.Z,{onClick:this.handleDrawerClose.bind(this)},a.createElement(T.Z,null))),a.createElement(C.Z,null),this.state.menu.map((function(t,n){return a.createElement(V.Z,{key:n},a.createElement(M.Z,{expandIcon:a.createElement(B.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},a.createElement(k.Z,{className:e.state.classes.heading},t.parent.name)),a.createElement(O.Z,null,a.createElement(b.Z,{style:{width:"100%"}},t.chaild.map((function(e,t){return a.createElement(x.ZP,{button:!0,key:t},a.createElement(s.OL,{to:"/"+e.key_query+"/"},a.createElement(w.Z,{primary:e.name})))})))))})))))}}]),E}(a.Component);function Q(e){var t=e.code,n=e.children;return a.createElement(F.AW,{render:function(e){var a=e.staticContext;return a&&(a.status=t),n}})}function U(){var e=Y(),t=(0,F.k6)(),n=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(n=!1),a.createElement(j.Z,{theme:J},a.createElement("div",{className:e.root},n?a.createElement(a.Fragment,null,a.createElement(g.ZP,null),a.createElement(K,{classes:e,history:t})):null,a.createElement("main",{className:e.content},a.createElement("div",{className:e.appBarSpacer}),a.createElement(D.Z,{maxWidth:!1,className:e.container},a.createElement(F.rs,null,$().map((function(e,t){return a.createElement(F.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),a.createElement(F.AW,{component:function(){return a.createElement(Q,{code:404},a.createElement(I.ZP,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},a.createElement(I.ZP,{item:!0,xs:12},a.createElement(k.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}r.render(a.createElement(s.VK,null,a.createElement(U,null)),document.getElementById("app"))},6406:(e,t,n)=>{"use strict";n.d(t,{lp:()=>k,e_:()=>C,$S:()=>S,rZ:()=>P,w0:()=>D,IA:()=>I});var a=n(7462),r=n(5671),s=n(3144),i=n(136),l=n(6215),o=n(1120),c=n(7294),u=n(7666),m=n(5305),d=n(6446),h=n(2681),p=n(5116),f=n(3709),v=n(542),Z=n(2887),E=n(9599),g=n(6447),y=n(8523),_=n(4463),b=n(4424),x=n(5344);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,o.Z)(e);if(t){var r=(0,o.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.Z)(this,n)}}var k=function(e){(0,i.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(x.Z,{dateAdapter:b.Z,locale:y.Z,size:"small"},c.createElement(_.Z,{allowSameDateSelection:!0,showTodayButton:!0,startText:this.props.startText,endText:this.props.endText,value:this.props.value,inputFormat:"yyyy-MM-dd",onChange:this.props.func,renderInput:function(e,t){return c.createElement(c.Fragment,null,c.createElement(p.Z,(0,a.Z)({style:{width:"100%"}},e)),c.createElement(p.Z,(0,a.Z)({style:{width:"100%"}},t)))}}))}}]),n}(c.PureComponent),C=function(e){(0,i.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){var e,t=this;return c.createElement(g.Z,{spacing:3},c.createElement(E.Z,{size:"small",disableCloseOnSelect:!0,multiple:!0,id:null!==(e=this.props.id)&&void 0!==e?e:null,options:this.props.data,getOptionLabel:function(e){return e.name},value:this.props.value,onChange:this.props.func,filterSelectedOptions:!0,isOptionEqualToValue:function(e,t){return e.id===t.id},renderInput:function(e){return c.createElement(p.Z,(0,a.Z)({},e,{label:t.props.label,placeholder:t.props.placeholder}))}}))}}]),n}(c.PureComponent),S=function(e){(0,i.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(d.Z,{fullWidth:!0,variant:"outlined",size:"small"},c.createElement(u.Z,null,this.props.label),c.createElement(h.Z,{value:this.props.value,label:this.props.label,onChange:this.props.func,multiple:!(!this.props.multiple||!0!==this.props.multiple)},c.createElement(m.Z,{value:""},c.createElement("em",null,"None")),this.props.data.map((function(e,t){return c.createElement(m.Z,{key:t,value:e.id},e.name)}))))}}]),n}(c.PureComponent),P=function(e){(0,i.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(p.Z,{label:this.props.label,value:this.props.value,onChange:this.props.func,disabled:!(!this.props.disabled&&!0!==this.props.disabled),variant:"outlined",size:"small",color:"primary",style:{width:"100%"}})}}]),n}(c.PureComponent),D=function(e){(0,i.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(p.Z,{variant:"outlined",size:"small",color:"primary",label:this.props.label,type:"time",value:this.props.value,className:this.state.classes.timePicker,onChange:this.props.func,InputLabelProps:{shrink:!0},inputProps:{step:300}})}}]),n}(c.PureComponent),I=function(e){(0,i.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(f.Z,{row:!0},c.createElement(v.Z,{control:c.createElement(Z.Z,{checked:this.props.value,onChange:this.props.func,color:"primary"}),label:this.props.label}))}}]),n}(c.PureComponent)}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.2a61e9d0d3727efad4c9.js.map