"use strict";(self.webpackChunkpackage_json=self.webpackChunkpackage_json||[]).push([[252],{8252:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee}),a(3692);var n=a(5861),s=a(7326),i=a(4942),l=a(5671),m=a(3144),r=a(136),c=a(6215),o=a(1120),h=a(4687),p=a.n(h),d=a(7294),u=a(5725),_=a(2642),g=a(9573),f=a(8732),E=a(6926),Z=a(6011),I=a(3694),y=a(2961),v=a(2450),b=a(6540),x=a(594),w=a(7070),D=a(5265),P=a(5305),z=a(1508),k=a(2640),S=a(5670),N=a(6568),C=a(3055),O=a(4666),T=a(8979),j=a(7750),U=a(7645),M=a(9941),L=a(7425),H=a(5092),A=a(2658),R=a(3508),F=a(4567),W=a(9062),Q=a(6406),q=a(5436),B=a(9986),K=a(6867);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,o.Z)(e);if(t){var s=(0,o.Z)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var J=a(7563),G=function(e){(0,r.Z)(a,e);var t=V(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,m.Z)(a,[{key:"render",value:function(){var e=this;return d.createElement(g.Z,{size:"small",style:{marginBottom:50}},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:5,style:{textAlign:"center"}},this.props.title)),d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null,"Количество"),d.createElement(E.Z,null),d.createElement(E.Z,null,"Сортировка"),d.createElement(E.Z,null))),d.createElement(f.Z,null,this.props.data.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(Q.rZ,{label:"",value:t.count,func:e.props.changeData.bind(e,e.props.type,e.props.arr,"count",a)})),d.createElement(E.Z,null,t.ei_name),d.createElement(E.Z,{style:{maxWidth:100}},d.createElement(Q.rZ,{label:"",value:t.sort,func:e.props.changeData.bind(e,e.props.type,e.props.arr,"sort",a)})),d.createElement(E.Z,null,d.createElement(x.Z,{onClick:e.props.delItem.bind(e,e.props.type,e.props.arr,a),style:{cursor:"pointer"}})))}))))}}]),a}(d.Component);function $(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),s=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[s,a,n].join("-")}var Y=function(e){(0,r.Z)(a,e);var t=V(a);function a(){return(0,l.Z)(this,a),t.apply(this,arguments)}return(0,m.Z)(a,[{key:"shouldComponentUpdate",value:function(e){return e.timeUpdate!=this.props.timeUpdate}},{key:"render",value:function(){var e=this;return console.log("render SiteItemsTable"),d.createElement(u.ZP,{item:!0,xs:12},this.props.cats.map((function(t,a){return d.createElement(M.Z,{key:a},d.createElement(L.Z,{expandIcon:d.createElement(R.Z,null)},d.createElement(A.Z,null,t.name)),d.createElement(H.Z,{style:{width:"100%",overflow:"scroll"}},d.createElement(g.Z,null,d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{style:{width:"2%"}},"id"),d.createElement(E.Z,{style:{width:"23%"}},"Название"),d.createElement(E.Z,{style:{width:"15%"}},"Ближайшее обновление"),d.createElement(E.Z,{style:{width:"15%"}},"Сортировка"),d.createElement(E.Z,{style:{width:"15%"}},"Активность"),d.createElement(E.Z,{style:{width:"15%"}},"Сайт"),d.createElement(E.Z,{style:{width:"15%"}},"Склад"))),d.createElement(f.Z,null,t.items.map((function(t,n){return d.createElement(I.Z,{key:n},d.createElement(E.Z,null,t.id),d.createElement(E.Z,{onClick:e.props.openItem.bind(e,t,t.date_update?"hist":"origin")},t.name),t.date_update?d.createElement(E.Z,null,d.createElement(Q.Qe,{label:"",value:t.date_update,func:e.props.changeDateUpdate.bind(e,a,n,t.date_update_id)})):d.createElement(E.Z,null),d.createElement(E.Z,null,d.createElement(Q.rZ,{label:"",value:t.sort,func:e.props.changeSort.bind(e,a,n),onBlur:e.props.saveSort.bind(e,t.id)})),d.createElement(E.Z,null,1==parseInt(t.is_show)?d.createElement(y.Z,null):d.createElement(v.Z,null)),d.createElement(E.Z,null,1==parseInt(t.show_site)?d.createElement(y.Z,null):d.createElement(v.Z,null)),d.createElement(E.Z,null,1==parseInt(t.show_program)?d.createElement(y.Z,null):d.createElement(v.Z,null)))}))))))})))}}]),a}(d.Component),X=function(e){(0,r.Z)(ae,e);var t,a,c,o,h,y,v,M,L,H,R,X,ee,te=V(ae);function ae(e){var t;return(0,l.Z)(this,ae),t=te.call(this,e),(0,i.Z)((0,s.Z)(t),"dropzoneOptions",{autoProcessQueue:!1,autoQueue:!0,maxFiles:1,timeout:0,parallelUploads:10,acceptedFiles:"image/jpeg,image/png",addRemoveLinks:!0,url:"https://jacochef.ru/src/img/site_img/upload_img_new.php"}),(0,i.Z)((0,s.Z)(t),"myDropzoneOld",null),(0,i.Z)((0,s.Z)(t),"myDropzoneNew",null),(0,i.Z)((0,s.Z)(t),"getData",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return 1==n&&t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:J.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(a)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){setTimeout((function(){t.setState({is_load:!1})}),300),console.log(e)}))})),t.state={module:"site_items",module_name:"",is_load:!1,allItems:[],vendor_items:[],modalItemEdit:!1,modalItemNew:!1,itemEdit:null,itemName:"",checkArtDialog:!1,checkArtList:[],freeItems:[],date_update:$(new Date),point_list:[],point_list_render:[],point_id:0,app_list:[],app_id:-1,users:[],modalUserEdit:!1,modalUserNew:!1,textDel:"",delModal:!1,graphModal:!1,graphType:0,editItem:null,item_rec:null,item_pf:null,item_items_all:[],modalEdit:!1,modalNew:!1,types:[{id:1,name:"Позиция (ролл)"},{id:2,name:"Набор (сет)"},{id:3,name:"Доп (палочки / соевый / ...)"},{id:4,name:"Напиток"}],cats:[],cat_list:[],ItemTab:"1",ItemTab1:"0",anchorEl:null,openMenu:!1,openMenuType:null,openMenuitem:null,rec_stage_1:[],rec_stage_2:[],rec_stage_3:[],pf_stage_1:[],pf_stage_2:[],pf_stage_3:[],item_items:[],myDropzoneOld:null,myDropzoneNew:null,is_snack:!1,textSnack:"",searchPf:"",item_pf_render:[],searchItems:"",item_items_render:[],openHist:[],timeUpdate:new Date},t}return(0,m.Z)(ae,[{key:"componentDidMount",value:(ee=(0,n.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,cats:t.cats,cat_list:t.cat_list,timeUpdate:new Date}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return ee.apply(this,arguments)})},{key:"getItems",value:(X=(0,n.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({cats:t.cats,cat_list:t.cat_list,timeUpdate:new Date});case 4:case"end":return e.stop()}}),e,this)}))),function(){return X.apply(this,arguments)})},{key:"openItem",value:(R=(0,n.Z)(p().mark((function e(t){var a,n,s,i,l,m,r,c,o,h,d,u=this,_=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:"origin",s={id:t.id,type:n,hist_id:parseInt(this.state.ItemTab1)},e.next=4,this.getData("get_one",s);case 4:i=e.sent,l=[],m=[],r=[],c=[],o=[],h=[],d=[],i.item_rec.stage_1&&i.item_rec.stage_1.map((function(e){c.push({item_id:e.rec_id,name:e.name,count:e.count,sort:e.sort,ei_name:e.ei_name})})),i.item_rec.stage_2&&i.item_rec.stage_2.map((function(e){o.push({item_id:e.rec_id,name:e.name,count:e.count,sort:e.sort,ei_name:e.ei_name})})),i.item_rec.stage_3&&i.item_rec.stage_3.map((function(e){h.push({item_id:e.rec_id,name:e.name,count:e.count,sort:e.sort,ei_name:e.ei_name})})),i.item_pf.stage_1&&i.item_pf.stage_1.map((function(e){l.push({item_id:e.pf_id,name:e.name,count:e.count,sort:e.sort,ei_name:e.ei_name})})),i.item_pf.stage_2&&i.item_pf.stage_2.map((function(e){m.push({item_id:e.pf_id,name:e.name,count:e.count,sort:e.sort,ei_name:e.ei_name})})),i.item_pf.stage_3&&i.item_pf.stage_3.map((function(e){r.push({item_id:e.pf_id,name:e.name,count:e.count,sort:e.sort,ei_name:e.ei_name})})),i.item_items.this_items&&i.item_items.this_items.map((function(e){d.push({item_id:e.item_id,name:e.name,count:e.count,is_add:parseInt(e.is_add)})})),this.setState({editItem:i.item,item_rec:i.item_rec,item_pf:i.item_pf,item_pf_render:i.item_pf.all,item_items_all:i.item_items.all_items,item_items_render:i.item_items.all_items,rec_stage_1:c,rec_stage_2:o,rec_stage_3:h,pf_stage_1:l,pf_stage_2:m,pf_stage_3:r,item_items:d,openHist:i.hist,ItemTab1:i.hist.length>0&&"hist"==n?i.hist[0].id:"0",modalEdit:!0,date_update:null!==(a=$(i.item.date_start))&&void 0!==a?a:$(new Date)}),setTimeout((function(){u.myDropzoneOld=new q.Z("#for_img_edit_old",u.dropzoneOptions),u.myDropzoneNew=new q.Z("#for_img_edit_new",u.dropzoneOptions)}),300);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"openNew",value:(H=(0,n.Z)(p().mark((function e(){var t,a,n,s,i,l,m,r,c=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all_for_new");case 2:t=e.sent,a=[],n=[],s=[],i=[],l=[],m=[],r=[],this.setState({editItem:t.item,item_rec:t.item_rec,item_pf:t.item_pf,item_pf_render:t.item_pf.all,item_items_all:t.item_items.all_items,item_items_render:t.item_items.all_items,rec_stage_1:i,rec_stage_2:l,rec_stage_3:m,pf_stage_1:a,pf_stage_2:n,pf_stage_3:s,item_items:r,modalNew:!0}),setTimeout((function(){c.myDropzoneOld=new q.Z("#for_img_edit_old",c.dropzoneOptions),c.myDropzoneNew=new q.Z("#for_img_edit_new",c.dropzoneOptions)}),300);case 6:case"end":return e.stop()}}),e,this)}))),function(){return H.apply(this,arguments)})},{key:"changeItem",value:function(e,t){var a=this.state.editItem;if("category_id"==e){var n=t.target.value,s=1,i=a.stol;4==parseInt(n)&&(s=2,i=-1),6==parseInt(n)&&(s=4,i=0),7==parseInt(n)&&(s=3,i=0),a.type=s,a.stol=i}a[e]="is_show"==e||"show_site"==e||"show_program"==e||"is_new"==e||"is_hit"==e?!0===t.target.checked?1:0:t.target.value,this.setState({editItem:a})}},{key:"closeMenu",value:function(){this.setState({anchorEl:null,openMenu:!1,openMenuType:null,openMenuitem:null})}},{key:"openMenu",value:function(e,t,a){this.setState({anchorEl:a.currentTarget,openMenu:!0,openMenuType:e,openMenuitem:t})}},{key:"chooseStage",value:function(e){var t=this;if("rec"==this.state.openMenuType){var a=!1,n=1==e?this.state.rec_stage_1:2==e?this.state.rec_stage_2:3==e?this.state.rec_stage_3:[];(n=n||[]).map((function(e){parseInt(t.state.openMenuitem.id)==parseInt(e.item_id)&&(a=!0)})),a||(n.push({item_id:this.state.openMenuitem.id,name:this.state.openMenuitem.name,count:0,sort:0,ei_name:this.state.openMenuitem.ei_name}),1==e&&this.setState({rec_stage_1:n}),2==e&&this.setState({rec_stage_2:n}),3==e&&this.setState({rec_stage_3:n}))}if("pf"==this.state.openMenuType){var s=!1,i=1==e?this.state.pf_stage_1:2==e?this.state.pf_stage_2:3==e?this.state.pf_stage_3:[];(i=i||[]).map((function(e){parseInt(t.state.openMenuitem.id)==parseInt(e.item_id)&&(s=!0)})),s||(i.push({item_id:this.state.openMenuitem.id,name:this.state.openMenuitem.name,count:0,sort:0,ei_name:this.state.openMenuitem.ei_name}),1==e&&this.setState({pf_stage_1:i}),2==e&&this.setState({pf_stage_2:i}),3==e&&this.setState({pf_stage_3:i}))}this.closeMenu()}},{key:"forwardItem",value:function(e){var t=!1,a=this.state.item_items;(a=a||[]).map((function(a){parseInt(e.id)==parseInt(a.item_id)&&(t=!0)})),t||(a.push({item_id:e.id,name:e.name,count:1,is_add:0}),this.setState({item_items:a}))}},{key:"changeData",value:function(e,t,a,n,s){if("rec"==e){var i="rec_stage_1"==t?this.state.rec_stage_1:"rec_stage_2"==t?this.state.rec_stage_2:"rec_stage_3"==t?this.state.rec_stage_3:[];i[n][a]=s.target.value,"rec_stage_1"==t&&this.setState({rec_stage_1:i}),"rec_stage_2"==t&&this.setState({rec_stage_2:i}),"rec_stage_3"==t&&this.setState({rec_stage_3:i})}if("pf"==e){var l="pf_stage_1"==t?this.state.pf_stage_1:"pf_stage_2"==t?this.state.pf_stage_2:"pf_stage_3"==t?this.state.pf_stage_3:[];l[n][a]=s.target.value,"pf_stage_1"==t&&this.setState({pf_stage_1:l}),"pf_stage_2"==t&&this.setState({pf_stage_2:l}),"pf_stage_3"==t&&this.setState({pf_stage_3:l})}if("item"==e){var m=this.state.item_items;m[n][a]="is_add"==a?!0===s.target.checked?1:0:s.target.value,this.setState({item_items:m})}}},{key:"delItem",value:function(e,t,a){if("rec"==e){var n="rec_stage_1"==t?this.state.rec_stage_1:"rec_stage_2"==t?this.state.rec_stage_2:"rec_stage_3"==t?this.state.rec_stage_3:[];n.splice(a,1),n=n||[],"rec_stage_1"==t&&this.setState({rec_stage_1:n}),"rec_stage_2"==t&&this.setState({rec_stage_2:n}),"rec_stage_3"==t&&this.setState({rec_stage_3:n})}if("pf"==e){var s="pf_stage_1"==t?this.state.pf_stage_1:"pf_stage_2"==t?this.state.pf_stage_2:"pf_stage_3"==t?this.state.pf_stage_3:[];s.splice(a,1),s=s||[],"pf_stage_1"==t&&this.setState({pf_stage_1:s}),"pf_stage_2"==t&&this.setState({pf_stage_2:s}),"pf_stage_3"==t&&this.setState({pf_stage_3:s})}if("item"==e){var i=this.state.item_items;i.splice(a,1),i=i||[],this.setState({item_items:i})}}},{key:"saveImg",value:function(e,t,a,n){e.on("sending",(function(e,s,i){var l=e.name.split(".");l=(l=l[l.length-1]).toLowerCase(),i.append("filetype","user_"+a+"."+l),i.append("filename","user_"+a),i.append("typeFile",n),i.append("name",t)})),e.on("queuecomplete",(function(t){var a=!1;e.files.map((function(e,t){"error"==e.status&&(a=!0)})),a&&alert("Ошибка при загрузке фотографии "+n)}))}},{key:"saveEditItem",value:(L=(0,n.Z)(p().mark((function e(){var t,a,n,s,i,l,m=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.myDropzoneOld.files.length>0&&(t=this.state.editItem.name,a=this.state.editItem.id,this.myDropzoneOld.on("sending",(function(e,n,s){var i=e.name.split(".");i=(i=i[i.length-1]).toLowerCase(),s.append("typeFile","old"),s.append("name",t),s.append("id",a)})),this.myDropzoneOld.on("queuecomplete",(function(e){var t=!1,a=m.myDropzoneNew;m.myDropzoneOld.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&a.files[0]&&"success"==a.files[0].status&&(m.setState({modalEdit:!1,editItem:null,ItemTab:"1"}),m.getItems())})),t&&alert("Ошибка при загрузке фотографии old")}))),this.myDropzoneNew.files.length>0&&(n=this.state.editItem.name,s=this.state.editItem.id,this.myDropzoneNew.on("sending",(function(e,t,a){var i=e.name.split(".");i=(i=i[i.length-1]).toLowerCase(),a.append("typeFile","new"),a.append("name",n),a.append("id",s)})),this.myDropzoneNew.on("queuecomplete",(function(e){var t=!1,a=m.myDropzoneOld;m.myDropzoneNew.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&a.files[0]&&"success"==a.files[0].status&&(m.setState({modalEdit:!1,editItem:null,ItemTab:"1"}),m.getItems())})),t&&alert("Ошибка при загрузке фотографии new")}))),i={item:this.state.editItem,rec_stage_1:this.state.rec_stage_1,rec_stage_2:this.state.rec_stage_2,rec_stage_3:this.state.rec_stage_3,pf_stage_1:this.state.pf_stage_1,pf_stage_2:this.state.pf_stage_2,pf_stage_3:this.state.pf_stage_3,item_items:this.state.item_items},e.next=5,this.getData("saveEditItem",i);case 5:!1===(l=e.sent).st?alert(l.text):(this.openSnack("Данные обновлены"),this.myDropzoneOld.files.length>0&&this.myDropzoneOld.processQueue(),this.myDropzoneNew.files.length>0&&this.myDropzoneNew.processQueue());case 7:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"saveEditItemHist",value:(M=(0,n.Z)(p().mark((function e(){var t,a,n,s,i,l,m,r,c,o,h=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.myDropzoneOld.files.length>0&&(t=this.state.editItem.name,a=this.state.editItem.id,n=this.state.date_update,s=this.state.editItem.hist_id,this.myDropzoneOld.on("sending",(function(e,i,l){var m=e.name.split(".");m=(m=m[m.length-1]).toLowerCase(),l.append("typeFile","old"),l.append("name",t),l.append("id",a),l.append("hist_id",s),l.append("date_update",n)})),this.myDropzoneOld.on("queuecomplete",(function(e){var t=!1,a=h.myDropzoneNew;h.myDropzoneOld.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&(a.files[0]&&"success"==a.files[0].status||0==a.files.length)&&(h.setState({modalEdit:!1,editItem:null,ItemTab1:"0"}),h.getItems())})),t&&alert("Ошибка при загрузке фотографии old")}))),this.myDropzoneNew.files.length>0&&(i=this.state.editItem.name,l=this.state.editItem.id,m=this.state.date_update,r=this.state.editItem.hist_id,this.myDropzoneNew.on("sending",(function(e,t,a){var n=e.name.split(".");n=(n=n[n.length-1]).toLowerCase(),a.append("typeFile","new"),a.append("name",i),a.append("id",l),a.append("hist_id",r),a.append("date_update",m)})),this.myDropzoneNew.on("queuecomplete",(function(e){var t=!1,a=h.myDropzoneOld;h.myDropzoneNew.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&(a.files[0]&&"success"==a.files[0].status||0==a.files.length)&&(h.setState({modalEdit:!1,editItem:null,ItemTab1:"0",ItemTab:"1"}),h.getItems())})),t&&alert("Ошибка при загрузке фотографии new")}))),c={dateUpdate:this.state.date_update,item:this.state.editItem,rec_stage_1:this.state.rec_stage_1,rec_stage_2:this.state.rec_stage_2,rec_stage_3:this.state.rec_stage_3,pf_stage_1:this.state.pf_stage_1,pf_stage_2:this.state.pf_stage_2,pf_stage_3:this.state.pf_stage_3,item_items:this.state.item_items},e.next=5,this.getData("saveEditItemHist",c);case 5:!1===(o=e.sent).st?alert(o.text):(this.openSnack("Данные обновлены"),this.myDropzoneOld.files.length>0&&this.myDropzoneOld.processQueue(),this.myDropzoneNew.files.length>0&&this.myDropzoneNew.processQueue(),0==this.myDropzoneOld.files.length&&0==this.myDropzoneNew.files.length&&(this.setState({modalEdit:!1,editItem:null,ItemTab1:"0",ItemTab:"1"}),this.getItems()));case 7:case"end":return e.stop()}}),e,this)}))),function(){return M.apply(this,arguments)})},{key:"saveNewItemHist",value:(v=(0,n.Z)(p().mark((function e(){var t,a,n,s,i,l,m,r,c,o,h=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={dateUpdate:this.state.date_update,item:this.state.editItem,rec_stage_1:this.state.rec_stage_1,rec_stage_2:this.state.rec_stage_2,rec_stage_3:this.state.rec_stage_3,pf_stage_1:this.state.pf_stage_1,pf_stage_2:this.state.pf_stage_2,pf_stage_3:this.state.pf_stage_3,item_items:this.state.item_items},e.next=3,this.getData("saveNewItemHist",t);case 3:!1===(a=e.sent).st?alert(a.text):(this.openSnack("Данные обновлены"),this.myDropzoneOld.files.length>0&&(n=this.state.editItem.name,s=this.state.editItem.id,i=this.state.date_update,l=a.hist_id,this.myDropzoneOld.on("sending",(function(e,t,a){var m=e.name.split(".");m=(m=m[m.length-1]).toLowerCase(),a.append("typeFile","old"),a.append("name",n),a.append("id",s),a.append("hist_id",l),a.append("date_update",i)})),this.myDropzoneOld.on("queuecomplete",(function(e){var t=!1,a=h.myDropzoneNew;h.myDropzoneOld.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&(a.files[0]&&"success"==a.files[0].status||0==a.files.length)&&(h.setState({modalEdit:!1,editItem:null,ItemTab1:"0",ItemTab:"1"}),h.getItems())})),t&&alert("Ошибка при загрузке фотографии old")}))),this.myDropzoneNew.files.length>0&&(m=this.state.editItem.name,r=this.state.editItem.id,c=this.state.date_update,o=a.hist_id,this.myDropzoneNew.on("sending",(function(e,t,a){var n=e.name.split(".");n=(n=n[n.length-1]).toLowerCase(),a.append("typeFile","new"),a.append("name",m),a.append("id",r),a.append("hist_id",o),a.append("date_update",c)})),this.myDropzoneNew.on("queuecomplete",(function(e){var t=!1,a=h.myDropzoneOld;h.myDropzoneNew.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&(a.files[0]&&"success"==a.files[0].status||0==a.files.length)&&(h.setState({modalEdit:!1,editItem:null,ItemTab:"1",ItemTab1:"0"}),h.getItems())})),t&&alert("Ошибка при загрузке фотографии new")}))),this.myDropzoneOld.files.length>0&&this.myDropzoneOld.processQueue(),this.myDropzoneNew.files.length>0&&this.myDropzoneNew.processQueue(),0==this.myDropzoneOld.files.length&&0==this.myDropzoneNew.files.length&&(this.setState({modalEdit:!1,editItem:null,ItemTab1:"0",ItemTab:"1"}),this.getItems()));case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"saveNewItem",value:(y=(0,n.Z)(p().mark((function e(){var t,a,n,s,i,l,m=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={item:this.state.editItem,rec_stage_1:this.state.rec_stage_1,rec_stage_2:this.state.rec_stage_2,rec_stage_3:this.state.rec_stage_3,pf_stage_1:this.state.pf_stage_1,pf_stage_2:this.state.pf_stage_2,pf_stage_3:this.state.pf_stage_3,item_items:this.state.item_items},e.next=3,this.getData("saveNewItem",t);case 3:a=e.sent,console.log(a),!1===a.st?alert(a.text):(this.openSnack("Данные обновлены"),this.myDropzoneOld.files.length>0&&(n=this.state.editItem.name,s=a.id,this.myDropzoneOld.on("sending",(function(e,t,a){var i=e.name.split(".");i=(i=i[i.length-1]).toLowerCase(),a.append("typeFile","old"),a.append("name",n),a.append("id",s)})),this.myDropzoneOld.on("queuecomplete",(function(e){var t=!1,a=m.myDropzoneNew;m.myDropzoneOld.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&a.files[0]&&"success"==a.files[0].status&&(m.setState({modalNew:!1,editItem:null,ItemTab:"1"}),m.getItems())})),t&&alert("Ошибка при загрузке фотографии old")}))),this.myDropzoneNew.files.length>0&&(i=this.state.editItem.name,l=a.id,this.myDropzoneNew.on("sending",(function(e,t,a){var n=e.name.split(".");n=(n=n[n.length-1]).toLowerCase(),a.append("typeFile","new"),a.append("name",i),a.append("id",l)})),this.myDropzoneNew.on("queuecomplete",(function(e){var t=!1,a=m.myDropzoneOld;m.myDropzoneNew.files.map((function(e,n){"error"==e.status&&(t=!0),"success"==e.status&&a.files[0]&&"success"==a.files[0].status&&(m.setState({modalNew:!1,editItem:null,ItemTab:"1"}),m.getItems())})),t&&alert("Ошибка при загрузке фотографии new")}))),this.myDropzoneOld.files.length>0&&this.myDropzoneOld.processQueue(),this.myDropzoneNew.files.length>0&&this.myDropzoneNew.processQueue());case 6:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"delUpdateItemTrue",value:(h=(0,n.Z)(p().mark((function e(){var t,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={item:this.state.editItem},e.next=3,this.getData("delUpdateItem",t);case 3:e.sent,this.setState({ItemTab1:"0"}),setTimeout((function(){a.openItem(a.state.editItem,"origin")}),300);case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"delUpdateItem",value:function(){confirm("Точно удалить ?")&&this.delUpdateItemTrue()}},{key:"changeTab",value:function(e,t){var a=this;this.setState({myDropzoneOld:this.myDropzoneOld.files,myDropzoneNew:this.myDropzoneNew.files}),this.setState({ItemTab:t}),console.log("t",this.state.item_pf),1==parseInt(t)&&setTimeout((function(){if(a.myDropzoneOld=new q.Z("#for_img_edit_old",a.dropzoneOptions),a.myDropzoneNew=new q.Z("#for_img_edit_new",a.dropzoneOptions),a.state.myDropzoneOld[0]){var e={name:a.state.myDropzoneOld[0].name,size:a.state.myDropzoneOld[0].size,type:a.state.myDropzoneOld[0].type,status:a.state.myDropzoneOld[0].status,url:a.state.myDropzoneOld[0].dataURL,dataURL:a.state.myDropzoneOld[0].dataURL};a.myDropzoneOld.emit("addedfile",e),a.myDropzoneOld.emit("thumbnail",e,a.state.myDropzoneOld[0].dataURL),a.myDropzoneOld.files.push(a.state.myDropzoneOld[0])}if(a.state.myDropzoneNew[0]){var t={name:a.state.myDropzoneNew[0].name,size:a.state.myDropzoneNew[0].size,type:a.state.myDropzoneNew[0].type,status:a.state.myDropzoneNew[0].status,url:a.state.myDropzoneNew[0].dataURL,dataURL:a.state.myDropzoneNew[0].dataURL};a.myDropzoneNew.emit("addedfile",t),a.myDropzoneNew.emit("thumbnail",t,a.state.myDropzoneNew[0].dataURL),a.myDropzoneNew.files.push(a.state.myDropzoneNew[0])}}),300)}},{key:"changeTab1",value:function(e,t){var a=this;this.setState({ItemTab1:t}),setTimeout((function(){-1==parseInt(t)||0==parseInt(t)?a.openItem(a.state.editItem,"origin"):a.openItem(a.state.editItem,"hist")}),300)}},{key:"closeSnack",value:function(){this.setState({is_snack:!1,textSnack:""})}},{key:"openSnack",value:function(e){this.setState({is_snack:!0,textSnack:e})}},{key:"searchPf",value:function(e){var t=this.state.item_pf.all,a=e.target.value;this.setState({searchPf:a});var n=[];t.map((function(e){-1!==e.name.toLowerCase().indexOf(a.toLowerCase())&&n.push(e)})),this.setState({item_pf_render:n})}},{key:"searchItems",value:function(e){var t=this.state.item_items_all,a=e.target.value;this.setState({searchItems:a});var n=[];t.map((function(e){-1!==e.name.toLowerCase().indexOf(a.toLowerCase())&&n.push(e)})),this.setState({item_items_render:n})}},{key:"closeEdit",value:function(){this.setState({modalEdit:!1,editItem:null,ItemTab:"1",ItemTab1:"0",date_update:$(new Date)}),this.getItems()}},{key:"closeNew",value:function(){this.setState({modalNew:!1,editItem:null,ItemTab:"1"}),this.getItems()}},{key:"changeSort",value:function(e,t,a){var n=a.target.value,s=this.state.cats;s[e].items[t].sort=n,this.setState({cats:s,timeUpdate:new Date})}},{key:"changeDateUpdate",value:(o=(0,n.Z)(p().mark((function e(t,a,n,s){var i,l,m;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s,(l=this.state.cats)[t].items[a].date_update=$(i),this.setState({cats:l,timeUpdate:new Date}),m={update_id:n,dateUpdate:$(i)},e.next=7,this.getData("saveUpdateDate",m);case 7:e.sent;case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,a,n){return o.apply(this,arguments)})},{key:"saveSort",value:(c=(0,n.Z)(p().mark((function e(t,a){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:t,sort:a.target.value},e.next=3,this.getData("saveSort",n);case 3:e.sent;case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"saveUpdateDate",value:(a=(0,n.Z)(p().mark((function e(t,a,n){var s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:t,update_id:a,dateUpdate:$(n)},console.log(s),e.next=4,this.getData("saveUpdateDate",s);case 4:e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"trueUpdateVK",value:(t=(0,n.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("updateVK",{});case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"updateVK",value:function(){confirm("Точно обновить товары в VK ?")&&this.trueUpdateVK()}},{key:"changeDateRange",value:function(e,t){this.setState((0,i.Z)({},e,$(t)))}},{key:"render",value:function(){var e=this,t=d.createElement(d.Fragment,null,d.createElement(K.Z,{size:"small","aria-label":"close",color:"inherit",onClick:this.closeSnack.bind(this)},d.createElement(x.Z,{fontSize:"small"})));return d.createElement(d.Fragment,null,d.createElement(F.Z,{open:this.state.is_load,style:{zIndex:99999}},d.createElement(W.Z,{color:"inherit"})),d.createElement(B.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.is_snack,autoHideDuration:6e3,onClose:this.closeSnack.bind(this),message:this.state.textSnack,action:t}),d.createElement(O.Z,{open:this.state.modalEdit,fullWidth:!0,maxWidth:"md",onClose:this.closeEdit.bind(this)},d.createElement(U.Z,null,"Редактирвоание товара"),d.createElement(j.Z,{style:{paddingBottom:10,paddingTop:10}},d.createElement(u.ZP,{container:!0,spacing:3},this.state.editItem&&this.state.modalEdit?d.createElement(d.Fragment,null,d.createElement(u.ZP,{item:!0,xs:12},d.createElement(S.ZP,{value:this.state.ItemTab1},d.createElement(z.Z,{sx:{borderBottom:1,borderColor:"divider"}},d.createElement(N.Z,{onChange:this.changeTab1.bind(this),variant:"fullWidth"},this.state.openHist.map((function(e,t){return d.createElement(k.Z,{key:t,label:e.date_start,value:e.id})})),d.createElement(k.Z,{label:"Текущая",value:"0"}),d.createElement(k.Z,{label:"Добавить",value:"-1"})))),d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(S.ZP,{value:this.state.ItemTab},d.createElement(z.Z,{sx:{borderBottom:1,borderColor:"divider"}},d.createElement(N.Z,{onChange:this.changeTab.bind(this),variant:"fullWidth"},d.createElement(k.Z,{label:"Основные",value:"1"}),d.createElement(k.Z,{label:"Рецепты",value:"2"}),d.createElement(k.Z,{label:"Заготовки",value:"3"}),d.createElement(k.Z,{label:"Позиции",value:"4"}))),d.createElement(C.Z,{value:"1"},d.createElement(u.ZP,{container:!0,spacing:3},-1==parseInt(this.state.ItemTab1)||parseInt(this.state.ItemTab1)>0?d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3,justifyContent:"center"},d.createElement(u.ZP,{item:!0,xs:4},d.createElement(Q.Qe,{label:"Дата обновления",value:this.state.date_update,func:this.changeDateRange.bind(this,"date_update")})),parseInt(this.state.ItemTab1)>0?d.createElement(u.ZP,{item:!0,xs:4},d.createElement(_.Z,{onClick:this.delUpdateItem.bind(this),style:{backgroundColor:"#c03",color:"#fff",height:"100%"}},d.createElement(x.Z,null))):null)):null,d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.rZ,{label:"Название",value:this.state.editItem.name,func:this.changeItem.bind(this,"name")})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.rZ,{label:"Короткое название (20 сим.)",value:this.state.editItem.short_name,func:this.changeItem.bind(this,"short_name")})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.$S,{data:this.state.types,value:this.state.editItem.type,func:this.changeItem.bind(this,"type"),disabled:!0,label:"Тип"})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.$S,{data:this.state.cat_list,value:this.state.editItem.category_id,func:this.changeItem.bind(this,"category_id"),label:"Категория"})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Код из 1с",value:this.state.editItem.art,func:this.changeItem.bind(this,"art")})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Стол",value:this.state.editItem.stol,func:this.changeItem.bind(this,"stol")})),6==parseInt(this.state.editItem.category_id)?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Объем",value:this.state.editItem.weight,func:this.changeItem.bind(this,"weight")})):d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Вес",value:this.state.editItem.weight,func:this.changeItem.bind(this,"weight")})),14!=parseInt(this.state.editItem.category_id)?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Кол-во кусочков",value:this.state.editItem.count_part,func:this.changeItem.bind(this,"count_part")})):d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Размер пиццы",value:this.state.editItem.size_pizza,func:this.changeItem.bind(this,"size_pizza")})))),2!=parseInt(this.state.editItem.type)?d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Белки",value:this.state.editItem.protein,func:this.changeItem.bind(this,"protein")})),d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Жиры",value:this.state.editItem.fat,func:this.changeItem.bind(this,"fat")})),d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Углеводы",value:this.state.editItem.carbohydrates,func:this.changeItem.bind(this,"carbohydrates")})),d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Энергетическая ценность",value:this.state.editItem.kkal,func:this.changeItem.bind(this,"kkal")})))):null,2!=parseInt(this.state.editItem.type)?d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Время на 1 этап (ММ:СС)",value:this.state.editItem.time_stage_1,func:this.changeItem.bind(this,"time_stage_1")})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Время на 2 этап (ММ:СС)",value:this.state.editItem.time_stage_2,func:this.changeItem.bind(this,"time_stage_2")})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Время на 3 этап (ММ:СС)",value:this.state.editItem.time_stage_3,func:this.changeItem.bind(this,"time_stage_3")})))):null,d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(A.Z,null,"Картинка соотношением сторон (3:2) (пример: 600х400) только JPG")),d.createElement(u.ZP,{item:!0,xs:12,sm:6},this.state.editItem.img_new.length>0?d.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+this.state.editItem.img_new+"600х400.jpg?"+this.state.editItem.img_new_update,style:{maxWidth:300,maxHeight:300}}):d.createElement("div",{style:{maxWidth:300,maxHeight:300}})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement("div",{className:"dropzone",id:"for_img_edit_old",style:{width:"100%",minHeight:150}})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(A.Z,null,"Картинка соотношением сторон (1:1) (пример: 2000х2000) только JPG")),d.createElement(u.ZP,{item:!0,xs:12,sm:6},this.state.editItem.img_app.length>0?d.createElement("picture",null,d.createElement("source",{srcSet:"\n                                            https://storage.yandexcloud.net/site-img/".concat(this.state.editItem.img_app,"_276x276.jpg 138w, \n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_292x292.jpg 146w,\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_366x366.jpg 183w,\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_466x466.jpg 233w,\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_585x585.jpg 292w\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_732x732.jpg 366w,\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_1168x1168.jpg 584w,\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_1420x1420.jpg 760w,\n                                            https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_2000x2000.jpg 1875w"),sizes:"(max-width=1439px) 233px, (max-width=1279px) 218px, 292px"}),d.createElement("img",{style:{maxHeight:300},src:"https://storage.yandexcloud.net/site-img/".concat(this.state.editItem.img_app,"_276х276.jpg")})):d.createElement("div",{style:{maxWidth:300,maxHeight:300}})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement("div",{className:"dropzone",id:"for_img_edit_new",style:{width:"100%",minHeight:150}})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(Q.rZ,{label:"Состав",value:this.state.editItem.tmp_desc,func:this.changeItem.bind(this,"tmp_desc")})),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(Q.rZ,{label:"Короткое описание (в списке)",value:this.state.editItem.marc_desc,func:this.changeItem.bind(this,"marc_desc")})),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(Q.rZ,{label:"Полное описание (в карточке)",value:this.state.editItem.marc_desc_full,func:this.changeItem.bind(this,"marc_desc_full")})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.IA,{label:"Новинка",value:1==parseInt(this.state.editItem.is_new),func:this.changeItem.bind(this,"is_new"),style:{justifyContent:"center"}})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.IA,{label:"Хит",value:1==parseInt(this.state.editItem.is_hit),func:this.changeItem.bind(this,"is_hit"),style:{justifyContent:"center"}})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.IA,{label:"Активность",value:1==parseInt(this.state.editItem.is_show),func:this.changeItem.bind(this,"is_show"),style:{justifyContent:"center"}})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.IA,{label:"На сайте",value:1==parseInt(this.state.editItem.show_site),func:this.changeItem.bind(this,"show_site"),style:{justifyContent:"center"}})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.IA,{label:"На складе",value:1==parseInt(this.state.editItem.show_program),func:this.changeItem.bind(this,"show_program"),style:{justifyContent:"center"}})))))),d.createElement(C.Z,{value:"2"},d.createElement(u.ZP,{container:!0,spacing:3},this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null))),d.createElement(f.Z,null,this.state.item_rec.all.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(w.Z,{onClick:e.openMenu.bind(e,"rec",t)})))}))))):null,this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:8},d.createElement(G,{title:"1 этап",type:"rec",arr:"rec_stage_1",data:this.state.rec_stage_1,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"2 этап",type:"rec",arr:"rec_stage_2",data:this.state.rec_stage_2,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"3 этап",type:"rec",arr:"rec_stage_3",data:this.state.rec_stage_3,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)})):null)),d.createElement(C.Z,{value:"3"},d.createElement(u.ZP,{container:!0,spacing:3},this.state.item_pf?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null))),d.createElement(f.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:2},d.createElement(Q.rZ,{label:"Поиск",value:this.state.searchPf,func:this.searchPf.bind(this)}))),this.state.item_pf_render.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(w.Z,{onClick:e.openMenu.bind(e,"pf",t)})))}))))):null,this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:8},d.createElement(G,{title:"1 этап",type:"pf",arr:"pf_stage_1",data:this.state.pf_stage_1,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"2 этап",type:"pf",arr:"pf_stage_2",data:this.state.pf_stage_2,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"3 этап",type:"pf",arr:"pf_stage_3",data:this.state.pf_stage_3,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)})):null)),d.createElement(C.Z,{value:"4"},d.createElement(u.ZP,{container:!0,spacing:3},this.state.item_pf?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null))),d.createElement(f.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:2},d.createElement(Q.rZ,{label:"Поиск",value:this.state.searchItems,func:this.searchItems.bind(this)}))),this.state.item_items_render.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(b.Z,{onClick:e.forwardItem.bind(e,t),style:{cursor:"pointer"}})))}))))):null,this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:8},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:5,style:{textAlign:"center"}},this.props.title)),d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null,"Количество"),d.createElement(E.Z,null,"Авт. добавление"),d.createElement(E.Z,null))),d.createElement(f.Z,null,this.state.item_items.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(Q.rZ,{label:"",value:t.count,func:e.changeData.bind(e,"item","item_items","count",a)})),d.createElement(E.Z,null,d.createElement(Q.IA,{label:"",value:1==parseInt(t.is_add),func:e.changeData.bind(e,"item","item_items","is_add",a)})),d.createElement(E.Z,null,d.createElement(x.Z,{onClick:e.delItem.bind(e,"item","",a),style:{cursor:"pointer"}})))}))))):null))))),d.createElement(D.Z,{anchorEl:this.state.anchorEl,open:this.state.openMenu,onClose:this.closeMenu.bind(this)},d.createElement(P.Z,{onClick:this.chooseStage.bind(this,1)},"1 этап"),d.createElement(P.Z,{onClick:this.chooseStage.bind(this,2)},"2 этап"),d.createElement(P.Z,{onClick:this.chooseStage.bind(this,3)},"3 этап")))):null)),d.createElement(T.Z,null,-1==parseInt(this.state.ItemTab1)?d.createElement(_.Z,{onClick:this.saveNewItemHist.bind(this),color:"primary"},"Сохранить"):0==parseInt(this.state.ItemTab1)?d.createElement(_.Z,{onClick:this.saveEditItem.bind(this),color:"primary"},"Сохранить"):d.createElement(_.Z,{onClick:this.saveEditItemHist.bind(this),color:"primary"},"Сохранить"))),d.createElement(O.Z,{open:this.state.modalNew,fullWidth:!0,maxWidth:"md",onClose:this.closeNew.bind(this)},d.createElement(U.Z,null,"Новый товар"),d.createElement(j.Z,{style:{paddingBottom:10,paddingTop:10}},d.createElement(u.ZP,{container:!0,spacing:3},this.state.editItem&&this.state.modalNew?d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(S.ZP,{value:this.state.ItemTab},d.createElement(z.Z,{sx:{borderBottom:1,borderColor:"divider"}},d.createElement(N.Z,{onChange:this.changeTab.bind(this),variant:"fullWidth"},d.createElement(k.Z,{label:"Основные",value:"1"}),d.createElement(k.Z,{label:"Рецепты",value:"2"}),d.createElement(k.Z,{label:"Заготовки",value:"3"}),d.createElement(k.Z,{label:"Позиции",value:"4"}))),d.createElement(C.Z,{value:"1"},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.rZ,{label:"Название",value:this.state.editItem.name,func:this.changeItem.bind(this,"name")})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.rZ,{label:"Короткое название (20 сим.)",value:this.state.editItem.short_name,func:this.changeItem.bind(this,"short_name")})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.$S,{data:this.state.types,value:this.state.editItem.type,func:this.changeItem.bind(this,"type"),disabled:!0,label:"Тип"})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.$S,{data:this.state.cat_list,value:this.state.editItem.category_id,func:this.changeItem.bind(this,"category_id"),label:"Категория"})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Код из 1с",value:this.state.editItem.art,func:this.changeItem.bind(this,"art")})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Стол",value:this.state.editItem.stol,func:this.changeItem.bind(this,"stol")})),6==parseInt(this.state.editItem.category_id)?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Объем",value:this.state.editItem.weight,func:this.changeItem.bind(this,"weight")})):d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Вес",value:this.state.editItem.weight,func:this.changeItem.bind(this,"weight")})),14!=parseInt(this.state.editItem.category_id)?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Кол-во кусочков",value:this.state.editItem.count_part,func:this.changeItem.bind(this,"count_part")})):d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Размер пиццы",value:this.state.editItem.size_pizza,func:this.changeItem.bind(this,"size_pizza")})))),2!=parseInt(this.state.editItem.type)?d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Белки",value:this.state.editItem.protein,func:this.changeItem.bind(this,"protein")})),d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Жиры",value:this.state.editItem.fat,func:this.changeItem.bind(this,"fat")})),d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Углеводы",value:this.state.editItem.carbohydrates,func:this.changeItem.bind(this,"carbohydrates")})),d.createElement(u.ZP,{item:!0,xs:12,sm:3},d.createElement(Q.rZ,{label:"Энергетическая ценность",value:this.state.editItem.kkal,func:this.changeItem.bind(this,"kkal")})))):null,2!=parseInt(this.state.editItem.type)?d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Время на 1 этап (ММ:СС)",value:this.state.editItem.time_stage_1,func:this.changeItem.bind(this,"time_stage_1")})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Время на 2 этап (ММ:СС)",value:this.state.editItem.time_stage_2,func:this.changeItem.bind(this,"time_stage_2")})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.rZ,{label:"Время на 3 этап (ММ:СС)",value:this.state.editItem.time_stage_3,func:this.changeItem.bind(this,"time_stage_3")})))):null,d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(A.Z,null,"Картинка соотношением сторон (3:2) (пример: 600х400) только JPG")),d.createElement(u.ZP,{item:!0,xs:12,sm:6},this.state.editItem.img_new.length>0?d.createElement("img",{src:"https://storage.yandexcloud.net/site-img/"+this.state.editItem.img_new+"600х400.jpg?"+this.state.editItem.img_new_update,style:{maxWidth:300,maxHeight:300}}):d.createElement("div",{style:{maxWidth:300,maxHeight:300}})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement("div",{className:"dropzone",id:"for_img_edit_old",style:{width:"100%",minHeight:150}})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(A.Z,null,"Картинка соотношением сторон (1:1) (пример: 2000х2000) только JPG")),d.createElement(u.ZP,{item:!0,xs:12,sm:6},this.state.editItem.img_app.length>0?d.createElement("picture",null,d.createElement("source",{srcSet:"\n                                              https://storage.yandexcloud.net/site-img/".concat(this.state.editItem.img_app,"_276x276.jpg 138w, \n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_292x292.jpg 146w,\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_366x366.jpg 183w,\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_466x466.jpg 233w,\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_585x585.jpg 292w\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_732x732.jpg 366w,\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_1168x1168.jpg 584w,\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_1420x1420.jpg 760w,\n                                              https://storage.yandexcloud.net/site-img/").concat(this.state.editItem.img_app,"_2000x2000.jpg 1875w"),sizes:"(max-width=1439px) 233px, (max-width=1279px) 218px, 292px"}),d.createElement("img",{style:{maxHeight:300},src:"https://storage.yandexcloud.net/site-img/".concat(this.state.editItem.img_app,"_276x276.jpg")})):d.createElement("div",{style:{maxWidth:300,maxHeight:300}})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement("div",{className:"dropzone",id:"for_img_edit_new",style:{width:"100%",minHeight:150}})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12},d.createElement(Q.rZ,{label:"Состав",value:this.state.editItem.tmp_desc,func:this.changeItem.bind(this,"tmp_desc")})),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(Q.rZ,{label:"Короткое описание (в карточке)",value:this.state.editItem.marc_desc,func:this.changeItem.bind(this,"marc_desc")})),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(Q.rZ,{label:"Полное описание (в карточке)",value:this.state.editItem.marc_desc_full,func:this.changeItem.bind(this,"marc_desc_full")})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.IA,{label:"Новинка",value:1==parseInt(this.state.editItem.is_new),func:this.changeItem.bind(this,"is_new"),style:{justifyContent:"center"}})),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(Q.IA,{label:"Хит",value:1==parseInt(this.state.editItem.is_hit),func:this.changeItem.bind(this,"is_hit"),style:{justifyContent:"center"}})))),d.createElement(u.ZP,{item:!0,xs:12},d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.IA,{label:"Активность",value:1==parseInt(this.state.editItem.is_show),func:this.changeItem.bind(this,"is_show"),style:{justifyContent:"center"}})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.IA,{label:"На сайте",value:1==parseInt(this.state.editItem.show_site),func:this.changeItem.bind(this,"show_site"),style:{justifyContent:"center"}})),d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(Q.IA,{label:"На складе",value:1==parseInt(this.state.editItem.show_program),func:this.changeItem.bind(this,"show_program"),style:{justifyContent:"center"}})))))),d.createElement(C.Z,{value:"2"},d.createElement(u.ZP,{container:!0,spacing:3},this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null))),d.createElement(f.Z,null,this.state.item_rec.all.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(w.Z,{onClick:e.openMenu.bind(e,"rec",t)})))}))))):null,this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:8},d.createElement(G,{title:"1 этап",type:"rec",arr:"rec_stage_1",data:this.state.rec_stage_1,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"2 этап",type:"rec",arr:"rec_stage_2",data:this.state.rec_stage_2,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"3 этап",type:"rec",arr:"rec_stage_3",data:this.state.rec_stage_3,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)})):null)),d.createElement(C.Z,{value:"3"},d.createElement(u.ZP,{container:!0,spacing:3},this.state.item_pf?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null))),d.createElement(f.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:2},d.createElement(Q.rZ,{label:"Поиск",value:this.state.searchPf,func:this.searchPf.bind(this)}))),this.state.item_pf_render.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(w.Z,{onClick:e.openMenu.bind(e,"pf",t)})))}))))):null,this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:8},d.createElement(G,{title:"1 этап",type:"pf",arr:"pf_stage_1",data:this.state.pf_stage_1,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"2 этап",type:"pf",arr:"pf_stage_2",data:this.state.pf_stage_2,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)}),d.createElement(G,{title:"3 этап",type:"pf",arr:"pf_stage_3",data:this.state.pf_stage_3,changeData:this.changeData.bind(this),delItem:this.delItem.bind(this)})):null)),d.createElement(C.Z,{value:"4"},d.createElement(u.ZP,{container:!0,spacing:3},this.state.item_pf?d.createElement(u.ZP,{item:!0,xs:12,sm:4},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null))),d.createElement(f.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:2},d.createElement(Q.rZ,{label:"Поиск",value:this.state.searchItems,func:this.searchItems.bind(this)}))),this.state.item_items_render.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(b.Z,{onClick:e.forwardItem.bind(e,t),style:{cursor:"pointer"}})))}))))):null,this.state.item_rec?d.createElement(u.ZP,{item:!0,xs:12,sm:8},d.createElement(g.Z,{size:"small"},d.createElement(Z.Z,null,d.createElement(I.Z,null,d.createElement(E.Z,{colSpan:5,style:{textAlign:"center"}},this.props.title)),d.createElement(I.Z,null,d.createElement(E.Z,null,"Название"),d.createElement(E.Z,null,"Количество"),d.createElement(E.Z,null,"Авт. добавление"),d.createElement(E.Z,null))),d.createElement(f.Z,null,this.state.item_items.map((function(t,a){return d.createElement(I.Z,{key:a},d.createElement(E.Z,null,t.name),d.createElement(E.Z,null,d.createElement(Q.rZ,{label:"",value:t.count,func:e.changeData.bind(e,"item","item_items","count",a)})),d.createElement(E.Z,null,d.createElement(Q.IA,{label:"",value:1==parseInt(t.is_add),func:e.changeData.bind(e,"item","item_items","is_add",a)})),d.createElement(E.Z,null,d.createElement(x.Z,{onClick:e.delItem.bind(e,"item","",a),style:{cursor:"pointer"}})))}))))):null))))),d.createElement(D.Z,{anchorEl:this.state.anchorEl,open:this.state.openMenu,onClose:this.closeMenu.bind(this)},d.createElement(P.Z,{onClick:this.chooseStage.bind(this,1)},"1 этап"),d.createElement(P.Z,{onClick:this.chooseStage.bind(this,2)},"2 этап"),d.createElement(P.Z,{onClick:this.chooseStage.bind(this,3)},"3 этап"))):null)),d.createElement(T.Z,null,d.createElement(_.Z,{onClick:this.saveNewItem.bind(this),color:"primary"},"Сохранить"))),d.createElement(u.ZP,{container:!0,spacing:3},d.createElement(u.ZP,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(_.Z,{onClick:this.openNew.bind(this),color:"primary",variant:"contained"},"Новый товар")),d.createElement(u.ZP,{item:!0,xs:12,sm:6},d.createElement(_.Z,{onClick:this.updateVK.bind(this),color:"primary",variant:"contained"},"Обновить товары VK")),0==this.state.cats.length?null:d.createElement(Y,{timeUpdate:this.state.timeUpdate,cats:this.state.cats,changeSort:this.changeSort.bind(this),saveSort:this.saveSort.bind(this),changeDateUpdate:this.changeDateUpdate.bind(this),openItem:this.openItem.bind(this)})))}}]),ae}(d.Component);function ee(){return d.createElement(X,null)}},3692:(e,t,a)=>{var n=a(4783)(e.id,{locals:!1});e.hot.dispose(n),e.hot.accept(void 0,n)}}]);
//# sourceMappingURL=252.d082c20fa1afdaf46093.js.map