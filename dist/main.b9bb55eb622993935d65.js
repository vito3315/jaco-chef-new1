(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[179],{5152:(e,t,n)=>{var a=n(7227).Home,r=n(8433).Auth,s=n(9546).Reg,l=n(9347).LiveOrders,i=n(5650).Events,o=n(7307).RasByBill;e.exports=[{path:"/",exact:!0,component:a,title:"Главная",code:200},{path:"/auth",exact:!0,component:r,title:"Авторизация",code:200},{path:"/registration",exact:!0,component:s,title:"Регистрация",code:200},{path:"/live_orders",exact:!0,component:l,title:"Оформленные заказы",code:200},{path:"/events",exact:!0,component:i,title:"События",code:200},{path:"/ras_by_bill",exact:!0,component:o,title:"Расход по накладным",code:200}]},8433:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auth:()=>R});var a=n(5861),r=n(5671),s=n(3144),l=n(7326),i=n(136),o=n(2963),c=n(1120),u=n(4942),m=n(7757),h=n.n(m),d=n(7294),p=n(5977),f=n(3901),Z=n(282),E=n(8286),g=n(1749),y=n(9760),v=n(2663),b=n(6856),_=n(9525),x=n(7212),k=n(6083),w=n(2692),S=n(5477);var C=n(7563),D=(0,y.Z)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},textLink:{color:"#c03"}}})),T=function(e){(0,i.Z)(T,e);var t,n,m,p,y,D=(p=T,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(y){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function T(e){var t;return(0,r.Z)(this,T),t=D.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:C.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;t.state.history.push("/auth")}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:""},t}return(0,s.Z)(T,[{key:"componentDidMount",value:(m=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"updateData",value:(n=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"auth",value:(t=(0,a.Z)(h().mark((function e(){var t,n,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={login:document.getElementById("phone").value,pwd:document.getElementById("password").value},e.next=3,this.getData("auth",t);case 3:n=e.sent,console.log(n),!1===n.st?setTimeout((function(){a.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):(localStorage.setItem("token",n.token),setTimeout((function(){window.location.pathname="/"}),300));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return d.createElement(d.Fragment,null,d.createElement(w.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(S.Z,{color:"inherit"})),d.createElement(v.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.createElement(k.Z,{id:"alert-dialog-title"},this.state.dialogTitle),d.createElement(_.Z,null,d.createElement(x.Z,{id:"alert-dialog-description"},this.state.dialogText)),d.createElement(b.Z,null,d.createElement(Z.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),d.createElement(g.Z,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},d.createElement(g.Z,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},d.createElement("div",{className:this.state.classes.paper},d.createElement(f.Z,{className:this.state.classes.avatar},d.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),d.createElement("form",{className:this.state.classes.form,noValidate:!0},d.createElement(E.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0}),d.createElement(E.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password"}),d.createElement(Z.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.auth.bind(this)},"Войти"),d.createElement(g.Z,{container:!0},d.createElement(g.Z,{item:!0,xs:!0},d.createElement("a",{href:"/registration",className:this.state.classes.textLink},"Восстановить пароль"))))))))}}]),T}(d.Component);function R(){var e=D(),t=(0,p.k6)();return d.createElement(T,{classes:e,history:t})}},5650:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Events:()=>$});var a=n(5861),r=n(5671),s=n(3144),l=n(7326),i=n(136),o=n(2963),c=n(1120),u=n(4942),m=n(7757),h=n.n(m),d=n(7294),p=n(9760),f=n(1749),Z=n(282),E=n(5977),g=n(2302),y=n(9613),v=n(8222),b=n(6847),_=n(3750),x=n(7394),k=n(9895),w=n(8135),S=n(743),C=n(1201),D=n(4566),T=n(366),R=n(2822),I=n(998),N=n(5757),P=n(2663),O=n(6856),B=n(9525),j=n(7212),H=n(6083),F=n(2692),A=n(5477),z=n(6406),W=n(2318);var M=n(7563),L=(0,p.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}})),Y=function(e){(0,i.Z)(q,e);var t,n,m,p,E,L,Y,$=(L=q,Y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(L);if(Y){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function q(e){var t;return(0,r.Z)(this,q),t=$.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:M.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"events",module_name:"",is_load:!1,points:[],point:"0",mounth:"0",mounths:[],years:[],year:"0",calendar:[],modalDialog:!1,chooseDayHoly:"",events:[],chooseEvent:0,eventPoint1:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",expanded:"",dayEvents:[],events_hist:[]},t}return(0,s.Z)(q,[{key:"componentDidMount",value:(E=(0,a.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,console.log(t),this.setState({points:t.points,point:t.points[0].id,module_name:t.module_info.name,mounths:t.mounth,mounth:t.this_m,years:t.years,year:t.this_y}),document.title=t.module_info.name,setTimeout((function(){n.updateData()}),50);case 7:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeMounth",value:function(e){var t=e.target.value;this.setState({mounth:t}),setTimeout((function(){}),50)}},{key:"changeYear",value:function(e){var t=e.target.value;this.setState({year:t})}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(p=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={m:this.state.mounth,y:this.state.year,point_id:this.state.point},e.next=3,this.getData("get_calendar",t);case 3:n=e.sent,console.log(n),this.setState({calendar:n.year});case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"chooseDay",value:(m=(0,a.Z)(h().mark((function e(t){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.full_day){e.next=8;break}return this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1,events_hist:[]}),n={date:t.full_day,point_id:this.state.point},e.next=5,this.getData("get_calendar_day",n);case 5:a=e.sent,console.log("res",a),this.setState({chooseDay:t,chooseDayHoly:a.holy,events:a.events,events_hist:a.hist,dayEvents:a.this_events,modalDialog:!0});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"changeEvent",value:function(e){var t=e.target.value;this.setState({chooseEvent:t})}},{key:"changePoint1",value:function(e){var t=e.target.value;this.setState({eventPoint1:t})}},{key:"changeEveryYear1",value:function(e){var t=e.target.checked;this.setState({everyYear1:t})}},{key:"changeTimeStart2",value:function(e){var t=e.target.value;this.setState({timeStart2:t})}},{key:"changeTimeEnd2",value:function(e){var t=e.target.value;this.setState({timeEnd2:t})}},{key:"save",value:(n=(0,a.Z)(h().mark((function e(){var t,n,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={date:this.state.chooseDay.full_day,point_id:this.state.eventPoint1,event:this.state.chooseEvent,every_year:!0===this.state.everyYear1?1:0,time_start:this.state.timeStart2,time_end:this.state.timeEnd2},e.next=3,this.getData("save_event",t);case 3:n=e.sent,console.log(n),!1===n.st?alert(n.text):(this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1}),setTimeout((function(){a.updateData()}),300));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"handleChange",value:function(e){this.setState({expanded:e})}},{key:"delEvent",value:(t=(0,a.Z)(h().mark((function e(t){var n,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("delEvent",t),!confirm('Удалить событие "'+t.title+" "+t.date+'" ?')){e.next=10;break}return n={del_id:t.id},e.next=5,this.getData("del_event",n);case 5:e.sent,this.setState({chooseDay:null,eventPoint1:this.state.point,chooseEvent:0,everyYear1:!1,timeStart2:"10:00",timeEnd2:"21:30",modalDialog:!1}),setTimeout((function(){a.updateData()}),300),e.next=10;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return d.createElement(d.Fragment,null,d.createElement(F.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(A.Z,{color:"inherit"})),d.createElement(P.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.createElement(H.Z,{id:"alert-dialog-title"},this.state.chooseDay?this.state.chooseDay.full_day:""),d.createElement(B.Z,null,d.createElement(j.Z,{id:"alert-dialog-description"},d.createElement(f.Z,{container:!0,spacing:3},0==this.state.chooseDayHoly.length?null:d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(W.Z,{component:"span"},this.state.chooseDayHoly)),d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(z.$S,{classes:this.state.classes,data:this.state.events,value:this.state.chooseEvent,func:this.changeEvent.bind(this),label:"Событие"})),d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(z.$S,{classes:this.state.classes,data:this.state.points,value:this.state.eventPoint1,func:this.changePoint1.bind(this),label:"Точка"})),2!==parseInt(this.state.chooseEvent)?null:d.createElement(d.Fragment,null,d.createElement(f.Z,{item:!0,xs:6,sm:6},d.createElement(z.w0,{classes:this.state.classes,value:this.state.timeStart2,func:this.changeTimeStart2.bind(this),label:"Время начала работы"})),d.createElement(f.Z,{item:!0,xs:6,sm:6},d.createElement(z.w0,{classes:this.state.classes,value:this.state.timeEnd2,func:this.changeTimeEnd2.bind(this),label:"Время окончания работы"}))),d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(z.IA,{classes:this.state.classes,value:this.state.everyYear1,func:this.changeEveryYear1.bind(this),label:"Каждый год"}))),d.createElement(R.Z,{component:"nav"},this.state.dayEvents.map((function(t,n){return d.createElement(I.Z,{key:n},d.createElement(N.Z,{primary:t.title}),4==parseInt(t.type)?null:d.createElement(T.Z,{color:"primary",onClick:e.delEvent.bind(e,t),style:{cursor:"pointer"}}))}))),d.createElement(w.Z,null,d.createElement(S.Z,{expandIcon:d.createElement(D.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},d.createElement(W.Z,null,"История")),d.createElement(C.Z,null,d.createElement(R.Z,{component:"nav"},this.state.events_hist.map((function(e,t){return d.createElement(I.Z,{key:t},d.createElement(N.Z,{primary:e.title}))}))))))),d.createElement(O.Z,null,d.createElement(Z.Z,{onClick:this.save.bind(this),color:"primary"},"Сохранить"))),d.createElement(f.Z,{container:!0,spacing:3},d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(z.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(z.$S,{classes:this.state.classes,data:this.state.mounths,value:this.state.mounth,func:this.changeMounth.bind(this),label:"Месяц"})),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(z.$S,{classes:this.state.classes,data:this.state.years,value:this.state.year,func:this.changeYear.bind(this),label:"Год"})),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(Z.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),d.createElement(f.Z,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20}},this.state.calendar.map((function(t,n){return d.createElement(f.Z,{item:!0,xs:12,sm:4,key:n,style:{padding:20}},d.createElement("h1",{style:{textAlign:"center"}},t[0][0].mounth),d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table",style:{overflow:"hidden"}},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Пн"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Вт"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Ср"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Чт"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Пт"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Сб"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Вс"))),d.createElement(y.Z,null,t.map((function(t,n){return d.createElement(x.Z,{key:n},t.map((function(t,n){return d.createElement(v.Z,{key:n,onClick:e.chooseDay.bind(e,t),style:{color:t.dir?"yellow":t.holy?"#c03":"#000"},className:t.event?e.state.classes.customCel:e.state.classes.tableCel}," ",t.day," ")})))}))))))})))))}}]),q}(d.Component);function $(){var e=L(),t=(0,E.k6)();return d.createElement(Y,{classes:e,history:t})}},7227:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Home:()=>b});var a=n(5861),r=n(5671),s=n(3144),l=n(7326),i=n(136),o=n(2963),c=n(1120),u=n(4942),m=n(7757),h=n.n(m),d=n(7294),p=n(9760),f=n(1749),Z=n(2692),E=n(5477);var g=n(7563),y=(0,p.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),v=function(e){(0,i.Z)(y,e);var t,n,m,p=(n=y,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(m){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function y(e){var t;return(0,r.Z)(this,y),t=p.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:g.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){return setTimeout((function(){t.setState({is_load:!1})}),300),e})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,module:"home",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,s.Z)(y,[{key:"componentDidMount",value:(t=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return d.createElement(d.Fragment,null,d.createElement(Z.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(E.Z,{color:"inherit"})),d.createElement(f.Z,{container:!0,spacing:3},d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),d.createElement(f.Z,{item:!0,xs:12,sm:12,style:{height:"100vh"}})))}}]),y}(d.Component);function b(){var e=y();return d.createElement(v,{classes:e})}},9347:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LiveOrders:()=>I});var a=n(5861),r=n(5671),s=n(3144),l=n(7326),i=n(136),o=n(2963),c=n(1120),u=n(4942),m=n(7757),h=n.n(m),d=n(7294),p=n(9760),f=n(1749),Z=n(282),E=n(5977),g=n(2302),y=n(9613),v=n(8222),b=n(6847),_=n(3750),x=n(7394),k=n(9895),w=n(2692),S=n(5477),C=n(6406);var D=n(7563),T=(0,p.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)}}})),R=function(e){(0,i.Z)(T,e);var t,n,m,p,E=(m=T,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(m);if(p){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function T(e){var t;return(0,r.Z)(this,T),t=E.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"live_orders",module_name:"",is_load:!1,points:[],point:"0",showReady:!1,read:[],onstol:[],ordersQueue:[]},t}return(0,s.Z)(T,[{key:"componentDidMount",value:(n=(0,a.Z)(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({points:t.point_list,point:t.point_list[0].id,module_name:t.module_info.name}),document.title=t.module_info.name,setTimeout((function(){n.updateData()}),100);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({point:n}),setTimeout((function(){t.updateData()}),50)}},{key:"changeCheckOrders",value:function(e){var t=e.target.checked;this.setState({showReady:t})}},{key:"updateData",value:(t=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return d.createElement(d.Fragment,null,d.createElement(w.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(S.Z,{color:"inherit"})),d.createElement(f.Z,{container:!0,spacing:3},d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),this.state.points.length>0?d.createElement(d.Fragment,null,d.createElement(f.Z,{item:!0,xs:6,sm:6},d.createElement(C.$S,{classes:this.state.classes,data:this.state.points,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),d.createElement(f.Z,{item:!0,xs:6,sm:6},d.createElement(Z.Z,{variant:"contained",onClick:this.updateData.bind(this)},"Обновить данные")),d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(C.IA,{classes:this.state.classes,value:this.state.showReady,func:this.changeCheckOrders.bind(this),label:"Показывать готовые"}))):null,d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,null,"#"),d.createElement(v.Z,null,"Тип"),d.createElement(v.Z,null,"Время заказа"),d.createElement(v.Z,null,"Время предзакза"),d.createElement(v.Z,null,"Время выхода на стол"),d.createElement(v.Z,null,"Во сколько собрали"),d.createElement(v.Z,null,"Закрыли"),d.createElement(v.Z,null,"Приготовили"),d.createElement(v.Z,null,"Отдали"),d.createElement(v.Z,null,"Обещали"),d.createElement(v.Z,null,"Статус"),d.createElement(v.Z,null,"Стол"))),d.createElement(y.Z,null,this.state.read.map((function(e,t){return d.createElement(x.Z,{key:t},d.createElement(v.Z,null,e.id),d.createElement(v.Z,null,e.type_order),d.createElement(v.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),d.createElement(v.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),d.createElement(v.Z,null,e.unix_start_stol_or),d.createElement(v.Z,null,e.give_data_time_),d.createElement(v.Z,null,e.close_date_time_order),d.createElement(v.Z,{style:{backgroundColor:1==parseInt(e.type_)?"":e.color}},e.time_),d.createElement(v.Z,{style:{backgroundColor:1!=parseInt(e.type_)?"":e.color}},e.test_time),d.createElement(v.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),d.createElement(v.Z,null,e.status),d.createElement(v.Z,null,e.stol_sborki))})),this.state.onstol.map((function(e,t){return d.createElement(x.Z,{key:t,style:{backgroundColor:"yellow"}},d.createElement(v.Z,null,e.id),d.createElement(v.Z,null,e.type_order),d.createElement(v.Z,null,1==parseInt(e.preorder)?"":e.date_time_order),d.createElement(v.Z,null,1==parseInt(e.preorder)?e.date_time_preorder_:""),d.createElement(v.Z,null,e.unix_start_stol_or),d.createElement(v.Z,null),d.createElement(v.Z,null),d.createElement(v.Z,null),d.createElement(v.Z,null),d.createElement(v.Z,null,0==parseInt(e.preorder)?e.unix_time_to_client:""),d.createElement(v.Z,null,e.status),d.createElement(v.Z,null,e.stol_sborki))}))))),d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,null,"#"),d.createElement(v.Z,null,"Пред"),d.createElement(v.Z,null,"Время оформления"),d.createElement(v.Z,null,"Время выхода на стол"),d.createElement(v.Z,null,"Время закрытия"),d.createElement(v.Z,null,"Обещали"))),d.createElement(y.Z,null,this.state.ordersQueue.map((function(e,t){return d.createElement(x.Z,{key:t},d.createElement(v.Z,null,e.id),d.createElement(v.Z,null,1==parseInt(e.is_preorder)?e.date_time_preorder:""),d.createElement(v.Z,null,0==parseInt(e.is_preorder)?e.date_time_order:""),d.createElement(v.Z,null,e.time_start_order),d.createElement(v.Z,null,e.time_end_order),d.createElement(v.Z,null,0==parseInt(e.is_preorder)?e.unix_time_to_client:""))}))))))))}}]),T}(d.Component);function I(){var e=T(),t=(0,E.k6)();return d.createElement(R,{classes:e,history:t})}},7307:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RasByBill:()=>H});var a=n(5861),r=n(5671),s=n(3144),l=n(7326),i=n(136),o=n(2963),c=n(1120),u=n(4942),m=n(7757),h=n.n(m),d=n(7294),p=n(9760),f=n(1749),Z=n(282),E=n(5977),g=n(2302),y=n(9613),v=n(8222),b=n(6847),_=n(3750),x=n(7394),k=n(9895),w=n(2663),S=n(6856),C=n(9525),D=n(7212),T=n(6083),R=n(2692),I=n(5477),N=n(6406);var P=n(7563),O=(0,p.Z)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)},tableCel:{textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},tableCelHead:{textAlign:"center",padding:15},customCel:{backgroundColor:"#bababa",textAlign:"center",borderRight:"1px solid #e5e5e5",padding:15,cursor:"pointer","&:hover":{backgroundColor:"#e5e5e5"}},timePicker:{width:"100%"}}}));function B(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}var j=function(e){(0,i.Z)(j,e);var t,n,m,p,E,O=(p=j,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(E){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function j(e){var t;return(0,r.Z)(this,j),t=O.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:P.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"ras_by_bill",module_name:"",is_load:!1,modalDialog:!1,points:[],point:[],date_start:B(new Date),date_end:B(new Date),rangeDate:[B(new Date),B(new Date)],items:[],cats:[],myItems:[],calendar:[]},t}return(0,s.Z)(j,[{key:"componentDidMount",value:(m=(0,a.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({module_name:t.module_info.name,points:t.points,items:t.items,cats:t.cats}),document.title=t.module_info.name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=e.target.value;this.setState({point:t})}},{key:"changeTimeStart",value:function(e){this.setState({date_start:B(e)})}},{key:"changeTimeEnd",value:function(e){this.setState({date_end:B(e)})}},{key:"changeItems",value:function(e,t){this.setState({myItems:t})}},{key:"getItems",value:(n=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={points:this.state.point,items:this.state.myItems,start_date:this.state.rangeDate[0],end_date:this.state.rangeDate[1]},console.log(t),e.next=4,this.getData("get_this_rev",t);case 4:n=e.sent,console.log(n),this.setState({resItems:{items_ras:n.items_ras,pf_ras:n.pf_ras,rec_ras:n.rec_ras}});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getCats",value:(t=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"changeDateRange",value:function(e){var t=e[0]?B(e[0]):"",n=e[1]?B(e[1]):"";this.setState({rangeDate:[t,n]})}},{key:"render",value:function(){var e=this;return d.createElement(d.Fragment,null,d.createElement(R.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(I.Z,{color:"inherit"})),d.createElement(w.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.createElement(T.Z,{id:"alert-dialog-title"},"  "),d.createElement(C.Z,null,d.createElement(D.Z,{id:"alert-dialog-description"})),d.createElement(S.Z,null,d.createElement(Z.Z,{onClick:function(){},color:"primary"},"Сохранить"))),d.createElement(f.Z,{container:!0,spacing:3},d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement("h1",null,this.state.module_name)),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(N.$S,{classes:this.state.classes,data:this.state.points,multiple:!0,value:this.state.point,func:this.changePoint.bind(this),label:"Точка"})),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(N.lp,{startText:"Дата от",endText:"Дата до",value:this.state.rangeDate,func:this.changeDateRange.bind(this)})),d.createElement(f.Z,{item:!0,xs:12,sm:12},d.createElement(N.e_,{classes:this.state.classes,data:this.state.items,multiple:!0,value:this.state.myItems,func:this.changeItems.bind(this),label:"Заготовки"})),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(Z.Z,{variant:"contained",onClick:this.getItems.bind(this)},"Показать заготовки")),d.createElement(f.Z,{item:!0,xs:12,sm:3},d.createElement(Z.Z,{variant:"contained",onClick:this.getCats.bind(this)},"Показать категории")),this.state.resItems&&this.state.resItems.items_ras?d.createElement(d.Fragment,null,d.createElement(f.Z,{item:!0,xs:12},d.createElement("h1",null,"Куплено по наклданым"),d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,null,"Наименование товара"),d.createElement(v.Z,null,"Объем товра"),d.createElement(v.Z,null,"Объем заготовки"),d.createElement(v.Z,null,"Сумма"),d.createElement(v.Z,null,"Кол-во наклданых"))),d.createElement(y.Z,null,this.state.resItems.items_ras.map((function(e,t){return d.createElement(x.Z,{key:t},d.createElement(v.Z,null," ",e.name," "),d.createElement(v.Z,null," ",e.count_item+" "+e.ei_name," "),d.createElement(v.Z,null," ",e.count_pf+" "+e.ei_name_pf," "),d.createElement(v.Z,null," ",e.sum," "),d.createElement(v.Z,null," ",e.count_bill," "))})))))),d.createElement(f.Z,{item:!0,xs:12},d.createElement("h1",null,"Расход заготовок (включая рецепты)"),d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,null,"Наименование заготовки"),d.createElement(v.Z,null,"Объем заготовок"),d.createElement(v.Z,null,"Кол-во роллов"),d.createElement(v.Z,null,"Сумма роллов (примерно)"))),d.createElement(y.Z,null,this.state.resItems.pf_ras.map((function(e,t){return d.createElement(x.Z,{key:t},d.createElement(v.Z,null," ",e.pf_name," "),d.createElement(v.Z,null," ",e.count_pf+" "+e.ei_name," "),d.createElement(v.Z,null," ",e.count_rolls," "),d.createElement(v.Z,null," ",e.price_rolls," "))})))))),d.createElement(f.Z,{item:!0,xs:12},d.createElement("h1",null,"Расход рецептов"),d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table"},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,null,"Наименование заготовки"),d.createElement(v.Z,null,"Объем заготовок"),d.createElement(v.Z,null,"Кол-во роллов"))),d.createElement(y.Z,null,this.state.resItems.rec_ras.map((function(e,t){return d.createElement(x.Z,{key:t},d.createElement(v.Z,null," ",e.pf_name," "),d.createElement(v.Z,null," ",e.count_pf+" "+e.ei_name," "),d.createElement(v.Z,null," ",e.count_rolls," "))}))))))):null,d.createElement(f.Z,{container:!0,direction:"row",justifyContent:"center",style:{paddingTop:20}},this.state.calendar.map((function(t,n){return d.createElement(f.Z,{item:!0,xs:12,sm:4,key:n,style:{padding:20}},d.createElement("h1",{style:{textAlign:"center"}},t[0][0].mounth),d.createElement(b.Z,{component:k.Z},d.createElement(g.Z,{"aria-label":"a dense table",style:{overflow:"hidden"}},d.createElement(_.Z,null,d.createElement(x.Z,null,d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Пн"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Вт"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Ср"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Чт"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Пт"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Сб"),d.createElement(v.Z,{className:e.state.classes.tableCelHead},"Вс"))),d.createElement(y.Z,null,t.map((function(t,n){return d.createElement(x.Z,{key:n},t.map((function(t,n){return d.createElement(v.Z,{key:n,onClick:e.chooseDay.bind(e,t),style:{color:t.dir?"yellow":t.holy?"#c03":"#000"},className:t.event?e.state.classes.customCel:e.state.classes.tableCel}," ",t.day," ")})))}))))))})))))}}]),j}(d.Component);function H(){var e=O(),t=(0,E.k6)();return d.createElement(j,{classes:e,history:t})}},9546:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Reg:()=>P});var a=n(5861),r=n(5671),s=n(3144),l=n(7326),i=n(136),o=n(2963),c=n(1120),u=n(4942),m=n(7757),h=n.n(m),d=n(7294),p=n(5977),f=n(3901),Z=n(282),E=n(8286),g=n(1749),y=n(9760),v=n(7661),b=n(1594),_=n(7257),x=n(2663),k=n(6856),w=n(9525),S=n(7212),C=n(6083),D=n(2692),T=n(5477);var R=n(7563),I=(0,y.Z)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{borderRadius:0,width:"100%",height:150,margin:0,backgroundColor:"#fff"},avatar2:{borderRadius:0,width:"100%",height:130,margin:0,backgroundColor:"#fff"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},textLink:{color:"#c03"}}})),N=function(e){(0,i.Z)(N,e);var t,n,m,p,y,I=(p=N,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(y){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,o.Z)(this,e)});function N(e){var t;return(0,r.Z)(this,N),t=I.call(this,e),(0,u.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({is_load:!0}),fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:R.stringify({method:e,module:t.state.module,version:2,login:"+79879340391",data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({is_load:!1})}),300),e;t.state.history.push("/auth")}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"auth",module_name:"",is_load:!1,modalDialog:!1,dialogTitle:"",dialogText:"",activeStep:0,steps:["Телефон","Подтверждение","Новый пароль"],phone:"",code:"",pwd:""},t}return(0,s.Z)(N,[{key:"componentDidMount",value:(m=(0,a.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)})},{key:"updateData",value:(n=(0,a.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.point,showReady:!0===this.state.showReady?1:0},e.next=3,this.getData("get_orders",t);case 3:n=e.sent,this.setState({read:n.read,onstol:n.onstol,ordersQueue:n.prestol_new});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"nextStep",value:(t=(0,a.Z)(h().mark((function e(){var t,n,a,r,s,l,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.state.activeStep){e.next=8;break}return t={login:document.getElementById("phone").value},e.next=4,this.getData("check_phone",t);case 4:!1===(n=e.sent).st?setTimeout((function(){i.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:n.text})}),500):this.setState({activeStep:this.state.activeStep+1,phone:t.login}),e.next=22;break;case 8:if(1!=this.state.activeStep){e.next=16;break}return a={login:this.state.phone,code:document.getElementById("code").value},e.next=12,this.getData("check_code",a);case 12:!1===(r=e.sent).st?setTimeout((function(){i.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:r.text})}),500):this.setState({activeStep:this.state.activeStep+1,code:a.code}),e.next=22;break;case 16:if(2!=this.state.activeStep){e.next=22;break}return s={login:this.state.phone,code:this.state.code,pwd:document.getElementById("password").value},e.next=20,this.getData("save_new_pwd",s);case 20:!1===(l=e.sent).st?setTimeout((function(){i.setState({modalDialog:!0,dialogTitle:"Предупреждение",dialogText:l.text})}),500):(localStorage.setItem("token",l.token),setTimeout((function(){window.location.pathname="/"}),300));case 22:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"enterNextStep",value:function(e){13==e.charCode&&this.nextStep()}},{key:"render",value:function(){var e=this;return d.createElement(d.Fragment,null,d.createElement(D.Z,{className:this.state.classes.backdrop,open:this.state.is_load},d.createElement(T.Z,{color:"inherit"})),d.createElement(x.Z,{open:this.state.modalDialog,onClose:function(){e.setState({modalDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},d.createElement(C.Z,{id:"alert-dialog-title"},this.state.dialogTitle),d.createElement(w.Z,null,d.createElement(S.Z,{id:"alert-dialog-description"},this.state.dialogText)),d.createElement(k.Z,null,d.createElement(Z.Z,{onClick:function(){e.setState({modalDialog:!1})},color:"primary",autoFocus:!0},"Хорошо"))),d.createElement(g.Z,{container:!0,spacing:3,direction:"row",justifyContent:"center",alignItems:"center"},d.createElement(g.Z,{item:!0,xs:12,sm:6,md:6,lg:4,xl:3},d.createElement("div",{className:this.state.classes.paper},d.createElement(f.Z,{className:this.state.classes.avatar},d.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/img_other/Favikon.png",style:{height:"100%"}})),d.createElement(v.Z,{activeStep:this.state.activeStep,alternativeLabel:!0,style:{width:"100%"}},this.state.steps.map((function(e){return d.createElement(b.Z,{key:e},d.createElement(_.Z,null,e))}))),d.createElement("div",{className:this.state.classes.form,style:{width:"100%"}},0==this.state.activeStep?d.createElement(E.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"phone",label:"Номер телефона",name:"phone",autoComplete:"phone",autoFocus:!0,onKeyPress:this.enterNextStep.bind(this)}):null,1==this.state.activeStep?d.createElement(E.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,id:"code",label:"Код из смс",name:"code",autoComplete:"code",autoFocus:!0,onKeyPress:this.enterNextStep.bind(this)}):null,2==this.state.activeStep?d.createElement(E.Z,{variant:"outlined",margin:"normal",size:"small",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:"password",id:"password",autoComplete:"current-password",onKeyPress:this.enterNextStep.bind(this)}):null,d.createElement(Z.Z,{fullWidth:!0,variant:"contained",color:"primary",className:this.state.classes.submit,onClick:this.nextStep.bind(this)},"Дальше"),d.createElement(g.Z,{container:!0},d.createElement(g.Z,{item:!0,xs:!0},d.createElement("a",{href:"/auth",className:this.state.classes.textLink},"Вернуться к авторизации"))))))))}}]),N}(d.Component);function P(){var e=I(),t=(0,p.k6)();return d.createElement(N,{classes:e,history:t})}},5798:(e,t,n)=>{"use strict";var a=n(7294),r=n(3935),s=n(3727),l=n(7462),i=n(5861),o=n(5671),c=n(3144),u=n(7326),m=n(136),h=n(2963),d=n(1120),p=n(4942),f=n(7757),Z=n.n(f),E=n(6010),g=n(9760),y=n(5834),v=n(5258),b=n(8358),_=n(2822),x=n(2318),k=n(5517),w=n(7812),S=n(9009),C=n(3832),D=n(1749),T=n(8884),R=n(9875),I=n(8825),N=n(998),P=n(5757),O=n(8135),B=n(743),j=n(1201),H=n(4566),F=n(2920),A=n(3457),z=n(5977),W=n(8286),M=n(5007),L=n(1127),Y=n(5152),$=n.n(Y);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=n(7563),K=(0,F.Z)({palette:{primary:{main:"#c03"},def:{main:"#353b48",secondary:"#fff"}}}),G=(0,g.Z)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:J({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:(0,p.Z)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4),width:"100%"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}})),V=function(e){(0,m.Z)(g,e);var t,n,r,f=(n=g,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(n);if(r){var a=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,h.Z)(this,e)});function g(e){var t;return(0,o.Z)(this,g),t=f.call(this,e),(0,p.Z)((0,u.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("https://jacochef.ru/api/index_new.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Q.stringify({method:e,module:t.state.module,version:2,login:localStorage.getItem("token"),data:JSON.stringify(n)})}).then((function(e){return e.json()})).then((function(e){if(console.log(e),!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return e;window.location.pathname="/auth"}else t.state.history.push("/")})).catch((function(e){console.log(e)}))})),t.state={classes:t.props.classes,history:t.props.history,module:"header",open:!1,menu:[],full_menu:[],left:!1},t}return(0,c.Z)(g,[{key:"componentDidMount",value:(t=(0,i.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData("get_all");case 2:t=e.sent,this.setState({menu:t.info.left_menu,full_menu:t.info.full_menu});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"handleDrawerOpen",value:function(){this.setState({open:!0})}},{key:"handleDrawerClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,a.createElement(v.Z,{className:(0,E.Z)(this.state.classes.appBar,this.state.open&&this.state.classes.appBarShift)},a.createElement(b.Z,{className:this.state.classes.toolbar},a.createElement(w.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen.bind(this),className:(0,E.Z)(this.state.classes.menuButton,this.state.open&&this.state.classes.menuButtonHidden)},a.createElement(T.Z,null)),a.createElement(x.Z,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:this.state.classes.title},"Dashboard"),a.createElement(w.Z,{color:"inherit"},a.createElement(S.Z,{badgeContent:4,color:"secondary"},a.createElement(I.Z,null))))),a.createElement(a.Fragment,null,a.createElement(L.Z,{anchor:"left",open:this.state.open,onClose:function(){e.setState({open:!1})},onOpen:function(){e.setState({open:!0})}},a.createElement("div",{className:this.state.classes.toolbarIcon},a.createElement(M.ZP,{size:"small",options:this.state.full_menu,getOptionLabel:function(e){return e.name},onChange:function(t,n){n&&e.state.history.push("/"+n.key_query+"/")},style:{width:300},renderInput:function(e){return a.createElement(W.Z,(0,l.Z)({},e,{label:"Поиск",variant:"outlined"}))}}),a.createElement(w.Z,{onClick:this.handleDrawerClose.bind(this)},a.createElement(R.Z,null))),a.createElement(k.Z,null),this.state.menu.map((function(t,n){return a.createElement(O.Z,{key:n},a.createElement(B.Z,{expandIcon:a.createElement(H.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},a.createElement(x.Z,{className:e.state.classes.heading},t.parent.name)),a.createElement(j.Z,null,a.createElement(_.Z,{style:{width:"100%"}},t.chaild.map((function(e,t){return a.createElement(N.Z,{button:!0,key:t},a.createElement(s.OL,{to:"/"+e.key_query+"/"},a.createElement(P.Z,{primary:e.name})))})))))})))))}}]),g}(a.Component);function X(e){var t=e.code,n=e.children;return a.createElement(z.AW,{render:function(e){var a=e.staticContext;return a&&(a.status=t),n}})}function U(){var e=G(),t=(0,z.k6)();console.log("history",t.location.pathname);var n=!0;return"/auth/"!=t.location.pathname&&"/auth"!=t.location.pathname&&"/registration/"!=t.location.pathname&&"/registration"!=t.location.pathname||(n=!1),a.createElement(A.Z,{theme:K},a.createElement("div",{className:e.root},n?a.createElement(a.Fragment,null,a.createElement(y.ZP,null),a.createElement(V,{classes:e,history:t})):null,a.createElement("main",{className:e.content},a.createElement("div",{className:e.appBarSpacer}),a.createElement(C.Z,{maxWidth:!1,className:e.container},a.createElement(z.rs,null,$().map((function(e,t){return a.createElement(z.AW,{key:t,path:e.path,exact:e.exact,component:e.component})})),a.createElement(z.AW,{component:function(){return a.createElement(X,{code:404},a.createElement(D.Z,{container:!0,className:"Contact mainContainer MuiGrid-spacing-xs-3",style:{marginTop:64}},a.createElement(D.Z,{item:!0,xs:12},a.createElement(x.Z,{variant:"h5",component:"h1"},"404 Страница не найдена"))))}}))))))}r.render(a.createElement(s.VK,null,a.createElement(U,null)),document.getElementById("app"))},6406:(e,t,n)=>{"use strict";n.d(t,{lp:()=>w,e_:()=>S,$S:()=>C,w0:()=>D,IA:()=>T});var a=n(7462),r=n(5671),s=n(3144),l=n(136),i=n(2963),o=n(1120),c=n(7294),u=n(3700),m=n(5639),h=n(4436),d=n(3200),p=n(8286),f=n(6562),Z=n(553),E=n(6653),g=n(1122),y=n(6447),v=(n(1749),n(8523)),b=(n(5365),n(7827),n(2662),n(3076)),_=n(402),x=n(5344);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,o.Z)(e);if(t){var r=(0,o.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}var w=function(e){(0,l.Z)(n,e);var t=k(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(x.Z,{dateAdapter:_.Z,locale:v.Z},c.createElement(b.Z,{startText:this.props.startText,endText:this.props.endText,value:this.props.value,inputFormat:"yyyy-MM-dd",onChange:this.props.func,renderInput:function(e,t){return c.createElement(c.Fragment,null,c.createElement(p.Z,(0,a.Z)({style:{width:"100%"}},e)),c.createElement(p.Z,(0,a.Z)({style:{width:"100%"}},t)))}}))}}]),n}(c.PureComponent),S=function(e){(0,l.Z)(n,e);var t=k(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){var e=this;return c.createElement(y.Z,{spacing:3},c.createElement(g.Z,{multiple:!0,id:"tags-outlined",options:this.props.data,getOptionLabel:function(e){return e.name},value:this.props.value,onChange:this.props.func,filterSelectedOptions:!0,renderInput:function(t){return c.createElement(p.Z,(0,a.Z)({},t,{label:e.props.label,placeholder:e.props.placeholder}))}}))}}]),n}(c.PureComponent),C=function(e){(0,l.Z)(n,e);var t=k(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(h.Z,{size:"small",variant:"outlined",className:this.state.classes.formControl},c.createElement(u.Z,{id:"demo-simple-select-outlined-label"},this.props.label),c.createElement(d.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:this.props.value,onChange:this.props.func,label:this.props.label,size:"small",multiple:!(!this.props.multiple||!0!==this.props.multiple)},c.createElement(m.Z,{value:""},c.createElement("em",null,"None")),this.props.data.map((function(e,t){return c.createElement(m.Z,{key:t,value:e.id},e.name)}))))}}]),n}(c.PureComponent),D=function(e){(0,l.Z)(n,e);var t=k(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(p.Z,{variant:"outlined",size:"small",color:"primary",label:this.props.label,type:"time",value:this.props.value,className:this.state.classes.timePicker,onChange:this.props.func,InputLabelProps:{shrink:!0},inputProps:{step:300}})}}]),n}(c.PureComponent),T=(c.PureComponent,function(e){(0,l.Z)(n,e);var t=k(n);function n(e){var a;return(0,r.Z)(this,n),(a=t.call(this,e)).state={classes:a.props.classes},a}return(0,s.Z)(n,[{key:"render",value:function(){return c.createElement(f.Z,{row:!0},c.createElement(Z.Z,{control:c.createElement(E.Z,{checked:this.props.value,onChange:this.props.func,color:"primary"}),label:this.props.label}))}}]),n}(c.PureComponent))}},e=>{e.O(0,[216],(()=>(5798,e(e.s=5798)))),e.O()}]);
//# sourceMappingURL=main.b9bb55eb622993935d65.js.map