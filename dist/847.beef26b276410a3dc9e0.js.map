{"version":3,"file":"847.beef26b276410a3dc9e0.js","mappings":"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","sources":["webpack://package.json/./src/components/app_work_show/app_work_show.component.jsx","webpack://package.json/./src/components/app_work_show/app_work_show.style.scss"],"sourcesContent":["import React from 'react';\nimport Grid from '@mui/material/Grid';\n\nimport Backdrop from '@mui/material/Backdrop';\nimport CircularProgress from '@mui/material/CircularProgress';\n\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\n\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport Paper from '@mui/material/Paper';\n\nimport PropTypes from 'prop-types';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Box from '@mui/material/Box';\n\nimport Typography from '@mui/material/Typography';\n\nimport { MySelect } from '../../stores/elements';\n\nconst queryString = require('query-string');\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>{children}</Box>\n      )}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nclass AppWorkShow_ extends React.Component {\n  constructor(props) {\n    super(props);\n        \n    this.state = {\n      module: 'app_work_show',\n      module_name: '',\n      is_load: false,\n      \n      items: [],\n      items_min: [],\n      showItems: [],\n      modalDialog: false,\n      modalDialogNew: false,\n\n      activeTab: 0,\n\n      dows: [\n        {id: 1, name: 'Понедельник'},\n        {id: 2, name: 'Вторник'},\n        {id: 3, name: 'Среда'},\n        {id: 4, name: 'Четверг'},\n        {id: 5, name: 'Пятница'},\n        {id: 6, name: 'Суббота'},\n        {id: 7, name: 'Воскресенье'},\n\n        {id: 10, name: 'Другое'},\n\t      {id: 11, name: 'Каждый день'},\n\t      {id: 12, name: 'Каждый день в конце смены'},\n        {id: 13, name: 'Ручное добавление'},\n        {id: 14, name: 'После выполнение уборки'},\n      ],\n      types: [\n        {id: 0, name: 'Другое'},\n        {id: 1, name: 'Только 1 активная'},\n        {id: 2, name: 'Добавление без ограничений'},\n      ],\n\n      itemsEdit: null,\n      nameWork: '',\n\n      itemsNew: null,\n      chengeItem1: null,\n      chengeItemNew1: null,\n\n      points: [],\n      point_id: ''\n    };\n  }\n  \n  async componentDidMount(){\n    let points = await this.getData('get_points');\n    \n    this.setState({\n      points: points,\n      point_id: points[0]['id']\n    })\n\n    setTimeout( () => {\n      this.getWorks();\n    }, 300 )\n  }\n  \n  getData = (method, data = {}) => {\n    \n    this.setState({\n      is_load: true\n    })\n    \n    return fetch('https://jacochef.ru/api/index_new.php', {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify({\n        method: method, \n        module: this.state.module,\n        version: 2,\n        login: localStorage.getItem('token'),\n        data: JSON.stringify( data )\n      })\n    }).then(res => res.json()).then(json => {\n      \n      if( json.st === false && json.type == 'redir' ){\n        window.location.pathname = '/';\n        return;\n      }\n      \n      if( json.st === false && json.type == 'auth' ){\n        window.location.pathname = '/auth';\n        return;\n      }\n      \n      setTimeout( () => {\n        this.setState({\n          is_load: false\n        })\n      }, 300 )\n      \n      return json;\n    })\n    .catch(err => { \n      console.log( err )\n      this.setState({\n        is_load: false\n      })\n    });\n  }\n   \n  async getWorks(){\n    let data = {\n      point_id: this.state.point_id\n    };\n\n    let res = await this.getData('get_all', data);\n\n    res.items.map( (item, key) => {\n      res.items[key]['dow_name'] = this.state.dows.find( (it) => parseInt(it.id) == parseInt(item.dow) )['name'];\n    } )\n\n    let activeTab = parseInt(this.state.activeTab);\n\n    if( activeTab == 0 ){\n      activeTab = 5;\n    }\n    if( activeTab == 1 ){\n      activeTab = 6;\n    }\n    if( activeTab == 2 ){\n      activeTab = 21;\n    }\n\n    this.setState({\n      module_name: res.module_info.name,\n      items: res.items,\n      showItems: res.items.filter( (item) => parseInt(item.app_id) == parseInt(activeTab) ),\n      items_min: res.items_min\n    })\n\n    document.title = res.module_info.name;\n  }\n\n  async openWork(id){\n    let data = {\n      id: id,\n      point_id: this.state.point_id\n    };\n\n    let res = await this.getData('get_one', data);\n\n    console.log( res )\n\n    this.setState({\n      itemsEdit: res,\n      modalDialog: true,\n    })\n  }\n\n  changeTab(event, val){\n    let activeTab = parseInt(val);\n\n    if( val == 0 ){\n      activeTab = 5;\n    }\n    if( val == 1 ){\n      activeTab = 6;\n    }\n    if( val == 2 ){\n      activeTab = 21;\n    }\n\n    this.setState({\n      activeTab: val,\n      showItems: this.state.items.filter( (item) => parseInt(item.app_id) == parseInt(activeTab) )\n    })\n  }\n\n  render(){\n    return (\n      <>\n        <Backdrop style={{ zIndex: 99 }} open={this.state.is_load}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        \n        \n\n        <Grid container spacing={3}>\n          <Grid item xs={12} sm={12}>\n            <h1>{this.state.module_name}</h1>\n          </Grid>\n\n          <Grid item xs={12} sm={3}>\n            <MySelect data={this.state.points} value={this.state.point_id} func={ (event) => { this.setState({ point_id: event.target.value }) } } label='Точка' />\n          </Grid>\n\n          { !this.state.itemsEdit ? null :\n            <Dialog\n              open={this.state.modalDialog}\n              maxWidth={'md'}\n              onClose={ () => { this.setState({ modalDialog: false, itemsEdit: null, nameWork: '' }) } }\n            >\n              <DialogTitle>Уборка \"{this.state.itemsEdit.item.name}\"</DialogTitle>\n              <DialogContent>\n                \n                <Grid container spacing={0}>\n\n                  <Grid item xs={12}>\n                    <Typography>{this.state.itemsEdit.item.cat_name}</Typography>\n                  </Grid>\n\n                  { this.state.itemsEdit.item.show_time == false ? null :\n                    <Grid item xs={12}>\n                      <Typography>Время за уборку: {this.state.itemsEdit.item.time_min} мин.</Typography>\n                    </Grid>\n                  }\n\n                  <Grid item xs={12}>\n                    <Typography>Описание процесса уборки: </Typography>\n                  </Grid>\n\n                  <Grid item xs={12}>\n                    <Typography dangerouslySetInnerHTML={{__html: this.state.itemsEdit.item.text_work}}></Typography>\n                  </Grid>\n                  \n                </Grid>\n\n              </DialogContent>\n            </Dialog>\n          }\n\n          <Grid item xs={12} sm={12}>\n            <Paper>\n              <Tabs value={this.state.activeTab} onChange={ this.changeTab.bind(this) }>\n                <Tab label=\"Повар\" {...a11yProps(0)} />\n                <Tab label=\"Кассир\" {...a11yProps(1)} />\n                <Tab label=\"Кухонный работник\" {...a11yProps(2)} />\n              </Tabs>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} sm={12}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Работа</TableCell>\n                  <TableCell>День недели</TableCell>\n                  <TableCell>Время открытия</TableCell>\n                  <TableCell>Время автоматического удаления</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                \n                { this.state.showItems.map( (item, key) =>\n                  <TableRow key={key}>\n                    <TableCell onClick={ this.openWork.bind(this, item.id) } style={{ color: '#c03', cursor: 'pointer', fontWeight: 'bold' }}>{item.work_name}</TableCell>\n                    <TableCell>{item.dow_name} {item.need_work_name}</TableCell>\n                    <TableCell>{item.times_open}</TableCell>\n                    <TableCell>{item.times_close}</TableCell>\n                  </TableRow>\n                ) }\n              \n              </TableBody>\n            \n            </Table>\n          </Grid>\n        \n        </Grid>\n      </>\n    )\n  }\n}\n\nexport function AppWorkShow() {\n  return (\n    <AppWorkShow_ />\n  );\n}","// extracted by mini-css-extract-plugin\nexport {};\n    if(module.hot) {\n      // 1668178893220\n      var cssReload = require(\"../../../node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"names":["queryString","require","a11yProps","index","id","PropTypes","AppWorkShow_","props","method","data","setState","is_load","fetch","headers","body","stringify","module","state","version","login","localStorage","getItem","JSON","then","res","json","st","type","setTimeout","window","location","pathname","err","console","log","module_name","items","items_min","showItems","modalDialog","modalDialogNew","activeTab","dows","name","types","itemsEdit","nameWork","itemsNew","chengeItem1","chengeItemNew1","points","point_id","this","getData","getWorks","map","item","key","find","it","parseInt","dow","module_info","filter","app_id","document","title","event","val","Backdrop","style","zIndex","open","CircularProgress","color","Grid","container","spacing","xs","sm","value","func","target","label","Dialog","maxWidth","onClose","DialogTitle","DialogContent","Typography","cat_name","show_time","time_min","dangerouslySetInnerHTML","__html","text_work","Paper","Tabs","onChange","changeTab","bind","Tab","Table","TableHead","TableRow","TableCell","TableBody","onClick","openWork","cursor","fontWeight","work_name","dow_name","need_work_name","times_open","times_close","React","AppWorkShow","cssReload","hot","dispose","accept","undefined"],"sourceRoot":""}